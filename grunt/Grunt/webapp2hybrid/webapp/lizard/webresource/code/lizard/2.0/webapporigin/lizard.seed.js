/**
* Ctrip JavaScript Code
* http://m.ctrip.com/
* Copyright(C) 2008 - 2014, Ctrip All rights reserved.
* Date:2014-08-27
*/
function __bridge_callback(a){a=decodeURIComponent(a);var b=JSON.parse(a);if(null!=b){if(null!=b.param&&b.param.hasOwnProperty("platform")){var c=navigator.userAgent;c.indexOf("Youth_CtripWireless")>0&&(Internal.isYouthApp=!0),platform=b.param.platform;var d=typeof platform;"number"==d?(1==platform||2==platform||3==platform)&&(Internal.isIOS=1==platform,Internal.isAndroid=2==platform,Internal.isWinOS=3==platform):"string"==d&&("1"==platform||"2"==platform||"3"==platform)&&(Internal.isIOS="1"==platform,Internal.isAndroid="2"==platform,Internal.isWinOS="3"==platform),Internal.isInApp=!0,Internal.appVersion=b.param.version,Internal.osVersion=b.param.osVersion}return val=window.app.callback(b)}return-1}function __writeLocalStorage(a,b){Internal.isNotEmptyString(a)&&localStorage.setItem(a,b)}var requirejs,require,define;!function(aa){function I(a){return"[object Function]"===L.call(a)}function J(a){return"[object Array]"===L.call(a)}function y(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function M(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function s(a,b){return ga.call(a,b)}function m(a,b){return s(a,b)&&a[b]}function G(a,b){for(var c in a)if(s(a,c)&&b(a[c],c))break}function R(a,b,c,d){return b&&G(b,function(b,e){(c||!s(a,e))&&(d&&"string"!=typeof b?(a[e]||(a[e]={}),R(a[e],b,c,d)):a[e]=b)}),a}function u(a,b){return function(){return b.apply(a,arguments)}}function ba(a){if(!a)return a;var b=aa;return y(a.split("."),function(a){b=b[a]}),b}function B(a,b,c,d){return b=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a),b.requireType=a,b.requireModules=d,c&&(b.originalError=c),b}function ha(a){function b(a,b,c){var d,e,f,g,h,i,j,k=b&&b.split("/");d=k;var l=C.map,n=l&&l["*"];if(a&&"."===a.charAt(0))if(b){for(d=m(C.pkgs,b)?k=[b]:k.slice(0,k.length-1),b=a=d.concat(a.split("/")),d=0;b[d];d+=1)if(e=b[d],"."===e)b.splice(d,1),d-=1;else if(".."===e){if(1===d&&(".."===b[2]||".."===b[0]))break;d>0&&(b.splice(d-1,2),d-=2)}d=m(C.pkgs,b=a[0]),a=a.join("/"),d&&a===b+"/"+d.main&&(a=b)}else 0===a.indexOf("./")&&(a=a.substring(2));if(c&&l&&(k||n)){for(b=a.split("/"),d=b.length;d>0;d-=1){if(f=b.slice(0,d).join("/"),k)for(e=k.length;e>0;e-=1)if((c=m(l,k.slice(0,e).join("/")))&&(c=m(c,f))){g=c,h=d;break}if(g)break;!i&&n&&m(n,f)&&(i=m(n,f),j=d)}!g&&i&&(g=i,h=j),g&&(b.splice(0,h,g),a=b.join("/"))}return a}function c(a){A&&y(document.getElementsByTagName("script"),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===w.contextName?(b.parentNode.removeChild(b),!0):void 0})}function d(a){var b=m(C.paths,a);return b&&J(b)&&1<b.length?(c(a),b.shift(),w.require.undef(a),w.require([a]),!0):void 0}function e(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function f(a,c,d,f){var g,h,i=null,j=c?c.name:null,k=a,l=!0,n="";return a||(l=!1,a="_@r"+(M+=1)),a=e(a),i=a[0],a=a[1],i&&(i=b(i,j,f),h=m(K,i)),a&&(i?n=h&&h.normalize?h.normalize(a,function(a){return b(a,j,f)}):b(a,j,f):(n=b(a,j,f),a=e(n),i=a[0],n=a[1],d=!0,g=w.nameToUrl(n))),d=!i||h||d?"":"_unnormalized"+(N+=1),{prefix:i,name:n,parentMap:c,unnormalized:!!d,url:g,originalName:k,isDefine:l,id:(i?i+"!"+n:n)+d}}function g(a){var b=a.id,c=m(D,b);return c||(c=D[b]=new w.Module(a)),c}function h(a,b,c){var d=a.id,e=m(D,d);!s(K,d)||e&&!e.defineEmitComplete?g(a).on(b,c):"defined"===b&&c(K[d])}function i(a,b){var c=a.requireModules,d=!1;b?b(a):(y(c,function(b){(b=m(D,b))&&(b.error=a,b.events.error&&(d=!0,b.emit("error",a)))}),d||l.onError(a))}function j(){T.length&&(ia.apply(H,[H.length-1,0].concat(T)),T=[])}function k(a){delete D[a],delete E[a]}function n(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,y(a.depMaps,function(d,e){var f=d.id,g=m(D,f);g&&!a.depMatched[e]&&!c[f]&&(m(b,f)?(a.defineDep(e,K[f]),a.check()):n(g,b,c))}),c[d]=!0)}function o(){var a,b,e,f,g=(e=1e3*C.waitSeconds)&&w.startTime+e<(new Date).getTime(),h=[],j=[],k=!1,l=!0;if(!t){if(t=!0,G(E,function(e){if(a=e.map,b=a.id,e.enabled&&(a.isDefine||j.push(e),!e.error))if(!e.inited&&g)d(b)?k=f=!0:(h.push(b),c(b));else if(!e.inited&&e.fetched&&a.isDefine&&(k=!0,!a.prefix))return l=!1}),g&&h.length)return e=B("timeout","Load timeout for modules: "+h,null,h),e.contextName=w.contextName,i(e);l&&y(j,function(a){n(a,{},{})}),g&&!f||!k||!A&&!da||z||(z=setTimeout(function(){z=0,o()},50)),t=!1}}function p(a){s(K,a[0])||g(f(a[0],null,!0)).init(a[1],a[2])}function q(a){var a=a.currentTarget||a.srcElement,b=w.onScriptLoad;return a.detachEvent&&!Y?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1),b=w.onScriptError,(!a.detachEvent||Y)&&a.removeEventListener("error",b,!1),{node:a,id:a&&a.getAttribute("data-requiremodule")}}function r(){var a;for(j();H.length;){if(a=H.shift(),null===a[0])return i(B("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));p(a)}}var t,v,w,x,z,C={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},D={},E={},F={},H=[],K={},L={},M=1,N=1;return x={require:function(a){return a.require?a.require:a.require=w.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?a.exports:a.exports=K[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return C.config&&m(C.config,a.map.id)||{}},exports:K[a.map.id]}}},v=function(a){this.events=m(F,a.id)||{},this.map=a,this.shim=m(C.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},v.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=u(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}))}},load:function(){var a=this.map.url;L[a]||(L[a]=!0,w.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var d=this.exports,e=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(I(e)){if(this.events.error)try{d=w.execCb(c,e,b,d)}catch(f){a=f}else d=w.execCb(c,e,b,d);if(this.map.isDefine&&((b=this.module)&&void 0!==b.exports&&b.exports!==this.exports?d=b.exports:void 0===d&&this.usingExports&&(d=this.exports)),a)return a.requireMap=this.map,a.requireModules=[this.map.id],a.requireType="define",i(this.error=a)}else d=e;this.exports=d,this.map.isDefine&&!this.ignore&&(K[c]=d,l.onResourceLoad)&&l.onResourceLoad(w,this.map,this.depMaps),k(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,c=a.id,d=f(a.prefix);this.depMaps.push(d),h(d,"defined",u(this,function(d){var e,j;j=this.map.name;var n=this.map.parentMap?this.map.parentMap.name:null,o=w.makeRequire(a.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(d.normalize&&(j=d.normalize(j,function(a){return b(a,n,!0)})||""),d=f(a.prefix+"!"+j,this.map.parentMap),h(d,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),(j=m(D,d.id))&&(this.depMaps.push(d),this.events.error&&j.on("error",u(this,function(a){this.emit("error",a)})),j.enable())):(e=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=u(this,function(a){this.inited=!0,this.error=a,a.requireModules=[c],G(D,function(a){0===a.map.id.indexOf(c+"_unnormalized")&&k(a.map.id)}),i(a)}),e.fromText=u(this,function(b,d){var h=a.name,j=f(h),k=O;d&&(b=d),k&&(O=!1),g(j),s(C.config,c)&&(C.config[h]=C.config[c]);try{l.exec(b)}catch(m){return i(B("fromtexteval","fromText eval for "+c+" failed: "+m,m,[c]))}k&&(O=!0),this.depMaps.push(j),w.completeLoad(h),o([h],e)}),d.load(a.name,o,e,C))})),w.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){E[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,u(this,function(a,b){var c,d;if("string"==typeof a){if(a=f(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,c=m(x,a.id))return void(this.depExports[b]=c(this));this.depCount+=1,h(a,"defined",u(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&h(a,"error",this.errback)}c=a.id,d=D[c],!s(x,c)&&d&&!d.enabled&&w.enable(a,this)})),G(this.pluginMaps,u(this,function(a){var b=m(D,a.id);b&&!b.enabled&&w.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){y(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},w={config:C,contextName:a,registry:D,defined:K,urlFetched:L,defQueue:H,Module:v,makeModuleMap:f,nextTick:l.nextTick,onError:i,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=C.pkgs,c=C.shim,d={paths:!0,config:!0,map:!0};G(a,function(a,b){d[b]?"map"===b?(C.map||(C.map={}),R(C[b],a,!0,!0)):R(C[b],a,!0):C[b]=a}),a.shim&&(G(a.shim,function(a,b){J(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=w.makeShimExports(a)),c[b]=a}),C.shim=c),a.packages&&(y(a.packages,function(a){a="string"==typeof a?{name:a}:a,b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(ja,"").replace(ea,"")}}),C.pkgs=b),G(D,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=f(b))}),(a.deps||a.callback)&&w.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;return a.init&&(b=a.init.apply(aa,arguments)),b||a.exports&&ba(a.exports)}},makeRequire:function(c,d){function e(b,h,j){var k,m;return d.enableBuildCallback&&h&&I(h)&&(h.__requireJsBuild=!0),"string"==typeof b?I(h)?i(B("requireargs","Invalid require call"),j):c&&s(x,b)?x[b](D[c.id]):l.get?l.get(w,b,c,e):(k=f(b,c,!1,!0),k=k.id,s(K,k)?K[k]:i(B("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(c?"":". Use require([])")))):(r(),w.nextTick(function(){r(),m=g(f(null,c)),m.skipMap=d.skipMap,m.init(b,h,j,{enabled:!0}),o()}),e)}return d=d||{},R(e,{isBrowser:A,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0];return-1!==e&&("."!==f&&".."!==f||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),w.nameToUrl(b(a,c&&c.id,!0),d,!0)},defined:function(a){return s(K,f(a,c,!1,!0).id)},specified:function(a){return a=f(a,c,!1,!0).id,s(K,a)||s(D,a)}}),c||(e.undef=function(a){j();var b=f(a,c,!0),d=m(D,a);delete K[a],delete L[b.url],delete F[a],d&&(d.events.defined&&(F[a]=d.events),k(a))}),e},enable:function(a){m(D,a.id)&&g(a).enable()},completeLoad:function(a){var b,c,e=m(C.shim,a)||{},f=e.exports;for(j();H.length;){if(c=H.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);p(c)}if(c=m(D,a),!b&&!s(K,a)&&c&&!c.inited){if(C.enforceDefine&&(!f||!ba(f)))return d(a)?void 0:i(B("nodefine","No define call for "+a,null,[a]));p([a,e.deps||[],e.exportsFn])}o()},nameToUrl:function(a,b,c){var d,e,f,g,h,i;if(l.jsExtRegExp.test(a))g=a+(b||"");else{for(d=C.paths,e=C.pkgs,g=a.split("/"),h=g.length;h>0;h-=1){if(i=g.slice(0,h).join("/"),f=m(e,i),i=m(d,i)){J(i)&&(i=i[0]),g.splice(0,h,i);break}if(f){a=a===f.name?f.location+"/"+f.main:f.location,g.splice(0,h,a);break}}g=g.join("/"),g+=b||(/\?/.test(g)||c?"":".js"),g=("/"===g.charAt(0)||g.match(/^[\w\+\.\-]+:/)?"":C.baseUrl)+g}return C.urlArgs?g+((-1===g.indexOf("?")?"?":"&")+C.urlArgs):g},load:function(a,b){l.load(w,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){("load"===a.type||ka.test((a.currentTarget||a.srcElement).readyState))&&(P=null,a=q(a),w.completeLoad(a.id))},onScriptError:function(a){var b=q(a);return d(b.id)?void 0:i(B("scripterror","Script error",a,[b.id]))}},w.require=w.makeRequire(),w}var l,w,x,D,t,E,P,K,Q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,A=!("undefined"==typeof window||!navigator||!document),da=!A&&"undefined"!=typeof importScripts,ka=A&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},r={},T=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(I(requirejs))return;r=requirejs,requirejs=void 0}"undefined"!=typeof require&&!I(require)&&(r=require,require=void 0),l=requirejs=function(a,b,c,d){var e,f="_";return!J(a)&&"string"!=typeof a&&(e=a,J(b)?(a=b,b=c,c=d):a=[]),e&&e.context&&(f=e.context),(d=m(F,f))||(d=F[f]=l.s.newContext(f)),e&&d.configure(e),d.require(a,b,c)},l.config=function(a){return l(a)},l.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=l),l.version="2.1.5",l.jsExtRegExp=/^\/|:|\?|\.js$/,l.isBrowser=A,w=l.s={contexts:F,newContext:ha},l({}),y(["toUrl","undef","defined","specified"],function(a){l[a]=function(){var b=F._;return b.require[a].apply(b,arguments)}}),A&&(x=w.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(x=w.head=D.parentNode),l.onError=function(a){throw a},l.load=function(a,b,c){var d,e=a&&a.config||{};if(A)return d=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),d.type=e.scriptType||"text/javascript",d.charset="utf-8",d.async=!0,d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&0>d.attachEvent.toString().indexOf("[native code")||Y?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(O=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,K=d,D?x.insertBefore(d,D):x.appendChild(d),K=null,d;if(da)try{importScripts(c),a.completeLoad(b)}catch(f){a.onError(B("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},A&&M(document.getElementsByTagName("script"),function(a){return x||(x=a.parentNode),(t=a.getAttribute("data-main"))?(r.baseUrl||(E=t.split("/"),Q=E.pop(),fa=E.length?E.join("/")+"/":"./",r.baseUrl=fa,t=Q),t=t.replace(ea,""),r.deps=r.deps?r.deps.concat(t):[t],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),J(b)||(c=b,b=[]),!b.length&&I(c)&&c.length&&(c.toString().replace(la,"").replace(ma,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b)),O&&((d=K)||(P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(a){return"interactive"===a.readyState?P=a:void 0}),d=P),d&&(a||(a=d.getAttribute("data-requiremodule")),e=F[d.getAttribute("data-requirecontext")])),(e?e.defQueue:T).push([a,b,c])},define.amd={jQuery:!0},l.exec=function(b){return eval(b)},l(r)}}(this),define("R",function(){});var __CTRIP_JS_PARAM="?jsparam=",__CTRIP_URL_PLUGIN="ctrip://h5/plugin"+__CTRIP_JS_PARAM,__CTRIP_YOUTH_URL_PLUGIN="ctripyouth://h5/plugin"+__CTRIP_JS_PARAM,Internal={isIOS:!1,isAndroid:!1,isWinOS:!1,isInApp:!1,appVersion:"",osVersion:"",isYouthApp:!1,isAppVersionGreatThan:function(a){if(Internal.isYouthApp)return!0;if("string"==typeof a&&a.length>0){var b=parseFloat(a),c=parseFloat(Internal.appVersion);if(isNaN(c)||c-b>=0)return!0}return!1},isSupportAPIWithVersion:function(a){return null==a||Internal.isAppVersionGreatThan(a)?!0:(Internal.appVersionNotSupportCallback(a),!1)},appVersionNotSupportCallback:function(a){var b={tagname:"app_version_too_low",start_version:a,app_version:Internal.appVersion};CtripTool.app_log(JSON.stringify(b)),window.app.callback(b)},paramErrorCallback:function(a){var b={tagname:"app_param_error",description:a};CtripTool.app_log(JSON.stringify(b)),window.app.callback(b)},isNotEmptyString:function(a){return"string"==typeof a&&a.length>0?!0:!1},loadURL:function(a){var b=document.createElement("iframe"),c=document.body||document.documentElement;b.style.display="none",b.setAttribute("src",a),c.appendChild(b),setTimeout(function(){b.parentNode.removeChild(b),b=null},200)},makeParamString:function(a,b,c,d){return Internal.isNotEmptyString(a)&&Internal.isNotEmptyString(b)?(c||(c={}),c.service=a,c.action=b,c.callback_tagname=d,JSON.stringify(c)):""},makeURLWithParam:function(a){return null==a&&(a=""),a=encodeURIComponent(a),Internal.isYouthApp?__CTRIP_YOUTH_URL_PLUGIN+a:__CTRIP_URL_PLUGIN+a},callWin8App:function(a){window.external.notify(a)}},CtripTool={app_is_in_ctrip_app:function(){if(Internal.isInApp)return!0;var a=!1,b=navigator.userAgent;return b.indexOf("CtripWireless")>0&&(a=!0),a},app_log:function(a,b){CtripUtil.app_log(a,b)}},CtripUtil={app_log_event:function(a){CtripBusiness.app_log_event(a)},app_init_member_H5_info:function(){paramString=Internal.makeParamString("User","initMemberH5Info",null,"init_member_H5_info"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.User_a.initMemberH5Info(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_call_phone:function(a){a||(a="");var b={};if(b.phone=a,paramString=Internal.makeParamString("Util","callPhone",b,"call_phone"),Internal.isIOS){var c=!1;Internal.isNotEmptyString(a)&&(Internal.appVersion&&"5.2"!=Internal.appVersion||(c=!0,url="tel://"+a,window.location.href=url)),c||(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url))}else Internal.isAndroid?window.Util_a.callPhone(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_back_to_home:function(){paramString=Internal.makeParamString("Util","backToHome",null,"back_to_home"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?(homeURL="ctrip://wireless/",Internal.isYouthApp&&(homeURL="ctripyouth://wireless/"),CtripUtil.app_open_url(homeURL,1,"  ")):Internal.isWinOS&&Internal.callWin8App(paramString)},app_back_to_last_page:function(a,b){var c={};a||(a=""),c.callbackString=a,c.isDeleteH5Page=b,paramString=Internal.makeParamString("Util","backToLast",c,"back_to_last_page"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.backToLast(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_locate:function(a){CtripMap.app_locate(a)},app_refresh_nav_bar:function(a){CtripBar.app_refresh_nav_bar(a)},app_open_url:function(a,b,c,d,e){var f={};if(a||(a=""),c||(c=""),d||(d=""),f.openUrl=a,f.title=c,f.targetMode=b,f.pageName=d,f.isShowLoadingPage=e,paramString=Internal.makeParamString("Util","openUrl",f,"open_url"),Internal.appVersion)5==b?Internal.isAppVersionGreatThan("5.8")&&(firstSplashIndex=a.indexOf("/"),firstSplashIndex>0?(packageName=a.substr(0,firstSplashIndex),pageParam=a.substr(a),CtripUtil.app_cross_package_href(packageName,pageParam)):Internal.appVersionNotSupportCallback("传入URL有错误，eg. car/index.html#xxooee")):Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.openUrl(paramString):Internal.isWinOS&&Internal.callWin8App(paramString);else{var g=navigator.userAgent,h=g.indexOf("Android")>0&&g.indexOf("CtripWireless")>0;if(h)try{window.Util_a.openUrl(paramString)}catch(i){window.location.href=a}else window.location.href=a}},app_check_update:function(){CtripBusiness.app_check_update()},app_recommend_app_to_friends:function(){CtripBusiness.app_recommend_app_to_friends()},app_add_weixin_friend:function(){CtripBusiness.app_add_weixin_friend()},app_cross_package_href:function(a,b){var c={};a||(a=""),b||(b=""),c.path=a,c.param=b,paramString=Internal.makeParamString("Util","crossPackageJumpUrl",c,"cross_package_href"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.crossPackageJumpUrl(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_show_newest_introduction:function(){CtripBusiness.app_show_newest_introduction()},app_check_network_status:function(){paramString=Internal.makeParamString("Util","checkNetworkStatus",null,"check_network_status"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.checkNetworkStatus(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_check_app_install_status:function(a,b){var c={};a||(a=""),b||(b=""),c.openUrl=a,c.packageName=b,paramString=Internal.makeParamString("Util","checkAppInstallStatus",c,"check_app_install_status"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.checkAppInstallStatus(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_refresh_native_page:function(a,b){var c={};a||(a=""),b||(b=""),c.pageName=a,c.jsonStr=b,paramString=Internal.makeParamString("Util","refreshNativePage",c,"refresh_native_page"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.refreshNativePage(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_copy_string_to_clipboard:function(a){if(Internal.isSupportAPIWithVersion("5.3")){var b={};a||(a=""),b.copyString=a,paramString=Internal.makeParamString("Util","copyToClipboard",b,"copy_string_to_clipboard"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.copyToClipboard(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_read_copied_string_from_clipboard:function(){Internal.isSupportAPIWithVersion("5.3")&&(paramString=Internal.makeParamString("Util","readCopiedStringFromClipboard",null,"read_copied_string_from_clipboard"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.readCopiedStringFromClipboard(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))},app_call_system_share:function(a,b,c,d,e){CtripBusiness.app_call_system_share(a,b,c,d,e)},app_download_data:function(a,b,c){if(Internal.isSupportAPIWithVersion("5.3")){var d={};a||(a=""),b||(b=""),d.downloadUrl=a,d.suffix=b,d.pageUrl=window.location.href,d.isIgnoreHttpsCertification=c;var e=Internal.makeParamString("Util","downloadData",d,"download_data");if(Internal.isIOS){var f=Internal.makeURLWithParam(e);Internal.loadURL(f)}else Internal.isAndroid?window.Util_a.downloadData(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_open_other_app:function(a,b,c){if(Internal.isSupportAPIWithVersion("5.3")){var d={};a||(a=""),b||(b=""),c||(c=""),d.packageId=a,d.jsonParam=b,d.url=c;var e=Internal.makeParamString("Util","openOtherApp",d,"open_other_app");if(Internal.isIOS){var c=Internal.makeURLWithParam(e);Internal.loadURL(c)}else Internal.isAndroid?window.Util_a.openOtherApp(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_log:function(a,b){if(Internal.isNotEmptyString(a)){Internal.isNotEmptyString(b)||(b="");var c={};c.log=a,c.result=b,paramString=Internal.makeParamString("Util","h5Log",c,"log"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.h5Log(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_open_adv_page:function(a){CtripBusiness.app_open_adv_page(a)},app_choose_photo:function(a,b,c){if(Internal.isSupportAPIWithVersion("5.7")){var d={};d.maxFileSize=a,d.maxPhotoCount=b,d.meta=c;var e=Internal.makeParamString("Util","choosePhoto",d,"choose_photo");if(Internal.isIOS){var f=Internal.makeURLWithParam(e);Internal.loadURL(f)}else Internal.isAndroid?window.Util_a.choosePhoto(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_h5_page_finish_loading:function(){if(Internal.isSupportAPIWithVersion("5.8")){var a=Internal.makeParamString("Util","h5PageFinishLoading",null,"h5_page_finish_loading");if(Internal.isIOS){var b=Internal.makeURLWithParam(a);Internal.loadURL(b)}else Internal.isAndroid?window.Util_a.h5PageFinishLoading(a):Internal.isWinOS&&Internal.callWin8App(a)}}},CtripUser={app_member_login:function(a){var b={};b.isShowNonMemberLogin=a,paramString=Internal.makeParamString("User","memberLogin",b,"member_login"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.User_a.memberLogin(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_non_member_login:function(){paramString=Internal.makeParamString("User","nonMemberLogin",null,"non_member_login"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.User_a.nonMemberLogin(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_member_auto_login:function(){paramString=Internal.makeParamString("User","memberAutoLogin",null,"member_auto_login"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.User_a.memberAutoLogin(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_member_register:function(){paramString=Internal.makeParamString("User","memberRegister",null,"member_register"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.User_a.memberRegister(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_finished_register:function(a){if(Internal.isSupportAPIWithVersion("5.7")){a||(a="");var b={};b.userInfoJson=a,paramString=Internal.makeParamString("User","finishedRegister",b,"finished_register"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.User_a.finishedRegister(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_finished_login:function(a){if(Internal.isSupportAPIWithVersion("5.8")){a||(a="");var b={};b.userInfoJson=a,paramString=Internal.makeParamString("User","finishedLogin",b,"finished_login"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.User_a.finishedLogin(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}}},CtripEncrypt={app_base64_encode:function(a){Internal.isSupportAPIWithVersion("5.3")&&(a||(a=""),params={},params.toIncodeString=a,paramString=Internal.makeParamString("Encrypt","base64Encode",params,"base64_encode"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Encrypt_a.base64Encode(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))},app_md5_hash:function(a){Internal.isSupportAPIWithVersion("5.5")&&(a||(a=""),params={},params.inString=a,paramString=Internal.makeParamString("Encrypt","md5Hash",params,"md5_hash"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Encrypt_a.md5Hash(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))},app_ctrip_encrypt:function(a,b){Internal.isSupportAPIWithVersion("5.5")&&(a||(a=""),params={},params.inString=a,params.encType=b,paramString=Internal.makeParamString("Encrypt","ctripEncrypt",params,"ctrip_encrypt"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Encrypt_a.ctripEncrypt(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))}},CtripPay={app_check_pay_app_install_status:function(){if(Internal.isSupportAPIWithVersion("5.4")){var a=Internal.makeParamString("Pay","checkPayAppInstallStatus",null,"check_pay_app_install_status");Internal.isIOS?(url=Internal.makeURLWithParam(a),Internal.loadURL(url)):Internal.isAndroid?window.Pay_a.checkPayAppInstallStatus(a):Internal.isWinOS&&Internal.callWin8App(a)}},app_open_pay_app_by_url:function(a,b,c,d){if(Internal.isSupportAPIWithVersion("5.4")){b||(b=""),a||(a=""),c||(c=""),d||(d="");var e={};e.payMeta=b,e.payAppName=a,e.successRelativeURL=c,e.detailRelativeURL=d;var f=Internal.makeParamString("Pay","openPayAppByURL",e,"open_pay_app_by_url");Internal.isIOS?(url=Internal.makeURLWithParam(f),Internal.loadURL(url)):Internal.isAndroid?window.Pay_a.openPayAppByURL(f):Internal.isWinOS&&Internal.callWin8App(f)}}},CtripPipe={app_send_HTTP_pipe_request:function(a,b,c,d,e,f,g){if(Internal.isSupportAPIWithVersion("5.4")){a||(a=""),b||(b=""),c||(c=""),d||(d=""),e||(e=""),g||(g="");var h={};h.baseURL=a,h.path=b,h.method=c,h.header=d,h.parameters=e,h.sequenceId=g,h.isIgnoreHTTPSCertification=f,paramString=Internal.makeParamString("Pipe","sendHTTPPipeRequest",h,"send_http_pipe_request"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Pipe_a.sendHTTPPipeRequest(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_abort_HTTP_pipe_request:function(a){if(Internal.isSupportAPIWithVersion("5.4")){a||(a="");var b={};b.sequenceId=a,paramString=Internal.makeParamString("Pipe","abortHTTPRequest",b,"abort_http_pipe_request"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Pipe_a.abortHTTPRequest(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_send_H5_pipe_request:function(a,b,c,d,e){if(Internal.isSupportAPIWithVersion("5.4")){a||(a=""),b||(b=""),c||(c=""),d||(d=""),e||(e=0);var f={};f.serviceCode=a,f.header=b,f.data=c,f.sequenceId=d,f.pipeType=e,paramString=Internal.makeParamString("Pipe","sendH5PipeRequest",f,"send_h5_pipe_request"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Pipe_a.sendH5PipeRequest(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}}},CtripSumSungWallet={app_check_ticket_in_samsung_wallet:function(a){a||(a="");var b={};b.ticketID=a,paramString=Internal.makeParamString("SamSungWallet","checkTicketInSamSungWallet",b,"check_ticket_in_samsung_wallet"),Internal.isAndroid&&window.SamSungWallet_a.checkTicketInSamSungWallet(paramString)},app_download_ticket_in_samsung_wallet:function(a){a||(a="");var b={};b.ticketID=a,paramString=Internal.makeParamString("SamSungWallet","downloadTicketInSamSungWallet",b,"download_ticket_in_samsung_wallet"),Internal.isAndroid&&window.SamSungWallet_a.downloadTicketInSamSungWallet(paramString)},app_show_ticket_in_samsung_wallet:function(a){a||(a="");var b={};b.ticketID=a,paramString=Internal.makeParamString("SamSungWallet","showTicketInSamSungWallet",b,"show_ticket_in_samsung_wallet"),Internal.isAndroid&&window.SamSungWallet_a.showTicketInSamSungWallet(paramString)}},CtripFile={app_get_current_sandbox_name:function(){if(Internal.isSupportAPIWithVersion("5.4")){var a={};a.pageUrl=window.location.href,paramString=Internal.makeParamString("File","getCurrentSandboxName",a,"get_current_sandbox_name"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.File_a.getCurrentSandboxName(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_write_text_to_file:function(a,b,c,d){if(Internal.isSupportAPIWithVersion("5.4")){a||(a=""),b||(b=""),c||(c="");var e={};e.pageUrl=window.location.href,e.text=a,e.fileName=b,e.relativeFilePath=c,e.isAppend=d,paramString=Internal.makeParamString("File","writeTextToFile",e,"write_text_to_file"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.File_a.writeTextToFile(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_delete_file:function(a,b){if(Internal.isSupportAPIWithVersion("5.4")){a||(a=""),b||(b="");var c={};c.fileName=a,c.relativeFilePath=b,c.pageUrl=window.location.href,paramString=Internal.makeParamString("File","deleteFile",c,"delete_file"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.File_a.deleteFile(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)
}},app_read_text_from_file:function(a,b){if(Internal.isSupportAPIWithVersion("5.4")){a||(a=""),b||(b="");var c={};c.fileName=a,c.pageUrl=window.location.href,c.relativeFilePath=b,paramString=Internal.makeParamString("File","readTextFromFile",c,"read_text_from_file"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.File_a.readTextFromFile(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_get_file_size:function(a,b){if(Internal.isSupportAPIWithVersion("5.4")){a||(a=""),b||(b="");var c={};c.fileName=a,c.relativeFilePath=b,c.pageUrl=window.location.href,paramString=Internal.makeParamString("File","getFileSize",c,"get_file_size"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.File_a.getFileSize(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_check_file_exist:function(a,b){if(Internal.isSupportAPIWithVersion("5.4")){a||(a=""),b||(b="");var c={};c.fileName=a,c.relativeFilePath=b,c.pageUrl=window.location.href,paramString=Internal.makeParamString("File","checkFileExist",c,"check_file_exist"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.File_a.checkFileExist(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_make_dir:function(a,b){if(Internal.isSupportAPIWithVersion("5.4")){a||(a=""),b||(b="");var c={};c.dirName=a,c.pageUrl=window.location.href,c.relativeDirPath=b,paramString=Internal.makeParamString("File","makeDir",c,"make_dir"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.File_a.makeDir(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}}},CtripBar={app_refresh_nav_bar:function(a){Internal.isNotEmptyString(a)&&(jsonObj=JSON.parse(a),jsonObj.service="NavBar",jsonObj.action="refresh",jsonObj.callback_tagname="refresh_nav_bar",paramString=JSON.stringify(jsonObj),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.NavBar_a.refresh(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))},app_set_navbar_hidden:function(a){var b={};if(b.isHidden=a,Internal.isSupportAPIWithVersion("5.4")){var b={};b.isHidden=a,paramString=Internal.makeParamString("NavBar","setNavBarHidden",b,"set_navbar_hidden"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.NavBar_a.setNavBarHidden(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_set_toolbar_hidden:function(a){if(Internal.isSupportAPIWithVersion("5.4")){var b={};b.isHidden=a,paramString=Internal.makeParamString("NavBar","setToolBarHidden",b,"set_toolbar_hidden"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.NavBar_a.setToolBarHidden(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}}},CtripMap={app_locate:function(a){var b={};b.is_async=a,paramString=Internal.makeParamString("Locate","locate",b,"locate"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Locate_a.locate(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_show_map:function(a,b,c,d){if(Internal.isSupportAPIWithVersion("5.5")){c||(c=""),d||(d="");var e={};e.latitude=a,e.longitude=b,e.title=c,e.subtitle=d,paramString=Internal.makeParamString("Locate","showMap",e,"show_map"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Locate_a.showMap(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_show_map_with_POI_list:function(a){if(Internal.isSupportAPIWithVersion("5.8")){var b={};b.poiList=a,paramString=Internal.makeParamString("Locate","showMapWithPOIList",b,"show_map_with_POI_list"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Locate_a.showMapWithPOIList(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}}},CtripBusiness={app_choose_invoice_title:function(a){if(Internal.isSupportAPIWithVersion("5.6")){a||(a="");var b={};b.selectedInvoiceTitle=a,paramString=Internal.makeParamString("Business","chooseInvoiceTitle",b,"choose_invoice_title"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Business_a.chooseInvoiceTitle(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_show_voice_search:function(a){if(Internal.isSupportAPIWithVersion("5.7")){var b={};b.businessType=a,paramString=Internal.makeParamString("Business","showVoiceSearch",b,"show_voice_search"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Business_a.showVoiceSearch(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_open_adv_page:function(a){if(Internal.isSupportAPIWithVersion("5.4")){var b={};b.advUrl=a,paramString=Internal.makeParamString("Util","openAdvPage",b,"open_adv_page"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.openAdvPage(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_show_newest_introduction:function(){paramString=Internal.makeParamString("Util","showNewestIntroduction",null,"show_newest_introduction"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.showNewestIntroduction(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_check_update:function(){paramString=Internal.makeParamString("Util","checkUpdate",null,"check_update"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.checkUpdate(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_recommend_app_to_friends:function(){paramString=Internal.makeParamString("Util","recommendAppToFriends",null,"recommend_app_to_friends"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.recommendAppToFriends(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_add_weixin_friend:function(){paramString=Internal.makeParamString("Util","addWeixinFriend",null,"add_weixin_friend"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.addWeixinFriend(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)},app_call_system_share:function(a,b,c,d,e){if(Internal.isSupportAPIWithVersion("5.3")){var f={};a||(a=""),c||(c=""),b||(b=""),d||(d=""),f.title=c,f.text=b,f.linkUrl=d,f.imageRelativePath=a,f.isIOSSystemShare=e,paramString=Internal.makeParamString("Util","callSystemShare",f,"call_system_share"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.callSystemShare(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_log_event:function(a){if(Internal.isNotEmptyString(a)){var b={};b.event=a,paramString=Internal.makeParamString("Util","logEvent",b,"log_event"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.logEvent(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_get_device_info:function(){Internal.isSupportAPIWithVersion("5.7")&&(paramString=Internal.makeParamString("Business","getDeviceInfo",null,"get_device_info"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Business_a.getDeviceInfo(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))},app_read_verification_code_from_sms:function(){Internal.isSupportAPIWithVersion("5.8")&&(paramString=Internal.makeParamString("Business","readVerificationCodeFromSMS",null,"read_verification_code_from_sms"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Business_a.readVerificationCodeFromSMS(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))},app_log_google_remarkting:function(a){if(Internal.isSupportAPIWithVersion("5.8")){a||(a="");var b={};b.screenName=a,paramString=Internal.makeParamString("Business","logGoogleRemarking",b,"log_google_remarkting"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Business_a.logGoogleRemarking(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_check_app_package_info:function(){Internal.isSupportAPIWithVersion("5.8")||(paramString=Internal.makeParamString("Business","checkAppPackageInfo",params,"check_app_package_info"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Business_a.checkAndroidPackageInfo(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))},app_choose_contact_from_addressbook:function(){Internal.isSupportAPIWithVersion("5.9")||(paramString=Internal.makeParamString("Business","chooseContactFromAddressbook",params,"choose_contact_from_addressbook"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Business_a.chooseContactFromAddressbook(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))}},CtripPage={app_set_page_name:function(a){if(Internal.isSupportAPIWithVersion("5.6")){a||(a="");var b={};b.pageName=a,paramString=Internal.makeParamString("Page","setPageName",b,"set_page_name"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Page_a.setPageName(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_back_to_page:function(a){if(Internal.isSupportAPIWithVersion("5.8")){a||(a="");var b={};b.pageName=a,paramString=Internal.makeParamString("Page","backToPage",b,"back_to_page"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Page_a.backToPage(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_show_loading_page:function(){Internal.isSupportAPIWithVersion("5.9")&&(paramString=Internal.makeParamString("Page","showLoadingPage",null,"show_loading_page"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Page_a.showLoadingPage(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))},app_hide_loading_page:function(){Internal.isSupportAPIWithVersion("5.9")&&(paramString=Internal.makeParamString("Page","hideLoadingPage",null,"hide_loading_page"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Page_a.hideLoadingPage(paramString):Internal.isWinOS&&Internal.callWin8App(paramString))}};define("bridge",function(){});var Zepto=function(){function a(a){return null==a?String(a):W[X.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&a.__proto__==Object.prototype}function g(a){return a instanceof Array}function h(a){return"number"==typeof a.length}function i(a){return E.call(a,function(a){return null!=a})}function j(a){return a.length>0?y.fn.concat.apply([],a):a}function k(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(a){return a in H?H[a]:H[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function m(a,b){return"number"!=typeof b||J[k(a)]?b:b+"px"}function n(a){var b,c;return G[a]||(b=F.createElement(a),F.body.appendChild(b),c=I(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),G[a]=c),G[a]}function o(a){return"children"in a?D.call(a.children):y.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function p(a,b,c){for(x in b)c&&(f(b[x])||g(b[x]))?(f(b[x])&&!f(a[x])&&(a[x]={}),g(b[x])&&!g(a[x])&&(a[x]=[]),p(a[x],b[x],c)):b[x]!==w&&(a[x]=b[x])}function q(a,b){return b===w?y(a):y(a).filter(b)}function r(a,c,d,e){return b(c)?c.call(a,d,e):c}function s(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function t(a,b){var c=a.className,d=c&&c.baseVal!==w;return b===w?d?c.baseVal:c:void(d?c.baseVal=b:a.className=b)}function u(a){var b;try{return a?"true"==a||("false"==a?!1:"null"==a?null:isNaN(b=Number(a))?/^[\[\{]/.test(a)?y.parseJSON(a):a:b):a}catch(c){return a}}function v(a,b){b(a);for(var c in a.childNodes)v(a.childNodes[c],b)}var w,x,y,z,A,B,C=[],D=C.slice,E=C.filter,F=window.document,G={},H={},I=F.defaultView.getComputedStyle,J={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},K=/^\s*<(\w+|!)[^>]*>/,L=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,M=/^(?:body|html)$/i,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=F.createElement("table"),Q=F.createElement("tr"),R={tr:F.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":F.createElement("div")},S=/complete|loaded|interactive/,T=/^\.([\w-]+)$/,U=/^#([\w-]*)$/,V=/^[\w-]+$/,W={},X=W.toString,Y={},Z=F.createElement("div");return Y.matches=function(a,b){if(!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=Z).appendChild(a),d=~Y.qsa(e,b).indexOf(a),f&&Z.removeChild(a),d},A=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},B=function(a){return E.call(a,function(b,c){return a.indexOf(b)==c})},Y.fragment=function(a,b,c){a.replace&&(a=a.replace(L,"<$1></$2>")),b===w&&(b=K.test(a)&&RegExp.$1),b in R||(b="*");var d,e,g=R[b];return g.innerHTML=""+a,e=y.each(D.call(g.childNodes),function(){g.removeChild(this)}),f(c)&&(d=y(e),y.each(c,function(a,b){N.indexOf(a)>-1?d[a](b):d.attr(a,b)})),e},Y.Z=function(a,b){return a=a||[],a.__proto__=y.fn,a.selector=b||"",a},Y.isZ=function(a){return a instanceof Y.Z},Y.init=function(a,c){if(a){if(b(a))return y(F).ready(a);if(Y.isZ(a))return a;var d;if(g(a))d=i(a);else if(e(a))d=[f(a)?y.extend({},a):a],a=null;else if(K.test(a))d=Y.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==w)return y(c).find(a);d=Y.qsa(F,a)}return Y.Z(d,a)}return Y.Z()},y=function(a,b){return Y.init(a,b)},y.extend=function(a){var b,c=D.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){p(a,c,b)}),a},Y.qsa=function(a,b){var c;return d(a)&&U.test(b)?(c=a.getElementById(RegExp.$1))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:D.call(T.test(b)?a.getElementsByClassName(RegExp.$1):V.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},y.contains=function(a,b){return a!==b&&a.contains(b)},y.type=a,y.isFunction=b,y.isWindow=c,y.isArray=g,y.isPlainObject=f,y.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},y.inArray=function(a,b,c){return C.indexOf.call(b,a,c)},y.camelCase=A,y.trim=function(a){return a.trim()},y.uuid=0,y.support={},y.expr={},y.map=function(a,b){var c,d,e,f=[];if(h(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return j(f)},y.each=function(a,b){var c,d;if(h(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},y.grep=function(a,b){return E.call(a,b)},window.JSON&&(y.parseJSON=JSON.parse),y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){W["[object "+b+"]"]=b.toLowerCase()}),y.fn={forEach:C.forEach,reduce:C.reduce,push:C.push,sort:C.sort,indexOf:C.indexOf,concat:C.concat,map:function(a){return y(y.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return y(D.apply(this,arguments))},ready:function(a){return S.test(F.readyState)?a(y):F.addEventListener("DOMContentLoaded",function(){a(y)},!1),this},get:function(a){return a===w?D.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return C.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):y(E.call(this,function(b){return Y.matches(b,a)}))},add:function(a,b){return y(B(this.concat(y(a,b))))},is:function(a){return this.length>0&&Y.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==w)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):h(a)&&b(a.item)?D.call(a):y(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return y(c)},has:function(a){return this.filter(function(){return e(a)?y.contains(this,a):y(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:y(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:y(a)},find:function(a){var b,c=this;return b="object"==typeof a?y(a).filter(function(){var a=this;return C.some.call(c,function(b){return y.contains(b,a)})}):1==this.length?y(Y.qsa(this[0],a)):this.map(function(){return Y.qsa(this,a)})},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=y(a));c&&!(e?e.indexOf(c)>=0:Y.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return y(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=y.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return q(b,a)},parent:function(a){return q(B(this.pluck("parentNode")),a)},children:function(a){return q(this.map(function(){return o(this)}),a)},contents:function(){return this.map(function(){return D.call(this.childNodes)})},siblings:function(a){return q(this.map(function(a,b){return E.call(o(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return y.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==I(this,"").getPropertyValue("display")&&(this.style.display=n(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=y(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){y(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){y(this[0]).before(a=y(a));for(var b;(b=a.children()).length;)a=b.first();y(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=y(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){y(this).replaceWith(y(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=y(this);(a===w?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return y(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return y(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return a===w?this.length>0?this[0].innerHTML:null:this.each(function(b){var c=this.innerHTML;y(this).empty().append(r(this,a,b,c))})},text:function(a){return a===w?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=a})},attr:function(a,b){var c;return"string"==typeof a&&b===w?0==this.length||1!==this[0].nodeType?w:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:this.each(function(c){if(1===this.nodeType)if(e(a))for(x in a)s(this,x,a[x]);else s(this,a,r(this,b,c,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&s(this,a)})},prop:function(a,b){return b===w?this[0]&&this[0][a]:this.each(function(c){this[a]=r(this,b,c,this[a])})},data:function(a,b){var c=this.attr("data-"+k(a),b);return null!==c?u(c):w},val:function(a){return a===w?this[0]&&(this[0].multiple?y(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(b){this.value=r(this,a,b,this.value)})},offset:function(a){if(a)return this.each(function(b){var c=y(this),d=r(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(0==this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2&&"string"==typeof b)return this[0]&&(this[0].style[A(b)]||I(this[0],"").getPropertyValue(b));var d="";if("string"==a(b))c||0===c?d=k(b)+":"+m(b,c):this.each(function(){this.style.removeProperty(k(b))});else for(x in b)b[x]||0===b[x]?d+=k(x)+":"+m(x,b[x])+";":this.each(function(){this.style.removeProperty(k(x))});return this.each(function(){this.style.cssText+=";"+d})},index:function(a){return a?this.indexOf(y(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return C.some.call(this,function(a){return this.test(t(a))},l(a))},addClass:function(a){return this.each(function(b){z=[];var c=t(this),d=r(this,a,b,c);d.split(/\s+/g).forEach(function(a){y(this).hasClass(a)||z.push(a)},this),z.length&&t(this,c+(c?" ":"")+z.join(" "))})},removeClass:function(a){return this.each(function(b){return a===w?t(this,""):(z=t(this),r(this,a,b,z).split(/\s+/g).forEach(function(a){z=z.replace(l(a)," ")}),void t(this,z.trim()))})},toggleClass:function(a,b){return this.each(function(c){var d=y(this),e=r(this,a,c,t(this));e.split(/\s+/g).forEach(function(a){(b===w?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=M.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(y(a).css("margin-top"))||0,c.left-=parseFloat(y(a).css("margin-left"))||0,d.top+=parseFloat(y(b[0]).css("border-top-width"))||0,d.left+=parseFloat(y(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||F.body;a&&!M.test(a.nodeName)&&"static"==y(a).css("position");)a=a.offsetParent;return a})}},y.fn.detach=y.fn.remove,["width","height"].forEach(function(a){y.fn[a]=function(b){var e,f=this[0],g=a.replace(/./,function(a){return a[0].toUpperCase()});return b===w?c(f)?f["inner"+g]:d(f)?f.documentElement["offset"+g]:(e=this.offset())&&e[a]:this.each(function(c){f=y(this),f.css(a,r(this,b,c,f[a]()))})}}),O.forEach(function(b,c){var d=c%2;y.fn[b]=function(){var b,e,f=y.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:Y.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null,f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return y(a).remove();v(e.insertBefore(a,b),function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},y.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return y(a)[b](this),this}}),Y.Z.prototype=y.fn,Y.uniq=B,Y.deserializeValue=u,y.zepto=Y,y}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(a){function b(a){var b=this.os={},c=this.browser={},d=a.match(/Web[kK]it[\/]{0,1}([\d.]+)/),e=a.match(/(Android);?[\s\/]+([\d.]+)?/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=a.match(/(iPod)(.*OS\s([\d_]+))?/),h=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),i=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),j=i&&a.match(/TouchPad/),k=a.match(/Kindle\/([\d.]+)/),l=a.match(/Silk\/([\d._]+)/),m=a.match(/(BlackBerry).*Version\/([\d.]+)/),n=a.match(/(BB10).*Version\/([\d.]+)/),o=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),p=a.match(/PlayBook/),q=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),r=a.match(/Firefox\/([\d.]+)/),s=a.match(/MSIE\s([\d.]+)/),t=d&&a.match(/Mobile\//)&&!q,u=a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!q;(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),h&&!g&&(b.ios=b.iphone=!0,b.version=h[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),g&&(b.ios=b.ipod=!0,b.version=g[3]?g[3].replace(/_/g,"."):null),i&&(b.webos=!0,b.version=i[2]),j&&(b.touchpad=!0),m&&(b.blackberry=!0,b.version=m[2]),n&&(b.bb10=!0,b.version=n[2]),o&&(b.rimtabletos=!0,b.version=o[2]),p&&(c.playbook=!0),k&&(b.kindle=!0,b.version=k[1]),l&&(c.silk=!0,c.version=l[1]),!l&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),q&&(c.chrome=!0,c.version=q[1]),r&&(c.firefox=!0,c.version=r[1]),s&&(c.ie=!0,c.version=s[1]),t&&(a.match(/Safari/)||b.ios)&&(c.safari=!0),u&&(c.webview=!0),b.tablet=!!(f||p||e&&!a.match(/Mobile/)||r&&a.match(/Tablet/)||s&&!a.match(/Phone/)&&a.match(/Touch/)),b.phone=!(b.tablet||b.ipod||!(e||h||i||m||n||q&&a.match(/Android/)||q&&a.match(/CriOS\/([\d.]+)/)||r&&a.match(/Mobile/)||s&&a.match(/Touch/)))}b.call(a,navigator.userAgent),a.__detect=b}(Zepto),function(a){function b(a){return a._zid||(a._zid=m++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(q[b(a)]||[]).filter(function(a){return!(!a||c.e&&a.e!=c.e||c.ns&&!h.test(a.ns)||f&&b(a.fn)!==b(f)||g&&a.sel!=g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(a,b){return a.del&&!s&&a.e in t||!!b}function g(a){return u[a]||s&&t[a]||a}function h(c,e,h,i,k,m,n){var o=b(c),p=q[o]||(q[o]=[]);e.split(/\s/).forEach(function(b){if("ready"==b)return a(document).ready(h);var e=d(b);e.fn=h,e.sel=k,e.e in u&&(h=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?e.fn.apply(this,arguments):void 0}),e.del=m;var o=m||h;e.proxy=function(a){if(a=j(a),!a.isImmediatePropagationStopped()){a.data=i;var b=o.apply(c,a._args==l?[a]:[a].concat(a._args));return b===!1&&(a.preventDefault(),a.stopPropagation()),b}},e.i=p.length,p.push(e),"addEventListener"in c&&c.addEventListener(g(e.e),e.proxy,f(e,n))})}function i(a,d,e,h,i){var j=b(a);(d||"").split(/\s/).forEach(function(b){c(a,b,e,h).forEach(function(b){delete q[j][b.i],"removeEventListener"in a&&a.removeEventListener(g(b.e),b.proxy,f(b,i))})})}function j(b,c){return(c||!b.isDefaultPrevented)&&(c||(c=b),a.each(y,function(a,d){var e=c[a];b[a]=function(){return this[d]=v,e&&e.apply(c,arguments)},b[d]=w}),(c.defaultPrevented!==l?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(b.isDefaultPrevented=v)),b}function k(a){var b,c={originalEvent:a};for(b in a)x.test(b)||a[b]===l||(c[b]=a[b]);return j(c,a)}var l,m=1,n=Array.prototype.slice,o=a.isFunction,p=function(a){return"string"==typeof a},q={},r={},s="onfocusin"in window,t={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",a.event={add:h,remove:i},a.proxy=function(c,d){if(o(c)){var e=function(){return c.apply(d,arguments)};return e._zid=b(c),e}if(p(d))return a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b,c){return this.on(a,b,c)},a.fn.unbind=function(a,b){return this.off(a,b)},a.fn.one=function(a,b,c,d){return this.on(a,b,c,d,1)};var v=function(){return!0},w=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(a,b,c){return this.on(b,a,c)},a.fn.undelegate=function(a,b,c){return this.off(b,a,c)},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d,e,f){var g,j,m=this;return b&&!p(b)?(a.each(b,function(a,b){m.on(a,c,d,b,f)}),m):(p(c)||o(e)||e===!1||(e=d,d=c,c=l),(o(d)||d===!1)&&(e=d,d=l),e===!1&&(e=w),m.each(function(l,m){f&&(g=function(a){return i(m,a.type,e),e.apply(this,arguments)}),c&&(j=function(b){var d,f=a(b.target).closest(c,m).get(0);return f&&f!==m?(d=a.extend(k(b),{currentTarget:f,liveFired:m}),(g||e).apply(f,[d].concat(n.call(arguments,1)))):void 0}),h(m,b,e,d,c,j||g)}))},a.fn.off=function(b,c,d){var e=this;return b&&!p(b)?(a.each(b,function(a,b){e.off(a,c,b)}),e):(p(c)||o(d)||d===!1||(d=c,c=l),d===!1&&(d=w),e.each(function(){i(this,b,d,c)}))},a.fn.trigger=function(b,c){return b=p(b)||a.isPlainObject(b)?a.Event(b):j(b),b._args=c,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(b):a(this).triggerHandler(b,c)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k(p(b)?a.Event(b):b),e._args=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.each(function(){try{this[b]()}catch(a){}}),this}}),a.Event=function(a,b){p(a)||(b=a,a=b.type);var c=document.createEvent(r[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),j(c)}}(Zepto),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.isDefaultPrevented()}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:void c(b,d,"ajaxSend",[a,b])}function g(a,b,d,e){var f=d.context,g="success";d.success.call(f,a,g,b),e&&e.resolveWith(f,[a,g,b]),c(d,f,"ajaxSuccess",[b,d,a]),i(g,b,d)}function h(a,b,d,e,f){var g=e.context;e.error.call(g,d,b,a),f&&f.rejectWith(g,[d,b,a]),c(e,g,"ajaxError",[d,e,a||b]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return""==b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data),b.data=void 0)}function n(b,c,d,e){return a.isFunction(c)&&(e=d,d=c,c=void 0),a.isFunction(d)||(e=d,d=void 0),{url:b,data:c,success:d,dataType:e}}function o(b,c,d,e){var f,g=a.isArray(c),h=a.isPlainObject(c);a.each(c,function(c,i){f=a.type(i),e&&(c=d?e:e+"["+(h||"object"==f||"array"==f?c:"")+"]"),!e&&g?b.add(i.name,i.value):"array"==f||!d&&"object"==f?o(b,i,d,c):b.add(c,i)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/;a.active=0,a.ajaxJSONP=function(b,c){if(!("type"in b))return a.ajax(b);var d,e,i=b.jsonpCallback,j=(a.isFunction(i)?i():i)||"jsonp"+ ++r,k=s.createElement("script"),l=window[j],m=function(b){a(k).triggerHandler("error",b||"abort")},n={abort:m};return c&&c.promise(n),a(k).on("load error",function(f,i){clearTimeout(e),a(k).off().remove(),"error"!=f.type&&d?g(d[0],n,b,c):h(null,i||"error",n,b,c),window[j]=l,d&&a.isFunction(l)&&l(d[0]),l=d=void 0
}),f(n,b)===!1?(m("abort"),n):(window[j]=function(){d=arguments},k.src=b.url.replace(/\?(.+)=\?/,"?$1="+j),s.head.appendChild(k),b.timeout>0&&(e=setTimeout(function(){m("timeout")},b.timeout)),n)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c=a.extend({},b||{}),e=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===c[p]&&(c[p]=a.ajaxSettings[p]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host),c.url||(c.url=window.location.toString()),m(c),c.cache===!1&&(c.url=l(c.url,"_="+Date.now()));var i=c.dataType,n=/\?.+=\?/.test(c.url);if("jsonp"==i||n)return n||(c.url=l(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),a.ajaxJSONP(c,e);var o,r=c.accepts[i],s={},t=function(a,b){s[a.toLowerCase()]=[a,b]},u=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,v=c.xhr(),w=v.setRequestHeader;if(e&&e.promise(v),c.crossDomain||t("X-Requested-With","XMLHttpRequest"),t("Accept",r||"*/*"),(r=c.mimeType||r)&&(r.indexOf(",")>-1&&(r=r.split(",",2)[0]),v.overrideMimeType&&v.overrideMimeType(r)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&t("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(q in c.headers)t(q,c.headers[q]);if(v.setRequestHeader=t,v.onreadystatechange=function(){if(4==v.readyState){v.onreadystatechange=j,clearTimeout(o);var b,d=!1;if(v.status>=200&&v.status<300||304==v.status||0==v.status&&"file:"==u){i=i||k(c.mimeType||v.getResponseHeader("content-type")),b=v.responseText;try{"script"==i?(1,eval)(b):"xml"==i?b=v.responseXML:"json"==i&&(b=y.test(b)?null:a.parseJSON(b))}catch(f){d=f}d?h(d,"parsererror",v,c,e):g(b,v,c,e)}else h(v.statusText||null,v.status?"error":"abort",v,c,e)}},f(v,c)===!1)return v.abort(),h(null,"abort",v,c,e),v;if(c.xhrFields)for(q in c.xhrFields)v[q]=c.xhrFields[q];var x="async"in c?c.async:!0;v.open(c.type,c.url,x,c.username,c.password);for(q in s)w.apply(v,s[q]);return c.timeout>0&&(o=setTimeout(function(){v.onreadystatechange=j,v.abort(),h(null,"timeout",v,c,e)},c.timeout)),v.send(c.data?c.data:null),v},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var z=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(z(a)+"="+z(b))},o(c,a,b),c.join("&").replace(/%20/g,"+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b,c=[];return a([].slice.call(this.get(0).elements)).each(function(){b=a(this);var d=b.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked)&&c.push({name:b.attr("name"),value:b.val()})}),c},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(a,b){function c(a){return a.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function d(a){return e?e+a:a.toLowerCase()}var e,f,g,h,i,j,k,l,m,n,o="",p={Webkit:"webkit",Moz:"",O:"o"},q=window.document,r=q.createElement("div"),s=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,t={};a.each(p,function(a,c){return r.style[a+"TransitionProperty"]!==b?(o="-"+a.toLowerCase()+"-",e=c,!1):void 0}),f=o+"transform",t[g=o+"transition-property"]=t[h=o+"transition-duration"]=t[j=o+"transition-delay"]=t[i=o+"transition-timing-function"]=t[k=o+"animation-name"]=t[l=o+"animation-duration"]=t[n=o+"animation-delay"]=t[m=o+"animation-timing-function"]="",a.fx={off:e===b&&r.style.transitionProperty===b,speeds:{_default:400,fast:200,slow:600},cssPrefix:o,transitionEnd:d("TransitionEnd"),animationEnd:d("AnimationEnd")},a.fn.animate=function(c,d,e,f,g){return a.isFunction(d)&&(f=d,e=b,d=b),a.isFunction(e)&&(f=e,e=b),a.isPlainObject(d)&&(e=d.easing,f=d.complete,g=d.delay,d=d.duration),d&&(d=("number"==typeof d?d:a.fx.speeds[d]||a.fx.speeds._default)/1e3),g&&(g=parseFloat(g)/1e3),this.anim(c,d,e,f,g)},a.fn.anim=function(d,e,o,p,q){var r,u,v,w={},x="",y=this,z=a.fx.transitionEnd,A=!1;if(e===b&&(e=a.fx.speeds._default/1e3),q===b&&(q=0),a.fx.off&&(e=0),"string"==typeof d)w[k]=d,w[l]=e+"s",w[n]=q+"s",w[m]=o||"linear",z=a.fx.animationEnd;else{u=[];for(r in d)s.test(r)?x+=r+"("+d[r]+") ":(w[r]=d[r],u.push(c(r)));x&&(w[f]=x,u.push(f)),e>0&&"object"==typeof d&&(w[g]=u.join(", "),w[h]=e+"s",w[j]=q+"s",w[i]=o||"linear")}return v=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(z,v)}else a(this).unbind(z,v);A=!0,a(this).css(t),p&&p.call(this)},e>0&&(this.bind(z,v),setTimeout(function(){A||v.call(y)},1e3*e+25)),this.size()&&this.get(0).clientLeft,this.css(w),0>=e&&setTimeout(function(){y.each(function(){v.call(this)})},0),this},r=null}(Zepto),define("$",function(){}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("_",function(){}),function(){{var a,b=this,c=b.Backbone,d=[],e=(d.push,d.slice);d.splice}a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="1.0.0";var f=b._;f||"undefined"==typeof require||(f=require("underscore")),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var g=a.Events={on:function(a,b,c){if(!i(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!i(this,"once",a,[b,c])||!b)return this;var d=this,e=f.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,g,h,j,k,l,m;if(!this._events||!i(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(h=a?[a]:f.keys(this._events),j=0,k=h.length;k>j;j++)if(a=h[j],g=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=g.length;m>l;l++)e=g[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=e.call(arguments,1);if(!i(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&j(c,b),d&&j(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},h=/\s+/,i=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(h.test(c)){for(var f=c.split(h),g=0,i=f.length;i>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},j=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},k={listenTo:"on",listenToOnce:"once"};f.each(k,function(a,b){g[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),g=b._listenerId||(b._listenerId=f.uniqueId("l"));return e[g]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),g.bind=g.on,g.unbind=g.off,f.extend(a,g);var l=a.View=function(a){this.cid=f.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},m=/^(\S+)\s*(.*)$/,n=["model","collection","el","id","attributes","className","tagName","events"];f.extend(l.prototype,g,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&&this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=f.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(f.isFunction(c)||(c=this[a[b]]),c){var d=b.match(m),e=d[1],g=d[2];c=f.bind(c,this),e+=".delegateEvents"+this.cid,""===g?this.$el.on(e,c):this.$el.on(e,g,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=f.extend({},f.result(this,"options"),a)),f.extend(this,f.pick(a,n)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(f.result(this,"el"),!1);else{var b=f.extend({},f.result(this,"attributes"));this.id&&(b.id=f.result(this,"id")),this.className&&(b["class"]=f.result(this,"className"));var c=a.$("<"+f.result(this,"tagName")+">").attr(b);this.setElement(c,!1)}}});var o=function(a,b){var c,d=this;c=a&&f.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},f.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&f.extend(c.prototype,a),c.__super__=d.prototype,c};l.extend=o}.call(this),define("B",function(){}),function(a){function b(a){if(a.targetTouches.length>1)return!0;if(q=a.target,x){var b=window.getSelection();if(b.rangeCount&&!b.isCollapsed)return!0;if(a.targetTouches[0].identifier===y)return event.preventDefault(),!1;y=a.targetTouches[0].identifier}return m=!0,n=a.timeStamp,r=a.targetTouches[0].pageX,s=a.targetTouches[0].pageY,a.timeStamp-o<0&&(o=a.timeStamp),a.timeStamp-o<200&&a.preventDefault(),!0}function c(a){return m?(t=a.changedTouches[0].pageX,u=a.changedTouches[0].pageY,(Math.abs(t-r)>v||Math.abs(u-s)>v)&&(q=null,m=!1),!0):!0}function d(b){if(!m)return!0;if(b.timeStamp-o<200)return p=!0,!0;o=b.timeStamp,m=!1;var c=q.tagName.toLowerCase();if("label"==c){var d=j(q);if(d){var e=a(d);if("checkbox"==e.attr("type")||"radio"==e.attr("type")?e.attr("checked")?e.removeAttr("checked"):e.attr("checked","checked"):a(d).focus(),w)return!1;q=d}}else if(i(q))return b.timeStamp-n>100?(q=null,!1):(z&&q.blur(),q.focus(),"select"!==c&&(q=null,b.preventDefault()),!1);return n=0,h(q)||(b.preventDefault(),k(q,b)),!1}function e(){m=!1,q=null}function f(a){return q?a.touchEvent?!0:a.cancelable&&(!h(q)||p)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0}function g(a){if(m)return m=!1,q=null,!0;if("submit"===a.target.type&&0===a.detail)return!0;var b=f(a);return b||(q=null),b}function h(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(a.disabled)return!0;break;case"video":return!0}return/\bneedclick\b/.test(a.className)}function i(a){switch(a.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedfocus\b/.test(a.className)}}function j(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")}function k(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.touchEvent=!0,a.dispatchEvent(c)}function l(){return"undefined"==typeof window.ontouchstart?!1:!0}var m=!1,n=0,o=0,p=!1,q=null,r=0,s=0,t=0,u=0,v=4,w=navigator.userAgent.indexOf("Android")>0,x=/iP(ad|hone|od)/.test(navigator.userAgent),y=0,z=x&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);a.needFocus=i,a.bindFastClick=function(){return l()?void a(document).ready(function(){w&&(document.addEventListener("mouseover",f,!0),document.addEventListener("mousedown",f,!0),document.addEventListener("mouseup",f,!0)),document.addEventListener("click",g,!0),a(document).on("touchstart",b).on("touchmove",c).on("touchend",d).on("touchcancel",e)}):!0},a.unbindFastClick=function(){return l()?(w&&(document.removeEventListener("mouseover",f,!0),document.removeEventListener("mousedown",f,!0),document.removeEventListener("mouseup",f,!0)),document.removeEventListener("click",g,!0),void a(document).off("touchstart",b).off("touchmove",c).off("touchend",d).off("touchcancel",e)):!0}}($),define("F",function(){}),function(a,b,c){if(!a.JSON||!a.JSON.parse||!a.JSON.stringify||"undefined"==typeof localStorage)return 0;if(!a.$_bf||!0!==a.$_bf.loaded)try{var d=b.documentElement,e=function(){},f={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error","[object Object]":"object"},g=1,h=f.toString,i=/\$\{(\w+)\}/g,j=/((test[a-z]?|dev|uat|ui|local)\.sh\.(ctrip|huixuan)travel)|(qa\.nt\.ctripcorp)/i,k="",l="",m="",n="",o="",p="",q=2,r=!1;a.$_bf=a.$_bf||{},a.$_bf.version="1.1.0",a.$_bf.loaded=!0;var s=function(){var d=navigator,e=screen.colorDepth+"-bit";p=(d.language||d.browserLanguage||"").toLowerCase();var g={version:"1.1.0",readyMax:30,isReady:!1,enter:(new Date).getTime(),watchdog:function(){},now:Date.now||function(){return(new Date).getTime()},toint:function(a){return parseInt(a,10)||0},plus:function(a){return g.toint(a)+1},type:function(a){return f[typeof a]||f[h.call(a)]||(a?"object":"null")},isArray:function(a){return"array"==g.type(a)},isFunction:function(a){return"function"==g.type(a)},isEmpty:function(a){return a===c||"-"==a||""==a},getRand:function(){return(""+Math.random()).slice(-8)},hash:function(a){var b,c=1,d=0;if(!g.isEmpty(a)){for(c=0,b=a.length-1;b>=0;b--)d=a.charCodeAt(b),c=(c<<6&268435455)+d+(d<<14),d=266338304&c,c=0!=d?c^d>>21:c;return c}},getHash:function(){var a=[d.appName,d.appVersion,d.platform,d.userAgent,screen.width+screen.height,e,b.cookie?b.cookie:"",l].join("");return g.hash(a)},$:function(a){return"string"!=typeof a?!1:b.getElementById(a)},$v:function(a){return(a=g.$(a))&&a.value||""},send:function(a,b){if("string"!=typeof a)return!1;var c=m+"/bf.gif?",d=new Image;return d.onload=function(){d=d.onload=d.onerror=null,b&&g.isFunction(b)&&b(1)},d.onerror=function(){d=d.onload=d.onerror=null,b&&g.isFunction(b)&&b(0)},d.src=c+a+"&rd="+s.now()+"&jv=1.1.0",!0},decode:function(a){return decodeURIComponent(a)},encode:function(a){return encodeURIComponent(a)},getCookie:function(a,c,d){return(a=b.cookie.match(RegExp("(^| )"+a+"=([^;]*)(;|$)")))?d?g.decode(a[2]):a[2]:c||""},getCookieObj:function(a,b){var c,d={__k:a},e=[];if(e=g.getCookie(a,"",b))for(var e=e.split("&")||[],f=0;f<e.length;f++)c=e[f].split("="),1<c.length&&(d[c[0]]=c[1]);return d},setCookie:function(a,c,d){var e=k?";domain="+k:"",f="";d>=0&&(f=";expires="+new Date(g.now()+d).toUTCString()),b.cookie=a+"="+g.encode(c)+e+";path=/"+f},getItem:function(a,b){var c=localStorage.getItem(a)||"";if(c&&b)try{c=JSON.parse(c)}catch(d){c=""}return c},setItem:function(a,b){"object"==typeof b&&(b=JSON.stringify(b)),"string"==typeof b&&localStorage.setItem(a,b)},extend:function(){var a,b,d,e=arguments[0]||{},f=1,g=arguments.length;for(g===f&&(e=this,--f);g>f;f++)if(null!=(d=arguments[f]))for(b in d)a=d[b],e!==a&&a!==c&&(e[b]=a);return e},uniqueID:function(){return g.getRand()^2147483647&g.getHash()},grab:function(a,b){var c,d={};switch(b=b||{},d.v=b.v||"",d.w=b.w||"default",d.l=b.l||0,d.t=b.t||"string",d.w){case"input":c=g.$v(a);break;case"cookie":c=g.getCookie(a,d.v);break;case"function":c=g.isFunction(d.v)?d.v():"";break;default:c=d.v}switch(d.t){case"number":return g.toint(c);case"boolean":return!!c;default:return d.l?String(c).substring(0,d.l):c}},getTagIndex:function(a){var b=0;if(a.parentNode)for(var c=a.parentNode.firstChild;c&&c!=a;)1==c.nodeType&&c.tagName==a.tagName&&b++,c=c.nextSibling;return b>0?"["+ ++b+"]":""},getXpath:function(a){for(var b,c=[],d=0;a&&9!=a.nodeType;){var e=a.nodeName+g.getTagIndex(a)+(a.id?"[@id='"+a.id+"']":"");(b=a.getAttribute("block"))&&(e+="[@block='"+b+"']"),c[d++]=e,a=a.parentNode}return c.reverse().join("/")},initDomin:function(a){if(a=a||location.hostname,/^(\d|\.)+$/.test(a))return a;var b="",c=a.split(".").reverse(),b=c[1]+"."+c[0];return/com\.\w{2,}$/i.test(a)&&(b=c[2]+"."+b),b},initEnv:function(a){var b="file:"==o?"http:":o;m=!0===r?"http://localhost":"dev"==a?b+"//10.3.6.192:8086":"test"==a?b+"//ubt.uat.qa.nt.ctripcorp.com":"offline"==a?b+"//ubt.sh.ctriptravel.com":"uat"==a||j.test(n)?b+"//ubt.uat.qa.nt.ctripcorp.com":b+"//s.c-ctrip.com"},init:function(){var c=a.location||b.location,d=c.hostname;o=c.protocol,k=g.initDomin(d),n=c.href,g.initEnv("string"==typeof a.$_bf.env?a.$_bf.env:"online"),c="";try{c=b&&b.referrer}catch(e){}if(""==c&&a.opener)try{c=a.opener.location.href}catch(f){}l=c}};return g.init(),g}();!function(a){function b(a){var b=0,c=[],d=0;this.n=function(){if(0==d){if(b>=a.length)return null;var e=a.charCodeAt(b++);if(127>=e)return e;if(2047>=e)return c[1]=128|63&e,d=1,192|e>>6&31;if(e>=55296&&57343>=e)throw"unsupported char code.";return c[0]=128|e>>6&63,c[1]=128|63&e,d=2,224|e>>12&15}return c[c.length-d--]}}function c(a){var b=new function(a){for(var b,c=[],d=-1;null!=(b=a.n());)if(0==b[0])(-1==d||255==c[d])&&(c.push(128),d=c.length-1),c.push(b[1]),c[d]++;else{d=-1,c.push(b[0]);var e=b[1];if(127>=e)c.push(e);else{for(b=[];e>0;)b.push(127&e),e>>=7;for(e=b.length-1;e>=0;e--)c.push(128|b[e]);c[c.length-1]&=127}}d=0,this.n=function(){return d>=c.length?null:c[d++]}}(new function(a){function b(a,b){for(var c=0,d=0;g>d;d++)c=131*c+a[b+d];return c}for(var c,d,h,i=[],j=[],k=[],l=0;null!=(c=a.n());)k.push(c);this.n=function(){if(l<k.length-g+1){for(var a=b(k,l),c=h=d=0;c<j.length;c++)if(a==j[c]){var m,n;
for(m=c,n=l;m<i.length&&n<k.length&&!(i[m]!=k[n]||n-l>=f);m++,n++);m-c>=h&&m-c>=g&&(h=m-c,d=c)}return 0==h?(a=[0,k[l]],c=k[l++],i.push(c),i.length>e&&(i.shift(),j.shift()),i.length>=g&&(c=i.length-g,j[c]=b(i,c)),a):(l+=h,[h,i.length-(d+h)])}return l<k.length?[0,k[l++]]:void 0}}(a));this.n=function(){return b.n()}}function d(a){var b=[],c=0;this.n=function(){if(c>0)return b[4-c--];var d=[a.n(),a.n(),a.n()];return null==d[0]?null:(b[0]=h.charAt(d[0]>>2),b[1]=h.charAt(null==d[1]?d[0]<<4&63:63&(d[0]<<4|d[1]>>4)),b[2]=null==d[1]?"~":h.charAt(null==d[2]?d[1]<<2&63:63&(d[1]<<2|d[2]>>6)),b[3]=null==d[2]?"~":h.charAt(63&d[2]),c=3,b[0])}}var e=1024,f=63,g=3,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";a.compress=function(a){a=new b(a),a=new c(a),a=new d(a);for(var e,f=[];null!=(e=a.n());)f[f.length]=e;return f.join("")}}(s);var t=function(a,b){function c(){d.queueCheck(!0,"useraction"),d.queueCheck(!0,"matrix"),d.status.destroyed&&d.status.pv||setTimeout(c,5e3)}this.status={destroyed:!1,isnewvid:0,islogin:0,pvready:!1,pv:!1,ps:!1},this.data={orderid:"",abtest:"",pid:0,vid:"",sid:0,pvid:0,tid:"",ppv:0,ppi:0},this.queue={},this.init(a,b),this.initUBT();var d=this;c()};t.prototype={constructor:t,init:function(a,b){"object"==typeof a&&("undefined"!=typeof a.page_id&&(this.data.pid=s.toint(a.page_id)),"string"==typeof a.url&&(n=a.url),("string"==typeof a.orderid||"number"==typeof a.orderid)&&(this.data.orderid=a.orderid),"string"==typeof a.refer&&(l=a.refer),a.tid&&(this.data.tid=(""+a.tid).substring(0,30))),this.pvcallback=s.isFunction(b)?b:e},initUBT:function(){var a,b=0,c=0,d=0,d=0,e=s.getItem("CTRIP_UBT_M",!0);e&&e.vid&&e.create?(a=e.vid,b=e.sid,c=s.plus(e.pvid),d=e.sid_ts,18e5<s.now()-d?(b=s.plus(b),this.data.ppi=0,this.data.ppv=0):(this.data.ppi=e.pid||0,this.data.ppv=e.pvid||0),d=e.create):((c=this.readOldBfa())&&6<c.length?(a=c[1]+"."+c[2],b=s.plus(c[6]),c=s.plus(c[7])):(this.status.isnewvid=1,a=s.enter+"."+s.uniqueID().toString(36),c=b=1),d=s.enter),this.data.vid=a,this.data.sid=b,this.data.pvid=c,this.data.ubt={pid:this.getPid(),vid:a,sid:b,pvid:c,sid_ts:s.now(),create:d},this.updateUBT()},updateUBT:function(a){"number"==typeof a&&(this.data.ubt.pid=a),s.setItem("CTRIP_UBT_M",this.data.ubt)},readOldBfa:function(){var a=s.getCookie("_bfa","",!0);if(a||(a=s.getItem("_bfa")),a&&(a=a.split("."),6<a.length)){try{localStorage.removeItem("_bfa"),localStorage.removeItem("_bfs"),localStorage.removeItem("_bfi")}catch(b){}return a}return!1},getPid:function(){return this.data.pid||(this.data.pid=s.toint(s.$v("page_id"))),this.data.pid},getABtest:function(){for(var a=s.$("ab_testing_tracker"),c=[],d="";a;)d+=a.value,c.push(a),a.removeAttribute("id"),a.removeAttribute("name"),a=s.$("ab_testing_tracker");for(a=0;a<c.length;a++)c[a].setAttribute("id","ab_testing_tracker");return c="",(c=b.location.hash)&&-1!==c.indexOf("abtest=")&&(d+=decodeURIComponent(c.replace(/.*(abtest=)/i,"").replace(/#.*/i,""))),d.substring(0,280)},get:function(a){if("string"!=typeof a)return"";switch(a){case"vid":case"sid":case"pvid":return this.data[a];case"islogin":case"isnewvid":return this.status[a];case"fullpv":return this.data.vid+"."+this.data.sid+"."+this.data.pvid}},getCommon:function(a){return a=[],a[0]=this.getPid(),a[1]=this.data.vid,a[2]=this.data.sid,a[3]=this.data.pvid,a[4]=this.data.tid,a[5]=this.getABtest(),a[6]="",a},getUinfo:function(){var a=this.getDatum(),b=[10];return b[1]=this.data.ppi,b[2]=this.data.ppv,b[3]=n,b[4]=screen.width,b[5]=screen.height,b[6]="",b[7]=p,b[8]=a.engine,b[9]=a.keyword,b[10]=l,b[11]=this.getABtest(),b[12]=this.status.isnewvid,b[13]=this.status.islogin,b[14]=a.user_id,b[15]=a.user_grade,b[16]=a.corpid,b[17]=a.start_city,b[18]=a.alliance_id,b[19]=a.alliance_sid,b[20]=a.alliance_ouid,b[21]=this.data.orderid,b[22]=a.duid,b[23]=a.zdata,b[24]=a.callid,b[25]=a.bid,b[26]=s.getItem("GUID"),b[27]=s.getItem("SOURCEID"),b[28]=a.appinfo,b},getDatum:function(){if(this.data.business)return this.data.business;var a=s.getCookieObj("Session"),b=s.getCookieObj("CtripUserInfo"),c=s.getCookieObj("StartCity_Pkg"),d=s.getCookieObj("Union"),a={engine:a&&a.SmartLinkCode||"",keyword:a&&a.SmartLinkQuary||"",start_city:c&&c.PkgStartCity||"",alliance_id:d&&d.AllianceID?d.AllianceID:"",alliance_sid:d&&d.SID?d.SID:"",alliance_ouid:d&&d.OUID?d.OUID:"",user_id:s.getCookie("login_uid",""),user_grade:b&&b.VipGrade||"",corpid:s.getCookie("corpid",""),duid:b&&b.U||"",zdata:s.getCookie("zdatactrip",""),callid:s.$v("bf_ubt_tl_callid")||"",bid:""};try{if(!a.alliance_id){var e=s.getItem("UNION",!0);e&&e.data&&(e.st||e.timeout)&&(b=0,(b=new Date(e.st?e.st:e.timeout.replace(/-/g,"/")))&&b>=e.enter&&(a.alliance_id=d.AllianceID||d.ALLIANCEID||"",a.alliance_sid=d.SID||"",a.alliance_ouid=d.OUID||""))}}catch(f){}if(!a.user_id&&!a.duid)try{var g=s.getItem("USER",!0);if(g&&g.value){var h=g.value;a.user_id=h.LoginName||h.UserID||"",a.user_grade=h.VipGrade||""}}catch(i){}return(a.duid||a.user_id&&a.user_grade)&&(this.status.islogin=1),this.data.orderid||(this.data.orderid=s.$v("bf_ubt_orderid")),this.data.tid||(this.data.tid=s.$v("CorrelationId")),d=s.getItem("APPINFO",!0),a.appinfo="object"==typeof d?'{"version":'+(d.version||"")+',"platform":'+(d.platform||"")+"}":"",this.data.business=a},sendPV:function(){if(this.status.pvready)return!1;try{this.getDatum();var a={c:this.getCommon(!0),d:{uinfo:this.getUinfo()}},b="ac=g&d="+s.encode(JSON.stringify(a)),c=this;s.send(b,function(a){if(a){if(c.status.pv=!0,c.sendPS(),c.pvcallback(a),a=c.queue["default"])for(var b=0;b<a.length;b++){var d=a[b],e=c.dataHandler(d);e&&s.send(e,d.callback)}}else 0<--q&&c.sendPV()}),this.updateUBT(this.getPid()),this.status.pvready=!0}catch(d){}},getPS:function(){for(var b="navigationStart redirectStart unloadEventStart unloadEventEnd redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),c=a.performance.timing,d=[6],e=0;e<b.length;e++)d.push(c[b[e]]);return d.push(a.performance.navigation.type||0),d.push(a.performance.navigation.redirectCount||0),d},sendPS:function(){function b(){if(a.performance.timing.loadEventEnd){var e={c:d.getCommon(),d:{ps:d.getPS()}},e="ac=g&d="+s.encode(JSON.stringify(e));return s.send(e),d.status.ps=!0}300>c&&(c++,setTimeout(b,1e3))}if(a.performance&&!this.status.ps){var c=0,d=this;try{b()}catch(e){}}},replaceParam:function(a){var b={duid:this.getDatum().duid,page_id:this.getPid(),is_login:this.status.islogin};return a.replace(i,function(a,c){return c in b?b[c]:a})},dataHandler:function(a){if("string"==typeof a)return a;if("object"==typeof a){if(a.c&&a.d)return a={c:this.getCommon(),d:a.d},"ac=g&d="+s.encode(JSON.stringify(a));if(a.k&&a.v){var b=s.encode(this.replaceParam(a.v));return"ac=tl&pi="+this.getPid()+"&key="+a.k+"&val="+b+"&pv="+this.get("fullpv")+"&v=6"}}},sendData:function(a){if(this.status.pv){var b=this.dataHandler(a);b&&s.send(b,a.callback)}else this.queuePush("default",a)},queuePush:function(a,b){this.queue[a]||(this.queue[a]=[]),this.queue[a].push(b),this.queueCheck(!1,a)},queueCheck:function(a,b){if(!this.status.pv||"default"==b)return!1;var c=this.queue[b];if(c){var d=c.length;(d>5||a&&d>0)&&(c=c.splice(0,5),c=[[1,b],this.getCommon(),c],this.queueSend(c))}},queueSend:function(a){var b="";try{b=s.compress(JSON.stringify(a))}catch(c){}b&&s.send("ac=a&d="+b)},destroy:function(){this.queueCheck(!0,"useraction"),this.queueCheck(!0,"matrix"),this.status.destroyed=!0},ready:function(){s.isReady&&this.sendPV()}};var u=new t;!function(){var b=!1,c={_setDebug:function(a){a&&(r=!0,m="http://localhost")},_setEnv:function(a){"string"==typeof a&&s.initEnv(a)},_getFullPV:function(a){var b=u.get("fullpv");return a&&s.isFunction(a)&&a(b),b},_unload:function(){("undefined"!=typeof $&&$.bindFastClick||"object"==typeof Lizard)&&1==g?g=0:(u.status.pvready||u.sendPV(),u.destroy(),u=new t)},_asynRefresh:function(a,b){u.status.pvready?(u.destroy(),u=new t(a||{},b)):u.init(a,b),u.sendPV()},_tracklog:function(a,b,c){return b&&"string"==typeof b&&"string"==typeof a?void u.sendData({k:a,v:b,callback:c}):(s.isFunction(c)&&c(0),!1)},_trackError:function(a,c){if("object"!=typeof a)return!1;if(b)return b=!1;!0===a.skip&&(b=!0);for(var d="version message line file category framework time repeat islogin name column".split(" "),e=[7,"",0,"","","",s.now()-s.enter,1,u.get("islogin"),"",0],f=1,g=d.length;g>f;f++){var h=d[f];if(a[h]){var i=a[h]+"";switch(h){case"message":case"file":i=i.substring(0,500);break;case"category":case"framework":case"name":i=i.substring(0,100);break;case"time":i=parseInt(i,10);break;case"column":i=parseInt(i,10);break;default:i=parseInt(i,10)||0}e[f]=i}}e.push("trace"),u.sendData({c:!0,d:{error:e},callback:c})},_trackUserBlock:function(a,b){if("object"!=typeof a)return!1;var c=[6];c[1]=u.get("islogin"),c[2]=String(a.message||"").substring(0,300),c[3]=String(a.value||"").substring(0,300),c[4]=String(a.type||"").substring(0,50),c[5]=String(a.dom||"").substring(0,100),c[6]=String(a.form||"").substring(0,100),c[7]=s.toint(a.count||0,10),u.sendData({c:!0,d:{ub:c},callback:b})},_trackMatrix:function(a,b,c,d,e){d="number"==typeof d?d:s.now();var f=0;"string"==typeof a&&"object"==typeof b&&"number"==typeof c&&(u.queuePush("matrix",{name:a,tags:b,value:c,ts:d}),f=1),s.isFunction(e)&&e(f)},push:function(a){var b;return s.isArray&&(b=a[0],"_"==b[0]&&s.isFunction(c[b]))?c[b].apply(c,a.slice(1)):!1}};if(s.isArray(a.__bfi)){var d=a.__bfi,e=d.length;if(e>0)for(var f=0;e>f;f++)c.push(d[f])}else a.__bfi=[];a.__bfi.push=c.push,s.extend(a.$_bf,{_getFullPV:c._getFullPV,tracklog:c._tracklog,trackError:c._trackError,asynRefresh:c._asynRefresh})}();var v=function(){var a=s.$v("page_id");return"wait"!=a&&(a=s.toint(a),0!=a?s.isReady=!0:"complete"==b.readyState?s.isReady=!0:0>=s.readyMax&&(s.isReady=!0)),!s.isReady&&0<s.readyMax?(s.readyMax--,void setTimeout(v,500)):u.ready()};if(v(),b.addEventListener("click",function(a){var c=a.target||a.srcElement,e=c.nodeName.toUpperCase();if(c.getBoundingClientRect){var f=c.getBoundingClientRect(),g="",h=Math.max(d.scrollLeft,b.body.scrollLeft),i=Math.max(d.scrollTop,b.body.scrollTop),j=a.pageX||a.clientX+h;a=a.pageY||a.clientY+i;var k=parseInt((d.clientWidth||b.body.clientWidth)/2,10);"SELECT"==e&&0>a-f.top-i?(g+="[@x='"+parseInt(j+f.left+h-k,10)+"'][@y='"+parseInt(a+f.top,10)+"']",g=g+("[@rx='"+j+"']")+("[@ry='"+(a-i)+"']")):(g+="[@x='"+(j-k)+"'][@y='"+a+"']",g+="[@rx='"+parseInt(j-f.left-h,10)+"']",g+="[@ry='"+parseInt(a-f.top-i,10)+"']"),u.queuePush("useraction",{action:"click",xpath:s.getXpath(c)+g,ts:s.now()})}}),null===a.onerror){var w={};a.onerror=function(){try{var a=arguments,b={message:""+a[0],file:""+a[1],category:"inner-error",framework:"normal",time:s.now()-s.enter,line:a[2],column:a[3],repeat:1},c="err_"+s.hash(b.message+b.file+b.line);w[c]||(__bfi.push(["_trackError",b]),w[c]=!0)}catch(d){}}}}catch(x){}}(window,document),define("mubt",function(){}),require.config({shim:{$:{exports:"zepto"},_:{exports:"_"},B:{deps:["_","$"],exports:"Backbone"},common:{deps:["libs"]}},paths:{$:"res/libs/zepto",_:"res/libs/underscore",B:"res/libs/backbone",libs:"libs_r",common:"app/common"}}),require(["$","_","B"],function(){}),define("libs",function(){}),define("text",["module"],function(a){var b,c,d,e,f=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],g=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,h=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i="undefined"!=typeof location&&location.href,j=i&&location.protocol&&location.protocol.replace(/\:/,""),k=i&&location.hostname,l=i&&(location.port||void 0),m=[],n=a.config&&a.config()||{};return b={version:"2.0.5+",strip:function(a){if(a){a=a.replace(g,"");var b=a.match(h);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:n.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;3>b;b+=1){c=f[b];try{a=new ActiveXObject(c)}catch(d){}if(a){f=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.indexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return-1!==f&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a,d=c||b,f=d.indexOf("!"),-1!==f&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,e){var f,g,h,i=b.xdRegExp.exec(a);return i?(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e)):!0},finishLoad:function(a,c,d,e){d=c?b.strip(d):d,n.isBuild&&(m[a]=d),e(d)},load:function(a,c,d,e){if(e.isBuild&&!e.inlineText)return void d();n.isBuild=e.isBuild;var f=b.parseName(a),g=f.moduleName+(f.ext?"."+f.ext:""),h=c.toUrl(g),m=n.useXhr||b.useXhr;!i||m(h,j,k,l)?b.get(h,function(c){b.finishLoad(a,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([g],function(a){b.finishLoad(f.moduleName+"."+f.ext,f.strip,a,d)})},write:function(a,c,d){if(m.hasOwnProperty(c)){var e=b.jsEscape(m[c]);d.asModule(a+"!"+c,"define(function () { return '"+e+"';});\n")}},writeFile:function(a,c,d,e,f){var g=b.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";b.load(i,d,function(){var c=function(a){return e(j,a)};c.asModule=function(a,b){return e.asModule(a,j,b)},b.write(a,i,c,f)},f)}},"node"===n.env||!n.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(c=require.nodeRequire("fs"),b.get=function(a,b){var d=c.readFileSync(a,"utf8");0===d.indexOf("﻿")&&(d=d.substring(1)),b(d)}):"xhr"===n.env||!n.env&&b.createXhr()?b.get=function(a,c,d,e){var f,g=b.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);n.onXhr&&n.onXhr(g,a),g.onreadystatechange=function(){var b,e;4===g.readyState&&(b=g.status,b>399&&600>b?(e=new Error(a+" HTTP status: "+b),e.xhr=g,d(e)):c(g.responseText))},g.send(null)}:"rhino"===n.env||!n.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?b.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}:("xpconnect"===n.env||!n.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(d=Components.classes,e=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),b.get=function(a,b){var c,f,g={},h=new FileUtils.File(a);try{c=d["@mozilla.org/network/file-input-stream;1"].createInstance(e.nsIFileInputStream),c.init(h,1,0,!1),f=d["@mozilla.org/intl/converter-input-stream;1"].createInstance(e.nsIConverterInputStream),f.init(c,"utf-8",c.available(),e.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),f.readString(c.available(),g),f.close(),c.close(),b(g.value)}catch(i){throw new Error((h&&h.path||"")+": "+i)}}),b}),define("cCoreInherit",["libs"],function(){var a=[].slice,b=function(){};return b.Class=function(){function b(){this.__propertys__(),this.initialize.apply(this,arguments)}if(0==arguments.length||arguments.length>2)throw"参数错误";var c=null,d=a.call(arguments);"function"==typeof d[0]&&(c=d.shift()),d=d[0],b.superclass=c,b.subclasses=[];var e=function(){},f=d.__propertys__||function(){};if(c){c.prototype.__propertys__&&(e=c.prototype.__propertys__);var g=function(){};g.prototype=c.prototype,b.prototype=new g,c.subclasses.push(b)}var h=b.superclass&&b.superclass.prototype;for(var i in d){var j=d[i];if(h&&"function"==typeof j){var k=/^\s*function\s*\(([^\(\)]*?)\)\s*?\{/i.exec(j.toString())[1].replace(/\s/i,"").split(",");"$super"===k[0]&&h[i]&&(j=function(b,c){return function(){var d=this,e=[function(){return h[b].apply(d,arguments)}];return c.apply(this,e.concat(a.call(arguments)))}}(i,j))}b.prototype[i]=j}b.prototype.initialize||(b.prototype.initialize=function(){}),b.prototype.__propertys__=function(){e.call(this),f.call(this)};for(key in c)c.hasOwnProperty(key)&&"prototype"!==key&&"superclass"!==key&&(b[key]=c[key]);return b.prototype.constructor=b,b},b.extend=function(){var b=a.call(arguments),c=b.shift()||{};if(!c)return!1;for(var d=0,e=b.length;e>d;d++)if("object"==typeof b[d])for(var f in b[d])c[f]=b[d][f];return c},b.implement=function(a,b){if("function"!=typeof a)return!1;for(var c in b)a.prototype[c]=b[c];return a},b}),define("cUtilityHybrid",[],function(){var a={};return a.isInApp=function(){var a=window.navigator.userAgent;if(a.indexOf("CtripWireless")>-1)return!0;var b=window.localStorage.getItem("isInApp");if(b)return"1"==b?!0:!1;var c=window.localStorage.getItem("ISINAPP");return c?"1"==c?!0:!1:void 0},a.isInWeichat=function(){var a=window.navigator.userAgent;return a.indexOf("MicroMessenger")>-1?!0:!1},a.isPreProduction=function(){return window.localStorage.getItem("isPreProduction")},a.getAppSys=function(){var a=navigator.userAgent,b=/.+_(\w+)_CtripWireless_/,c=b.exec(a);return c&&c[1]?c[1].toLowerCase():null},a.isLite=function(){return"ctriplite"==this.getAppSys()},a.getSystemCode=function(){var a=navigator.userAgent,b=/.+_(\w+)_CtripWireless_/,c=b.exec(a);return c&&c[1]?c[1]:null},a}),define("cUtilityHash",["cCoreInherit"],function(a){var b=function(a,b){if(!b)return-1;if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(b[c]===a)return c;return-1},c={},d={};return d.__propertys__=function(){this.keys=[],this.values=[]},d.initialize=function(a){"object"!=typeof a&&(a={});for(var b in a)a.hasOwnProperty(b)&&(this.keys.push(b),this.values.push(a[b]))},d.length=function(){return this.keys.length},d.getItem=function(a){var c=b(a,this.keys);return 0>c?null:this.values[c]},d.getKey=function(a){return this.keys[a]},d.index=function(a){return this.values[a]},d.push=function(a,c,d){if("object"!=typeof a||c){var e=b(a,this.keys);0>e||d?(d&&this.del(a),this.keys.push(a),this.values.push(c)):this.values[e]=c}else for(var f in a)a.hasOwnProperty(f)&&that.push(f,a[f],d);return this},d.add=function(a,b){return this.push(a,b)},d.del=function(a){var c=b(a,this.keys);return 0>c?this:(this.keys.splice(c,1),this.values.splice(c,1),this)},d.delByIndex=function(a){return 0>a?this:(this.keys.splice(a,1),this.values.splice(a,1),this)},d.pop=function(){return this.keys.length?(this.keys.pop(),this.values.pop()):null},d.indexOf=function(a){var c=b(a,this.values);return c>=0?this.keys[c]:-1},d.shift=function(){return this.keys.length?(this.keys.shift(),this.values.shift()):null},d.unshift=function(a,c,d){if("object"!=typeof a||c){var e=b(a,this.keys);0>e||d?(d&&this.del(a),this.keys.unshift(a),this.values.unshift(c)):this.values[e]=c}else for(var f in a)a.hasOwnProperty(f)&&this.unshift(f,a[f]);return this},d.slice=function(a,b){for(var c=this.keys.slice(a,b||null),d=this.values.slice(a,b||null),e={},f=0;f<c.length;f++)e[c[f]]=d[f];return e},d.splice=function(a,b){for(var c=this.keys.splice(a,b||null),d=this.values.splice(a,b||null),e={},f=0,g=c.length;g>f;f++)e[c[f]]=d[f];return e},d.filter=function(a){var b={};if("function"!=typeof a)return null;for(var c=0;c<this.keys.length;c++)a.call(this.values[c],this.values[c],this.keys[c])&&(b[this.keys[c]]=this.values[c]);return b},d.each=function(a){if("function"!=typeof a)return null;for(var b=0;b<this.keys.length;b++)a.call(this.values[b],this.values[b],this.keys[b],b)},d.valueOf=function(){for(var a={},b=0;b<this.keys.length;b++)a[this.keys[b]]=this.values[b];return a},d.sortBy=function(a){for(var b=_.sortBy(this.values,a),c=[],d=0;d<b.length;d++){var e=this.indexOf(b[d]);c[d]=e}this.values=b,this.keys=c},d.toString=function(){return"undefined"!=typeof JSON&&JSON.stringify?JSON.stringify(this.valueOf()):typeof this.values},c.Hash=new a.Class(d),c}),define("cUtilityServertime",["cUtilityHybrid"],function(a){var b={};return b.getServerDate=function(b){var c=new Date,d=function(a){return"function"==typeof b?b(a):a},e=function(){var a=window.localStorage.getItem("SERVERDATE");if(!a)return d(c);try{if(a=JSON.parse(a),a&&a.server&&a.local){var b=window.parseInt(a.server),e=window.parseInt(a.local),f=(new Date).getTime(),g=new Date(b+f-e);return d(g)}return d(c)}catch(h){return d(c)}},f=function(){if(location.pathname.match(/^\/?html5/i))return d(c);if("undefined"==typeof __SERVERDATE__||!__SERVERDATE__.server)return d(c);var a=new Date(__SERVERDATE__.server.valueOf()+((new Date).valueOf()-__SERVERDATE__.local.valueOf()));return d(a)};return a.isInApp()?e():f()},b}),define("cUtilityDate",["cCoreInherit","cUtilityServertime"],function(a,b){var c={};return c.Date=new a.Class({initialize:function(a){a=a||new Date,this.date=new Date(a)},addDay:function(a){return a=a||0,this.date.setDate(this.date.getDate()+a),this},addMonth:function(a){return a=a||0,this.date.setMonth(this.date.getMonth()+a),this},addHours:function(a){return a=a||0,this.date.setHours(this.date.getHours()+a),this},addMinutes:function(a){return a=a||0,this.date.setMinutes(this.date.getMinutes()+a),this},addSeconds:function(a){return a=a||0,this.date.setSeconds(this.date.getSeconds()+a),this},addYear:function(a){return a=a||0,this.date.setYear(this.date.getFullYear()+a),this},setHours:function(){return this.date.setHours.apply(this.date,arguments),this},valueOf:function(){return this.date},getTime:function(){return this.date.valueOf()},toString:function(){return this.date.toString()},format:function(a){"string"!=typeof a&&(a="");for(var b in this._MAPS)a=this._MAPS[b].call(this,a,this.date,b);return a},diffMonth:function(a){var b=parseInt(this.format("Y"),10),d=parseInt(this.format("m"),10),e=new c.Date(a),f=parseInt(e.format("Y"),10),g=parseInt(e.format("m"),10);return 12*(f-b)+(g-d)},_DAY1:["周日","周一","周二","周三","周四","周五","周六"],_DAY2:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],_MAPS:{d:function(a,b,c){var d=b.getDate().toString();return d.length<2&&(d="0"+d),a.replace(new RegExp(c,"mg"),d)},j:function(a,b,c){return a.replace(new RegExp(c,"mg"),b.getDate())},N:function(a,b,c){var d=b.getDay();return 0===d&&(d=7),a.replace(new RegExp(c,"mg"),d)},w:function(a,b,c){var d=b.getDay(),e=this._DAY1[d];return a.replace(new RegExp(c,"mg"),e)},W:function(a,b,c){var d=b.getDay(),e=this._DAY2[d];return a.replace(new RegExp(c,"mg"),e)},m:function(a,b,c){var d=(b.getMonth()+1).toString();return d.length<2&&(d="0"+d),a.replace(new RegExp(c,"mg"),d)},n:function(a,b,c){return a.replace(c,b.getMonth()+1)},Y:function(a,b,c){return a.replace(new RegExp(c,"mg"),b.getFullYear())},y:function(a,b,c){return a.replace(new RegExp(c,"mg"),b.getYear())},g:function(a,b,c){var d=b.getHours();return d>=12&&(d-=12),a.replace(new RegExp(c,"mg"),d)},G:function(a,b,c){return a.replace(new RegExp(c,"mg"),b.getHours())},h:function(a,b,c){var d=b.getHours();return d>=12&&(d-=12),d+="",d.length<2&&(d="0"+d),a.replace(new RegExp(c,"mg"),d)},H:function(a,b,c){var d=b.getHours().toString();return d.length<2&&(d="0"+d),a.replace(new RegExp(c,"mg"),d)},i:function(a,b,c){var d=b.getMinutes().toString();return d.length<2&&(d="0"+d),a.replace(new RegExp(c,"mg"),d)},s:function(a,b,c){var d=b.getSeconds().toString();return d.length<2&&(d="0"+d),a.replace(new RegExp(c,"mg"),d)},I:function(a,b,c){var d=b.getMinutes().toString();return a.replace(new RegExp(c,"mg"),d)},S:function(a,b,c){var d=b.getSeconds().toString();return a.replace(new RegExp(c,"mg"),d)},D:function(a,c,d){var e=b.getServerDate();e.setHours(0,0,0,0),c=new Date(c.valueOf()),c.setHours(0,0,0,0);var f=864e5,g="",h=c-e;return h>=0&&(f>h?g="今天":2*f>h?g="明天":3*f>h&&(g="后天")),a.replace(new RegExp(d,"mg"),g)}}}),a.extend(c.Date,{parse:function(a,b){if("undefined"==typeof a)return new Date;if("string"==typeof a){a=a||"";var d=/^(\d{4})\-?(\d{1,2})\-?(\d{1,2})/i;a.match(d)&&(a=a.replace(d,"$2/$3/$1"));var e=Date.parse(a),f=new Date(e||new Date);return b?f:new c.Date(f)}return"number"==typeof a?new Date(a):new Date},getHM:function(a){var b=this._getDate(a),c=b.getHours(),d=b.getMinutes();return(10>c?"0"+c:""+c)+":"+(10>d?"0"+d:""+d)},getIntervalDay:function(a,b){var c=this._getDate(a),d=this._getDate(b);return c.setHours(0,0,0,0),d.setHours(0,0,0,0),parseInt((d-c)/864e5)},m2H:function(a){var b=Math.floor(a/60),c=a%60;return(b>0?b+"小时":"")+(c>0?c+"分钟":"")},_getDate:function(a){var b=c.Date.parse(a,!0),d=new Date;return d.setTime(b),d},format:function(a,b){return new c.Date(a).format(b)},weekday:function(a){var b=["周日","周一","周二","周三","周四","周五","周六"],c=new Date(a);return b[c.getDay()]},diffMonth:function(a,b){return a=new c.Date(a),a.diffMonth(b)}}),c.Date}),define("Validate",["$"],function(){var a={};_toString=Object.prototype.toString,$.each("String Function Boolean RegExp Number Date Object Null Undefined".split(" "),function(b,c){var d;switch(c){case"Null":d=function(a){return null===a};break;case"Undefined":d=function(a){return void 0===a};break;default:d=function(a){return new RegExp(c+"]","i").test(_toString.call(a))}}a["is"+c]=d});var b={isEmail:function(a){var b=/^(?:\w+\.?)*\w+@(?:\w+\.?)*\w+$/;return b.test(a)},isPassword:function(a){var b=/^[a-zA-Z0-9]{6,20}$/;return b.test(a)},isMobile:function(a){var b=/^(1[3-8][0-9])\d{8}$/;return b.test(a)},isChinese:function(a){var b=/^[\u4e00-\u9fff]{0,}$/;return b.test(a)},isEnglish:function(a){var b=/^[A-Za-z]+$/;return b.test(a)},isZip:function(a){var b=/^\d{6}$/;return b.test(a)},isDate:function(a){var b=/^(([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})(((0[13578]|1[02])(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)(0[1-9]|[12][0-9]|30))|(02(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))0229)$/;return b.test(a)?!0:!1},isNum:function(a){var b=/^\d+$/;return b.test(a)},isCellPhone:function(a){var b=/(^0{0,1}1[3|4|5|6|7|8][0-9]{9}$)/;return b.test(a)},isIDCardNo:function(a){var b=/^[A-Za-z0-9]+$/;return b.test(a)},isEnglishAndSpace:function(a){var b=/^([a-zA-Z ]+|[\u4e00-\u9fa5]+)$/;return b.test(a)},isTraditional:function(a){for(var b="萬與醜專業叢東絲兩嚴喪個爿豐臨為麗舉麼義烏樂喬習鄉書買亂爭於虧雲亙亞產畝親褻嚲億僅從侖倉儀們價眾優夥會傴傘偉傳傷倀倫傖偽佇體餘傭僉俠侶僥偵側僑儈儕儂俁儔儼倆儷儉債傾傯僂僨償儻儐儲儺兒兌兗黨蘭關興茲養獸囅內岡冊寫軍農塚馮衝決況凍淨淒涼淩減湊凜幾鳳鳧憑凱擊氹鑿芻劃劉則剛創刪別剗剄劊劌剴劑剮劍剝劇勸辦務勱動勵勁勞勢勳勩勻匭匱區醫華協單賣盧鹵臥衛卻巹廠廳曆厲壓厭厙廁廂厴廈廚廄廝縣參靉靆雙發變敘疊葉號歎嘰籲後嚇呂嗎唚噸聽啟吳嘸囈嘔嚦唄員咼嗆嗚詠哢嚨嚀噝吒噅鹹呱響啞噠嘵嗶噦嘩噲嚌噥喲嘜嗊嘮啢嗩唕喚嘖嗇囀齧囉嘽嘯噴嘍嚳囁嗬噯噓嚶囑嚕劈囂謔團園囪圍圇國圖圓聖壙場壞塊堅壇壢壩塢墳墜壟壟壚壘墾堊墊埡墶壋塏堖塒塤堝墊垵塹墮壪牆壯聲殼壺壼處備複夠頭誇夾奪奩奐奮獎奧妝婦媽嫵嫗媯姍薑婁婭嬈嬌孌娛媧嫻嫿嬰嬋嬸媼嬡嬪嬙嬤孫學孿寧寶實寵審憲宮寬賓寢對尋導壽將爾塵堯尷屍盡層屭屜屆屬屢屨嶼歲豈嶇崗峴嶴嵐島嶺嶽崠巋嶨嶧峽嶢嶠崢巒嶗崍嶮嶄嶸嶔崳嶁脊巔鞏巰幣帥師幃帳簾幟帶幀幫幬幘幗冪襆幹並廣莊慶廬廡庫應廟龐廢廎廩開異棄張彌弳彎彈強歸當錄彠彥徹徑徠禦憶懺憂愾懷態慫憮慪悵愴憐總懟懌戀懇惡慟懨愷惻惱惲悅愨懸慳憫驚懼慘懲憊愜慚憚慣湣慍憤憒願懾憖懣懶懍戇戔戲戧戰戩戶紮撲扡執擴捫掃揚擾撫摶摳掄搶護報擔擬攏揀擁攔擰撥擇掛摯攣掗撾撻挾撓擋撟掙擠揮撏撈損撿換搗據撚擄摑擲撣摻摜摣攬撳攙擱摟攪攜攝攄擺搖擯攤攖撐攆擷擼攛擻攢敵斂數齋斕鬥斬斷無舊時曠暘曇晝曨顯晉曬曉曄暈暉暫曖劄術樸機殺雜權條來楊榪傑極構樅樞棗櫪梘棖槍楓梟櫃檸檉梔柵標棧櫛櫳棟櫨櫟欄樹棲樣欒棬椏橈楨檔榿橋樺檜槳樁夢檮棶檢欞槨櫝槧欏橢樓欖櫬櫚櫸檟檻檳櫧橫檣櫻櫫櫥櫓櫞簷檁歡歟歐殲歿殤殘殞殮殫殯毆毀轂畢斃氈毿氌氣氫氬氳彙漢汙湯洶遝溝沒灃漚瀝淪滄渢溈滬濔濘淚澩瀧瀘濼瀉潑澤涇潔灑窪浹淺漿澆湞溮濁測澮濟瀏滻渾滸濃潯濜塗湧濤澇淶漣潿渦溳渙滌潤澗漲澀澱淵淥漬瀆漸澠漁瀋滲溫遊灣濕潰濺漵漊潷滾滯灩灄滿瀅濾濫灤濱灘澦濫瀠瀟瀲濰潛瀦瀾瀨瀕灝滅燈靈災燦煬爐燉煒熗點煉熾爍爛烴燭煙煩燒燁燴燙燼熱煥燜燾煆溜愛爺牘犛牽犧犢強狀獷獁猶狽麅獮獰獨狹獅獪猙獄猻獫獵獼玀豬貓蝟獻獺璣璵瑒瑪瑋環現瑲璽瑉玨琺瓏璫琿璡璉瑣瓊瑤璦璿瓔瓚甕甌電畫暢疇癤療瘧癘瘍鬁瘡瘋皰屙癰痙癢瘂癆瘓癇癡癉瘮瘞瘺癟癱癮癭癩癬癲臒皚皺皸盞鹽監蓋盜盤瞘眥矓睜睞瞼瞞矚矯磯礬礦碭碼磚硨硯碸礪礱礫礎硜碩硤磽磑礄確鹼礙磧磣堿镟滾禮禕禰禎禱禍稟祿禪離禿稈種積稱穢穠穭稅穌穩穡窮竊竅窯竄窩窺竇窶豎競篤筍筆筧箋籠籩築篳篩簹箏籌簽簡籙簀篋籜籮簞簫簣簍籃籬籪籟糴類秈糶糲粵糞糧糝餱緊縶糸糾紆紅紂纖紇約級紈纊紀紉緯紜紘純紕紗綱納紝縱綸紛紙紋紡紵紖紐紓線紺絏紱練組紳細織終縐絆紼絀紹繹經紿綁絨結絝繞絰絎繪給絢絳絡絕絞統綆綃絹繡綌綏絛繼綈績緒綾緓續綺緋綽緔緄繩維綿綬繃綢綯綹綣綜綻綰綠綴緇緙緗緘緬纜緹緲緝縕繢緦綞緞緶線緱縋緩締縷編緡緣縉縛縟縝縫縗縞纏縭縊縑繽縹縵縲纓縮繆繅纈繚繕繒韁繾繰繯繳纘罌網羅罰罷羆羈羥羨翹翽翬耮耬聳恥聶聾職聹聯聵聰肅腸膚膁腎腫脹脅膽勝朧腖臚脛膠脈膾髒臍腦膿臠腳脫腡臉臘醃膕齶膩靦膃騰臏臢輿艤艦艙艫艱豔艸藝節羋薌蕪蘆蓯葦藶莧萇蒼苧蘇檾蘋莖蘢蔦塋煢繭荊薦薘莢蕘蓽蕎薈薺蕩榮葷滎犖熒蕁藎蓀蔭蕒葒葤藥蒞蓧萊蓮蒔萵薟獲蕕瑩鶯蓴蘀蘿螢營縈蕭薩蔥蕆蕢蔣蔞藍薊蘺蕷鎣驀薔蘞藺藹蘄蘊藪槁蘚虜慮虛蟲虯蟣雖蝦蠆蝕蟻螞蠶蠔蜆蠱蠣蟶蠻蟄蛺蟯螄蠐蛻蝸蠟蠅蟈蟬蠍螻蠑螿蟎蠨釁銜補襯袞襖嫋褘襪襲襏裝襠褌褳襝褲襇褸襤繈襴見觀覎規覓視覘覽覺覬覡覿覥覦覯覲覷觴觸觶讋譽謄訁計訂訃認譏訐訌討讓訕訖訓議訊記訒講諱謳詎訝訥許訛論訩訟諷設訪訣證詁訶評詛識詗詐訴診詆謅詞詘詔詖譯詒誆誄試詿詩詰詼誠誅詵話誕詬詮詭詢詣諍該詳詫諢詡譸誡誣語誚誤誥誘誨誑說誦誒請諸諏諾讀諑誹課諉諛誰諗調諂諒諄誶談誼謀諶諜謊諫諧謔謁謂諤諭諼讒諮諳諺諦謎諞諝謨讜謖謝謠謗諡謙謐謹謾謫譾謬譚譖譙讕譜譎讞譴譫讖穀豶貝貞負貟貢財責賢敗賬貨質販貪貧貶購貯貫貳賤賁貰貼貴貺貸貿費賀貽賊贄賈賄貲賃賂贓資賅贐賕賑賚賒賦賭齎贖賞賜贔賙賡賠賧賴賵贅賻賺賽賾贗讚贇贈贍贏贛赬趙趕趨趲躉躍蹌蹠躒踐躂蹺蹕躚躋踴躊蹤躓躑躡蹣躕躥躪躦軀車軋軌軒軑軔轉軛輪軟轟軲軻轤軸軹軼軤軫轢軺輕軾載輊轎輈輇輅較輒輔輛輦輩輝輥輞輬輟輜輳輻輯轀輸轡轅轄輾轆轍轔辭辯辮邊遼達遷過邁運還這進遠違連遲邇逕跡適選遜遞邐邏遺遙鄧鄺鄔郵鄒鄴鄰鬱郟鄶鄭鄆酈鄖鄲醞醱醬釅釃釀釋裏钜鑒鑾鏨釓釔針釘釗釙釕釷釺釧釤鈒釩釣鍆釹鍚釵鈃鈣鈈鈦鈍鈔鍾鈉鋇鋼鈑鈐鑰欽鈞鎢鉤鈧鈁鈥鈄鈕鈀鈺錢鉦鉗鈷缽鈳鉕鈽鈸鉞鑽鉬鉭鉀鈿鈾鐵鉑鈴鑠鉛鉚鈰鉉鉈鉍鈹鐸鉶銬銠鉺銪鋏鋣鐃銍鐺銅鋁銱銦鎧鍘銖銑鋌銩銛鏵銓鉿銚鉻銘錚銫鉸銥鏟銃鐋銨銀銣鑄鐒鋪鋙錸鋱鏈鏗銷鎖鋰鋥鋤鍋鋯鋨鏽銼鋝鋒鋅鋶鐦鐧銳銻鋃鋟鋦錒錆鍺錯錨錡錁錕錩錫錮鑼錘錐錦鍁錈錇錟錠鍵鋸錳錙鍥鍈鍇鏘鍶鍔鍤鍬鍾鍛鎪鍠鍰鎄鍍鎂鏤鎡鏌鎮鎛鎘鑷鐫鎳鎿鎦鎬鎊鎰鎔鏢鏜鏍鏰鏞鏡鏑鏃鏇鏐鐔钁鐐鏷鑥鐓鑭鐠鑹鏹鐙鑊鐳鐶鐲鐮鐿鑔鑣鑞鑲長門閂閃閆閈閉問闖閏闈閑閎間閔閌悶閘鬧閨聞闥閩閭闓閥閣閡閫鬮閱閬闍閾閹閶鬩閿閽閻閼闡闌闃闠闊闋闔闐闒闕闞闤隊陽陰陣階際陸隴陳陘陝隉隕險隨隱隸雋難雛讎靂霧霽黴靄靚靜靨韃鞽韉韝韋韌韍韓韙韞韜韻頁頂頃頇項順須頊頑顧頓頎頒頌頏預顱領頗頸頡頰頲頜潁熲頦頤頻頮頹頷頴穎顆題顒顎顓顏額顳顢顛顙顥纇顫顬顰顴風颺颭颮颯颶颸颼颻飀飄飆飆飛饗饜飣饑飥餳飩餼飪飫飭飯飲餞飾飽飼飿飴餌饒餉餄餎餃餏餅餑餖餓餘餒餕餜餛餡館餷饋餶餿饞饁饃餺餾饈饉饅饊饌饢馬馭馱馴馳驅馹駁驢駔駛駟駙駒騶駐駝駑駕驛駘驍罵駰驕驊駱駭駢驫驪騁驗騂駸駿騏騎騍騅騌驌驂騙騭騤騷騖驁騮騫騸驃騾驄驏驟驥驦驤髏髖髕鬢魘魎魚魛魢魷魨魯魴魺鮁鮃鯰鱸鮋鮓鮒鮊鮑鱟鮍鮐鮭鮚鮳鮪鮞鮦鰂鮜鱠鱭鮫鮮鮺鯗鱘鯁鱺鰱鰹鯉鰣鰷鯀鯊鯇鮶鯽鯒鯖鯪鯕鯫鯡鯤鯧鯝鯢鯰鯛鯨鯵鯴鯔鱝鰈鰏鱨鯷鰮鰃鰓鱷鰍鰒鰉鰁鱂鯿鰠鼇鰭鰨鰥鰩鰟鰜鰳鰾鱈鱉鰻鰵鱅鰼鱖鱔鱗鱒鱯鱤鱧鱣鳥鳩雞鳶鳴鳲鷗鴉鶬鴇鴆鴣鶇鸕鴨鴞鴦鴒鴟鴝鴛鴬鴕鷥鷙鴯鴰鵂鴴鵃鴿鸞鴻鵐鵓鸝鵑鵠鵝鵒鷳鵜鵡鵲鶓鵪鶤鵯鵬鵮鶉鶊鵷鷫鶘鶡鶚鶻鶿鶥鶩鷊鷂鶲鶹鶺鷁鶼鶴鷖鸚鷓鷚鷯鷦鷲鷸鷺鸇鷹鸌鸏鸛鸘鹺麥麩黃黌黶黷黲黽黿鼂鼉鞀鼴齇齊齏齒齔齕齗齟齡齙齠齜齦齬齪齲齷龍龔龕龜誌製谘隻裡係範鬆冇嚐嘗鬨麵準鐘彆閒儘臟拚",c=0;c<a.length;c++){var d=a.charAt(c);if(b.indexOf(d)>-1)return!0}return!1},isIdCard:function(a){var b=a.toLowerCase().match(/\w/g);if(a.match(/^\d{17}[\dx]$/i)){for(var c=0,d=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],e=0;17>e;e++)c+=parseInt(b[e],10)*d[e];return"10x98765432".charAt(c%11)!=b[17]?!1:!!a.replace(/^\d{6}(\d{4})(\d{2})(\d{2}).+$/,"$1-$2-$3")}return a.match(/^\d{15}$/)?!!a.replace(/^\d{6}(\d{2})(\d{2})(\d{2}).+$/,"19$1-$2-$3"):!1},isIdCard_bak:function(a){var b,c,d,e,f=new Array(!0,!1,!1,!1,!1),g={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"xinjiang",71:"台湾",81:"香港",82:"澳门",91:"国外"},h=[];if(h=a.split(""),null===g[parseInt(a.substr(0,2))])return f[4];switch(a.length){case 18:return ereg=parseInt(a.substr(6,4))%4===0||parseInt(a.substr(6,4))%100===0&&parseInt(a.substr(6,4))%4===0?/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/:/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/,ereg.test(a)?(d=7*(parseInt(h[0])+parseInt(h[10]))+9*(parseInt(h[1])+parseInt(h[11]))+10*(parseInt(h[2])+parseInt(h[12]))+5*(parseInt(h[3])+parseInt(h[13]))+8*(parseInt(h[4])+parseInt(h[14]))+4*(parseInt(h[5])+parseInt(h[15]))+2*(parseInt(h[6])+parseInt(h[16]))+1*parseInt(h[7])+6*parseInt(h[8])+3*parseInt(h[9]),b=d%11,e="F",c="10X98765432",e=c.substr(b,1),e.toUpperCase()==h[17].toUpperCase()?f[0]:f[3]):f[2];default:return f[1]}},isRightVerifycode:function(a){var b=/^[a-z0-9]{4,30}$/;return b.test(a)},isAllowSetTradingPass:function(a){for(var b=!0,c=!0,d=!0,e=!0,f=0;f<a.length-1;f++){var g=parseInt(a[f]),h=parseInt(a[f+1]);b=b&&g==h,c=c&&h==g+1;var i=f<a.length+1?parseInt(a[f+3]):-1,j=parseInt(a[5-f]);if(f<a.length/2-1?(d=d&&g==i&&h==g+1,e=e&&g==j&&h==g+1):f==a.length/2-1&&(d=d&&g==i,e=e&&g==j),f+2==a.length&&6==a.length&&(b||c||d||e))return!1}return!0},isQq:function(a){return/^[1-9]\d{4,}$/.test(a)},isPhone:function(a){return/^[0-9]{3,4}-[0-9]{7,8}$/.test(a)},isUrl:function(a){return/^http(s)?:\/\/[A-Za-z0-9\-]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\:+!]*([^<>])*$/.test(a)},isIP:function(b){if(!b||a.isNull(b))return!1;var c=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return c.test(b)&&RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256?!0:!1},isEmptyObject:function(a){for(var b in a)return!1;return!0},isCharsLenWithinRange:function(b,c){if(!a.isString(b))return!1;var d=b.match(/\W/g),e=null==d?b.length:b.length+d.length,f=e>=0&&c>=e;return f?(this.cutLen=b.length,!0):!1},isContactName:function(b){return a.isString(b)?this.isCharsLenWithinRange.call(this,b,26):!1},isBookPS:function(b){return a.isString(b)?this.isCharsLenWithinRange.call(this,b,100):!1},isInvTitle:function(b){return a.isString(b)?this.isCharsLenWithinRange.call(this,b,100):!1
},isBoardTitle:function(b){return a.isString(b)?this.isCharsLenWithinRange.call(this,b,40):!1},isAreaTitle:function(b){return a.isString(b)?this.isCharsLenWithinRange.call(this,b,80):!1},isMobileNumber:function(b){if(!a.isString(b))return!1;var c=11;return b.length==c&&/^(\d| )+$/g.test(b)},isFlightNumber:function(b){if(!a.isString(b))return!1;var c=3,d=7;return b.length>=c&&b.length<=d&&/^(\d|\w)+$/g.test(b)}};return b.isPostcode=b.isZip,b}),define("cUtilityPath",["$"],function(){var a={urlParseRE:/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,getLocation:function(a){var b=a?this.parseUrl(a):location,c=this.parseUrl(a||location.href).hash;return c="#"===c?"":c,b.protocol+"//"+b.host+b.pathname+b.search+c},parseLocation:function(){return this.parseUrl(this.getLocation())},isRelativeUrl:function(b){return""===a.parseUrl(b).protocol},parseUrl:function(b){var c=a.urlParseRE.exec(b||"")||[];return{href:c[0]||"",hrefNoHash:c[1]||"",hrefNoSearch:c[2]||"",domain:c[3]||"",protocol:c[4]||"",doubleSlash:c[5]||"",authority:c[6]||"",username:c[8]||"",password:c[9]||"",host:c[10]||"",hostname:c[11]||"",port:c[12]||"",pathname:c[13]||"",directory:c[14]||"",filename:c[15]||"",search:c[16]||"",hash:c[17]||""}},isSameDomain:function(b,c){return a.parseUrl(b).domain===a.parseUrl(c).domain},makePathAbsolute:function(a,b){var c,d,e,f;if(a&&"/"===a.charAt(0))return a;for(a=a||"",b=b?b.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"",c=b?b.split("/"):[],d=a.split("/"),e=0;e<d.length;e++)switch(f=d[e]){case".":break;case"..":c.length&&c.pop();break;default:c.push(f)}return"/"+c.join("/")},makeUrlAbsolute:function(b,c){if(!a.isRelativeUrl(b))return b;void 0===c&&(c=this.documentBase);var d=a.parseUrl(b),e=c,f=d.protocol||e.protocol,g=d.protocol?d.doubleSlash:d.doubleSlash||e.doubleSlash,h=d.authority||e.authority,i=""!==d.pathname,j=a.makePathAbsolute(d.pathname||e.filename,e.pathname),k=d.search||!i&&e.search||"",l=d.hash;return f+g+h+j+k+l}};a.documentUrl=a.parseLocation();var b=$("head").find("base");return a.documentBase=b.length?a.parseUrl(a.makeUrlAbsolute(b.attr("href"),a.documentUrl.href)):a.documentUrl,a}),define("cUtility",["cUtilityHybrid","cUtilityHash","cUtilityDate","cUtilityServertime","Validate","cUtilityPath"],function(a,b,c,d,e,f){var g=function(a){return Object.prototype.toString.call(a)},h={};return $.extend(h,a),h.Date=c,h.Hash=b.Hash,h.inApp=a.isInApp(),h.trim=function(a){return a.replace(/(^[\s\u3000]*)|([\s\u3000]*$)/g,"")},h.stripTags=function(a){return(a||"").replace(/<[^>]+>/g,"")},h.mix=function(a,b){return _.extend(a,b)},h.indexOf=function(a,b){return _.indexOf(b,a)},h.each=_.each,h.grep=_.filter,h.getServerDate=d.getServerDate,h.getGuid=function(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function b(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}var c=window.localStorage.GUID||"";if(!c){c=b();try{window.localStorage.setItem("GUID",c)}catch(d){}}return c},h.Object={},h.Object.set=function(a,b,c){if(!b)return null;var d=b.split(".");a=a||{};for(var e=0,f=d.length,g=Math.max(f-1,0);f>e;e++)g>e?a=a[d[e]]=a[d[e]]||{}:a[d[e]]=c;return a},h.Object.get=function(a,b){if(!a||!b)return null;var c=b.split(".");a=a||{};var d=0,e=c.length;for(Math.max(e-1,0);e>d;d++)if(a=a[c[d]],null===a||"undefined"==typeof a)return null;return a},h.SimpleQueue=function(){this.initialize()},h.SimpleQueue.prototype={initialize:function(){this.index=0,this.handlers=[],this.isStart=!1},add:function(a){this.handlers.push(a),this.isStart||(this.isStart=!0,this._next())},_next:function(a){var b=this.handlers.shift();b&&b.call(this,this,a)},next:function(){this._next.apply(this,arguments),this.stop()},stop:function(){this.isStart=!1}},h.tryUrl=function(a){var b=document.createElement("iframe");b.height=1,b.width=1,b.frameBorder=0,b.style.position="absolute",b.style.left="-9999px",b.style.top="-9999px",document.body.appendChild(b),h.tryUrl=function(a){b.src=a},U.tryUrl(a)},h.validate=e,h.JsonArrayToObject=function(a){if(!a)return[];for(var b=a.shift(),c=[],d=null,e=0,f=a.length;f>e;e++){d={};for(var h=0,i=a[e].length;i>h;h++)switch(g(a[e][h])){case"[object Array]":d[b[h]]=U.JsonArrayToObject(a[e][h]);break;default:d[b[h]]=a[e][h]}c.push(d)}return c},h.dateParse=function(a){var b=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+$");if("string"==typeof a){if(b.test(a)||isNaN(Date.parse(a))){var c=a.split(/ |T/),d=c.length>1?c[1].split(/[^\d]/):[0,0,0],e=c[0].split(/[^\d]/);return new Date(e[0]-0,e[1]-1,e[2]-0,d[0]-0,d[1]-0,d[2]-0)}return new Date(a)}return new Date},h.deleteValue=function(a,b){var c=U.indexOf(a,b);return c>-1?b.splice(c,1):null},h.urlParse=function(a){return f.parseUrl(a)},h.getUrlParam=function(a,b){var c=new RegExp("(\\?|&)"+b+"=([^&]+)(&|$)","i"),d=a.match(c);return d?d[2]:""},h.getUrlParams=function(a){for(var b,c,d,a=a.split("://"),e=/([^&=?]+)=([^&]+)/g,f={};b=e.exec(a[0]);)name=b[1],c=b[2],f[name]=c;if(a[1]){var g=0;d=_.size(f),_.each(f,function(b,c){++g==d&&(f[c]+="://"+a[1])})}return f},h}),define("cBase",["libs","cCoreInherit","cUtility"],function(a,b,c){"undefined"==typeof console&&(console={log:function(){},error:function(){}});var d={};d.isInApp=c.isInApp,d.Class=b.Class,d.extend=b.extend,d.implement=b.implement;[].slice;d.Object=new d.Class({});var e={keys:function(a){var b=[];if("object"==typeof a)if("function"==typeof Object.keys)Object.keys(a);else for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}};return d.extend(d.Object,e),d.Date=c.Date,d.Hash=c.Hash,d.getInstance=function(){return this.instance||new this},d.getServerDate=c.getServerDate,d}),define("cUIAnimation",[],function(){return{slideleft:function(a,b,c,d){{var e=a.$el;b.$el}b.hide(),e.show(),e.bind("webkitAnimationEnd",function(){e.unbind("webkitAnimationEnd"),$("body").removeClass("hiddenx"),e.removeClass("animatestart"),e.removeClass("sliderightin"),a.show(),"function"==typeof c&&(d?c.call(d,a,b):c(a,b))}),$("body").addClass("hiddenx"),e.addClass("animatestart"),e.addClass("sliderightin")},slideright:function(a,b,c,d){var e=(a.$el,b.$el);e.bind("webkitAnimationEnd",function(){e.unbind("webkitAnimationEnd"),$("body").removeClass("hiddenx"),e.removeClass("animatestart"),e.removeClass("sliderightout"),b.hide(),a.show(),"function"==typeof c&&(d?c.call(d,a,b):c(a,b))}),$("body").addClass("hiddenx"),e.addClass("animatestart"),e.addClass("sliderightout")},noAnimate:function(a,b,c,d){b&&b.__hide(a.viewname),a.__show(),c&&c.call(d,a,b)}}}),define("AbstractAPP",["libs","cBase","cUIAnimation"],function(a,b,c){var d=new b.Class({__propertys__:function(){this.webroot="/#hotelsearch",this.viewRootPath="app/views/",this.defaultView="index",this.request,this.viewpath,this.mainframe,this.viewport,this.statedom,this.views=new b.Hash,this.curView,this.lastView,this.inteface={loadView:_.bind(this.loadView,this),forward:_.bind(this.forward,this),back:_.bind(this.back,this)},this.isCreate=!1,this.history=[],this.stopListening=!1,this.timeoutres,this.lastHash="",this.lashFullHash="",this.isChangeHash=!1,this.animations=c,this.isAnimat=!0,this.animatSwitch=!1,b.isInApp()&&(this.animatSwitch=!0),this.animForwardName="slideleft",this.animBackwardName="slideright",this.animNoName="noAnimate",this.animatName=this.animNoName,this.path=[],this.query={},this.viewMapping={}},initialize:function(a){this.setOption(a),this.buildEvent()},setOption:function(a){a=a||{};for(var b in a)this[b]=a[b]},buildEvent:function(){requirejs.onError=function(a){if(a&&a.requireModules)for(var b=0;b<a.requireModules.length;b++){0;break}},$(window).bind("hashchange",_.bind(this.onHashChange,this)),this.onHashChange()},onHashChange:function(){window.history.length;if(this.history.push(window.location.href),!this.stopListening){var a=decodeURIComponent(window.location.hash.replace(/^#+/i,"")).toLowerCase();this._onHashChange(a)}},_onHashChange:function(a,b){a=a.replace(/^#+/i,"");var c=this.parseHash(a);this.localObserver(c,b)},parseHash:function(a){var b,c,d=a,a=a.replace(/([^\|]*)(?:\|.*)?$/gim,"$1"),e=/^([^?&|]*)(.*)?$/i.exec(a),f=e[1]?e[1].split("!"):[],g=(f.shift()||"").replace(/(^\/+|\/+$)/i,""),h=f.length?f.join("!").replace(/(^\/+|\/+$)/i,"").split("/"):this.path,i=(e[2]||"").replace(/^\?*/i,"").split("&"),j=_.clone(this.query);if(this.isChangeHash=!(this.lastHash||d!==this.lashFullHash)||!(!this.lastHash||this.lastHash===a),-1!=location.hash.indexOf("cui-")&&(this.isChangeHash=!1),i)for(var k=0;k<i.length;k++)i[k]&&(b=i[k].split("="),b[1]?(c=b.shift(),j[c]=b.join("=")):j[b[0]]="");return this.lastHash=a,this.lashFullHash=d,{viewpath:g,path:h,query:j,root:location.pathname+location.search,fullhash:d}},localObserver:function(a,b){this.animatName=b?this.animForwardName:this.animBackwardName,this.request=a,this.viewpath=this.request.viewpath||this.defaultView,this.request.viewpath=this.viewpath,this.switchView(this.viewpath)},switchView:function(a){var b=a,c=this.views.getItem(b),d=this.curView;if(d&&d!=c&&(this.lastView=d),c){if(c==this.curView&&0==this.isChangeHash)return;c.request=this.request,this.curView=c;var e=(d||c).viewname;this.curView.__load(e)}else this.loadView(a,function(a){c=new a(this.request,this.inteface,b),this.views.push(b,c),c.turning=_.bind(function(){this.createViewPort(),c.viewport=this.viewport,this.startAnimation(function(a,b){this.views.each(function(c){return a===c||b===c?!1:void c.$el.hide()}),a.$el.show()})},this),this.curView=c;var e=(d||c).viewname;this.curView.__load(e)})},startAnimation:function(a){var b=this.curView,c=this.lastView;c&&(c.scrollPos={x:window.scrollX,y:window.scrollY}),this.animatSwitch||(this.isAnimat=!1),this.isAnimat||(this.animatName=this.animNoName),this.timeoutres=this.animations[this.animatName]&&this.animations[this.animatName].call(this,b,c,a,this),this.isAnimat=!0},loadView:function(a,b){var c=this;requirejs([this.buildUrl(a)],function(a){b&&b.call(c,a)})},buildUrl:function(a){var b=this.viewMapping[a];return b?b:this.viewRootPath+a},createViewPort:function(){if(!this.isCreate){var a=['<div class="main-frame">','<div class="main-viewport"></div>','<div class="main-state"></div>',"</div>"].join("");this.mainframe=$(a),this.viewport=this.mainframe.find(".main-viewport"),this.statedom=this.mainframe.find(".main-state");var b=$("#main");b.empty(),b.append(this.mainframe),this.isCreate=!0}},lastUrl:function(){return this.history.length<2?document.referrer:this.history[this.history.length-2]},startObserver:function(){this.stopListening=!1},endObserver:function(){this.stopListening=!0},forward:function(a,b,c){a=a.toLowerCase(),c&&(this.isAnimat=!1),this.endObserver(),b?window.location.replace(("#"+a).replace(/^#+/,"#")):window.location.href=("#"+a).replace(/^#+/,"#"),this._onHashChange(a,!0),setTimeout(_.bind(this.startObserver,this),1)},back:function(a,b){b&&(this.isAnimat=!1);var c=this.lastUrl();!a||c&&0===c.indexOf(a)?(a=this.request.query.refer,a?window.location.href=a:history.back()):window.location.hash=a}});return d}),define("cWidgetFactory",["libs"],function(){var a=a||{};return a.products={},a.hasWidget=function(b){return!!a.products[b]},a.register=function(b){if(!(b&&b.name&&b.fn))throw"WidgetFactory: widget is lack of necessary infomation.";if(a.products[b.name])throw"WidgetFactory: widget has been register in WidgetFactory";a.products[b.name]=b.fn},a.create=function(b){return a.products[b]},a}),define("cAbstractStorage",["cBase"],function(a){var b=window.JSON,c=a.Date,d=new a.Class({__propertys__:function(){this.proxy=null},initialize:function(){},_buildStorageObj:function(a,b,c,d,e){return{value:a,oldvalue:e||null,timeout:b,tag:c,savedate:d}},set:function(a,d,e,f,g,h){g=g||(new c).format("Y/m/d H:i:s"),e=e?new c(e):(new c).addDay(30);var i=this._buildStorageObj(d,e.format("Y/m/d H:i:s"),f,g,h);try{return this.proxy.setItem(a,b.stringify(i)),!0}catch(j){console&&0}return!1},get:function(a,d,e){var f,g=null;try{f=this.proxy.getItem(a),f&&(f=b.parse(f),c.parse(f.timeout,!0)>=new Date&&(d?d===f.tag&&(g=e?f.oldvalue:f.value):g=e?f.oldvalue:f.value))}catch(h){console&&0}return g},getTag:function(a){var c,d=null;try{c=this.proxy.getItem(a),c&&(c=b.parse(c),d=c&&c.tag)}catch(e){console&&0}return d},getSaveDate:function(a,d){var e,f=null;try{e=this.proxy.getItem(a),e&&(e=b.parse(e),e.savedate&&(f=c.parse(e.savedate),d||(f=f.valueOf())))}catch(g){console&&0}return f},getExpireTime:function(a){var c=null,d=null;try{c=this.proxy.getItem(a),c&&(c=b.parse(c),d=Date.parse(c.timeout))}catch(e){console&&0}return d},remove:function(a){return this.proxy.removeItem(a)},getAll:function(){for(var a=this.proxy.length,b=[],c=0;a>c;c++){var d=this.proxy.key(c),e={key:d,value:this.get(d)};b.push(e)}return b},clear:function(){this.proxy.clear()},gc:function(){for(var a=this.proxy,b=this.proxy.length,c=0;b>c;c++){var d=a.key(c);if("GUID"==d)break;try{this.get(d)||this.remove(d)}catch(e){}}}});return d}),define("cStorage",["cBase","cAbstractStorage"],function(a,b){var c=new a.Class(b,{__propertys__:function(){},initialize:function($super,a){this.proxy=window.localStorage,$super(a)},oldGet:function(b){var c=localStorage.getItem(b),d=c?JSON.parse(c):null;if(d&&d.timeout){var e=new Date,f=a.Date.parse(d.timeout).valueOf();if(d.timeby){if(f-e>=0)return d}else if(f-a.Date.parse(a.Date.format(e,"Y-m-d")).valueOf()>=0)return d;return localStorage.removeItem(b),null}return d},oldSet:function(a,b){localStorage.setItem(a,b)},getExpireTime:function(b){var c=localStorage.getItem(b),d=c?JSON.parse(c):null;return d&&d.timeout?d.timeout:new a.Date(a.getServerDate()).addDay(2).format("Y-m-d")},oldRemove:function(a){localStorage.removeItem(a)}});return c.getInstance=function(){return this.instance?this.instance:this.instance=new this},c.localStorage=c.getInstance(),c}),define("cAbstractStore",["cBase","cStorage","cUtility"],function(a,b,c){CDate=a.Date,HObject=c.Object;var d=new a.Class({__propertys__:function(){this.NULL={},this.key=this.NULL,this.lifeTime="30M",this.useServerTime=!1,this.defaultData=null,this.rollbackEnabled=!1,this.sProxy=this.NULL},initialize:function(a){for(var b in a)this[b]=a[b];this.assert()},assert:function(){},set:function(a,b,c){var d=this._getNowTime();d.addSeconds(this._getLifeTime()),this.rollbackEnabled&&!c&&(c=a),this.sProxy.set(this.key,a,d,b,null,c)},setLifeTime:function(a,b){this.lifeTime=a;var c,d=this.getTag(),e=this.get();c=b?this._getNowTime():this.sProxy.getSaveDate(this.key,!0)||this._getNowTime();var f=new CDate(c.valueOf()).format("Y/m/d H:i:s");c.addSeconds(this._getLifeTime()),this.sProxy.set(this.key,e,c,d,f)},setAttr:function(a,b,c){if(!_.isObject(a)){c=c||this.getTag();var d=this.get(c)||{},e={};if(d){if(this.rollbackEnabled){e=this.get(c,!0);var f=HObject.get(d,a);HObject.set(e,a,f)}return HObject.set(d,a,b),this.set(d,c,e)}return!1}for(var g in a)a.hasOwnProperty(g)&&this.setAttr(g,a[g],b)},get:function(b,c){var d=null,e=!0;"[object Array]"===Object.prototype.toString.call(this.defaultData)?d=this.defaultData.slice(0):this.defaultData&&(d=_.clone(this.defaultData));var f=this.sProxy.get(this.key,b,c),g=typeof f;if({string:!0,number:!0,"boolean":!0}[g])return f;if(f)if("[object Array]"==Object.prototype.toString.call(f)){d=[];for(var h=0,i=f.length;i>h;h++)d[h]=f[h]}else f&&!d&&(d={}),a.extend(d,f);for(var j in d){e=!1;break}return e?null:d},getAttr:function(a,b){var c=this.get(b),d=null;return c&&(d=HObject.get(c,a)),d},getTag:function(){return this.sProxy.getTag(this.key)},remove:function(){this.sProxy.remove(this.key)},removeAttr:function(a){var b=this.get()||{};b[a]&&delete b[a],this.set(b)},getExpireTime:function(){var a=null;try{a=this.sProxy.getExpireTime(this.key)}catch(b){console&&0}return a},setExpireTime:function(a){var b=this.get(),c=CDate.parse(a);this.sProxy.set(this.key,b,c)},_getNowTime:function(){return this.useServerTime?new CDate(a.getServerDate()):new CDate},_getLifeTime:function(){var a=0,b=this.lifeTime+"",c=b.charAt(b.length-1),d=+b.substring(0,b.length-1);return c="number"==typeof c?"M":c.toUpperCase(),a="D"==c?24*d*60*60:"H"==c?60*d*60:"M"==c?60*d:"S"==c?d:60*d},rollback:function(a){if(this.rollbackEnabled){var b=this.getTag(),c=this.sProxy.get(this.key,b),d=this.sProxy.get(this.key,b,!0);if(a&&a instanceof Array)for(var e in a){var f=a[e],g=d[f];"undefined"!=typeof g&&(c[f]=g)}else c=d,d={};this.set(c,b,d)}}});return d.getInstance=function(){return this.instance?this.instance:this.instance=new this},d}),define("cStore",["cBase","cAbstractStore","cStorage"],function(a,b,c){var d=new a.Class(b,{__propertys__:function(){this.sProxy=c.getInstance()},initialize:function($super,a){$super(a)}});return d}),define("CommonStore",["cBase","cStore","cStorage","cUtility"],function(a,b,c,d){var e={},f=c.localStorage;return e.UserStore=new a.Class(b,{__propertys__:function(){this.key="USER",this.lifeTime="30D"},initialize:function($super,a){$super(a)},getUser:function(){var a=f.oldGet("USERINFO");return a=a&&a.data||null,a&&this.set(a),a||this.get()},setUser:function(a){this.set(a);var b=f.getExpireTime("USERINFO"),c={data:a,timeout:b};f.oldSet("USERINFO",JSON.stringify(c))},removeUser:function(){f.oldRemove("USERINFO"),this.remove()},isNonUser:function(){var a=this.getUser();return a&&!!a.IsNonUser},isLogin:function(){var a=this.getUser();return a&&!!a.Auth&&!a.IsNonUser},getUserName:function(){var a=this.getUser();return a.UserName},getUserId:function(){var a=this.getUser()||{};return a.UserID||d.getGuid()},getAuth:function(){var a=e.HeadStore.getInstance(),b=this.getUser();return b&&b.Auth&&a.setAttr("auth",b.Auth),a.getAttr("auth")},setAuth:function(a){var b=this.isLogin(),c=this.getUser()||{};c.Auth=a,c.IsNonUser=b?!1:!0,this.setUser(c)},setNonUser:function(a){var b=e.HeadStore.getInstance();b.setAttr("auth",a);var c={};c.Auth=a,c.IsNonUser=!0,this.setUser(c)},setExpireTime:function($super,a){$super(a);var b=this.get(),c={data:b,timeout:a};f.oldSet("USERINFO",JSON.stringify(c))}}),e.HeadStore=new a.Class(b,{userStore:e.UserStore.getInstance(),__propertys__:function(){this.key="HEADSTORE",this.lifeTime="15D",this.defaultData={cid:d.getGuid(),ctok:"351858059049938",cver:"1.0",lang:"01",sid:"8888",syscode:"09",auth:""};var a=this.get;this.get=function(){var b=a.apply(this,arguments),c=this.userStore.getUser(),f=e.SalesObjectStore.getInstance().get();return d.isInApp()||(b.sid=f&&f.sid?f.sid:"8888"),b.auth=c&&c.Auth?c.Auth:"",this.set(b),b}},initialize:function($super,a){$super(a)},setAuth:function(a){var b=e.UserStore.getInstance();b.setAuth(a),this.setAttr("auth",a)}}),e.UnionStore=new a.Class(b,{__propertys__:function(){this.key="UNION",this.lifeTime="7D",this.store=c.localStorage},initialize:function($super,a){$super(a)},get:function(){var a=this.store.oldGet(this.key);return a&&a.data||null},set:function(b,c){c||(c=new a.Date(d.getServerDate()),c.addSeconds(this._getLifeTime()));var e={data:b,timeout:c.format("Y/m/d H:i:s")};this.store.oldSet(this.key,JSON.stringify(e))}}),e.SalesStore=new a.Class(b,{__propertys__:function(){this.key="SALES",this.lifeTime="30D",this.store=c.localStorage},initialize:function($super,a){$super(a)},get:function(){var a=this.store.oldGet(this.key);return a&&a.data||null},set:function(b,c){c||(c=new a.Date(d.getServerDate()),c.addSeconds(this._getLifeTime()));var e={data:b,timeout:c.format("Y/m/d H:i:s")};this.store.oldSet(this.key,JSON.stringify(e))}}),e.SalesObjectStore=new a.Class(b,{__propertys__:function(){this.key="SALES_OBJECT",this.lifeTime="30D"},initialize:function($super,a){$super(a)}}),e.UnionStore.getInstance=e.SalesStore.getInstance=a.getInstance,e}),define("cHybridFacade",["libs","CommonStore","cUtility"],function(libs,CommonStore,cUtility){var Facade=Facade||{};Facade.METHOD_ENTRY="METHOD_ENTRY",Facade.METHOD_MEMBER_LOGIN="METHOD_MEMBER_LOGIN",Facade.METHOD_NON_MEMBER_LOGIN="METHOD_NON_MEMBER_LOGIN",Facade.METHOD_AUTO_LOGIN="METHOD_AUTO_LOGIN",Facade.METHOD_LOCATE="METHOD_LOCATE",Facade.METHOD_REFRESH_NAV_BAR="METHOD_REFRESH_NAV_BAR",Facade.METHOD_CALL_PHONE="METHOD_CALL_PHONE",Facade.METHOD_BACK_TO_HOME="METHOD_BACK_TO_HOME",Facade.METHOD_BACK_TO_BOOK_CAR="METHOD_BACK_TO_BOOK_CAR",Facade.METHOD_BACK="METHOD_BACK",Facade.METHOD_COMMIT="METHOD_COMMIT",Facade.METHOD_CITY_CHOOSE="METHOD_CITY_CHOOSE",Facade.METHOD_REGISTER="METHOD_REGISTER",Facade.METHOD_LOG_EVENT="METHOD_LOG_EVENT",Facade.METHOD_INIT="METHOD_INIT",Facade.METHOD_CALL_SERVICE_CENTER="METHOD_CALL_SERVICE_CENTER",Facade.METHOD_BACK_TO_LAST_PAGE="METHOD_BACK_TO_LAST_PAGE",Facade.METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE="METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE",Facade.METHOD_GO_TO_HOTEL_DETAIL="METHOD_GO_TO_HOTEL_DETAIL",Facade.METHOD_OPEN_URL="METHOD_OPEN_URL",Facade.METHOD_CHECK_UPDATE="METHOD_CHECK_UPDATE",Facade.METHOD_RECOMMEND_APP_TO_FRIEND="METHOD_RECOMMEND_APP_TO_FRIEND",Facade.METHOD_ADD_WEIXIN_FRIEND="METHOD_ADD_WEIXIN_FRIEND",Facade.METHOD_SHOW_NEWEST_INTRODUCTION="METHOD_SHOW_NEWEST_INTRODUCTION",Facade.METHOD_BECOME_ACTIVE="METHOD_BECOME_ACTIVE",Facade.METHOD_WEB_VIEW_FINISHED_LOAD="METHOD_WEB_VIEW_FINISHED_LOAD",Facade.METHOD_CROSS_DOMAIN_HREF="METHOD_CROSS_DOMAIN_HREF",Facade.METHOD_CHECK_APP_INSTALL="METHOD_CHECK_APP_INSTALL",Facade.METHOD_CROSS_JUMP="METHOD_CROSS_JUMP",Facade.METHOD_REFRESH_NATIVE="METHOD_REFRESH_NATIVE",Facade.METHOD_H5_NEED_REFRESH="METHOD_H5_NEED_REFRESH",Facade.METHOD_READ_FROM_CLIPBOARD="METHOD_READ_FROM_CLIPBOARD",Facade.METHOD_COPY_TO_CLIPBOARD="METHOD_COPY_TO_CLIPBOARD",Facade.METHOD_SHARE_TO_VENDOR="METHOD_SHARE_TO_VENDOR",Facade.METHOD_DOWNLOAD_DATA="METHOD_DOWNLOAD_DATA",Facade.METHOD_NATIVE_LOG="METHOD_NATIVE_LOG",Facade.METHOD_SEND_H5_PIPE_REQUEST="METHOD_SEND_H5_PIPE_REQUEST",Facade.METHOD_SEND_HTTP_PIPE_REQUEST="METHOD_SEND_HTTP_PIPE_REQUEST",Facade.METHOD_CHECK_PAY_APP_INSTALL_STATUS="METHOD_CHECK_PAY_APP_INSTALL_STATUS",Facade.METHOD_OPEN_PAY_APP_BY_URL="METHOD_OPEN_PAY_APP_BY_URL",Facade.METHOD_SET_NAVBAR_HIDDEN="METHOD_SET_NAVBAR_HIDDEN",Facade.METHOD_SET_TOOLBAR_HIDDEN="METHOD_SET_TOOLBAR_HIDDEN",Facade.METHOD_CHECK_FILE_EXIST="METHOD_CHECK_FILE_EXIST",Facade.METHOD_DELETE_FILE="METHOD_DELETE_FILE",Facade.METHOD_GET_CURRENT_SANDBOX_NAME="METHOD_GET_CURRENT_SANDBOX_NAME",Facade.METHOD_GET_FILE_SIZE="METHOD_GET_FILE_SIZE",Facade.METHOD_MAKE_DIR="METHOD_MAKE_DIR",Facade.METHOD_READ_TEXT_FROM_FILE="METHOD_READ_TEXT_FROM_FILE",Facade.METHOD_WRITE_TEXT_TO_FILE="METHOD_WRITE_TEXT_TO_FILE",Facade.METHOD_ABORT_HTTP_PIPE_REQUEST="METHOD_ABORT_HTTP_PIPE_REQUEST",Facade.METHOD_OPEN_ADV_PAGE="METHOD_OPEN_ADV_PAGE",Facade.METHOD_WEB_VEW_DID_APPEAR="METHOD_WEB_VEW_DID_APPEAR",Facade.METHOD_SHOW_MAP="METHOD_SHOW_MAP",Facade.METHOD_ENCRYPT_BASE64="METHOD_ENCRYPT_BASE64",Facade.METHOD_ENCRYPT_CTRIP="METHOD_ENCRYPT_CTRIP",Facade.METHOD_APP_CHOOSE_INVOICE_TITLE="METHOD_APP_CHOOSE_INVOICE_TITLE",Facade.METHOD_APP_GET_DEVICE_INFO="METHOD_APP_GET_DEVICE_INFO",Facade.METHOD_APP_SHOW_VOICE_SEARCH="METHOD_APP_SHOW_VOICE_SEARCH",Facade.METHOD_APP_CHOOSE_PHOTO="METHOD_APP_CHOOSE_PHOTO",Facade.METHOD_APP_FINISHED_REGISTER="METHOD_APP_FINISHED_REGISTER",Facade.METHOD_APP_CALL_SYSTEM_SHARE="METHOD_APP_CALL_SYSTEM_SHARE",Facade.METHOD_FAVORITE="METHOD_FAVORITE",Facade.METHOD_FAVORITED="METHOD_FAVORITED",Facade.METHOD_SHARE="METHOD_SHARE",Facade.METHOD_APP_CHECK_NETWORK_STATUS="METHOD_APP_CHECK_NETWORK_STATUS",Facade.METHOD_APP_NETWORK_DID_CHANGED="METHOD_APP_NETWORK_DID_CHANGED",Facade.METHOD_APP_CHECK_ANDROID_PACKAGE_INFO="METHOD_APP_CHECK_ANDROID_PACKAGE_INFO",Facade.METHOD_APP_LOG_GOOGLE_REMARKTING="METHOD_APP_LOG_GOOGLE_REMARKTING",Facade.METHOD_APP_READ_VERIFICATION_CODE_FROM_SMS="METHOD_APP_READ_VERIFICATION_CODE_FROM_SMS",Facade.METHOD_APP_SHOW_MAP_WITH_POI_LIST="METHOD_APP_SHOW_MAP_WITH_POI_LIST",Facade.METHOD_APP_FINISHED_LOGIN="METHOD_APP_FINISHED_LOGIN",Facade.METHOD_PHONE="METHOD_PHONE",Facade.METHOD_H5_PAGE_FINISH_LOADING="METHOD_H5_PAGE_FINISH_LOADING",Facade.METHOD_CHOOSE_CONTACE_FROM_ADDRESSBOOK="METHOD_CHOOSE_CONTACE_FROM_ADDRESSBOOK",Facade.METHOD_HIDE_LOADING_PAGE="METHOD_HIDE_LOADING_PAGE",Facade.METHOD_SHOW_LOADING_PAGE="METHOD_SHOW_LOADING_PAGE";var METHOD_ENTRY="h5_init_finished",METHOD_MEMBER_LOGIN="member_login",METHOD_NON_MEMBER_LOGIN="non_member_login",METHOD_AUTO_LOGIN="member_auto_login",METHOD_LOCATE="locate",METHOD_REFRESH_NAV_BAR="refresh_nav_bar",METHOD_BACK="back",METHOD_COMMIT="commit",METHOD_CITY_CHOOSE="cityChoose",METHOD_REGISTER="member_register",METHOD_INIT="init_member_H5_info",METHOD_BECOME_ACTIVE="become_active",METHOD_WEB_VIEW_FINISHED_LOAD="web_view_finished_load",METHOD_CHECK_APP_INSTALL="check_app_install_status",METHOD_H5_NEED_REFRESH="app_h5_need_refresh",METHOD_READ_FROM_CLIPBOARD="read_copied_string_from_clipboard",METHOD_DOWNLOAD_DATA="download_data",METHOD_SEND_H5_PIPE_REQUEST="send_h5_pipe_request",METHOD_SEND_HTTP_PIPE_REQUEST="send_http_pipe_request",METHOD_CHECK_PAY_APP_INSTALL_STATUS="check_pay_app_install_status",METHOD_CHECK_FILE_EXIST="check_file_exist",METHOD_DELETE_FILE="delete_file",METHOD_GET_CURRENT_SANDBOX_NAME="get_current_sandbox_name",METHOD_GET_FILE_SIZE="get_file_size",METHOD_MAKE_DIR="make_dir",METHOD_READ_TEXT_FROM_FILE="read_text_from_file",METHOD_WRITE_TEXT_TO_FILE="write_text_to_file",METHOD_WEB_VEW_DID_APPEAR="web_view_did_appear",METHOD_ENCRYPT_BASE64="base64_encode",METHOD_ENCRYPT_CTRIP="ctrip_encrypt",METHOD_APP_CHOOSE_INVOICE_TITLE="choose_invoice_title",METHOD_APP_GET_DEVICE_INFO="get_device_info",METHOD_APP_CHOOSE_PHOTO="choose_photo",METHOD_FAVORITE="favorite",METHOD_FAVORITED="favorited",METHOD_SHARE="share",METHOD_APP_CHECK_NETWORK_STATUS="check_network_status",METHOD_APP_NETWORK_DID_CHANGED="network_did_changed",METHOD_APP_CHECK_ANDROID_PACKAGE_INFO="check_android_package_info",METHOD_APP_LOG_GOOGLE_REMARKTING="log_google_remarkting",METHOD_APP_READ_VERIFICATION_CODE_FROM_SMS="read_verification_code_from_sms",METHOD_APP_SHOW_MAP_WITH_POI_LIST="show_map_with_POI_list",METHOD_APP_FINISHED_LOGIN="finished_login",METHOD_PHONE="phone",METHOD_H5_PAGE_FINISH_LOADING="app_h5_page_finish_loading",METHOD_CHOOSE_CONTACE_FROM_ADDRESSBOOK="app_choose_cgontace_from_addressbook",METHOD_HIDE_LOADING_PAGE="app_hide_loading_page",METHOD_SHOW_LOADING_PAGE="app_show_loading_page",isYouth="youth"==cUtility.getAppSys(),appLock=!1,defaultRegisterHandler={},defaultCallback={},defaultHandler={},loginMethods=[METHOD_NON_MEMBER_LOGIN,METHOD_MEMBER_LOGIN,METHOD_AUTO_LOGIN,METHOD_REGISTER,METHOD_INIT];Facade.registerOne=function(p,tagname){defaultRegisterHandler[p]=function(options){var methoName=tagname||eval(options.tagname),sequenceId=options.sequenceId?options.sequenceId:0,callbackFun=function(a){if(a&&"string"==typeof a&&(a=JSON.parse(a)),_.indexOf(loginMethods,methoName)>=0&&a&&a.data){{var b=CommonStore.UserStore.getInstance();b.getUser()}b.setUser(a.data);var c=CommonStore.HeadStore.getInstance(),d=c.get();d.auth=a.data.Auth,c.set(d)}if(methoName==METHOD_INIT){if(a&&a.device){var e={device:a.device};window.localStorage.setItem("DEVICEINFO",JSON.stringify(e))}if(a&&a.appId){var f={version:a.version,appId:a.appId,serverVersion:a.serverVersion,platform:a.platform};window.localStorage.setItem("APPINFO",JSON.stringify(f))}a&&a.timestamp&&window.localStorage.setItem("SERVERDATE",a.timestamp),a&&a.sourceId&&window.localStorage.setItem("SOURCEID",a.sourceId),a&&a.isPreProduction&&window.localStorage.setItem("isPreProduction",a.isPreProduction)}if((methoName==METHOD_APP_CHECK_NETWORK_STATUS||methoName==METHOD_APP_NETWORK_DID_CHANGED)&&(cUtility.networkType=a.networkType),methoName==METHOD_LOCATE)try{options.success(a)}catch(g){options.error(!0,"定位失败")}else options&&"function"==typeof options.callback&&options.callback(a)};sequenceId?(defaultCallback[methoName]=defaultCallback[methoName]||{},defaultCallback[methoName][sequenceId]=callbackFun):defaultCallback[methoName]=callbackFun,defaultHandler[methoName]=function(a){var b=a&&a.sequenceId?a.sequenceId:0,c=b?defaultCallback[methoName][b]:defaultCallback[methoName];"function"==typeof c&&c(a),b&&(c=null)}}};for(var p in Facade)if(0==p.indexOf("METHOD_"))try{Facade.registerOne(p)}catch(e){alert(e.stack)}var defaultFn={callback:function(a){if(!appLock){var b=a;if("string"==typeof a)try{b=JSON.parse(window.decodeURIComponent(a))}catch(c){setTimeout(function(){0},0)}return Lizard.facadeMethods&&"function"==typeof Lizard.facadeMethods[b.tagname]&&Lizard.facadeMethods[b.tagname](b.param),"function"==typeof defaultHandler[b.tagname]?(defaultHandler[b.tagname](b.param),!0):void 0}}},_registerFn=function(a){for(var b in defaultFn)a[b]=a[b]||defaultFn[b]};return Facade.init=function(){var a=window.app={};_registerFn(a)},Facade.register=function(a){"function"==typeof defaultRegisterHandler[a.tagname]&&defaultRegisterHandler[a.tagname](a)},Facade.unregister=function(a){"string"==typeof a?Facade.register({tagname:a,callback:function(){}}):(a.callback=function(){},Facade.register(a))},Facade.request=function(a){var b={METHOD_INIT:function(a){Facade.register({tagname:Facade.METHOD_INIT,callback:a.callback}),CtripUtil.app_init_member_H5_info()},METHOD_ENTRY:function(){},METHOD_MEMBER_LOGIN:function(a){Facade.register({tagname:Facade.METHOD_MEMBER_LOGIN,callback:a.callback}),CtripUser.app_member_login(a.isShowNonMemberLogin)},METHOD_NON_MEMBER_LOGIN:function(a){Facade.register({tagname:Facade.METHOD_NON_MEMBER_LOGIN,callback:a.callback}),CtripUser.app_non_member_login()},METHOD_AUTO_LOGIN:function(a){Facade.register({tagname:Facade.METHOD_AUTO_LOGIN,callback:a.callback}),CtripUser.app_member_auto_login()},METHOD_REGISTER:function(a){Facade.register({tagname:Facade.ETHOD_REGISTER,callback:a.callback}),CtripUser.app_member_register()},METHOD_LOCATE:function(a){Facade.register({tagname:Facade.METHOD_LOCATE,success:a.success,error:a.error});var b=!0;a.isAsync&&(b=a.isAsync),CtripMap.app_locate(b)},METHOD_REFRESH_NAV_BAR:function(a){CtripBar.app_refresh_nav_bar(a.config)},METHOD_CALL_PHONE:function(a){CtripUtil.app_call_phone(a.tel)},METHOD_BACK_TO_HOME:function(){CtripUtil.app_back_to_home()},METHOD_BACK_TO_BOOK_CAR:function(){app_back_to_book_car()},METHOD_LOG_EVENT:function(a){CtripUtil.app_log_event(a.event_name)},METHOD_CALL_SERVICE_CENTER:function(){CtripUtil.app_call_phone()},METHOD_BACK_TO_LAST_PAGE:function(a){var b=a.param||"";CtripUtil.app_back_to_last_page(b)},METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE:function(a){CtripUtil.app_go_to_book_car_finished_page(a.url)},METHOD_GO_TO_HOTEL_DETAIL:function(a){CtripUtil.app_go_to_hotel_detail(a.hotelId,a.hotelName,a.cityId,a.isOverSea)},METHOD_OPEN_URL:function(a){var b=a.title||"",c=a.pageName||"",d=a.isShowLoadingPage||!1;CtripUtil.app_open_url(a.openUrl,a.targetMode,b,c,d)},METHOD_CHECK_UPDATE:function(){CtripUtil.app_check_update()},METHOD_RECOMMEND_APP_TO_FRIEND:function(){CtripUtil.app_recommend_app_to_friends()},METHOD_ADD_WEIXIN_FRIEND:function(){CtripUtil.app_add_weixin_friend()},METHOD_CROSS_DOMAIN_HREF:function(a){CtripUtil.app_cross_domain_href(a.moduleType,a.anchor,a.param)},METHOD_SHOW_NEWEST_INTRODUCTION:function(){CtripUtil.app_show_newest_introduction()},METHOD_CHECK_APP_INSTALL:function(a){Facade.register({tagname:Facade.METHOD_CHECK_APP_INSTALL,callback:a.callback}),CtripUtil.app_check_app_install_status(a.url,a.package)},METHOD_CROSS_JUMP:function(a){CtripUtil.app_cross_package_href(a.path,a.param)},METHOD_REFRESH_NATIVE:function(a){CtripUtil.app_refresh_native_page(a.package,a.json)},METHOD_READ_FROM_CLIPBOARD:function(a){Facade.register({tagname:Facade.METHOD_READ_FROM_CLIPBOARD,callback:a.callback}),CtripUtil.app_read_copied_string_from_clipboard()},METHOD_COPY_TO_CLIPBOARD:function(a){CtripUtil.app_copy_string_to_clipboard(a.content)},METHOD_SHARE_TO_VENDOR:function(a){var b=a.title||"",c=a.linkUrl||"",d=a.isIOSSystemShare||!1;CtripUtil.app_call_system_share(a.imgUrl,a.text,b,c,d)},METHOD_DOWNLOAD_DATA:function(a){Facade.register({tagname:Facade.METHOD_DOWNLOAD_DATA,callback:a.callback}),CtripUtil.app_download_data(a.url,a.suffix)
},METHOD_NATIVE_LOG:function(a){var b=window.localStorage.getItem("isPreProduction");b&&""!==b&&CtripTool.app_log("@[Wireless H5] "+a.log,a.result)},METHOD_SEND_H5_PIPE_REQUEST:function(a){Facade.register({tagname:Facade.METHOD_SEND_H5_PIPE_REQUEST,sequenceId:a.sequenceId,callback:a.callback});var b=a.pipeType||"";CtripPipe.app_send_H5_pipe_request(a.serviceCode,a.header,a.data,a.sequenceId,b)},METHOD_SEND_HTTP_PIPE_REQUEST:function(a){Facade.register({tagname:Facade.METHOD_SEND_HTTP_PIPE_REQUEST,callback:a.callback}),CtripPipe.app_send_HTTP_pipe_request(a.target,a.methods,a.header,a.queryData,a.retryInfo,a.sequenceId)},METHOD_ABORT_HTTP_PIPE_REQUEST:function(a){CtripPipe.app_abort_HTTP_pipe_request(a.sequenceId)},METHOD_CHECK_PAY_APP_INSTALL_STATUS:function(a){Facade.register({tagname:Facade.METHOD_CHECK_PAY_APP_INSTALL_STATUS,callback:a.callback}),CtripPay.app_check_pay_app_install_status()},METHOD_OPEN_PAY_APP_BY_URL:function(a){CtripPay.app_open_pay_app_by_url(a.payAppName,a.payURL,a.successRelativeURL,a.detailRelativeURL)},METHOD_SET_NAVBAR_HIDDEN:function(a){CtripBar.app_set_navbar_hidden(a.isNeedHidden)},METHOD_SET_TOOLBAR_HIDDEN:function(a){CtripBar.app_set_toolbar_hidden(a.isNeedHidden)},METHOD_CHECK_FILE_EXIST:function(a){Facade.register({tagname:Facade.METHOD_CHECK_FILE_EXIST,callback:a.callback}),CtripFile.app_check_file_exist(a.fileName,a.relativeFilePath)},METHOD_DELETE_FILE:function(a){Facade.register({tagname:Facade.METHOD_DELETE_FILE,callback:a.callback}),CtripFile.app_delete_file(a.fileName,a.relativeFilePath)},METHOD_GET_CURRENT_SANDBOX_NAME:function(a){Facade.register({tagname:Facade.METHOD_GET_CURRENT_SANDBOX_NAME,callback:a.callback}),CtripFile.app_get_current_sandbox_name()},METHOD_GET_FILE_SIZE:function(a){Facade.register({tagname:Facade.METHOD_GET_FILE_SIZE,callback:callback}),CtripFile.app_get_file_size(a.fileName,a.relativeFilePath)},METHOD_MAKE_DIR:function(a){Facade.register({tagname:Facade.METHOD_MAKE_DIR,callback:callback}),CtripFile.app_make_dir(a.dirname,a.relativeFilePath)},METHOD_READ_TEXT_FROM_FILE:function(a){Facade.register({tagname:Facade.METHOD_READ_TEXT_FROM_FILE,callback:callback}),CtripFile.app_read_text_from_file(a.fileName,a.relativeFilePath)},METHOD_WRITE_TEXT_TO_FILE:function(a){Facade.register({tagname:Facade.METHOD_WRITE_TEXT_TO_FILE,callback:callback}),CtripFile.app_write_text_to_file(a.text,a.fileName,a.relativeFilePath,a.isAppend)},METHOD_OPEN_ADV_PAGE:function(a){CtripUtil.app_open_adv_page(a.url)},METHOD_SHOW_MAP:function(a){CtripMap.app_show_map(a.latitude,a.longitude,a.title,a.subtitle)},METHOD_ENCRYPT_BASE64:function(a){Facade.register({tagname:Facade.METHOD_ENCRYPT_BASE64,callback:a.callback}),CtripEncrypt.app_base64_encode(a.info)},METHOD_ENCRYPT_CTRIP:function(a){Facade.register({tagname:Facade.METHOD_ENCRYPT_CTRIP,callback:a.callback}),CtripEncrypt.app_ctrip_encrypt(a.inString,a.encType)},METHOD_APP_CHOOSE_INVOICE_TITLE:function(a){Facade.register({tagname:Facade.METHOD_APP_CHOOSE_INVOICE_TITLE,callback:a.callback}),CtripBusiness.app_choose_invoice_title(a.title)},METHOD_APP_GET_DEVICE_INFO:function(a){Facade.register({tagname:Facade.METHOD_APP_GET_DEVICE_INFO,callback:a.callback}),CtripBusiness.app_get_device_info()},METHOD_APP_SHOW_VOICE_SEARCH:function(a){CtripBusiness.app_show_voice_search(a.bussinessType)},METHOD_APP_CHOOSE_PHOTO:function(a){Facade.register({tagname:Facade.METHOD_APP_CHOOSE_PHOTO,callback:a.callback});var b=a.maxFileSize||200,c=a.maxPhotoCount||1,d=a.meta||{canEditSinglePhoto:!1};CtripUtil.app_choose_photo(b,c,d)},METHOD_APP_FINISHED_REGISTER:function(a){CtripUser.app_finished_register(a.userInfo)},METHOD_APP_CALL_SYSTEM_SHARE:function(a){CtripUtil.app_call_system_share(a.imageRelativePath,a.text,a.title,a.linkUrl,a.isIOSSystemShare)},METHOD_APP_CHECK_NETWORK_STATUS:function(a){Facade.register({tagname:Facade.METHOD_APP_CHECK_NETWORK_STATUS,callback:a.callback}),CtripUtil.app_check_network_status()},METHOD_APP_CHECK_ANDROID_PACKAGE_INFO:function(a){Facade.register({tagname:Facade.METHOD_APP_CHECK_ANDROID_PACKAGE_INFO,callback:a.callback}),CtripBusiness.app_check_android_package_info()},METHOD_APP_LOG_GOOGLE_REMARKTING:function(a){CtripBusiness.app_log_google_remarkting(a.url||window.location.href)},METHOD_APP_READ_VERIFICATION_CODE_FROM_SMS:function(a){Facade.register({tagname:Facade.METHOD_APP_READ_VERIFICATION_CODE_FROM_SMS,callback:a.callback}),CtripBusiness.app_read_verification_code_from_sms()},METHOD_APP_SHOW_MAP_WITH_POI_LIST:function(a){CtripMap.app_show_map_with_POI_list(a.poiList)},METHOD_APP_FINISHED_LOGIN:function(a){Facade.register({tagname:Facade.METHOD_APP_FINISHED_LOGIN,callback:a.callback}),CtripUser.app_finished_login(a.userInfo)},METHOD_CHOOSE_CONTACE_FROM_ADDRESSBOOK:function(a){Facade.register({tagname:Facade.METHOD_CHOOSE_CONTACE_FROM_ADDRESSBOOK,callback:a.callback}),CtripBusiness.app_choose_contact_from_addressbook()},METHOD_HIDE_LOADING_PAGE:function(){CtripBusiness.app_hide_loading_page()},METHOD_SHOW_LOADING_PAGE:function(){CtripBusiness.app_show_loading_page()},METHOD_H5_PAGE_FINISH_LOADING:function(){CtripUtil.app_h5_page_finish_loading()}};b[a.name](a)},Facade.getOpenUrl=function(a){var b=isYouth?"ctripyouth":"ctrip",c=b+"://wireless/"+a.module+"?";return _.each(a.param,function(a,b){c+=b+"="+a+"&"}),"&"===c[c.length-1]&&(c=c.slice(0,c.length-1)),c},Facade}),define("cWidgetGuider",["cUtilityHybrid","cWidgetFactory","cHybridFacade"],function(a,b,c){function d(a){var b={};return _.each(a,function(c,e){_.isFunction(c)?b[e]=function(){return!1}:_.isObject(c)&&(b[e]=d(a[e]))}),b}var e="Guider",f={jump:function(a){var b={refresh:function(){c.request({name:c.METHOD_OPEN_URL,targetMode:0,title:a.title,pageName:a.pageName})},app:function(){if(a&&a.module){var b=c.getOpenUrl(a);c.request({name:c.METHOD_OPEN_URL,openUrl:b,targetMode:1,title:a.title,pageName:a.pageName})}else a&&a.url&&c.request({name:c.METHOD_OPEN_URL,openUrl:a.url,targetMode:1,title:a.title,pageName:a.pageName})},h5:function(){a&&a.url&&c.request({name:c.METHOD_OPEN_URL,openUrl:a.url,targetMode:2,title:a.title,pageName:a.pageName,isShowLoadingPage:a.isShowLoadingPage})},browser:function(){a&&a.url&&c.request({name:c.METHOD_OPEN_URL,openUrl:a.url,targetMode:3,title:a.title,pageName:a.pageName,isShowLoadingPage:a.isShowLoadingPage})},open:function(){a&&a.url&&c.request({name:c.METHOD_OPEN_URL,openUrl:a.url,targetMode:4,title:a.title,pageName:a.pageName,isShowLoadingPage:a.isShowLoadingPage})},open_relative:function(){a&&a.url&&c.request({name:c.METHOD_OPEN_URL,openUrl:a.url,targetMode:5,title:a.title,pageName:a.pageName,isShowLoadingPage:a.isShowLoadingPage})}};"function"==typeof b[a.targetModel]&&b[a.targetModel]()},apply:function(a){_.isObject(a)&&_.isFunction(a.hybridCallback)&&a.hybridCallback()},call:function(){return!1},init:function(a){c.request(a&&window.parseFloat(a.version)<5.2?{name:c.METHOD_ENTRY,callback:a.callback}:{name:c.METHOD_INIT,callback:a.callback})},log:function(a){c.request({name:c.METHOD_LOG_EVENT,event_name:a.name})},print:function(a){c.request({name:c.METHOD_NATIVE_LOG,log:a.log,result:a.result})},callService:function(){c.request({name:c.METHOD_CALL_SERVICE_CENTER})},backToLastPage:function(a){var b=a?a.param:"";c.request({name:c.METHOD_BACK_TO_LAST_PAGE,param:b})},checkUpdate:function(){c.request({name:c.METHOD_CHECK_UPDATE})},recommend:function(){c.request({name:c.METHOD_RECOMMEND_APP_TO_FRIEND})},addWeixinFriend:function(){c.request({name:c.METHOD_ADD_WEIXIN_FRIEND})},showNewestIntroduction:function(){c.request({name:c.METHOD_SHOW_NEWEST_INTRODUCTION})},register:function(a){a&&a.tagname&&a.callback&&c.register({tagname:a.tagname,callback:a.callback})},create:function(){c.init()},home:function(){c.request({name:c.METHOD_BACK_TO_HOME})},jumpHotel:function(a){c.request({name:c.METHOD_GO_TO_HOTEL_DETAIL,hotelId:a.hotelId,hotelName:a.name,cityId:a.cityId,isOverSea:a.isOverSea})},injectUbt:function(){return!1},checkAppInstall:function(a){c.request({name:c.METHOD_CHECK_APP_INSTALL,url:a.url,"package":a.package,callback:a.callback})},callPhone:function(a){c.request({name:c.METHOD_CALL_PHONE,tel:a.tel})},cross:function(a){c.request({name:c.METHOD_CROSS_JUMP,param:a.param,path:a.path})},refreshNative:function(a){c.request({name:c.METHOD_REFRESH_NATIVE,"package":a.package,json:a.json})},copyToClipboard:function(a){c.request({name:c.METHOD_COPY_TO_CLIPBOARD,content:a.content})},readFromClipboard:function(a){c.request({name:c.METHOD_READ_FROM_CLIPBOARD,callback:a.callback})},shareToVendor:function(a){c.request({name:c.METHOD_SHARE_TO_VENDOR,imgUrl:a.imgUrl,text:a.text,title:a.title,linkUrl:a.linkUrl,isIOSSystemShare:a.isIOSSystemShare})},downloadData:function(a){c.request({name:c.METHOD_DOWNLOAD_DATA,url:a.url,callback:a.callback,suffix:a.suffix})},encode:function(a){a&&"base64"===a.mode&&c.request({name:c.METHOD_ENCRYPT_BASE64,callback:a.callback,info:a.info})},chooseContactFromAddressbook:function(a){c.request({name:c.METHOD_CHOOSE_CONTACE_FROM_ADDRESSBOOK,callback:a.callback})},hideLoadingPage:function(){c.request({name:c.METHOD_HIDE_LOADING_PAGE})},showLoadingPage:function(){c.request({name:c.METHOD_SHOW_LOADING_PAGE})},choose_invoice_title:function(a){c.request({name:c.METHOD_APP_CHOOSE_INVOICE_TITLE,callback:a.callback,title:a.title})},get_device_info:function(a){c.request({name:c.METHOD_APP_GET_DEVICE_INFO,callback:a.callback})},show_voice_search:function(a){c.request({name:c.METHOD_APP_SHOW_VOICE_SEARCH,bussinessType:a.bussinessType})},choose_photo:function(a){c.request({name:c.METHOD_APP_CHOOSE_PHOTO,maxFileSize:a.maxFileSize,maxPhotoCount:a.maxPhotoCount,meta:a.meta,callback:a.callback})},finished_register:function(a){c.request({name:c.METHOD_APP_FINISHED_REGISTER,userInfo:a.userInfo})},app_call_system_share:function(a){c.request({name:c.METHOD_APP_CALL_SYSTEM_SHARE,imageRelativePath:a.imageRelativePath,text:a.text,title:a.title,linkUrl:a.linkUrl,isIOSSystemShare:a.isIOSSystemShare})},app_check_network_status:function(a){c.request({name:c.METHOD_APP_CHECK_NETWORK_STATUS,callback:a.callback})},app_check_android_package_info:function(a){c.request({name:c.METHOD_APP_CHECK_ANDROID_PACKAGE_INFO,callback:a.callback})},app_log_google_remarkting:function(a){c.request({name:c.METHOD_APP_LOG_GOOGLE_REMARKTING,url:a})},app_read_verification_code_from_sms:function(a){c.request({name:c.METHOD_APP_READ_VERIFICATION_CODE_FROM_SMS,callback:a.callback})},app_h5_page_finish_loading:function(){c.request({name:c.METHOD_H5_PAGE_FINISH_LOADING})}};f.file={isFileExist:function(a){c.request({name:c.METHOD_CHECK_FILE_EXIST,callback:a.callback,fileName:a.fileName,relativeFilePath:a.relativeFilePath})},deleteFile:function(a){c.request({name:c.METHOD_DELETE_FILE,callback:a.callback,fileName:a.fileName,relativeFilePath:a.relativeFilePath})},getCurrentSandboxName:function(a){c.request({name:c.METHOD_GET_CURRENT_SANDBOX_NAME,callback:a.callback})},getFileSize:function(a){c.request({name:c.METHOD_GET_FILE_SIZE,callback:a.callback,fileName:a.fileName,relativeFilePath:a.relativeFilePath})},makeDir:function(a){c.request({name:c.METHOD_MAKE_DIR,callback:a.callback,dirname:a.dirname,relativeFilePath:a.relativeFilePath})},readTextFromFile:function(a){c.request({name:c.METHOD_READ_TEXT_FROM_FILE,callback:a.callback,fileName:a.fileName,relativeFilePath:a.relativeFilePath})},writeTextToFile:function(a){c.request({name:c.METHOD_WRITE_TEXT_TO_FILE,callback:a.callback,text:a.text,isAppend:a.isAppend,fileName:a.fileName,relativeFilePath:a.relativeFilePath})}},f.pipe={socketRequest:function(a){var b=Date.now();return c.request({name:c.METHOD_SEND_H5_PIPE_REQUEST,callback:a.callback,serviceCode:a.serviceCode,header:a.header,data:a.data,sequenceId:b,pipeType:a.pipeType}),b},httpRequest:function(a){var b=Date.now();return c.request({name:c.METHOD_SEND_HTTP_PIPE_REQUEST,callback:a.callback,target:a.url,method:a.method,header:a.header,queryData:a.param,retryInfo:a.retry,sequenceId:b}),b},abortRequest:function(a){c.request({name:c.METHOD_ABORT_HTTP_PIPE_REQUEST,sequenceId:a.id})},abortSocketRequest:function(a){c.unregister({name:c.METHOD_SEND_H5_PIPE_REQUEST,sequenceId:a})}},f.pay={checkStatus:function(a){c.request({name:c.METHOD_CHECK_PAY_APP_INSTALL_STATUS,callback:a.callback})},payOut:function(a){c.request({name:c.METHOD_OPEN_PAY_APP_BY_URL,payAppName:a.payAppName,payURL:a.payURL,successRelativeURL:a.successRelativeURL,detailRelativeURL:a.detailRelativeURL})}},f.encrypt={ctrip_encrypt:function(a){c.request({name:c.METHOD_ENCRYPT_CTRIP,callback:a.callback,inString:a.inStr,encType:1})},ctrip_decrypt:function(a){c.request({name:c.METHOD_ENCRYPT_CTRIP,callback:a.callback,inString:a.inStr,encType:2})}};var g=d(f);g=_.extend(g,{jump:function(a){a&&a.url&&"string"==typeof a.url&&(window.location.href=a.url)},apply:function(a){a&&a.callback&&"function"==typeof a.callback&&a.callback()},call:function(a){var b=document.getElementById("h5-hybrid-caller");return a&&a.url?void(b&&b.src==a.url?b.contentDocument.location.reload():b&&b.src!=a.url?b.src=a.url:(b=document.createElement("iframe"),b.id="h5-hybrid-caller",b.src=a.url,b.style.display="none",document.body.appendChild(b))):!1},log:function(a){window.console&&window.console.log(a.name)},print:function(a){return 0},callService:function(){window.location.href="tel:4000086666"},backToLastPage:function(){window.location.href=document.referrer},home:function(){window.location.href="/"}}),g.encrypt={ctrip_encrypt:function(){return!1},ctrip_decrypt:function(){return!1}},b.register({name:e,fn:a.isInApp()?f:g})}),define("App",["libs","cBase","AbstractAPP","cWidgetFactory","cWidgetGuider"],function(a,b,c,d){!function(){function a(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"left":"right":c-d>0?"up":"down"}function b(b,c,h,i){b&&b.on(e,function(a){var b=a.changedTouches&&a.changedTouches[0]||a;d.x1=b.pageX,d.y1=b.pageY}).on(f,function(a){i||a.preventDefault()}).on(g,function(b){var e=b.changedTouches&&b.changedTouches[0]||b;if(d.x2=e.pageX,d.y2=e.pageY,d.x2&&Math.abs(d.x1-d.x2)>10||d.y2&&Math.abs(d.y1-d.y2)>10){var f=a(d.x1,d.x2,d.y1,d.y2);c===f&&"function"==typeof h&&h()}else"tap"===c&&"function"==typeof h&&h()})}function c(a){a&&a.off(e).off(f).off(g)}var d={},e="touchstart",f="touchmove",g="touchend";"ontouchstart"in window||(e="mousedown",f="mousemove",g="mouseup"),$.flip=b,$.flipDestroy=c}();var e=new b.Class(c,{__propertys__:function(){},cleanCache:function(){var a=["FLIGHT_SEARCH","FLIGHT_SEARCH_SUBJOIN","FLTINTL_SEARCH","FLIGHT_LIST","FLIGHT_INTER_CITY_LIST","FLIGHT_CITY_LIST","zqInCityInfo","zqInCityDateStore","LastInCitySelectDateTime","LastzqInAirportSelectDateTime","zqInAirportInfo","zqInAirportDateStore","zqInAirportDateAndAddressStore","zqInCityDateAndAddressStore","zqInCitySelectStore","zqInAirportSelectStore","FLIGHT_DETAILS","FLIGHT_DETAILS_PARAM","FLIGHT_ORDERINFO","USER_FLIGHT_ORDERLIST","USER_FLIGHT_ORDERDETAIL","USER_FLIGHT_ORDERPARAM","FLIGHT_RETURNPAGE","FLIGHT_SELECTED_INFO","FLIGHT_PICK_TICKET_SELECT","FLIGHT_AIRLINE","FLIGHT_AIRCTRAFT","FLIGHT_ENUM_TAKETIME","FLIGHT_ENUM_CABINS","FLIGHT_LIST_FILTER","FLIGHT_PICK_TICKET","FLIGHT_PICK_TICKET_PARAM","FLIGHT_AD_TIMEOUT","P_FLIGHT_TicketList","U_FLIGHT_ORDERLIST","U_FLIGHT_ORDERDETAIL"],b={flight:a},c=b[this.channel];if(Array.isArray(c))for(var d in c)window.localStorage.removeItem(d)},initialize:function($super,a){$super(a);var b=d.create("Guider");b.create(),$.bindFastClick&&$.bindFastClick(),this.cleanCache()}});return e}),define("rsa",[],function(){function a(a){K=a,L=new Array(K);for(var c=0;c<L.length;c++)L[c]=0;M=new b,N=new b,N.digits[0]=1}function b(a){this.digits="boolean"==typeof a&&1==a?null:L.slice(0),this.isNeg=!1}function c(a){var c=new b(!0);return c.digits=a.digits.slice(0),c.isNeg=a.isNeg,c}function d(a){var c=new b;c.isNeg=0>a,a=Math.abs(a);for(var d=0;a>0;)c.digits[d++]=a&T,a=Math.floor(a/Q);return c}function e(a){for(var b="",c=a.length-1;c>-1;--c)b+=a.charAt(c);return b}function f(a,c){var d=new b;d.digits[0]=c;for(var f=A(a,d),g=U[f[1].digits[0]];1==z(f[0],M);)f=A(f[0],d),digit=f[1].digits[0],g+=U[f[1].digits[0]];return(a.isNeg?"-":"")+e(g)}function g(a){var b=15,c="";for(i=0;4>i;++i)c+=V[a&b],a>>>=4;return e(c)}function h(a){for(var b="",c=(p(a),p(a));c>-1;--c)b+=g(a.digits[c]);return b}function k(a){var b,c=48,d=c+9,e=97,f=e+25,g=65,h=90;return b=a>=c&&d>=a?a-c:a>=g&&h>=a?10+a-g:a>=e&&f>=a?10+a-e:0}function l(a){for(var b=0,c=Math.min(a.length,4),d=0;c>d;++d)b<<=4,b|=k(a.charCodeAt(d));return b}function m(a){for(var c=new b,d=a.length,e=d,f=0;e>0;e-=4,++f)c.digits[f]=l(a.substr(Math.max(e-4,0),Math.min(e,4)));return c}function n(a,c){var d;if(a.isNeg!=c.isNeg)c.isNeg=!c.isNeg,d=o(a,c),c.isNeg=!c.isNeg;else{d=new b;for(var e,f=0,g=0;g<a.digits.length;++g)e=a.digits[g]+c.digits[g]+f,d.digits[g]=e%Q,f=Number(e>=Q);d.isNeg=a.isNeg}return d}function o(a,c){var d;if(a.isNeg!=c.isNeg)c.isNeg=!c.isNeg,d=n(a,c),c.isNeg=!c.isNeg;else{d=new b;var e,f;f=0;for(var g=0;g<a.digits.length;++g)e=a.digits[g]-c.digits[g]+f,d.digits[g]=e%Q,d.digits[g]<0&&(d.digits[g]+=Q),f=0-Number(0>e);if(-1==f){f=0;for(var g=0;g<a.digits.length;++g)e=0-d.digits[g]+f,d.digits[g]=e%Q,d.digits[g]<0&&(d.digits[g]+=Q),f=0-Number(0>e);d.isNeg=!a.isNeg}else d.isNeg=a.isNeg}return d}function p(a){for(var b=a.digits.length-1;b>0&&0==a.digits[b];)--b;return b}function q(a){var b,c=p(a),d=a.digits[c],e=(c+1)*P;for(b=e;b>e-P&&0==(32768&d);--b)d<<=1;return b}function r(a,c){for(var d,e,f,g=new b,h=p(a),i=p(c),k=0;i>=k;++k){for(d=0,f=k,j=0;h>=j;++j,++f)e=g.digits[f]+a.digits[j]*c.digits[k]+d,g.digits[f]=e&T,d=e>>>O;g.digits[k+h+1]=d}return g.isNeg=a.isNeg!=c.isNeg,g}function s(a,c){var d,e,f;result=new b,d=p(a),e=0;for(var g=0;d>=g;++g)f=result.digits[g]+a.digits[g]*c+e,result.digits[g]=f&T,e=f>>>O;return result.digits[1+d]=e,result}function t(a,b,c,d,e){for(var f=Math.min(b+e,a.length),g=b,h=d;f>g;++g,++h)c[h]=a[g]}function u(a,c){var d=Math.floor(c/P),e=new b;t(a.digits,0,e.digits,d,e.digits.length-d);for(var f=c%P,g=P-f,h=e.digits.length-1,i=h-1;h>0;--h,--i)e.digits[h]=e.digits[h]<<f&T|(e.digits[i]&W[f])>>>g;return e.digits[0]=e.digits[h]<<f&T,e.isNeg=a.isNeg,e}function v(a,c){var d=Math.floor(c/P),e=new b;t(a.digits,d,e.digits,0,a.digits.length-d);for(var f=c%P,g=P-f,h=0,i=h+1;h<e.digits.length-1;++h,++i)e.digits[h]=e.digits[h]>>>f|(e.digits[i]&X[f])<<g;return e.digits[e.digits.length-1]>>>=f,e.isNeg=a.isNeg,e}function w(a,c){var d=new b;return t(a.digits,0,d.digits,c,d.digits.length-c),d}function x(a,c){var d=new b;return t(a.digits,c,d.digits,0,d.digits.length-c),d}function y(a,c){var d=new b;return t(a.digits,0,d.digits,0,c),d}function z(a,b){if(a.isNeg!=b.isNeg)return 1-2*Number(a.isNeg);for(var c=a.digits.length-1;c>=0;--c)if(a.digits[c]!=b.digits[c])return a.isNeg?1-2*Number(a.digits[c]>b.digits[c]):1-2*Number(a.digits[c]<b.digits[c]);return 0}function A(a,d){var e,f,g=q(a),h=q(d),i=d.isNeg;if(h>g)return a.isNeg?(e=c(N),e.isNeg=!d.isNeg,a.isNeg=!1,d.isNeg=!1,f=o(d,a),a.isNeg=!0,d.isNeg=i):(e=new b,f=c(a)),new Array(e,f);e=new b,f=a;for(var j=Math.ceil(h/P)-1,k=0;d.digits[j]<R;)d=u(d,1),++k,++h,j=Math.ceil(h/P)-1;f=u(f,k),g+=k;for(var l=Math.ceil(g/P)-1,m=w(d,l-j);-1!=z(f,m);)++e.digits[l-j],f=o(f,m);for(var r=l;r>j;--r){var t=r>=f.digits.length?0:f.digits[r],x=r-1>=f.digits.length?0:f.digits[r-1],y=r-2>=f.digits.length?0:f.digits[r-2],A=j>=d.digits.length?0:d.digits[j],B=j-1>=d.digits.length?0:d.digits[j-1];e.digits[r-j-1]=t==A?T:Math.floor((t*Q+x)/A);for(var C=e.digits[r-j-1]*(A*Q+B),D=t*S+(x*Q+y);C>D;)--e.digits[r-j-1],C=e.digits[r-j-1]*(A*Q|B),D=t*Q*Q+(x*Q+y);m=w(d,r-j-1),f=o(f,s(m,e.digits[r-j-1])),f.isNeg&&(f=n(f,m),--e.digits[r-j-1])}return f=v(f,k),e.isNeg=a.isNeg!=i,a.isNeg&&(e=i?n(e,N):o(e,N),d=v(d,k),f=o(d,f)),0==f.digits[0]&&0==p(f)&&(f.isNeg=!1),new Array(e,f)}function B(a,b){return A(a,b)[0]}function C(a){this.modulus=c(a),this.k=p(this.modulus)+1;var d=new b;d.digits[2*this.k]=1,this.mu=B(d,this.modulus),this.bkplus1=new b,this.bkplus1.digits[this.k+1]=1,this.modulo=D,this.multiplyMod=E,this.powMod=F}function D(a){var b=x(a,this.k-1),c=r(b,this.mu),d=x(c,this.k+1),e=y(a,this.k+1),f=r(d,this.modulus),g=y(f,this.k+1),h=o(e,g);h.isNeg&&(h=n(h,this.bkplus1));for(var i=z(h,this.modulus)>=0;i;)h=o(h,this.modulus),i=z(h,this.modulus)>=0;return h}function E(a,b){var c=r(a,b);return this.modulo(c)}function F(a,c){var d=new b;d.digits[0]=1;for(var e=a,f=c;;){if(0!=(1&f.digits[0])&&(d=this.multiplyMod(d,e)),f=v(f,1),0==f.digits[0]&&0==p(f))break;e=this.multiplyMod(e,e)}return d}function G(a,b,c){this.e=m(a),this.d=m(b),this.m=m(c),this.digitSize=2*p(this.m)+2,this.chunkSize=this.digitSize-11,this.radix=16,this.barrett=new C(this.m)}function H(a,c){if(a.chunkSize>a.digitSize-11)return"Error";for(var d=new Array,e=c.length,g=0;e>g;)d[g]=c.charCodeAt(g),g++;var i,j,k,l=d.length,m="";for(g=0;l>g;g+=a.chunkSize){k=new b,i=0;var n,o=g+a.chunkSize>l?l%a.chunkSize:a.chunkSize,p=new Array;for(n=0;o>n;n++)p[n]=d[g+o-1-n];p[o]=0;var q=Math.max(8,a.digitSize-3-o);for(n=0;q>n;n++)p[o+1+n]=Math.floor(254*Math.random())+1;for(p[a.digitSize-2]=2,p[a.digitSize-1]=0,j=0;j<a.digitSize;++i)k.digits[i]=p[j++],k.digits[i]+=p[j++]<<8;var r=a.barrett.powMod(k,a.e),s=16==a.radix?h(r):f(r,a.radix);m+=s+" "}return m.substring(0,m.length-1)}function I(a){{var b,c,d,e,f,g,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}for(d=a.length,c=0,b="";d>c;){if(e=255&a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4),b+="==";break}if(f=a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2),b+="=";break}g=a.charCodeAt(c++),b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2|(192&g)>>6),b+=h.charAt(63&g)}return b}function J(a){var b=H(Y,I(a));return b}var K,L,M,N,O=16,P=O,Q=65536,R=Q>>>1,S=Q*Q,T=Q-1;a(20);var U=(d(1e15),new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z")),V=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),W=new Array(0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535),X=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535);a(131);var Y=new G("10001","","B7273B08845EB1D93C9A6EB9C45BE087AF9E692C8B7DD6D38DECFA732E9A6CDCB52106BDDB9E13100AEF3638358D5B5EB9011C33B7AC3F697078C0572585B94119196F627025C6E7FA9AA5C82B149E2BB30FEA7D777AA453324A301FD46413E11A7DB4A9D5B2D4BD6330AE2C477D48250F057ABEF2BD76DC7574897254736A71");return{rsaEncrypted:J}}),define("cUIBase",[],function(){var a={};return a.config={prefix:"cui-"},a.setConfig=function(b,c){a.config[b]=c},a.getElementPos=function(a){var b=0,c=0;do b+=a.offsetTop,c+=a.offsetLeft;while(a=a.offsetParent);return{top:b,left:c}},a.getCreateId=function(){var b=(new Date).getTime();return function(){return a.config.prefix+ ++b}}(),a.getBiggerzIndex=function(){var a=3e3;return function(){return++a}}(),a.getCurStyleOfEl=function(a,b){if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(a).getPropertyValue(b);if(a.currentStyle){for(var c,d=b.split("-"),e=[],f=0;f<d.length;f++)0==f?e.push(d[f]):(c=d[f].split(""),c[0]=c[0].toUpperCase(),e.push(c.join("")));return e=e.join(""),a.currentStyle[e]}},a.bindthis=function(a,b){return function(){a.apply(b,arguments)}},a.strToNum=function(a){var b=parseInt(a.replace(/[a-z]/i,""));return isNaN(b)?0:b},a.getElementRealSize=function(a){var b=$(a);return{width:b.width(),height:b.height()}},a.getPageSize=function(){var a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:a,height:b}},a.getPageScrollPos=function(){var a=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),b=Math.max(document.documentElement.scrollTop,document.body.scrollTop),c=Math.min(document.documentElement.clientHeight,document.body.clientHeight),d=Math.min(document.documentElement.clientWidth,document.body.clientWidth),e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),f=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{top:b,left:a,height:c,width:d,pageWidth:e,pageHeight:f}},a.getMousePos=function(a){var b=Math.max(document.body.scrollTop,document.documentElement.scrollTop),c=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);return{top:b+a.clientY,left:c+a.clientX}},a.getMousePosOfElement=function(b,c){var d=a.getMousePos(b),e=a.getElementPos(c),f=c.clientWidth,g=c.clientHeight,h=d.left-e.left,i=d.top-e.top;return h=0>h?0:h>f?f:h,i=0>i?0:i>g?g:i,{x:h,y:i}},a.createElement=function(a,b){var c,d,e=document.createElement(a);if(b)for(c in b)switch(c){case"attr":if("object"==typeof b[c])for(d in b[c])null!=b[c][d]&&e.setAttribute(d,b[c][d]);break;case"styles":if("object"==typeof b[c])for(d in b[c])null!=b[c][d]&&(e.style[d]=b[c][d]);break;case"id":e.id=b[c];break;case"class":e.className=b[c];break;case"html":e.innerHTML=b[c]}return e},a}),define("cUIAbstractView",["libs","cBase","cUIBase"],function(a,b,c){var d=Array.prototype.slice,e=Array.prototype.push,f=Object.prototype.toString,g="notCreate",h="onCreate",i="onShow",j="onHide",k={};return k.__propertys__=function(){this.allowEvents={onCreate:!0,onShow:!0,onHide:!0},this.allowsPush={classNames:!0},this.allowsConfig={rootBox:!0},this.events={onCreate:[],onShow:[],onHide:[]},this.status=g,this.setOptionHander=[],this.rootBox,this.id=c.getCreateId(),this.classNames=[c.config.prefix+"view"],this.root,this.isCreate=!1,this.eventArr={}},k.bindEvents=function(){var a=this.eventArr;if(!a&&!(a=_.result(this,"events")))return this;this.unBindEvents();var b,c,d,e,f,g=/^(\S+)\s*(.*)$/;for(b in a)c=a[b],_.isFunction(c)||(c=this[a[b]]),c&&(d=b.match(g),e=d[1],f=d[2],c=_.bind(c,this),e+=".delegateUIEvents"+this.id,""===f?this.root.on(e,c):this.root.on(e,f,c));return this},k.unBindEvents=function(){return this.root.off(".delegateUIEvents"+this.id),this},k.initialize=function(a){this.setOption(function(a,b){switch(!0){case this.allowEvents[a]:this.addEvent(a,b);break;case this.allowsPush[a]:"[object Array]"===f.call(b)?e.apply(this[a],b):this[a].push(b);break;case this.allowsConfig[a]:this[a]=b}}),this.readOption(a)},k.readOption=function(a){a=a||{};var b=this;$.each(a,function(a,c){$.each(b.setOptionHander,function(d,e){"function"==typeof e&&e.call(b,a,c)})})},k.setOption=function(a){this.setOptionHander.push(a)},k.createRoot=function(){var a=document.createElement("div");return a.className=this.classNames.join(" "),a.id=this.id,$(a)},k.addClass=function(a){if(this.classNames.push(a),this.root)if("array"==typeof a)for(var b in a)this.root.addClass(a[b]);else"string"==typeof a&&this.root.addClass(a)},k.removeClass=function(a){if("array"==typeof a)for(var b in a)this.root.removeClass(a[b]);else"string"==typeof a&&this.root.removeClass(a)},k.createHtml=function(){throw new Error("未定义createHtml方法")},k.setRootHtml=function(a){this.root&&(this.root.empty(),this.root.append(a))},k.getRoot=function(){return this.root},k.addEventType=function(a){this.allowEvents[a]=!0,this.events[a]=[]},k.addEvent=function(a,b){return this.allowEvents[a]?void(this.events[a]&&this.events[a].push(b)):!1},k.removeEvent=function(a,b){this.events[a]&&(this.events[a]=b?_.without(this.events[a],b):[])},k.remove=function(){this.hide(),this.root.remove()},k.trigger=function(a){var b,c,e=d.call(arguments,1),f=this.events,g=[];if(this.events[a])for(b=0,c=f[a].length;c>b;b++)g[g.length]=f[a][b].apply(this,e);return g},k.create=function(){this.isCreate||this.status===h||(this.rootBox=this.rootBox||$("body"),this.root=this.createRoot(),this.root.hide(),this.rootBox.append(this.root),this.root.append(this.createHtml()),this.trigger("onCreate"),this.status=h,this.isCreate=!0)},k.template=function(a){return _.template(a)},k.showAction=function(a){this.bindEvents(),this.root.show(),"function"==typeof a&&a()},k.hideAction=function(a){this.unBindEvents(),this.root.hide(),"function"==typeof a&&a()},k.setzIndexTop=function(a){a="number"!=typeof a?0:a,this.root.css("z-index",c.getBiggerzIndex()+a)},k.isNotCreate=function(){return this.status===g},k.isShow=function(){return this.status===i},k.isHide=function(){return this.status===j},k.show=function(a){this.status!==i&&(this.create(),this.showAction($.proxy(function(){this.trigger("onShow"),this.status=i,a&&a.call(this)},this)))},k.hide=function(a){this.root&&this.status!==j&&this.hideAction($.proxy(function(){this.trigger("onHide"),this.status=j,a&&a.call(this)},this))},k.reposition=function(){this.root.css({"margin-left":-($(this.root).width()/2)+"px","margin-top":-($(this.root).height()/2)+"px"})},b.Class(k)}),function(){var a={t:600,hasApp:!1,key:"HAS_CTRIP_APP",appProtocol:"ctrip://wireless",openApp:function(b,c,d){var e=a.getAppData(),f=Date.now();if(e&&""!=e)return e.hasApp?"function"==typeof b?b()&&d&&d.length>0&&(window.location=d):d&&d.length>0&&(window.location=d):"function"==typeof c&&c(),"";(!d||d.length<=0)&&"function"==typeof c&&c();var g=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",h=-1!=g.indexOf("android",0)||-1!=g.indexOf("adr",0)?1:0,i=h&&-1!=g.indexOf("chrome",0)&&-1==g.indexOf("nexus",0),j=$('<iframe style="display: none;"></iframe>');j.attr("src",d),$("body").append(j),i&&(d&&d.length>0&&(window.location=d),setTimeout(function(){"function"==typeof c&&c()},1)),setTimeout(function(){a.testApp(f)},a.t),a.setTestResult(b,c)},testApp:function(b){var c=Date.now();a.hasApp=c-b<a.t+200?!1:!0},setTestResult:function(b,c){setTimeout(function(){a.hasApp?"function"==typeof b&&b():"function"==typeof c&&c();var d=new Date;d.setHours(d.getHours()+1);var e={value:{hasApp:a.hasApp},timeout:d.toUTCString()};window.localStorage.setItem(a.key,JSON.stringify(e)),window.hasApp=a.hasApp},a.t+1e3)},getAppData:function(){return""}};window.AppUtility=a}();var adOptions=adOptions||{};if(adOptions.__propertys__=function(){},adOptions.initialize=function($super,a){this.data=a||{},this.storeKey="APP_DOWNLOAD",$super(a)},adOptions.update=function(a){this.isInFooter&&(this.remove(),this.isCreate=!1),this.rootBox=a.rootBox,this.root||(this.root=this.rootBox),this.isInFooter=!!this.rootBox.hasClass("js_in_Footer"),this.addEvent&&(this.removeEvent("onShow"),this.addEvent("onShow",this.onShow))},adOptions.createHtml=function(){var a=(adOptions.getUrlParam("sourceid"),adOptions.getUrlParam("sales"),adOptions.getUrlParam("allianceid")),b=adOptions.getUrlParam("sid"),c=this.isInFooter?"":"fix_bottom",d="/market/download.aspx?from=H5",e=adOptions._get("SALES_OBJECT"),f=adOptions._get("UNION"),g=adOptions._getCookie("UNION"),h="";a&&a.length>0&&b&&b.length>0&&(h="display:none;"),(f||g)&&(h="display:none;"),e||(h="display:none;"),e&&e.sid&&+e.sid>0&&((!e.appurl||e.appurl.length<=0)&&(h="display:none;"),d=e.appurl?e.appurl:"/market/download.aspx?from="+e.sid),0==this.checkDeviceSupport()&&(h="display:none;");for(var i=[5942,1127,7225,5942,3588],j=0,k=i.length;k>j;j++)if(+a===i[j]){h="";break}if(h.length>0)return $("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"),adOptions.saveExpire(1),"";var l=function(){return window.navigator.userAgent.indexOf("MicroMessenger")>-1},m=function(){return window.navigator.userAgent.indexOf("CtripLite")>-1};if(!l()&&!m()){var n=this.setAppUrl();
return['<div data-appurl="'+n+'" id="dl_app" style="'+h+'" class="',c,'"> <div id="icon_text" class="txt_middle"><img src="http://res.m.ctrip.com/html5/content/images/icon_text_s6_1.png"/></div>',' <a href="'+d+'" id="app_link" class="txt_middle __appaddress__"><img src="http://res.m.ctrip.com/html5/content/images/icon_open_s6.png"/></a>','<div id="close_icon"></div>',"</div>"].join("")}},adOptions.getUrlParam=function(a){var b=document.location.href||"",c=new RegExp("(\\?|&)"+a+"=([^&]+)(&|$)","i"),d=b.match(c);return d?d[2]:""},adOptions.setAppUrl=function(){var a=adOptions._get("SALES"),b=window.location.href,c=AppUtility.appProtocol,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=$("#page_id").val(),r=new RegExp("-","g"),s=new RegExp("/","g"),t=null;if(q&&+q>0){if(234002==+q&&(t=b.substring(b.lastIndexOf("/")+1).replace(".html",""),d="h5?path=diyshx&page=index.html#/detail.pro#sdpid=",d=t?d+t:d),(212092==+q||212093==+q||212094==+q||210090==+q)&&(d=212092==+q?"hotel_inquire":212093==+q||210090==+q?"hotel_inland_list":212094==+q?"InlandHotel":"",e=window.localStorage?window.localStorage.getItem("HOTELSEARCHINFO"):null,e&&(e=JSON.parse(e),212092==+q&&(e.data&&(f=e.data.CheckInDate.replace(r,""),g=e.data.CheckOutDate.replace(r,""),h=e.data.CheckInCityID,i=e.data.DistrictId?+e.data.DistrictId<=0?"":e.data.DistrictId:"",j=e.data.BrandId,k=e.data.BrandName,l=0),d+="?c1="+(f||"")+"&c2="+(g||"")+"&c3="+(h||"")+"&c4="+(i||"")+"&c5="+(j||"")+"&c6="+(k||"")+"&c7="+(l||"")),(212093==+q||210090==+q)&&(e.data&&(f=e.data.CheckInDate.replace(r,""),g=e.data.CheckOutDate.replace(r,""),h=e.data.CheckInCityID,i=e.data.DistrictId?+e.data.DistrictId<=0?"":e.data.DistrictId:"",j=0,k=e.data.BrandId?+e.data.BrandId<=0?"":e.data.BrandId:"",l=e.data.BrandName||"",m=0,n=1,o="",p="",210090==+q&&(n=2,o=e.data.Latitude,p=e.data.Longitude)),d+="?c1="+(f||"")+"&c2="+(g||"")+"&c3="+(h||"")+"&c4="+(i||"")+"&c5="+(j||"")+"&c6="+(k||"")+"&c7="+(l||"")+"&c8="+(m||"")+"&c9="+(n||"")+"&c10="+(o||"")+"&c11="+(p||"")),212094==+q))){e.data&&(f=e.data.CheckInDate.replace(r,""),g=e.data.CheckOutDate.replace(r,""),h=e.data.CheckInCityID);var u=window.localStorage?window.localStorage.getItem("HOTELDETAIL"):null;u&&(u=JSON.parse(u),u&&u.data&&(i=u.data.HotelID)),d+="?checkInDate="+(f||"")+"&checkOutDate="+(g||"")+"&cityId="+(h||"")+"&hotelId="+(i||"")}if((212001==+q||214008==+q)&&(d=212001==+q?"hotel_groupon_list":214008==+q?"hotel_groupon_detail":"",212001==+q&&(e=window.localStorage?window.localStorage.getItem("TUAN_SEARCH"):null,e=e?JSON.parse(e):null,f=e&&e.value?e.value.ctyId:"2",d+="?c1="+(f||"2")),214008==+q&&(e=window.localStorage?window.localStorage.getItem("TUAN_DETAILS"):null,e=e?JSON.parse(e):null,f=e&&e.value?e.value.id:null,d+="?c1="+(f||""))),212041==+q||212042==+q){if(212042==+q){e=window.localStorage?window.localStorage.getItem("AIRSTATE_DETAIL_PARAM"):null,e=e?JSON.parse(e):null;var v=e.data.dPort||"",w=e.data.aPort||"",x=e.data.fNo||"",y=e.data.fdate;d="flight_board_list",d+="?c1="+y+"&c2="+x+"&c3="+v+"&c4="+w}if(212041==+q){e=window.localStorage?window.localStorage.getItem("SEARCHINFO"):null,e=e?JSON.parse(e):null;var v=e.data.DepartAirportCode||"",w=e.data.ArriveAirportCode||"",y=e.data.DepartDate.replace(/-/g,"");d="flight_board_inquire",d+="?c1="+y+"&c2="+v+"&c3="+w}}if(212003==+q||212004==+q||212009==+q||214019==+q||214209==+q){if(e=window.localStorage?window.localStorage.getItem("S_FLIGHT_AirTicket"):null,e=e?JSON.parse(e):null,e&&e.value&&e.value._items&&e.value._items.length>0){f=e.value.tripType,g=e.value._items[0].dCtyId,h=e.value._items[0].aCtyId,i=e.value._items[0].date.replace(s,""),f&&+f>1&&e.value._items.length>1&&(j=e.value._items[1].date.replace(s,""));var z=window.localStorage?window.localStorage.getItem("S_FLIGHT_SUBJOIN"):null;(214019==+q||214209==+q)&&(z=window.localStorage?window.localStorage.getItem("S_FLIGHT_INTLAirTicket"):null),z=z?JSON.parse(z):null,k="",l="",m="",n="",o="",p="",z&&z.value&&(214019==+q||214209==+q?(k=1,0==+z.value["class"]&&(l="1"),1==+z.value["class"]&&(l="2"),2==+z.value["class"]&&(l="3"),3==+z.value["class"]&&(l="4"),2==+z.value.sortRule&&(2==+z.value.sortType&&(m="1"),1==+z.value.sortType&&(m="2")),1==+z.value.sortRule&&(2==+z.value.sortType&&(m="3"),1==+z.value.sortType&&(m="4")),214209==+q&&(l=m=n="")):("1"==z.value["departfilter-type"]&&("3"==z.value["departfilter-value"]&&(k="5"),"0"==z.value["departfilter-value"]&&(k="1")),"price"==z.value["depart-sorttype"]&&("asc"==z.value["depart-orderby"]&&(l="3"),"desc"==z.value["depart-orderby"]&&(l="4")),"time"==z.value["depart-sorttype"]&&("asc"==z.value["depart-orderby"]&&(l="1"),"desc"==z.value["depart-orderby"]&&(l="2")),"0"==z.value["departfilter-type"]&&(n=z.value["departfilter-value"]||"",n=n.replace("-","|"),n=n.replace(":",""),n=n.replace(":","")),"2"==z.value["departfilter-type"]&&(p=z.value["departfilter-value"]||""),212009==+q&&(k=l=m=n=p="")))}e=!e&&window.localStorage?window.localStorage.getItem("AIRSTATE_DETAIL_PARAM"):null,e=e?JSON.parse(e):null,e&&e.data&&(f=e.data.fdate||"",g=e.data.fNo||"",h=e.data.dPort||"",i=e.data.aPort||""),212003==+q&&(d="flight_inquire"),(212009==+q||212004==+q)&&(d=f&&+f>1?"flight_inland_tolist":"flight_inland_singlelist"),(214019==+q||214209==+q)&&(d=f&&+f>1?"flight_int_tolist":"flight_int_singlelist"),212042==+q&&(d="flight_board_detail"),d+="?c1="+(f||"")+"&c2="+(g||"")+"&c3="+(h||"")+"&c4="+(i||"")+"&c5="+(j||"")+"&c6="+(k||"")+"&c7="+(l||"")+"&c8="+(m||"")+"&c9="+(n||"")+"&c10="+(o||"")+"&c11="+(p||"")}if((212071==+q||212072==+q)&&(d=212071==+q?"train_inquire":"train_list",e=window.localStorage?window.localStorage.getItem("TRAINSSEARCHINFO"):null,e=e?JSON.parse(e):null,e&&e.data&&(f=e.data.DepartCityId||"",g=e.data.ArriveCityId||"",h=e.data.DepartDate||"",h=h.replace(r,"")),d+="?c1="+(f||"")+"&c2="+(g||"")+"&c3="+(h||"")),214040==+q||214045==+q||214046==+q||214041==+q||214345==+q||214346==+q||214042==+q||214353==+q||214354==+q){if(f=g=h=i=j=k="",e=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_LIST_PARAM"):null,e=e?JSON.parse(e):null,214040==+q&&(d="vacation_home"),214045==+q){if(d="vacation_weekend_list",e&&e.value&&(f=e.value.dCtyId,e.value.qparams||e.value.qparams.length>0))for(var A in e.value.qparams){var B=e.value.qparams[A];B&&B.type&&(3==+B.type&&(g=B.val),2==+B.type&&(h=B.val),6==+B.type&&(j=B.val),7==+B.type&&(k=B.val))}d+="?cityId="+(f||"")+"&districtId="+(g||"")+"&travelDaysId="+(h||"")+"&levelId="+(i||"")+"&isSelfProudct="+(j||"")+"&isDiscount="+(k||"")}if(214046==+q&&(d="vacation_nearby_detail",f=g="",e=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_DETAIL_PARAM"):null,e=e?JSON.parse(e):null,e&&e.value&&(f=e.value.dCtyId||"",g=e.value.pid||""),d+="?departCityId="+(f||"")+"&productId="+(g||"")),214041==+q&&(d="vacation_group_inquire",f=g=h=i="",e=window.localStorage?window.localStorage.getItem("VACATIONS_GROUP_SEARCH_PARAM"):null,e=e?JSON.parse(e):null,e&&e.value&&(f=e.value.dCtyId,g=e.value.destKwd),d+="?departCityId="+(f||"")+"&arriveName="+(g||"")+"&travelDaysId="+(h||"")+"&levelId="+(i||"")),214345==+q){if(d="vacation_group_list",f=g=h=i=j=k=l="",e=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_LIST_PARAM"):null,e=e?JSON.parse(e):null,e&&e.value&&(f=e.value.dCtyId,g=e.value.destKwd,e.value.qparams||e.value.qparams.length>0))for(var A in e.value.qparams){var B=e.value.qparams[A];B&&B.type&&(3==+B.type&&(h=B.val),2==+B.type&&(i=B.val),6==+B.type&&(k=B.val),7==+B.type&&(l=B.val))}d+="?departCityId="+(f||"")+"&arriveName="+(g||"")+"&districtId="+(h||"")+"&travelDaysId="+(i||"")+"&levelId="+(j||"")+"&isSelfProduct="+(k||"")+"&isDiscount="+(l||"")}if(214346==+q&&(d="vacation_group_detail",f=g="",e=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_DETAIL_PARAM"):null,e=e?JSON.parse(e):null,e&&e.value&&(f=e.value.dCtyId||"",g=e.value.pid||""),d+="?departCityId="+(f||"")+"&productId="+(g||"")),214042==+q){if(d="vacation_cruises_inquire",e=window.localStorage?window.localStorage.getItem("VACATIONS_CRUISE_SEARCH_PARAM"):null,e=e?JSON.parse(e):null,f=g="",e&&e.value&&(f=e.value.dCtyId||"",e.value.qparams||e.value.qparams.length>0))for(var A in e.value.qparams){var B=e.value.qparams[A];14==+B.type&&(g=B.val)}d+="?departCityId="+(f||"")+"&routeId="+(g||"")}if(214353==+q){if(d="vacation_cruises_list",e=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_LIST_PARAM"):null,e=e?JSON.parse(e):null,f=g=h=i=j=k=l="",e&&e.value&&(f=e.value.dCtyId,e.value.qparams||e.value.qparams.length>0))for(var A in e.value.qparams){var B=e.value.qparams[A];B&&(14==+B.type&&(g=B.val),10==+B.type&&(h=B.val),11==+B.type&&(i=B.val),12==+B.type&&(j=B.val),6==+B.type&&(k=B.val),7==+B.type&&(l=B.val))}d+="?departCityId="+(f||"")+"&routeId="+(g||"")+"&companyId="+(h||"")+"&productFormId="+(i||"")+"&portDepartId="+(j||"")+"&isSelfProduct="+(k||"")+"&isDiscount="+(l||"")}214354==+q&&(d="vacation_cruises_detail",e=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_DETAIL_PARAM"):null,e=e?JSON.parse(e):null,f=g="",e&&e.value&&(f=e.value.dCtyId||"",g=e.value.pid||""),d+="?departCityId="+(f||"")+"&productId="+(g||""))}}c+=d?"/"+d:"";var C=this.getCurrentView();return C&&C.getAppUrl&&(c=AppUtility.appProtocol+C.getAppUrl()),c.indexOf("?")<=-1&&(c+="?v=2"),c+=a&&a.sourceid&&+a.sourceid>0?"&extendSourceID="+a.sourceid:"&extendSourceID=8888",0,c},adOptions.onShow=function(){this.root.off("click"),this.root.find("#close_icon").on("click",$.proxy(function(){this.saveExpire(1),this.hide(),$("footer")&&$("footer").removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85")},this));var a=this;this.root.find("#app_link").off("click").on("click",function(b){b.preventDefault();var c=$(this).attr("href"),d=a.setAppUrl(),e=($("#page_id").val(),navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"");0;var f=-1!=e.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0;return f?(window.location=d,setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return a.saveExpire(),!0},function(){window.location=c},d),!1}),0==this.checkDeviceSupport()&&("dl_app"==this.root.attr("id")&&this.root.hide(),$("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"))},adOptions.checkDeviceSupport=function(){var a=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",b=-1!=a.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0,c=-1!=a.indexOf("android",0)||-1!=a.indexOf("adr",0)?1:0;return 0==b&&0==c?!1:!0},adOptions.saveExpire=function(a){var b={isExpire:1},c=new Date;a&&(b.isClose=a),c.setDate(c.getDate()+1),this.storeKey||(this.storeKey="APP_DOWNLOAD"),this._set(this.storeKey,b,c.toUTCString())},adOptions.saveAutoDown=function(a){var b={isAutoDown:1,sid:a},c=new Date;c.setDate(c.getDate()+1),this._set("APP_AUTODOWNLOAD",b,c.toUTCString())},adOptions.appDownload=function(){var a=adOptions._get("SALES_OBJECT"),b=AppUtility.appProtocol;b+=a&&a.sid&&+a.sid>0?"?extendSourceID="+a.sid:"?extendSourceID=8888";var c=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",d=-1!=c.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0;d?(window.location=b,setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return!0},function(){var b="http://m.ctrip.com/market/download.aspx?from=H5";a&&(a.appurl&&a.appurl.length>0?b=a.appurl:a.sid&&+a.sid>0&&(b="http://m.ctrip.com/market/download.aspx?from="+a.sid)),window.location.href=b},b)},adOptions.checkForceDownload=function(){},adOptions.checkAutoDownload=function(){var a=this.getUrlParam("sourceid"),b=this.getUrlParam("openapp"),c=this.getUrlParam("downapp");if(!(!a||a.length<=0||0>=+a)){var d=0,e=0,f=0,g=0,h=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",i=-1!=h.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0,j=-1!=h.indexOf("android",0)||-1!=h.indexOf("adr",0)?1:0;c&&(i&&(2==+c||3==+c)&&(d=1),j&&(1==+c||3==+c)&&(e=1));var k=null;b&&(i&&(2==+b||3==+b?g=1:(g=0,k=null)),j&&(1==+b||3==+b?f=1:(f=0,k=null))),(f||g)&&(k=this.setAppUrl());var l=adOptions._get("SALES_OBJECT");if(i){if(0,k&&k.length>0){$(".iOpenApp").remove();var m=$('<iframe name="iOpen" class="iOpenApp" frameborder="0" style="display:none;"></iframe>');m.attr("src",k),$("body").append(m)}adOptions.isAutoDown(a)||!d||1!=+d?(adOptions.saveExpire(0),adOptions.saveAutoDown(a)):(adOptions.saveExpire(0),adOptions.saveAutoDown(a),setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30))}else AppUtility.openApp(function(){return adOptions.saveExpire(0),adOptions.saveAutoDown(a),!0},function(){if(adOptions.isAutoDown(a))return adOptions.saveExpire(0),adOptions.saveAutoDown(a),!0;if(navigator.connection&&navigator.connection.type!=navigator.connection.WIFI)return adOptions.saveExpire(0),adOptions.saveAutoDown(a),!0;var b="http://m.ctrip.com/market/download.aspx?from="+a;if(j){if(!e||1!=+e)return!0;b+="&App=3"}i&&(b+="&App=1"),l&&l.sid&&+l.sid>0&&+l.sid==+a&&l.appurl&&l.appurl.length>0&&(b=l.appurl),adOptions.saveExpire(0),adOptions.saveAutoDown(a),window.location.href=b},k)}},adOptions.create=function(){if($("body").find("iframe").remove(),this.isCreate||this.isExpire()||this.status===this.STATE_ONCREATE)$("footer")&&$("footer").removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85");else{var a=this.createHtml();a&&a.length>0?(this.root=$(a),this.rootBox.append(this.root),this.trigger("onCreate")):($("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85")),this.isCreate=!0}var b=(adOptions.createHtml(),this);setTimeout(function(){adOptions.checkAutoDownload.call(b)},2e3)},adOptions.isExpire=function(){var a=this._get(this.storeKey);return a&&a.isClose?!0:!1},adOptions.isAutoDown=function(){var a=this._get("APP_AUTODOWNLOAD");return a&&a.isAutoDown?!0:!1},adOptions._getCookie=function(a){var b=null;if(a){var c=new RegExp("\\b"+a+"=([^;]*)\\b"),d=c.exec(document.cookie);b=d&&unescape(d[1])}else{var e,f,g=document.cookie.split(";");for(b={},e=0,len=g.length;len>e;e++)f=g[e].split("="),b[f[0]]=unescape(f[2])}return b},adOptions.setCurrentView=function(a){this.curView=a},adOptions.getCurrentView=function(){return this.curView},adOptions._get=function(a){var b=window.localStorage.getItem(a);return b&&(b=JSON.parse(b),Date.parse(b.timeout)>=new Date)?b.value||b.data:""},adOptions._set=function(a,b,c){var d={value:b,timeout:c};window.localStorage.setItem(a,JSON.stringify(d))},window.location.pathname.indexOf("webapp")>-1||window.localStorage.getItem("isInApp"))define("cAdView",["cBase","cUIAbstractView","libs","cStore"],function(a,b){var c=new a.Class(b,adOptions);return c.getInstance=function(){return this.instance?this.instance:this.instance=new this},c});else{adOptions.show=function(){this.status="",this.create(),this.onShow()},adOptions.hide=function(){this.root.hide()},adOptions.trigger=function(){},adOptions.remove=function(){$("#dl_app").remove()};var config={rootBox:$("#footer")};setTimeout(function(){adOptions.initialize(function(){},config);var a=adOptions;a.update(config),a.show()},800)}adOptions.autoOpenDownApp=function(a,b,c){var d=0,e=0,f=0,g=0,h=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",i=-1!=h.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0,j=-1!=h.indexOf("android",0)||-1!=h.indexOf("adr",0)?1:0;i&&(d=1),j&&(e=1);var k=null;i&&(g=1),j&&(f=1);try{k=this.setAppUrl()}catch(l){}var m=adOptions._get("SALES_OBJECT");i?(k&&k.length>0&&(window.location=k),setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return!0},function(){var b="http://m.ctrip.com/market/download.aspx?from="+a;j&&(b+="&App=3"),i&&(b+="&App=1"),m&&m.sid&&+m.sid>0&&+m.sid==+a&&m.appurl&&m.appurl.length>0&&(b=m.appurl),window.location.href=b},k)},adOptions.popupPromo=function(){var a,b,c,d=function(a,b){b=b||"data";var c=window.localStorage?window.localStorage.getItem(a):null;return c&&(c=JSON.parse(c),c&&c[b])?c[b]:{}};if(adOptions._getCookie("Union")){var e={};adOptions._getCookie("Union").replace(/([^&=]+)=([^&]*)/g,function(a,b,c){e[b]=c}),b=e.AllianceID}if(a=adOptions.getUrlParam("sourceid")||d("SALES").sourceid||d("SALES_OBJECT","value").sid,c=adOptions.getUrlParam("sid")||d("UNION").SID,a&&(b=adOptions.getUrlParam("allianceid")||d("UNION").AllianceID||b,keywords=["baidu.com","google.com","soso.com","so.com","bing.com","yahoo","youdao.com","sogou.com","so.360.cn","jike.com","babylon.com","ask.com","avg.com","easou.com","panguso.com","yandex.com","sm.cn"],sourceids=["1825","1826","1827","1828","1829","1831","1832","1833","1830"],sIds=[130028,130029,409197,353693,130026,135366,297877,130033,130034,131044,110603,353694,130678,135371,353696,130701,135374,110611,353698,130709,135376,110614,426566,426568,353701,130727,135379,139029,110620,353703,130761,135383,353704,130788,135388,110630,353699,353700,189318,135390,130860,130875,303055,156043,130862,130863,130876,130859,240799,159295,442174,176275,240801,231208,278782,326416,353680,295517,130999,130907,112563,176220,110647,3752,125344,144532,120414,171210,86710,110276,447459],allianceids=["4897","4899","4900","4901","4902","4903","4904","5376","5377","3052","13964","13963","18887"],matchPopup=function(){for(var a=!1,b=!1,d=0,e=keywords.length;e>d;d++)if(document.referrer.match(keywords[d])){a=!0;break}for(var d=0,e=sIds.length;e>d;d++)if(+c===sIds[d]){b=!0;break}return a&&b},0,(1==adOptions.getUrlParam("sepopup")||matchPopup())&&document.referrer.indexOf("sepopup=1")<0&&null===document.getElementById("se-popup"))){var f=d("SALES_OBJECT","value"),g=f.tel||"4000086666",h=['<div class="se-popup" id="se-popup">','<div class="se-main" style="width:240px;height:329px;margin-top:-165px;margin-left:-120px;position:fixed;top:50%;left:50%;z-index:10000;">','<img src="http://res.m.ctrip.com/market/images/popup.png" width="100%" />','<a class="se-close" href="javascript:void(0)" style="position:absolute;width:19px;height:19px;top:9px;right:9px;"></a>','<a class="se-openapp __appaddress__" href="/market/download.aspx?from=MPopup" style="position:absolute;width:154px;height:43px;bottom:97px;right:43px;"></a>','<a class="se-phone __hreftel__" href="tel:'+g+'" style="position:absolute;width:154px;height:30px;bottom:60px;right:43px;"></a>','<a class="se-continue" href="javascript:void(0)" style="position:absolute;width:154px;height:30px;bottom:21px;right:43px;"></a>',"</div>",'<div class="se-mask" style="position:fixed;left:0px;top:0px;width:100%;height:100%;z-index:9999;background:rgba(0,0,0,.2);"></div>',"</div>"].join("");$(h).appendTo($(document.body)),$(".se-close").on("click",function(){$(".se-popup").css("display","none")}),$(".se-continue").on("click",function(){$(".se-popup").css("display","none")}),$(".se-openapp").on("click",function(){return adOptions.autoOpenDownApp(a,3,3),!1})}},setTimeout(function(){adOptions.popupPromo()},2e3),define("cUtilityPerformance",[],function(){function a(){this.performance={};var a=Lizard.isHybrid?1:0;this.defaults={Domready:{name:"JS.Lizard.Domready",tags:{version:Lizard.version,isapp:a}},Onload:{name:"JS.Lizard.Onload",tags:{version:Lizard.version,isapp:a}},AjaxReady:{name:"JS.Lizard.AjaxReady",tags:{version:Lizard.version,isapp:a,url:"",distribution:"200-800"}},AjaxMessageSize:{name:"JS.Lizard.AjaxMessageSize",tags:{version:Lizard.version,isapp:a,url:"",contentEncoding:""}},TemplateRender:{name:"JS.Lizard.TemplateRender",tags:{version:Lizard.version,isapp:a,url:"",distribution:"200-800"}},GeoRequest:{name:"JS.Lizard.GeoRequest",tags:{version:Lizard.version,isapp:a,url:"",distribution:"200-800"}}},this.uuid=0}return window.__bfi||(window.__bfi=[]),a.prototype={send:function(a,b,c,d){var e=["_trackMatrix",a,b,c,d];window.__bfi.push(e)},getTime:function(){return(new Date).getTime()},completeOptions:function(a){return a.startTime=this.getTime(),a.network=Lizard.networkType||"unknown",a},log:function(a,b){a.url&&_.isString(a.url)&&(a.url=a.url.replace(new RegExp((+new Date+"").slice(0,8)+"\\d{5}"),"__TIME__"));var c=this.defaults[a.name],d={},a=this.completeOptions(a);for(var e in c.tags)d[e]=(a[e]||c.tags[e])+"";d.distribution&&(d.distribution=this.distribution(b)),this.send(c.name,d,b,this.getTime())},group:function(a,b){b.startTime=this.getTime(),this.performance[a]=b},groupEnd:function(a){var b=this.performance[a]||{};this.log(b,this.getTime()-b.startTime)},getUuid:function(){return"Performance_"+ ++this.uuid},distribution:function(a){var b="";return a>=0&500>=a?b="[0,500]":a>=501&1e3>=a?b="[501,1000]":a>=1001&2e3>=a?b="[1001,2000]":a>=2001&3e3>=a?b="[2001,3000]":a>=3001&4e3>=a?b="[3001,4000]":a>=4001&&(b="[4001,--]"),b+"(ms)"}},a}),define("cAjax",["libs","cUtilityPerformance"],function(a,b){var c=new b,d={json:"application/json",jsonp:"application/json"},e=function(a){return a&&(a=d[a]?d[a]:a),a},f=function(a){function b(a,b,c,d){var e=j(a,b,c,d);return e.type="GET",i(e)}function d(a,b,c,d){var f=b.contentType;b=JSON.stringify(b);var g=j(a,b,c,d);return g.type="POST",g.dataType="json",g.timeout=3e4,g.contentType=e(f)||"application/json",i(g)}function f(a,b,c,d){var e=j(a,b,c,d);return e.type="GET",e.dataType="jsonp",e.crossDomain=!0,i(e)}function g(a,b,c,d,f){var g=c.contentType;"get"!==b.toLowerCase()&&(c=JSON.stringify(c));var h=j(a,c,d,f);return h.type=b,h.dataType="json",h.crossDomain=!0,h.data=c,h.contentType=e(g)||"application/json",i(h)}function h(b,c,d,e){var f=null,g="";f=a("string"==typeof c?"#"+c:c),f&&f.length>0&&(g=f.serialize());var h=j(b,g,d,e);return i(h)}function i(b){var d=c.getUuid();c.group(d,{name:"AjaxReady",url:b.url,data:b.data});var e=0,f={url:b.url,type:b.type,dataType:b.dataType,data:b.data,contentType:b.contentType,timeout:b.timeout||5e4,beforeSend:function(a){a.onprogress=function(a){e=a.loaded?a.loaded:a.position}},success:function(a){c.log({name:"AjaxMessageSize",url:b.url},e),c.groupEnd(d),b.callback(a)},error:function(a){c.groupEnd(d),b.error&&b.error(a)}};return-1===b.url.indexOf(window.location.host)&&(f.crossDomain=!!b.crossDomain),a.ajax(f)}function j(a,b,c,d){return{url:a,data:b,callback:c,error:d}}return{get:b,post:d,jsonp:f,cros:g,form:h}}($);return f}),define("cAbstractModel",["libs","cBase","cAjax"],function(a,b,c){var d=new b.Class({__propertys__:function(){this.url=null,this.param=null,this.dataformat=null,this.validates=[],this.debug=!1,this.protocol="http",this.contentType=d.CONTENT_TYPE_JSON,this.method="POST",this.ajax,this.isAbort=!1,this.onBeforeCompleteCallback=null},initialize:function(a){this.assert();for(var b in a)this[b]=a[b]},setAttr:function(a,b){this[a]=b},assert:function(){},pushValidates:function(a){"function"==typeof a&&this.validates.push($.proxy(a,this))},setParam:function(a,b){"object"!=typeof a||b?this.param[a]=b:this.param=a},getParam:function(){return this.param},buildurl:function(){throw"[ERROR]abstract method:buildurl, must be override"},execute:function(a,b,e,f,g){this.isAbort=!1;var h=this.buildurl(),i=this,j=$.proxy(function(c){if(this.validates&&this.validates.length>0)for(var d=0,f=this.validates.length;f>d;d++){var g=this.validates[d](c);if("boolean"==typeof g){if(!g)return"function"==typeof b?b.call(e||this,c):!1}else g&&g.overdue&&require(["cWidgetMember","cWidgetFactory"],function(a,b){a=b.create("Member"),a.memberLogin({param:"from="+encodeURIComponent(window.location.href)})})}var h="function"==typeof this.dataformat?this.dataformat(c):c;"function"==typeof this.onBeforeCompleteCallback&&this.onBeforeCompleteCallback(h),"function"==typeof a&&a.call(e||this,h,c)},this),k=$.proxy(function(a){return i.isAbort?(i.isAbort=!1,"function"==typeof f?f.call(e||this,a):!1):void("function"==typeof b&&b.call(e||this,a))},this),g=g||_.clone(this.getParam()||{});return g.contentType=this.contentType,this.ajax=this.contentType===d.CONTENT_TYPE_JSON?c.cros(h,this.method,g,j,k):this.contentType===d.CONTENT_TYPE_JSONP?c.jsonp(h,g,j,k):c.post(h,g,j,k)},abort:function(){this.isAbort=!0,this.ajax&&this.ajax.abort&&this.ajax.abort()}});return d.getInstance=function(){return this.instance instanceof this?this.instance:this.instance=new this},d.baseurl=function(){throw"[ERROR]abstract method:baseurl, must be override"},d.CONTENT_TYPE_JSON="json",d.CONTENT_TYPE_FORM="form",d.CONTENT_TYPE_JSONP="jsonp",d}),define("cModel",["libs","cBase","cStore","cUtility","CommonStore","cAbstractModel","cStorage","cUtilityPath"],function(a,b,c,d,e,f,g,h){var i=d.Object,j=new b.Class(f,{__propertys__:function(){this.usehead=!0,this.head=e.HeadStore.getInstance(),this.result=null,this.headinfo=null,this.ajaxOnly=!1,this.isUserData=!1},initialize:function($super,a){$super(a),this.baseurl||(this.baseurl=j.baseurl.call(this,this.protocol))},setHead:function(a){if(!a instanceof c)throw"Set head is not a store";this.head=a},getHead:function(){return this.head},getParamStore:function(){return this.param},setParamStore:function(a){if("object"!=typeof a)throw"Set param is not a store";this.param=a},getResultStore:function(){return this.result},clearResult:function(){this.result&&"function"==typeof this.result.remove&&this.result.remove()},setParam:function(a,b){var d={};"object"!=typeof a||b?d[a]=b:d=a;for(var e in d)this.param instanceof c?this.param.setAttr(e,d[e]):i.set(this.param,e,d[e])},getParam:function(){return this.param instanceof c?this.param.get():this.param},buildurl:function(){return d.validate.isUrl(this.url)?this.url.replace(this.urlParseRet.hostname,this.baseurl.domain):this.protocol+"://"+this.baseurl.domain+"/"+this.baseurl.path+("function"==typeof this.url?this.url():this.url)},getTag:function(){var a=_.clone(this.getParam()||{});if(this.isUserData&&!a.cid){var b=this.head.userStore;a.cid=b.getUserId()}return JSON.stringify(a)},excute:function(a,b,d,e,f){var g=_.clone(this.getParam()||{});this.pushValidates(function(a){var b=(this.head.get(),this._getResponseHead(a));return b.overdue?{overdue:b.overdue}:b.success});var h=this.getTag(),i=this.result&&this.result.get(h);!i||this.ajaxOnly||d?("get"!==this.method.toLowerCase()&&this.usehead&&this.contentType!==j.CONTENT_TYPE_JSONP?(g.head=this.head.get(),g.head.time=(new Date).getTime()):"get"===this.method.toLowerCase()||this.usehead||this.contentType===j.CONTENT_TYPE_JSONP||this.headinfo&&(g.head=this.headinfo),this.onBeforeCompleteCallback=function(a){if(this.result instanceof c){try{}catch(b){}this.result.set(a,h)}},this.execute(a,b,e,f,g)):"function"==typeof a&&a.call(e||this,i)},_getResponseHead:function(a){var b=!!a.ResponseStatus,c=b?a.ResponseStatus:a.head,d="",e=!1,f=!1;if(b&&c){var g=c.Ack;if("Failure"===g||1==g){var h=c.Errors;if(h instanceof Array&&h.length>0)for(var i,j=0;j<h.length;j++)if(i=h[j],i&&i.ErrorCode&&"MobileRequestFilterException"==i.ErrorCode){f=!0;break}}var k=c.Extension;for(var j in k){var l=k[j];if("auth"==l.id){d=l.value;break}}e="Success"===c.Ack||"0"==c.Ack}else d=c&&c.auth,e=c&&0===c.errcode;return{auth:d,success:e,overdue:f}}});return j.baseurlold=function(a){var b=location.host,c="m.ctrip.com",e="restapi";return c=d.isInApp()?"1"==d.isPreProduction()?"https"==a?"wpg.ctrip.com":"10.8.14.28:8080":"0"==d.isPreProduction()?"https"==a?"secure.fws.qa.nt.ctripcorp.com":"m.fat19.qa.nt.ctripcorp.com":"2"==d.isPreProduction()?"https"==a?"restful.m.uat.nt.qa.ctripcorp.com":"m.uat.qa.nt.ctripcorp.com":"https"==a?"wpg.ctrip.com":"m.ctrip.com":b.match(/^m\.ctrip\.com/i)||b.match(/^secure\.ctrip\.com/i)?j.isHttps(a)?"wpg.ctrip.com":"m.ctrip.com":b.match(/^m\.uat\.qa/i)?j.isHttps(a)?"restful.m.uat.qa.nt.ctripcorp.com":"m.uat.qa.nt.ctripcorp.com":b.match(/^(localhost|172\.16|127\.0)/i)?j.isHttps(a)?"secure.fws.qa.nt.ctripcorp.com":"m.fat19.qa.nt.ctripcorp.com":b.match(/^10\.8\.2\.111/i)?"10.8.14.28:8080":b.match(/\.fat/i)?j.isHttps(a)?"secure.fws.qa.nt.ctripcorp.com":"m.fat19.qa.nt.ctripcorp.com":"m.ctrip.com",{domain:c,path:e}},j.baseurl=function(a){var b=(location.host,"m.ctrip.com"),c="restapi";if(Lizard.restfullApiHttps&&"https"==a)return b=h.parseUrl(Lizard.restfullApiHttps).hostname,{domain:b,path:c};if(Lizard.restfullApi&&"http"==a)return b=h.parseUrl(Lizard.restfullApi).hostname,{domain:b,path:c};var d=j.baseurlold(a);return d},j.isHttps=function(a){return"https"==location.protocol||"https"==a},j}),define("cSales",["cBase","cStorage","libs","CommonStore","cModel"],function(a,b,c,d,e){function f(a){var b=".__hreftel__",c=".__conttel__",d=".__appaddress__";$(a[0]).find(b).each(function(){this.href=w(this.href)}),$(a[0]).find(c).each(function(){var a=$(this);a.html(w(a.html()))}),$(d).each(function(){var a=x();if(!a)switch(!0){case t:a=$(this).attr("data-ios-app");break;case u:a=$(this).attr("data-android-app");break;case v:a=$(this).attr("data-win-app")}a&&$(this).attr("href",a)})}function g(a){var c=a.$el,d=function(a){var b=document.location.href||"",c=new RegExp("(\\?|&)"+a+"=([^&]+)(&|$)","i"),d=b.match(c);return d?d[2]:""};a.getQuery||(a.getQuery=Lizard.P),a.getUrlParam?void 0:a.getUrlParam=d;var e=a.getUrlParam("sourceid"),g=a.getUrlParam("sales");if((!g||g.length<=0)&&(!e||e.length<=0)){var h=location.host,i=document.referrer,j="";h&&(i=i.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),i.indexOf("baidu")>-1&&(j="SEO_BAIDU"),i.indexOf("google")>-1&&(j="SEO_GOOGLE"),i.indexOf("soso.com")>-1&&(j="SEO_SOSO"),i.indexOf("sogou")>-1&&(j="SEO_SOGOU"),i.indexOf("so.com")>-1&&(j="SEO_SO"),i.indexOf("so.360")>-1&&(j="SEO_360SO"),i.indexOf("bing.com")>-1&&(j="SEO_BING"),i.indexOf("yahoo")>-1&&(j="SEO_YAHOO"),(i.indexOf("youdao")>-1||i.indexOf("sm.cn")>-1)&&(j="SEO_YOUDAO"),(i.indexOf("jike.com")>-1||i.indexOf("babylon.com")>-1||i.indexOf("ask.com")>-1||i.indexOf("avg.com")>-1||i.indexOf("easou.com")>-1||i.indexOf("panguso.com")>-1||i.indexOf("yandex.com")>-1)&&(j="SEO_360SO"))}(e&&+e>0||g&&g.length>0)&&b.localStorage.oldRemove("APP_DOWNLOAD"),e||g?(g&&m(g),e&&n(e),k(g||e,$.proxy(function(b){if((!b.appurl||b.appurl.length<=0)&&a&&a.footer&&a.footer.rootBox){var d=a.footer.rootBox.find("#dl_app");d&&d.length>0&&d.hide()}a.warning404.tel=b&&b.tel?b.tel:"4000086666",f(c)},a))):(g&&m(g),setTimeout(function(){f(c)},100))}var h=null,i=d.SalesObjectStore.getInstance(),j=function(a){return e.baseurl(a)},k=function(c,d,e){var f=i.get(c);if(f)h=f,!f.appurl||f.appurl.length<=0?$("#dl_app").hide():$("#dl_app").show(),d&&d(f);else{var g=(j(),"/html5/ClientData/GetSalesInfo/"+c);$.ajax({url:g,type:"POST",dataType:"json",success:$.proxy(function(f){var g={};if(1==f.ServerCode){if(f.Data){for(var j in f.Data)g[j.toLowerCase()]=f.Data[j];f.Data=g,i.set(f.Data,c);var k=30;!f.Data||"ydwxcs"!==f.Data.sales&&"1622"!==f.Data.sales||(k=5),!f.Data.appurl||f.Data.appurl.length<=0?$("#dl_app").hide():$("#dl_app").show(),b.localStorage.oldSet("SALESOBJ",JSON.stringify({data:f.Data,timeout:new a.Date(a.getServerDate()).addDay(k).format("Y/m/d H:i:s")}))}h=f.Data,d&&d(f.Data)}else e&&e(f)},this),error:$.proxy(function(a){e&&e(a)},this)})}},l=function(){return h||i.get()},m=function(a){d.SalesStore.getInstance().set({sales:a})},n=function(a){d.SalesStore.getInstance().set({sourceid:a})},o=function(a){d.UnionStore.getInstance().set(a)
},p=/400\d{3}\d{4}/i,q=/400\s+\d{3}\s+\d{4}/i,r=/400-\d{3}-\d{4}/i,s=navigator.userAgent,t=!!s.match(/(ipad|iphone)/i),u=!!s.match(/android/i),v=!!s.match(/MSIE/i),w=window.replaceStrTel=function(a){var b=l();return b&&b.tel&&("string"==typeof a?(a=a.replace(p,b.tel),a=a.replace(q,b.teltitle),b.teltitle&&(a=a.replace(r,b.teltitle.split(" ").join("-")))):a=b.teltitle?b.teltitle.split(" ").join("-"):a),a},x=function(a){var b=l();if(b){if(b.isseo&&$(".module").show(),b.appurl)return b.appurl;var a=b.sid?b.sid:b.sales;return"/market/download.aspx?from="+a}return null};return{replaceContent:f,replaceStrTel:w,setSales:m,getSales:l,getSalesObject:k,setUnion:o,setSourceId:n,updateSales:g}}),define("cBusinessCommon",["cAdView","cSales","cWidgetFactory","cWidgetGuider"],function(a,b,c){return function(){var d=c.create("Guider");Lizard.viewReady(function(b){var c=window.navigator.userAgent;return c.indexOf("CtripWireless")>-1?!0:void(a&&(b.footer=a.getInstance(),b.footer.setCurrentView(b),b.hasAd?(b.footer.isCreate=!1,b.footer.status="notCreate",(!b.footer.root||b.footer.root&&b.footer.rootBox!=b.footer.root)&&(b.footer.root&&b.footer.rootBox!=b.footer.root&&b.footer.root.remove(),b.footer.update({rootBox:b.adContainer?b.$el.find("#"+b.adContainer):$("#footer")}),b.footer.show()),$("#page_id").length||$('<INPUT type="hidden" id="page_id" value="'+b.pageid+'"/>').appendTo($("body"))):b.footer.hide()))}),Lizard.viewReady(function(a){b.updateSales(a)}),Lizard.viewReady(function(a){if("undefined"!=typeof _gaq&&_gaq.push(["_trackPageview",window.location.href]),Lizard.isHybrid){var b=a._getViewUrl();d.app_log_google_remarkting(b)}})}}),define("cHistory",["cUIBase","libs"],function(a){var b=function(b){this.element,this.clazz=[a.config.prefix+"history"],this.maskName="maskName",this.style={},this.size=!1,this.listSize=6,this.itemClickFun=null,this.focusFun=null,this.blursFun=null,this.inputFun=null,this._id=a.getCreateId(),this._boxDom,this._borderDom,this._contDom,this._clearButton,this.clearButtonTitle="清除搜索历史",this.notHistoryButtonTitle="无搜索历史",this.historyStore=null,this.dataSource=[],this._autoLocResoure,this._bodyDom,this.rootBox,this._oneShow=!1;var c=this;this.event_focus=function(){c.Open(),"function"==typeof c.focusFun&&c.focusFun()},this.event_blur=function(){"function"==typeof c.blurFun&&c.blurFun()},this.event_input=function(){""==c.element.val()&&(c._init(),c.Open()),c.inputFun(c.element.val())},this._setOption(b),this._init()};return b.prototype={_setOption:function(a){for(var b in a)switch(b){case"element":case"maskName":case"clearButtonTitle":case"style":case"dataSource":case"historyStore":case"itmeClickFun":case"focusFun":case"blurFun":case"inputFun":case"size":case"listSize":case"rootBox":this[b]=a[b];break;case"clazz":isArray(a[b])&&(this.clazz=this.clazz.concat(a[b])),isString(a[b])&&this.clazz.push(a[b])}},_init:function(){this._contDom&&(this._contDom.find("li.item").unbind("click"),this._contDom.remove()),this._boxDom&&this._boxDom.remove(),this._CreateDom(),this._BuildEvent()},_CreateDom:function(){var b=a.createElement;this._bodyDom=this.rootBox||$("body"),this.element=$(this.element),this._boxDom=$(b("div",{id:this._id,"class":this.clazz.join(" ")})),this._boxDom.css({position:"absolute",display:"none"}),this._borderDom=$(b("div",{"class":a.config.prefix+"history-border"}));var c=[];c=""==this.element.val()?this._getHistory():this._getSubList(this.dataSource,this.listSize),this._contDom=$(b("ul",{"class":a.config.prefix+"history-list"}));for(var d in c)this._contDom.append('<li class="item" data_id="'+c[d].id+'">'+c[d].name+"</li>");""==this.element.val()&&(this._clearButton=$(b("li",{"class":[a.config.prefix+"clear-history clearbutton"]})),this._clearButton.html(c.length>0?this.clearButtonTitle:this.notHistoryButtonTitle),this._contDom.append(this._clearButton)),this._borderDom.append(this._contDom),this._boxDom.append(this._borderDom),this._bodyDom.append(this._boxDom)},_Location:function(){this._boxDom.css({height:"auto",width:"auto"});var b=a.getPageSize(),c=a.getElementPos(this.element[0]),d=this.style.left?this.style.left:(this.size&&this.size.left?this.size.left+c.left:c.left)+"px",e=this.style.top?this.style.top:(this.size&&this.size.top?this.size.top+(c.top+this.element.height()):c.top+this.element.height())+"px",f=this.style.width?this.style.width:this.element.width()+"px",g=this.size&&this.size.height?b.height+this.size.height+"px":"auto";this._boxDom.css({left:d,top:e,width:f,height:g})},_AutoLocation:function(){this._Location();var a=this;this._autoLocResoure=function(){a._Location()},$(window).unbind("resize",this._autoLocResoure),$(window).bind("resize",this._autoLocResoure)},_UnAutoLocation:function(){$(window).unbind("resize",this._autoLocResoure)},_BuildEvent:function(){var a=this;this._contDom.find("li.item").unbind("click").bind("click",function(){var b=$(this);if(a.element.val(b.text()),a.Close(),"function"==typeof a.itmeClickFun){var c={id:b.attr("data_id"),name:b.text()};a.itmeClickFun(c)}}),this.element.unbind("focus",this.event_focus),this.element.unbind("blur",this.event_blur),this.element.unbind("input",this.event_input),this.element.bind({focus:this.event_focus,blur:this.event_blur,input:this.event_input}),""==this.element.val()&&this._getHistory().length>0&&this._clearButton.bind("click",function(){a.historyStore.remove(),a.Close(),a._init()})},setOpen:function(){this._oneShow=!0},Open:function(){this._boxDom.css("z-index",a.getBiggerzIndex()),this._boxDom.show(),this._AutoLocation()},Close:function(){this._boxDom.hide(),this._UnAutoLocation()},setDataSource:function(a){this.dataSource=a,this.Close(),this._init(),this.Open()},addHistory:function(a){var b=this.historyStore.get()||[];a.id||(a.id=0);for(var c=-1,d=0,e=b.length;e>d;d++)if(b[d].name==a.name){c=d;break}c>-1&&b.splice(c,1),b.unshift(a),this.historyStore.set(b),this._init()},reset:function(){this._init()},_getHistory:function(){var a=this.historyStore.get()||[];return this._getSubList(a,this.listSize)},_getSubList:function(a,b){var c=a.length;return b>=c?a:a.slice(0,b)}},b}),define("cUIHeader",["cBase","cUIAbstractView","cUtility","cHybridFacade"],function(a,b,c,d){var e=e||{};e.htmlMap={home:'<i class="icon_home i_bef" id="c-ui-header-home"></i>',tel:'<a href="tel:<%=tel.number||4000086666 %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a>',customtitle:"<div><%=customtitle %></div>",title:"<h1><%=title %></h1>",back:'<i id="c-ui-header-return" class="returnico i_bef"></i>',btn:'<i id="<%=btn.id%>" class="<%=btn.classname%> c-ui-header-btn"><%=btn.title %></i>'},e.__propertys__=function(){this.headerData={back:!0},this.STATE_NOTCREATE="notCreate",this.STATE_ONCREATE="onCreate",this.isInApp=c.isInApp()},e.initialize=function($super,a){this.rootBox=this.root=a.root||$("body"),this.parseHeader(),this.bindEvent(),this.__show=$super.show,$super(a)},e.bindEvent=function(){this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},e.parseHeader=function(){var a=this.rootBox;if(a&&a.size()){this.rootBox=a,this.backBtn=a.find("#c-ui-header-return"),this.homeBtn=a.find("#c-ui-header-home"),this.telBtn=a.find("#c-ui-header-tel"),this.titleDom=a.find("h1"),this.commitBtn=a.find(".c-ui-header-btn");var b=this.headerData.events,c=this.headerData.view;this.headerData.back=!0,this.headerData.home=this.homeBtn.size(),this.headerData.tel=!!this.telBtn.size(),b&&(this.headerData.events=b),c&&(this.headerData.view=c)}},e.set=function(a){if(this.puppetDestory(),a&&_.extend(this.headerData,a),this.__show=this.show,this.show=function(){},c&&c.isInApp()){var b=this.headerData.home,d=this.headerData.tel;this.rootBox.hide(),this.parseHeader(),this.headerData.home=b,this.headerData.tel=d,this.saveHead(this.headerData),this.onShow()}else this.rootBox.html(this.createHtml()),this.__show(),this.parseHeader();this.delegateEvents(this.headerData.events)},e.create=function(){this.isInApp||this.isCreate||this.status===this.STATE_ONCREATE||(this.rootBox=this.root=this.rootBox||$("body"),this.rootBox.html(this.createHtml()),this.trigger("onCreate"),this.status=b.STATE_ONCREATE,this.isCreate=!0)},e.createHtml=function(){var a=this._setTemplate(this.headerData);return _.template(a,this.headerData)},e.delegateEvents=function(a){this.rootBox.find("header").append(this.rootBox.find("#c-ui-header-return")),this.rootBox.off("click");var b=this;if(a){if(a.returnHandler)if(this.isInApp){var c=function(){a.returnHandler.call(b)};d.register({tagname:d.METHOD_BACK,callback:c})}else this.backBtn.off("click"),this.backBtn.on("click",_.bind(a.returnHandler,b.headerData.view||b));if(a.homeHandler&&(this.isInApp||(this.homeBtn.off("click"),this.homeBtn.on("click",_.bind(a.homeHandler,b.headerData.view||b)))),a.citybtnHandler&&this.isInApp){var e=function(){a.citybtnHandler.call(b)};d.register({tagname:d.METHOD_CITY_CHOOSE,callback:e})}if(_.isFunction(a.commitHandler))if(this.isInApp){var f=function(){a.commitHandler.call(b)};d.register({tagname:d.METHOD_COMMIT,callback:f})}else this.commitBtn.off("click"),this.commitBtn.on("click",_.bind(a.commitHandler,b.headerData.view||b));this.headerData&&this.headerData.btn&&_.isFunction(a.customHandler)&&(this.custBtn=this.rootBox.find("#"+this.headerData.btn.id),this.custBtn.off("click"),this.custBtn.on("click",_.bind(a.customHandler,b.headerData.view||b)))}},e.saveHead=function(a){var b={left:[],center:[],centerButtons:[],right:[]};if(a.back&&b.left.push({tagname:"back"}),a.title&&b.center.push({tagname:"title",value:a.title}),a.subtitle&&b.center.push({tagname:"subtitle",value:a.subtitle}),a.btn&&b.right.push({tagname:"commit",value:a.btn.title}),a.tel&&b.right.push({tagname:"call"}),a.home&&b.right.push({tagname:"home"}),a.citybtn){var c={tagname:"cityChoose",value:a.citybtn,a_icon:"icon_arrowx",i_icon:"icon_arrowx.png"};a.citybtnImagePath&&(c.imagePath=a.citybtnImagePath,c.pressedImagePath=a.citybtnPressedImagePath?a.citybtnPressedImagePath:c.imagePath),a.citybtnIcon&&(c.a_icon=c.i_icon=a.citybtnIcon),b.centerButtons.push(c)}a.share&&b.right.push({tagname:"share"}),a.favorite&&b.right.push({tagname:"favorite"}),a.favorited&&b.right.push({tagname:"favorited"}),a.phone&&b.right.push({tagname:"phone"}),a.moreMenus&&(b.right.push({tagname:"more"}),_.each(a.moreMenus,function(a){d["METHOD_"+a.tagname.toUpperCase()]="METHOD_"+a.tagname.toUpperCase(),d.registerOne(d["METHOD_"+a.tagname.toUpperCase()],tagname)}));try{var e=JSON.stringify(b);d.request({name:d.METHOD_REFRESH_NAV_BAR,config:e})}catch(f){}},e.updateHeader=function(a,b){if(this.headerData.hasOwnProperty(a))if("events"==a)this.delegateEvents(b);else if(this.headerData[a]=b,this.isInApp)try{var c=JSON.stringify(this.headData);d.request({name:d.METHOD_REFRESH_NAV_BAR,config:c})}catch(e){}else{var f=$(_.template(this.htmlMap[a],this.headerData)),g=f.get(0).tagName;this.rootBox.find(g).replaceWith(f)}},e._setTemplate=function(a){this.htmlTpl="";var b=!1;if(a){a.customtitle&&this.htmlMap.title&&(b=!0);for(var c in this.htmlMap)"title"==c&&b||a[c]&&(this.htmlTpl+=this.htmlMap[c]);var d="",e=a.style;return e&&(d=' style="'+e+'"'),this.htmlTpl="<header"+d+">"+this.htmlTpl+"</header>"}},e.onShow=function(a){c.isInApp()?(this.rootBox.hide(),d.request({name:d.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!1})):this.rootBox.show(),a&&a()},e.onHide=function(){c.isInApp()?d.request({name:d.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!0}):this.rootBox.hide()},e.puppetDestory=function(){this.status=this.STATE_NOTCREATE,this.isCreate=!1};var f=new a.Class(b,e);return f}),define("cUIMask",["libs","cBase","cUIAbstractView"],function(a,b,c){var d={},e={prefix:"cui-"};return d.__propertys__=function(){},d.initialize=function($super,a){this.bindEvent(),this.addClass(e.prefix+"mask"),$super(a)},d.bindEvent=function(){this.addEvent("onCreate",function(){this.setRootStyle(),this.onResize=$.proxy(function(){this.resize()},this),this.onResize()}),this.addEvent("onShow",function(){this.setzIndexTop(-1),$(window).bind("resize",this.onResize),this.root.bind("touchmove",function(a){a.preventDefault()}),this.onResize()}),this.addEvent("onHide",function(){$(window).unbind("resize",this.onResize),this.root.unbind("touchmove")})},d.setRootStyle=function(){this.root.css({position:"absolute",left:"0px",top:"0px"})},d.createHtml=function(){return"<div></div>"},d.resize=function(){var a=(Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),Math.max(document.documentElement.scrollHeight,document.body.scrollHeight));this.root.css({width:"100%",height:a+"px"})},new b.Class(c,d)}),define("cUILayer",["libs","cBase","cUIAbstractView","cUIMask"],function(a,b,c,d){var e={},f={prefix:"cui-"};return e.__propertys__=function(){this.tpl=this.template(['<div class="'+f.prefix+'layer-padding">','<div class="'+f.prefix+'layer-content"><%=content%></div>',"</div>"].join("")),this.content="",this.contentDom,this.mask=new d({classNames:[f.prefix+"opacitymask"]}),this.addClass(f.prefix+"layer"),this.viewdata={},this.windowResizeHander,this.setIntervalResource,this.setIntervalTotal=0},e.initialize=function($super,a){var b={content:!0};this.setOption(function(a,c){switch(!0){case b[a]:this[a]=c;break;case"class"===a:this.addClass(c)}}),this.bindEvent(),$super(a),this.loadViewData()},e.loadViewData=function(){this.viewdata.content=this.content},e.setViewData=function(a){this.viewdata=cUtility.mix(this.viewdata,a),this.setRootHtml(this.createHtml())},e.bindEvent=function(){this.addEvent("onCreate",function(){this.windowResizeHander=$.proxy(this.reposition,this),this.contentDom=this.root.find("."+f.prefix+"layer-content")}),this.addEvent("onShow",function(){this.mask.show(),$(window).bind("resize",this.windowResizeHander),this.reposition(),this.setIntervalResource=setInterval($.proxy(function(){this.setIntervalTotal<10?this.windowResizeHander():(this.setIntervalTotal=0,this.root.css("visibility","visible"),clearInterval(this.setIntervalResource)),this.setIntervalTotal++},this),1),this.setzIndexTop()}),this.addEvent("onHide",function(){$(window).unbind("resize",this.windowResizeHander),clearInterval(this.setIntervalResource),this.root.css("visibility","visible"),this.mask.hide()})},e.createHtml=function(){return this.tpl(this.viewdata)},e.maskToHide=function(a){this.mask.root.on("click",$.proxy(function(){this.hide(),"function"==typeof a&&a(),this.mask.root.off("click")},this)),this.mask.addEvent("onHide",function(){this.root.off("click"),this.root.remove()})},new b.Class(c,e)}),define("cUIAlert",["libs","cBase","cUILayer"],function(a,b,c){var d=Object.prototype.toString,e="confirm",f="cancel",g={};g.onCreate=function(){this.loadButtons()};var h={},i={prefix:"cui-"};h.__propertys__=function(){this.tpl=this.template(['<div class="cui-pop-box">',"<%if(showTitle) {%>",'<div class="cui-hd">','<div class="cui-text-center"><%=title%></div>',"</div>","<% } %>",'<div class="cui-bd">','<div class="cui-error-tips"><%=message%></div>','<div class="cui-roller-btns">',"</div>","</div>","</div>"].join("")),this.title="",this.message="",this.buttons=[{text:"确定",type:"confirm",click:function(){this.hide()}}],this.viewdata={title:"",message:"",showTitle:!1}},h.initialize=function($super,a){var b={title:!0,message:!0,buttons:!0,showTitle:!0};this.setOption(function(a,c){switch(!0){case b[a]:this[a]=c}}),this.addClass(i.prefix+"alert"),$super($.extend(g,a)),this.buildViewData()},h.buildViewData=function(){this.viewdata.title=this.title,this.viewdata.message=this.message,this.viewdata.showTitle=this.showTitle},h.setViewData=function(a){a.title&&(this.title=a.title),a.message&&(this.message=a.message),a.showTitle&&(this.showTitle=this.showTitle),a.buttons&&(this.buttons=a.buttons),this.buildViewData(),this.root||(this.root=this.createRoot()),this.setRootHtml(this.createHtml()),this.loadButtons()},h.loadButtons=function(){this.root||this.create();var a=this.root.find(".cui-roller-btns"),b=this.createButtons();a.empty(),$.each(b,function(b,c){a.append(c)})},h.createButtons=function(){var a=[],b="[object Array]"===d.call(this.buttons),c=0,g=this;return $.each(this.buttons,function(d,h){var i="",j=[],k=function(){};if(b){switch(i=h.text,h.cls&&j.push(h.cls),h.type=h.type?h.type:"取消"==i?f:e,h.type){case f:j.push("cui-btns-cancel");break;case e:j.push("cui-btns-sure")}h.click&&(k=h.click)}else i=d,"function"==typeof h&&(k=h);a[c]=$('<div class="cui-flexbd '+j.join(" ")+'">'+i+"</div>"),a[c].addClass(j.join(" ")),a[c].bind("click",$.proxy(k,g)),c++}),a},h.createHtml=function(){return this.tpl(this.viewdata)};var j=new b.Class(c,h);return j.STYLE_CONFIRM=e,j.STYLE_CANCEL=f,j}),define("cUIWarning",["libs","cBase","cUILayer","cUIMask"],function(a,b,c,d){var e={},f={prefix:"cui-"},g=new d({classNames:[f.prefix+"warning-mask"]}),h={};return h["class"]=f.prefix+"warning",h.onCreate=function(){this.contentDom.html('<div class="'+f.prefix+'warning"><div class="blank"></div><p class="blanktxt">'+this.warningtitle+"</p></div>"),this.warningDom=this.contentDom.find(".blanktxt"),this.root.bind("click",$.proxy(function(){this.callback&&this.callback()},this)),g.create(),g.root.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},h.onShow=function(){g.show()},h.onHide=function(){g.hide()},h.setTitle=function(a,b){a&&(this.create(),this.warningDom.html(a),this.warningtitle=a),this.callback=b?b:function(){}},h.getTitle=function(){return this.warningtitle},e.__propertys__=function(){this.warningDom,this.warningtitle="",this.callback=function(){}},e.initialize=function($super,a){this.setOption(function(a,b){switch(a){case"title":this.warningtitle=b}}),$super($.extend(h,a))},new b.Class(c,e)}),define("cUIHashObserve",["libs","cBase"],function(a,b){var c={};return c.__propertys__=function(){this.hash,this.callback,this._hashchange=$.proxy(function(){this.hashchange()},this),this.isend=!0,this.scope},c.initialize=function(a){this.setOption(a)},c.setOption=function(a){var b={hash:!0,callback:!0,scope:!0};for(var c in a)switch(!0){case b[c]:this[c]=a[c]}},c.start=function(){window.Lizard&&(Lizard.hashObserveCount?Lizard.hashObserveCount++:Lizard.hashObserveCount=1,Lizard.stopStateWatch=!0),this.isend=!1,window.location.hash+="|"+this.hash,$(window).bind("hashchange",this._hashchange)},c.end=function(){$(window).unbind("hashchange",this._hashchange),this.isend||(this.isend=!0,window.history.go(-1)),Lizard.hashObserveCount&&Lizard.hashObserveCount--,window.Lizard&&!Lizard.hashObserveCount&&setTimeout(function(){Lizard.stopStateWatch=!1},200)},c.hashchange=function(){var a=window.location.hash;a.match(new RegExp("\\b"+this.hash+"\\b","ig"))||(this.isend=!0,this.callback.call(this.scope||this),this.end())},new b.Class(c)}),define("cUIPageview",["libs","cBase","cUIAbstractView","cUIMask","cUIHashObserve"],function(a,b,c,d,e){var f={},g={prefix:"cui-"};return f.__propertys__=function(){this.mask=new d({classNames:[g.prefix+"warning-mask"]}),this.hashObserve=new e({hash:this.id,scope:this,callback:function(){this.hide()}})},f.initialize=function($super,a){this.addClass(g.prefix+"pageview"),this.addEvent("onCreate",function(){this.mask.create(),this.mask.root.css({background:"url(data:image/gif;base64,R0lGODlhAQABAIAAAPX19QAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==) repeat"}),this.root.css({position:"absolute",left:"0px",top:"0px"})}),this.addEvent("onShow",function(){this.mask.show(),this.hashObserve.start(),this.root.bind("touchmove",function(a){a.preventDefault()})}),this.addEvent("onHide",function(){this.mask.hide(),setTimeout($.proxy(function(){this.hashObserve.end()},this),10)}),$super(a)},f.createHtml=function(){return""},new b.Class(c,f)}),define("cUIHeadWarning",["libs","cBase","cUIPageview"],function(a,b,c){var d={},e={prefix:"cui-"},f={};return f["class"]=e.prefix+"warning",f.onCreate=function(){this.root.html(['<div class="head-warning">','<div class="head-warning-padding">','<div class="head-warning-header">','<div class="head-warning-header-backbtu"><span class="returnico"></span></div>','<div class="head-warning-header-title"></div>',"</div>",'<div class="head-warning-content">','<div class="head-warning-content-icon"><div class="cui-load-error"><div class="cui-i cui-wifi cui-exclam"></div></div></div>','<div class="head-warning-content-title"></div>',"</div>","</div>","</div>"].join("")),this.addClass("head-warning-top"),this.warningtitleDom=this.root.find(".head-warning-header-title"),this.warningcontentDom=this.root.find(".head-warning-content-title"),this.warningleftbtuDom=this.root.find(".head-warning-header-backbtu"),this.warningleftbtuDom.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},f.onShow=function(){this.setzIndexTop(),window.scrollTo(0,0)},d.__propertys__=function(){this.warningtitleDom,this.warningcontentDom,this.warningtitle="",this.warningcontent="",this.callback=function(){}},d.initialize=function($super,a){$super($.extend(f,a))},d.setTitle=function(a,b,c){a&&(this.create(),this.warningtitleDom.html(a),this.warningcontentDom.html(b)),c&&(this.callback=c)},new b.Class(c,d)}),define("cUIWarning404",["libs","cBase","cUIPageview","cWidgetFactory","cWidgetGuider"],function(a,b,c,d){var e=d.create("Guider"),f={},g={prefix:"cui-"},h={};h["class"]=g.prefix+"warning",h.onCreate=function(){this.options()},h.onShow=function(){this.mask.root.css({"z-index":"1000"}),this.root.css({"z-index":"1001"}),window.scrollTo(0,0)},h.onHide=function(){this.options({})},f.__propertys__=function(){this.retryDom,this.tel="4000086666",this.callback=function(){},this.hashObserve={start:function(){},end:function(){}}},f.initialize=function($super,a){$super(h,a)},f.retryClick=function(a){a&&(this.callback=a)};var i={loadFailCls:"cui-wifi cui-fail-icon",loadFail:"加载失败，请稍后再试试吧",telText:"或者拨打携程客服电话",tryAgain:"重试",contact:"联系客服",showContact:!0},j=['<div class="head-warning">','<div class="head-warning-padding">','<div class="head-warning-content">','<div class="cui-load-fail cui-text-center">','<div class="cui-load-error">','<div class="cui-i <%= loadFailCls %>">',"</div>","</div>",'<p class="cui-gray"><%= loadFail %></p>','<button type="button" class="cui-btns-retry"><%= tryAgain %></button>',"<% if (showContact) { %>",'<div class="cui-404-tel">','<div class="cui-glines"></div>','<p class="cui-grayc"><%= telText %></p>','<span id="telBtn" class="cui-btns-tel"><span class="cui-i cui-warning-kf"></span><%= contact %></span>',"</div>","<% } %>","</div>","</div>","</div>","</div>"].join("");return f.options=function(a){a=_.extend({},i,a||{}),this.root.html(_.template(j,a)),this.addClass("head-warning-top"),this.retryDom=this.root.find(".cui-btns-retry"),this.retryDom.on("click",$.proxy(function(){this.callback&&this.callback()},this));var b=this;a.showContact&&this.root.find("#telBtn").click(function(){e.apply({hybridCallback:function(){e.callService()},callback:function(){window.location.href="tel:"+b.tel}})})},new b.Class(c,f)}),define("cUIToast",["libs","cBase","cUILayer"],function(a,b,c){var d={},e={prefix:"cui-",sleep:2},f=null,g=null,h=null,i=function(a){this.hide(),a&&"function"==typeof a&&a.call(this),$(".cui-opacitymask").unbind("click"),$(".cui-toast").unbind("click")},j=function(a,b){var c=this,d=function(){$(".cui-opacitymask").unbind("click").bind("click",function(){i.call(c,b)}),$(".cui-toast").unbind("click").bind("click",function(){i.call(c,b)})};a&&setTimeout(d,400)},k=function(a,b,c,d){var h=this;this.setContent(a),"function"==typeof g&&g.call(this);var k=function(){i.call(h,c)},l=1e3*(b||e.sleep);f=setTimeout(k,l),j.call(this,d,c),this.focusPosition=setInterval($.proxy(function(){var a=document.activeElement;if($.needFocus(a)){this.focusPosition||(this.focusPosition=!0);var b=parseInt($(a).offset().top)+30;this.root.css({top:b+"px",position:"absolute"})}},this),20)},l=function(){clearTimeout(f),this.focusPosition&&(clearInterval(this.focusPosition),this.root.css({top:"50%",position:"fixed"})),"function"==typeof h&&h.call(this)};d.__propertys__=function(){g=this.show,h=this.hide,this.show=k,this.hide=l},d.initialize=function($super,a){this.addClass([e.prefix+"toast"]),$super(a)},d.setContent=function(a){this.create(),this.contentDom.html(a)};var m=new b.Class(c,d);return m}),define("cUILoading",["libs","cBase","cUILayer"],function(a,b,c){var d={},e={prefix:"cui-"},f={};return f["class"]=e.prefix+"loading",f.onCreate=function(){},f.onShow=function(){this.contentDom.html('<div class="cui-breaking-load"><div class="cui-i cui-w-loading"></div><div class="cui-i cui-m-logo"></div></div>'),this.reposition()},d.__propertys__=function(){this.contentDom,this.loadHtml=""},d.initialize=function($super){$super(f)},d.setHtml=function(a){this.loadHtml=a},new b.Class(c,d)}),define("cUIBubbleLayer",["cBase","cUIAbstractView"],function(a,b){var c={};return c.__propertys__=function(){this.itemTemplate=!1,this.triggerEl=null,this.click=function(){}},c.initialize=function($super,a){for(var b in a)this[b]=a[b];$super(a),this.bindEvent(),this.show(),this.hide()},c.showMenu=function(a){for(var b in a)this[b]=a[b];a.data&&this.init(),a.dir&&(this.el.removeClass("f-layer-before"),this.el.removeClass("f-layer-after"),this.el.addClass("up"==a.dir?"f-layer-before":"f-layer-after")),this.adjustEl(),this.show()},c.bindEvent=function(){this.addEvent("onHide",function(){this.root.off("click"),this.clsLayer&&document.removeEventListener("click",this.clsLayer,!0)}),this.addEvent("onShow",function(){this.init(),this.adjustEl(),this.setzIndexTop(),this.root.on("click",$.proxy(function(a){for(var b=$(a.target),c=!1;;){if(b.attr("id")==this.id)break;if("c"==b.attr("data-flag")){c=!0;break}b=b.parent()}c&&"function"==typeof this.click&&this.click.call(this,this.data[b.attr("data-index")])},this)),this.clsLayer=$.proxy(function(a){for(var b=$(a.target),c=!1;;){if(b.attr("id")==this.id){c=!0;break}if(!b[0])break;b=b.parent()}0==c&&this.hide()},this),document.addEventListener("click",this.clsLayer,!0)})},c.adjustEl=function(){if(this.triggerEl){var a=this.triggerEl.offset();this.el.css({width:"",transform:""});var b=6;this.el.css("up"==this.dir?{width:a.width-b,"-webkit-transform":"translate("+(a.left+2)+"px, "+(a.top+a.height+8)+"px) translateZ(0px)"}:{width:a.width-b,"-webkit-transform":"translate("+(a.left+2)+"px, "+(a.top-this.el.offset().height-8)+"px) translateZ(0px)"})}},c.init=function(){if(this.data){this.tmpt=_.template(['<ul class="cui-f-layer '+(this.dir?"up"==this.dir?"f-layer-before":"f-layer-after":"")+'" style="position: absolute; top: 0; left: 0; ">',"<% for(var i = 0, len = data.length; i < len; i++) { %>","<% var itemData = data[i]; %>",'<li data-index="<%=i%>" data-flag="c"  >'+(this.itemTemplate?this.itemTemplate:"<%=itemData.name %>")+"</li>","<% } %>","</ul>"].join(""));var a=this.tmpt({data:this.data});this.root.html(a),this.el=this.root.find(".cui-f-layer")}},c.createHtml=function(){return""},new a.Class(b,c)}),window.onunload=function(){},define("cPageView",["libs","cUIHeader","cUIAlert","cUIWarning","cUIHeadWarning","cUIWarning404","cUIToast","cUILoading","cUIBubbleLayer","cBusinessCommon","cUtility"],function(a,b,c,d,e,f,g,h,i,j,k){j();var l=new c({title:"提示信息",message:"",buttons:[{text:"知道了",click:function(){this.hide()}}]}),m=new c({title:"提示信息",message:"您的订单还未完成，是否确定要离开当前页面？",buttons:[{text:"取消",click:function(){this.hide()},type:c.STYLE_CANCEL},{text:"确定",click:function(){this.hide()},type:c.STYLE_CONFIRM}]}),n=new d({title:""}),o=new e({title:""}),p=new f,q=new h,r=new g,s=new i,t=Backbone.View.extend({scrollPos:{x:0,y:0},header:null,headerview:null,lastViewId:"",pageid:0,hpageid:0,scrollZero:!0,initialize:function(){this.id=this.$el.attr("id"),this.alert=l,this.warning=n,this.headwarning=o,this.warning404=p,this.loading=q,this.toast=r,this.bubbleLayer=s,this.confirm=m,this.create()},_createHeader:function(){var a=$("#headerview");this.header=this.headerview=new b({root:a})},create:function(){this.onCreate&&this.onCreate()},destroy:function(){this.$el.remove()},show:function(){this._createHeader(),!this.switchByOut&&this.$el.show(),this.validateRet&&this.onLoad&&this.onLoad(this.lastViewId),this.validateRet&&this.onShow&&this.onShow(),this.onBottomPull&&(this._onWidnowScroll=$.proxy(this.onWidnowScroll,this),this.addScrollListener()),this.scrollZero&&window.scrollTo(0,0)},hide:function(){this.onHide&&this.onHide(),this.removeScrollListener&&this.removeScrollListener(),this.$el.hide()},jump:function(a){window.location.href=a},forward:function(a,b){Lizard.forward(a,b)},back:function(a,b){Lizard.back(a,b)},getAppUrl:function(){return""},getQuery:function(a){return Lizard.P(a)},saveScrollPos:function(){this.scrollPos={x:window.scrollX,y:window.scrollY}},restoreScrollPos:function(){window.scrollTo(this.scrollPos.x,this.scrollPos.y)},turning:function(){},showMessage:function(a,b){this.alert.setViewData({message:a,title:b}),this.alert.show()},hideMessage:function(){this.alert.hide()},showConfirm:function(a,b,d,e,f,g){this.confirm.setViewData("object"==typeof a&&a.message?a:{message:a,title:b,buttons:[{text:g||"取消",click:function(){"function"==typeof e&&e(),this.hide()},type:c.STYLE_CANCEL},{text:f||"确定",click:function(){"function"==typeof d&&d(),this.hide()},type:c.STYLE_CONFIRM}]}),this.confirm.show()},hideConfirm:function(){this.confirm.hide()},showBubbleLayer:function(a){this.bubbleLayer.showMenu(a)},hideBubbleLayer:function(){this.bubbleLayer.hide()},showWarning:function(a,b){a&&this.warning.setTitle(a,b),this.warning.show()},hideWarning:function(){this.warning.hide()},showWarning404:function(a){a&&this.warning404.retryClick(a),this.warning404.show(),this.warning404.firer=this},hideWarning404:function(){this.warning404.firer&&this.warning404.firer!==this||this.warning404.hide()},showToast:function(a,b,c,d){this.toast.isShow()||(d="undefined"!=typeof d?d:!0,this.toast.show(a,b,c,d))},hideToast:function(){this.toast.hide()},showLoading:function(){this.loading.show(),this.loading.firer=this},hideLoading:function(){this.loading.firer&&this.loading.firer!=this||this.loading.hide()},getServerDate:function(){return k.getServerDate()},setTitle:function(a){document.title=a},getGuid:function(){return k.getGuid()},sendUbt:function(a){var b=this;if(window.$_bf&&1==window.$_bf.loaded){var c,d=($("#page_id"),$("#bf_ubt_orderid")),e=this._getViewUrl(),f="";if(k.isInApp()){if(0==b.hpageid)return;c=b.hpageid}else{if(0==b.pageid)return;e=location.href,c=b.pageid}Lizard.P("orderid")&&(f=Lizard.P("orderid")),1==d.length&&d.val(f),window.$_bf.asynRefresh({page_id:c,orderid:f,url:e})}else a&&setTimeout(function(){b.sendUbt(!0)},300)},_sendUbt:function(a){this.sendUbt(a)},_getViewUrl:function(){var a=location.href;if(k.isInApp()){var b=a.indexOf("webapp");a="http://hybridm.ctrip.com/"+a.substr(b)}return a}});return t}),define("cDataSource",["libs","cBase"],function(a,b){var c=new b.Class({__propertys__:function(){this.data,this.filters=[],this.group={},this.isUpdate=!0},initialize:function(a){this.setOption(a)},setOption:function(a){a=a||{};for(var b in a)switch(b){case"data":this.setData(data)}},setData:function(a){this.data=a,this.isUpdate=!0},filter:function(a,b){if("function"!=typeof a)throw"Screening function did not fill in";var c=function(b,c){return a(c,b)};return this.filters=_.filter(this.data,c),this.filters=this.filters||[],"function"==typeof b?this.filters.sort(b):this.filters},groupBy:function(a,b){return this.group=_.filter(this.data,b),this.group=_.groupBy(this.group,a),this.group}});return c}),define("cUICitylist",["libs","cBase","cUIBase"],function(a,b,c){var d=new b.Class({__propertys__:function(){this.element=null,this.groupOpenClass="cityListClick",this.selectedCityClass="citylistcrt",this.autoLocCity=null,this.selectedCity=null,this.defaultData="inland",this.itemClickFun=null,this.data=null,this.autoLoc=!!navigator.geolocation,this.listType=this.defaultData},initialize:function(a){this.setOption(a),this.assert(),this._init()},_init:function(){this.renderCityGroup(),this.data&&(this.renderData=this.data[this.defaultData]||[],this.bindClickEvent())},setOption:function(a){for(var b in a)switch(b){case"groupOpenClass":case"selectedCityClass":case"selectedCity":case"itemClickFun":case"defaultData":case"autoLoc":case"autoLocCity":case"data":this[b]=a[b];
break;case"element":this[b]=$(a[b])}},assert:function(){if(!this.element&&0==this.element.length)throw"not override element property"},renderCityGroup:function(){var a=[];this.autoLocCity&&this.autoLocCity.listType==this.listType&&this.autoLocCity.name&&(a.push('<li id="'+c.config.prefix+'curCity" data-ruler="item"'),a.push(this.selectedCity&&this.autoLocCity.name!=this.selectedCity.name?' class="noCrt"':' class="'+this.selectedCityClass+'" '),a.push(' data-value="'+this.autoLocCity.name+'"'),a.push(">当前城市</li>")),a.push('<li id="hotCity" data-ruler="group" data-group="hotCity" class="'+this.groupOpenClass+'" >热门城市</li>');var b="ABCDEFGHJKLMNOPQRSTWXYZ".split("");for(var d in b)a.push('<li data-ruler="group" data-group="'+b[d]+'" id="'+b[d]+'">'+b[d]+"</li>");this.element.html(a.join(""))},groupClickHandler:function(a,b){var a=$(a),d=a.attr("data-group")||a.attr("id");if(0==a.children().length){var e=[];try{e=this.renderData[d]}catch(f){return void 0}var g=[];g.push("<ul>");for(var h=0,i=e.length;i>h;h++){var j=e[h];g.push('<li class data-ruler="item" data-id="'+j.id+'"'),g.push(">"+j.name+"</li>")}g.push("</ul>"),a.append(g.join(""))}var k=a.attr("class");b?a.addClass(this.groupOpenClass):k&&$.inArray(this.groupOpenClass,k)?a.removeClass(this.groupOpenClass):(this.element.find("."+this.groupOpenClass).removeClass(this.groupOpenClass),a.addClass(this.groupOpenClass));var l=c.getElementPos(a[0]);l&&"hotCity"!=a.attr("id")&&$(window).scrollTop(l.top-60),this.setSelectedCity(this.selectedCity)},bindClickEvent:function(){var a=this;this.element.delegate("li","click",function(){var b=$(this).attr("data-ruler");if("group"==b)a.groupClickHandler(this);else if("item"==b&&a.itemClickFun&&"function"==typeof a.itemClickFun){var c={id:$(this).attr("data-id"),name:$(this).attr("data-value")||$(this).html(),listType:a.listType};a.itemClickFun(c)}})},switchData:function(a){var b=this.data[a];b&&(this.listType=a,this.element.undelegate("li","click"),this.element.html(""),this.renderCityGroup(),this.renderData=b,this.groupClickHandler(this.element.find("#hotCity"),!0),this.setSelectedCity(this.selectedCity),this.bindClickEvent())},setSelectedCity:function(a){var b=this;if(a&&this.listType==a.listType&&a.name){var d=this.element.find("#"+c.config.prefix+"curCity");if(d.length>0)d.removeClass(this.selectedCityClass),d.addClass("noCrt");else if(b.autoLocCity&&b.autoLocCity.listType==this.listType&&b.autoLocCity.name){var e=[];e.push('<li id="'+c.config.prefix+'curCity"'),e.push('data-value="'+a.name+'" data-ruler="item">当前城市</li>'),this.element.prepend(e.join())}this.element.find("li").each(function(){var c=$(this);c.html()==a.name||c.attr("data-value")==a.name?(c.removeClass("noCrt"),c.addClass(b.selectedCityClass)):c.removeClass(b.selectedCityClass)}),this.selectedCity=a}},setData:function(a){this.element.html(""),this.data=a,this._init()},openHotCity:function(a){var b=this.element.find("#hotCity");b.length>0&&this.groupClickHandler(b,!!a)}});return d}),define("cUIInputClear",["libs"],function(){var a=function(){var a="placeholder"in document.createElement("input"),b=function(b,c,d,e,f){c||(c=""),e=e||{};var g="string"==typeof b?$(b):b;g.each(function(){var b=$('<a class="clear-input '+c+'" href="javascript:;"><span></span></a>'),g=$(this);if(f&&(b=$('<span class="cui-focus-close '+c+'">×</span>')),e.left&&b.css({left:e.left+"px",right:"auto"}),e.top&&b.css({top:e.top+"px",bottom:"auto"}),e.right&&b.css({right:e.right+"px",left:"auto"}),e.bottom&&b.css({bottom:e.bottom+"px",top:"auto"}),g.parent().addClass("clear-input-box"),!a)var h=g.attr("placeholder"),i=$('<span class="placeholder-title'+(c?" placeholder-"+c:"")+'">'+h+"</span>");b.hide(),g.bind({focus:function(){var a=$.trim(g.val());""!=a&&b.show()},input:function(){window.setTimeout(function(){var c=g.val();""==c?b.hide():b.show(),a||(""==c?i.show():i.hide())},10)},blur:function(){var c=$.trim(g.val());a||(""==c?i.show():i.hide()),setTimeout(function(){b.hide()},200)}}),b.bind("click",function(){g.val(""),g.keyup(),b.hide(),g.focus(),g.trigger("input"),"function"==typeof d&&d.call(this)}),g.after(b),a||(g.after(i),i.bind("click",function(){g.focus()})),g.blur()})};return b}();return a}),define("cUILoadingLayer",["libs","cBase","cUILayer"],function(a,b,c){var d={prefix:"cui-"},e={};e["class"]=d.prefix+"loading",e.onShow=function(){this.contentDom.html(['<div class="cui-grayload-text">','<div class="cui-i cui-w-loading"></div>','<div class="cui-i cui-m-logo"></div>','<div class="cui-grayload-close"></div>','<div class="cui-grayload-bfont">'+this.text+"</div>","</div>"].join("")),this.root.find(".cui-grayload-close").off("click").on("click",$.proxy(function(){this.callback&&this.callback(),this.hide()},this)),this.reposition()};var f={};return f.__propertys__=function(){this.contentDom,this.callback=function(){},this.text="发送中..."},f.initialize=function($super,a,b){this.callback=a||function(){},this.text=b||"发送中...",$super(e)},new b.Class(c,f)}),define("cUIScrollList",["cBase"],function(){window.initTap=function(){var a=$("#forTap");return a[0]||(a=$('<div id="forTap" style="color: White; display: none; border-radius: 60px; position: absolute; z-index: 99999; width: 60px; height: 60px"></div>'),$("body").append(a)),a},window.showMaskTap=function(a,b){var c=initTap();c[0]&&c.css({top:b+"px",left:a+"px"}),c.show(),setTimeout(function(){c.hide()},350)};var a=function(a){a=a||{},this._checkEventCompatibility(),this._setBaseParam(a),this._initBaseDom(a),this._setDisItemNum(a),this._setSelectedIndex(a),this.init()};return a.prototype={constructor:a,_checkEventCompatibility:function(){var a="ontouchstart"in document.documentElement;this.start=a?"touchstart":"mousedown",this.move=a?"touchmove":"mousemove",this.end=a?"touchend":"mouseup",this.startFn,this.moveFn,this.endFn},_setBaseParam:function(a){this.setHeight=0,this.itemHeight=0,this.dragHeight=0,this.dragTop=0,this.timeGap=0,this.touchTime=0,this.moveAble=!1,this.moveState="up",this.oTop=0,this.curTop=0,this.mouseY=0,this.cooling=!1,this.animateParam=a.animateParam||[50,40,30,25,20,15,10,8,6,4,2],this.animateParam=a.animateParam||[10,8,6,5,4,3,2,1,0,0,0],this.data=a.data||[],this.dataK={},this.size=this.getValidSize(this.data),this._changed=a.changed||null},getValidSize:function(a){return _.filter(a,function(a){return"undefined"==typeof a.key&&(a.key=a.id),"undefined"==typeof a.val&&(a.val=a.name),a.val||a.key}).length},_initBaseDom:function(a){this.wrapper=a.wrapper||$(document),this.type=a.type||"list",this.id=a.id||"id_"+(new Date).getTime(),this.className=a.className||"cui-roller-bd",this._setScrollClass(a),this._initDom(),this.wrapper.append(this.body)},_setScrollClass:function(a){var b;"list"==this.type?b="cui-select-view":"radio"==this.type&&(b="ul-list"),b=a.scrollClass||b,this.scrollClass=b},_initDom:function(){this.body=$(['<div class="'+this.className+'" style="overflow: hidden; position: relative; " id="'+this.id+'" >',"</div>"].join("")),this.dragEl=$(['<ul class="'+this.scrollClass+'" style="position: absolute; width: 100%;">',"</ul>"].join(""))},_setDisItemNum:function(a){if(this.disItemNum=this.data.length,this.disItemNum=this.disItemNum>5?5:this.disItemNum,"radio"==this.type&&(this.disItemNum=5),this.disItemNum=a.disItemNum||this.disItemNum,"radio"==this.type&&(this.disItemNum=this.disItemNum%2==0?this.disItemNum+1:this.disItemNum),this.data.length<this.disItemNum)if("radio"==this.type){for(var b=0,c=this.disItemNum-this.data.length;c>b;b++)this.data.push({key:"",val:"",disabled:!1});this.size=this.disItemNum}else this.disItemNum=this.data.length},_setSelectedIndex:function(a){this.selectedIndex=parseInt(this.disItemNum/2),"list"==this.type&&(this.selectedIndex=-1),this.selectedIndex=void 0!=a.index?a.index:this.selectedIndex,this.selectedIndex=this.selectedIndex>this.data.length?0:this.selectedIndex,this._checkSelected()},_checkSelected:function(a){a=a||"down";var b=this.selectedIndex;!this.data[b]||"undefined"!=typeof this.data[b].disabled&&0!=this.data[b].disabled||("down"==a?(this.selectedIndex=this._checkSelectedDown(b),"number"!=typeof this.selectedIndex&&(this.selectedIndex=this._checkSelectedUp(b))):(this.selectedIndex=this._checkSelectedUp(b),"number"!=typeof this.selectedIndex&&(this.selectedIndex=this._checkSelectedDown(b)))),"number"!=typeof this.selectedIndex&&(this.selectedIndex=b)},_checkSelectedUp:function(a){for(var b=!1,c=a;-1!=c;c--)if(this.data[c]&&"undefined"==typeof this.data[c].disabled||1==this.data[c].disabled){a=c,b=!0;break}return b?a:null},_checkSelectedDown:function(a){for(var b=!1,c=a,d=this.data.length;d>c;c++)if(this.data[c]&&"undefined"==typeof this.data[c].disabled||1==this.data[c].disabled){a=c,b=!0;break}return b?a:null},init:function(){this._addItem(),this._initEventParam(),this._addEvent(),this._initScrollBar(),this.setIndex(this.selectedIndex,!0)},_addItem:function(){var a,b,c,d;for(var c in this.data)b=this.data[c],b.index=c,"undefined"==typeof b.key&&(b.key=b.id),"undefined"==typeof b.val&&(b.val=b.name),d=b.val||b.key,this.dataK[b.key]=b,a=$("<li>"+d+"</li>"),a.attr("data-index",c),"undefined"!=typeof b.disabled&&0==b.disabled&&a.css("color","gray"),this.dragEl.append(a);this.body.append(this.dragEl)},_initEventParam:function(){if(this.data.constructor!=Array||0==this.data.length)return!1;var a=this.dragEl.offset(),b=this.dragEl.find("li").eq(0),c=b.offset();this.itemHeight=c.height,this.setHeight=this.itemHeight*this.disItemNum,this.body.css("height",this.setHeight),this.dragTop=a.top,this.dragHeight=this.itemHeight*this.size},_addEvent:function(){var a=this;this.startFn=function(b){a._touchStart.call(a,b)},this.moveFn=function(b){a._touchMove.call(a,b)},this.endFn=function(b){a._touchEnd.call(a,b)},this.dragEl[0].addEventListener(this.start,this.startFn,!1),this.dragEl[0].addEventListener(this.move,this.moveFn,!1),this.dragEl[0].addEventListener(this.end,this.endFn,!1)},removeEvent:function(){this.dragEl[0].removeEventListener(this.start,this.startFn),this.dragEl[0].removeEventListener(this.move,this.moveFn),this.dragEl[0].removeEventListener(this.end,this.endFn)},_initScrollBar:function(){if("list"==this.type){if(this.scrollProportion=this.setHeight/this.dragHeight,this.isNeedScrollBar=!0,this.scrollProportion>=1)return this.isNeedScrollBar=!1,!1;this.scrollBar=$('<div style="background-color: rgba(0, 0, 0, 0.498039);border: 1px solid rgba(255, 255, 255, 0.901961); width: 5px; border-radius: 3px;  position: absolute; right: 1px;  opacity: 0.2;  "></div>'),this.body.append(this.scrollBar),this.scrollHeight=parseInt(this.scrollProportion*this.setHeight),this.scrollBar.css("height",this.scrollHeight)}},_setScrollTop:function(a,b){if(this.isNeedScrollBar){a=this._getResetData(a).top,a=0>a?a+10:a;var c=-1*a;if("number"==typeof b){var d=parseInt(c*this.scrollProportion)+"px";this.scrollBar.animate({top:d,right:"1px"},b,"linear")}else this.scrollBar.css("top",parseInt(c*this.scrollProportion)+"px");this.scrollBar.css("opacity","0.8")}},_hideScroll:function(){this.isNeedScrollBar&&this.scrollBar.animate({opacity:"0.2"})},_touchStart:function(a){a.preventDefault();var b=this;if(this.cooling)return setTimeout(function(){b.cooling=!1},50),a.preventDefault(),!1;var c,d=$(a.target).parent();if(this.isMoved=!1,d.hasClass(this.scrollClass)){this.touchTime=a.timeStamp,c=this.getMousePos(a.changedTouches&&a.changedTouches[0]||a);var e=parseFloat(this.dragEl.css("top"))||0;this.mouseY=c.top-e,this.moveAble=!0}},_touchMove:function(a){if(a.preventDefault(),!this.moveAble)return!1;var b=this.getMousePos(a.changedTouches&&a.changedTouches[0]||a);this.curTop=b.top-this.mouseY;var c=this._cheakListBound(this.curTop);0!=c&&(this.curTop=c.top),this.isMoved=!0,this.dragEl.css("top",this.curTop+"px"),this._setScrollTop(this.curTop),a.preventDefault()},_cheakListBound:function(a){var b=parseInt(this.dragHeight)-parseInt(this.setHeight),c=!1;if("radio"==this.type){var d=parseInt(this.disItemNum/2);a>this.itemHeight*d?(a=this.itemHeight*d,c=!0):a<-1*b-this.itemHeight*d&&(a=-1*b-this.itemHeight*d,c=!0)}else a>this.itemHeight?(a=this.itemHeight,c=!0):a<-1*b-this.itemHeight&&(a=-1*b-this.itemHeight,c=!0);return c?(this.isBound=!0,{speed:1,top:a}):(this.isBound=!1,!1)},_getAnimateData:function(a){this.timeGap=a.timeStamp-this.touchTime;var b=this.oTop<=this.curTop?1:-1,c=this.curTop>0?1:-1;this.moveState=b>0?"up":"down";var d=parseFloat(this.itemHeight),e=d/2,f=Math.abs(this.curTop),g=f%d;f=(parseInt(f/d)*d+(g>e?d:0))*c;var h=parseInt(this.timeGap/10-10);h=h>0?h:0;var i=this.animateParam[h]||0,j=i*d*b;return f+=j,{top:f,speed:i}},_touchEnd:function(a){var b=this;if(this.isBound===!0&&this.isMoved===!0)return b.reset.call(b,this.curTop),this.moveAble=!1,!1;if(!this.moveAble)return!1;this.cooling=!0;var c=this._getAnimateData(a),d=c.top,e=c.speed,f=this._cheakListBound(d);if(0!=f&&(d=f.top,e=f.speed),this.oTop!=this.curTop&&this.curTop!=d)this.dragEl.animate({top:d+"px"},100+20*e,"linear",function(){b.reset.call(b,d)}),b._setScrollTop(d,100+20*e);else{return}this._hideScroll(),this.moveAble=!1},_getResetData:function(a){var b=parseInt("list"==this.type?0:this.disItemNum/2),c=a,d=!1,e="list"==this.type?0:parseFloat(this.itemHeight)*b,f="list"==this.type?this.setHeight:parseFloat(this.itemHeight)*(b+1),g=this.dragHeight;return a>=0&&(a>e?(c=e,d=!0):e>=g&&(c=parseInt(this.dragEl.css("top"))/this.itemHeight*this.itemHeight,d=!0)),0>a&&a+this.dragHeight<=f&&(d=!0,c=-1*(this.dragHeight-f)),a==c&&(d=!1),{top:c,needReset:d}},reset:function(a){var b=this,c=this._getResetData(a).needReset,d=this._getResetData(a).top;c?b.dragEl.animate({top:d+"px"},50,"linear",function(){b._reset(d)}):b._reset(a),this._hideScroll()},_reset:function(a){this.oTop=a,this.curTop=a,"radio"==this.type&&this.onTouchEnd(),this.cooling=!1},onTouchEnd:function(a){a=a||this;var b,c,d,e,f,g=this._changed,h=parseInt("list"==this.type?0:this.disItemNum/2);if(d=this.data.length,"radio"==this.type?(c=parseInt((this.curTop-this.itemHeight*h)/parseFloat(this.itemHeight)),this.selectedIndex=Math.abs(c),b=this.data[this.selectedIndex]):b=this.data[this.selectedIndex],f=!1,b&&"undefined"!=typeof b.disabled&&0==b.disabled&&(e=this.selectedIndex,"radio"==this.type&&this._checkSelected(this.moveState),e!=this.selectedIndex&&(f=!0)),f)this.setIndex(this.selectedIndex);else{var g=this._changed;g&&"function"==typeof g&&b&&0!=b.disabled&&g.call(a,b),this.dragEl.find("li").removeClass("current"),"radio"==this.type&&this.dragEl.find("li").eq(this.selectedIndex).addClass("current")}},reload:function(a){this.data=a,this.dragEl.html(""),a.constructor==Array&&a.length>0&&(this.selectedIndex=parseInt(this.disItemNum/2),this.selectedIndex=this.selectedIndex>this.data.length?this.data.length-1:this.selectedIndex,this._checkSelected("down"),this._addItem(),this._initEventParam(),this.cooling=!1,this.setIndex(this.selectedIndex,!0),this.dragEl.find("li").removeClass("current"),"radio"==this.type&&this.dragEl.find("li").eq(this.selectedIndex).addClass("current")),this.size=this.getValidSize(a),this.dragHeight=this.itemHeight*this.size},setKey:function(a){if(void 0==a||null==a)return!1;var b=this.dataK[a]&&this.dataK[a].index;this.setIndex(b)},setIndex:function(a,b){if(void 0==a||0>a)return!1;var c=this,d=parseInt(c.disItemNum/2);"list"==c.type&&(this.data.length==c.disItemNum?d=a:(d=0==a?0:1,this.size-a<this.disItemNum&&(d=-1*parseInt(this.size)+parseInt(this.disItemNum)+parseInt(a))));var e,a=parseInt(a);if(0>a)return!1;if(a>=this.data.length&&(a=this.data.length-1),this.selectedIndex=a,e=this.itemHeight*(d-a),c.oTop=e,c.curTop=e,c.cooling=!1,c.dragEl.animate({top:e+"px"},50,"linear"),this._setScrollTop(e,50),"list"==c.type){var f=c.dragEl.find("li");f.removeClass("current"),f.eq(a).addClass("current")}b||c.onTouchEnd()},getSelected:function(){return this.data[this.selectedIndex]},getByKey:function(a){var b=this.dataK[a]&&this.dataK[a].index;return null!=b&&void 0!=b?this.data[b]:null},getMousePos:function(a){var b,c;return b=Math.max(document.body.scrollTop,document.documentElement.scrollTop),c=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),{top:b+a.clientY,left:c+a.clientX}}},a}),define("cUIScrollRadio",["libs","cBase","cUILayer","cUIScrollList"],function(a,b,c,d){var e={},f={prefix:"cui-"},g={};g["class"]=f.prefix+"warning",g.onCreate=function(){this.root.html(['<div class="cui-pop-box" >','<div class="cui-hd">','<div class="cui-text-center">',""+this.title+"</div>","</div>",'<div class="cui-bd ">','<div class="cui-roller scrollWrapper">',"</div>",'<p class="cui-roller-tips">',""+this.tips+"</p>",'<div class="cui-roller-btns">','<div class="cui-btns-cancel cui-flexbd">'+this.cancel+'</div> <div class="cui-btns-sure cui-flexbd" >',""+this.ok+"</div>","</div>","</div>","</div>"].join("")),this.title=this.root.find(".cui-text-center"),this.tips=this.root.find(".cui-roller-tips"),this.btCancel=this.root.find(".cui-btns-cancel"),this.btOk=this.root.find(".cui-btns-sure"),this.line=$('<div class="cui-mask-gray"></div><div class="cui-lines">&nbsp;</div>'),this.wrapper=this.root.find(".scrollWrapper")},g.onShow=function(){var a=this;if(this.maskToHide(function(){a.hide()}),!this.data||0==this.data.length)return!1;for(var b=0,c=this.data.length;c>b;b++){var e={wrapper:this.wrapper,data:this.data[b],type:"radio",disItemNum:this.disItemNum,changed:function(b){return function(c){var d=a.changed[b];"function"==typeof d&&d.call(a,c)}}(b)};0==b&&3==c&&(e.className="cui-roller-bd  cui-flex2");var f=new d(e);this.scroll.push(f)}for(var b=0,c=this.data.length;c>b;b++)this.scroll[b].setIndex(this.index[b]),this.scroll[b].setKey(this.key[b]);this.wrapper.append(this.line),this.btOk.on("click",function(){for(var b=[],c=0,d=a.scroll.length;d>c;c++)b.push(a.scroll[c].getSelected());a.okClick.call(a,b),a.hide()}),this.btCancel.on("click",function(){for(var b=[],c=0,d=a.scroll.length;d>c;c++)b.push(a.scroll[c].getSelected());a.cancelClick.call(a,b),a.hide()}),this.setzIndexTop(),this.root.bind("touchmove",function(a){a.preventDefault()}),this.onHashChange=function(){this.hide()},$(window).on("hashchange",$.proxy(this.onHashChange,this))},g.onHide=function(){for(var a=0,b=this.scroll.length;b>a;a++)this.scroll[a].removeEvent();this.btOk.off("click"),this.btCancel.off("click"),this.root.unbind("touchmove"),this.root.remove(),$(window).off("hashchange",$.proxy(this.onHashChange,this))},e.__propertys__=function(){var a=this;this.changed=[],this.scroll=[],this.data=[],this.index=[],this.key=[],this.disItemNum=5,this.tips="",this.btCancel,this.btOk,this.cancel="取消",this.ok="确定",this.cancelClick=function(){a.hide()},this.okClick=function(){a.hide()}},e.initialize=function($super,a){this.setOption(function(a,b){this[a]=b}),$super($.extend(g,a))},e.setTips=function(a){this.tips.html(a)};var h=new b.Class(c,e);return h}),define("cUIScroll",["cBase"],function(){function a(a){this.$wrapper="string"==typeof a.wrapper?$(a.wrapper):a.wrapper,this.scroller=a.scroller?"string"==typeof a.scroller?$(a.scroller):a.scroller:this.$wrapper.children().eq(0),this.wrapper=this.$wrapper[0],this.scroller=this.scroller[0];var b=this.wrapper.iscrollInstance;if(b)return b;this.scrollerStyle=this.scroller.style,this.options={scrollbars:!0,startX:0,startY:0,bounceTime:600,bounceEasing:d.ease.circular,preventDefaultException:/^(input|textarea|button|select)$/i,bounce:!0,scrollY:!0,scrollX:!1,bindToWrapper:!0,resizePolling:60},this._events={};for(var c in a)this.options[c]=a[c],("scrollStart"==c||"scrollEnd"==c)&&this.on(c,_.bind(a[c],this));this.translateZ=" translateZ(0)",this.x=0,this.y=0,this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable(),this.wrapper.iscrollInstance=this}function b(a){var b=$("<div>"),c=$("<div>"),d={position:"absolute",overflow:"hidden"},e={boxSizing:"border-box",position:"absolute",background:"rgba(0, 0, 0, .5)",border:"1px solid rgba(255, 255, 255, .9)"};return"h"===a?(_.extend(d,{height:7,left:2,right:2,bottom:0}),_.extend(e,{height:"100%"})):(_.extend(d,{width:7,bottom:2,top:2,right:1}),_.extend(e,{width:"100%"})),b.css(d),c.css(e),b.append(c),b[0]}function c(a,b){this.wrapper="string"==typeof b.el?document.querySelector(b.el):b.el,this.indicator=this.wrapper.children[0],this.wrapperStyle=this.wrapper.style,this.indicatorStyle=this.indicator.style,this.scroller=a,this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options={scrollX:!1},_.extend(this.options,b),this.wrapperStyle[d.style.transform]=this.scroller.translateZ,this.wrapperStyle[d.style.transitionDuration]="0ms"}var d=function(){function a(a){return d===!1?!1:""===d?a:d+a.charAt(0).toUpperCase()+a.substr(1)}var b={},c=document.createElement("div").style,d=function(){for(var a,b=["t","webkitT","MozT","msT","OT"],d=0,e=b.length;e>d;d++)if(a=b[d]+"ransform",a in c)return b[d].substr(0,b[d].length-1);return!1}();return b.getTime=Date.now||function(){return(new Date).getTime()},b.addEvent=function(a,b,c,d){a[0]&&a!=window.top&&(a=a[0]),a.addEventListener(b,c,!!d)},b.removeEvent=function(a,b,c,d){a[0]&&a!=window.top&&(a=a[0]),a.removeEventListener(b,c,!!d)},b.momentum=function(a,b,c,d,e){var f,g,h=a-b,i=Math.abs(h)/c,j=6e-4;return f=a+i*i/(2*j)*(0>h?-1:1),g=i/j,d>f?(f=e?d-e/2.5*(i/8):d,h=Math.abs(f-a),g=h/i):f>0&&(f=e?e/2.5*(i/8):0,h=Math.abs(a)+f,g=h/i),{destination:Math.round(f),duration:g}},$.extend(b,{hasTouch:"ontouchstart"in window}),b.isBadAndroid=/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion),$.extend(b.style={},{transform:a("transform"),transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration"),transitionDelay:a("transitionDelay"),transformOrigin:a("transformOrigin")}),$.extend(b.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2}),$.extend(b.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return Math.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22,c=.4;return 0===a?0:1==a?1:c*Math.pow(2,-10*a)*Math.sin(2*(a-b/4)*Math.PI/b)+1}}}),b}();return a.prototype={_init:function(){this._initEvents(),this.options.scrollbars&&this._initIndicator()},refresh:function(){var a=this.wrapper.offsetHeight,b=this.options;0!=a&&(this.wrapperWidth=this.wrapper.clientWidth,this.scrollerWidth=this.scroller.offsetWidth,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.indicator&&(b.scrollY&&this.maxScrollY>=0&&(this.indicator.wrapperStyle.display="none"),b.scrollX&&this.maxScrollX>=0&&(this.indicator.wrapperStyle.display="none")),(b.scrollX||this.maxScrollY>0)&&(this.maxScrollY=0),(b.scrllY||this.maxScrollX>0)&&(this.maxScrollX=0),this.endTime=0,this._execEvent("refresh"),this.resetPosition())},_initEvents:function(a){var b=a?d.removeEvent:d.addEvent,c=this.options.bindToWrapper?this.wrapper:window;b(window,"orientationchange",this),b(window,"resize",this),d.hasTouch?(b(this.wrapper,"touchstart",this),b(c,"touchmove",this),b(c,"touchcancel",this),b(c,"touchend",this)):(b(this.wrapper,"mousedown",this),b(c,"mousemove",this),b(c,"mousecancel",this),b(c,"mouseup",this)),b(this.scroller,"transitionend",this),b(this.scroller,"webkitTransitionEnd",this),b(this.scroller,"oTransitionEnd",this),b(this.scroller,"MSTransitionEnd",this)},_start:function(a){var b=this.options;if(b.scrollX&&(this._isMovedChecked=!1,this.enabled=!0),this.enabled&&(!this.initiated||d.eventType[a.type]===this.initiated)){!d.isBadAndroid&&b.preventDefaultException.test(a.target.tagName)&&a.preventDefault();var c,e=a.touches?a.touches[0]:a;if(this.initiated=d.eventType[a.type],this.moved=!1,this.distY=0,this.distX=0,this._transitionTime(),this.startTime=d.getTime(),this.isInTransition){this.isInTransition=!1,c=this.getComputedPosition();var f=Math.round(c.x),g=Math.round(c.y);0>g&&g>this.maxScrollY&&b.adjustXY&&(g=b.adjustXY.call(this,f,g).y),this._translate(f,g),this._execEvent("scrollEnd")}this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=e.pageX,this.pointY=e.pageY,this._execEvent("beforeScrollStart")}},_moveCheck:function(a){var b=this.options;if(b.scrollX&&!this._isMovedChecked){var c=a.touches?a.touches[0]:a,d=Math.abs(c.pageX-this.pointX),e=Math.abs(c.pageY-this.pointY);e>d&&this.disable()}this._isMovedChecked=!0},_move:function(a){if(this.enabled&&d.eventType[a.type]===this.initiated){a.preventDefault();var b,c,e,f,g=this.options,h=a.touches?a.touches[0]:a,i=h.pageX-this.pointX,j=h.pageY-this.pointY,k=d.getTime();this.pointX=h.pageX,this.pointY=h.pageY,this.distX+=i,this.distY+=j,e=Math.abs(this.distX),f=Math.abs(this.distY),k-this.endTime>300&&10>e&&10>f||(g.scrollX&&(j=0),g.scrollY&&(i=0),b=this.x+i,c=this.y+j,(b>0||b<this.maxScrollX)&&(b=this.options.bounce?this.x+i/3:b>0?0:this.maxScrollX),(c>0||c<this.maxScrollY)&&(c=g.bounce?this.y+j/3:c>0?0:this.maxScrollY),this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(b,c),k-this.startTime>300&&(this.startTime=k,this.startX=this.x,this.startY=this.y))}},_end:function(a){if(this.enabled&&d.eventType[a.type]===this.initiated){var b,c=this.options,e=(a.changedTouches?a.changedTouches[0]:a,d.getTime()-this.startTime),f=Math.round(this.x),g=Math.round(this.y),h=(Math.abs(f-this.startX),Math.abs(g-this.startY),0),i="";if(this.isInTransition=0,this.initiated=0,this.endTime=d.getTime(),!this.resetPosition(c.bounceTime))return this.scrollTo(f,g),this.moved?(300>e&&(momentumX=d.momentum(this.x,this.startX,e,this.maxScrollX,c.bounce?this.wrapperWidth:0),b=d.momentum(this.y,this.startY,e,this.maxScrollY,c.bounce?this.wrapperHeight:0),f=momentumX.destination,g=b.destination,h=Math.max(momentumX.duration,b.duration),this.isInTransition=1),f!=this.x||g!=this.y?((f>0||f<this.maxScrollX||g>0||g<this.maxScrollY)&&(i=d.ease.quadratic),void this.scrollTo(f,g,h,i)):void this._execEvent("scrollEnd")):void this._execEvent("scrollCancel")}},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh()},this.options.resizePolling)},_transitionTimingFunction:function(a){this.scrollerStyle[d.style.transitionTimingFunction]=a,this.indicator&&this.indicator.transitionTimingFunction(a)},_transitionTime:function(a){a=a||0,this.scrollerStyle[d.style.transitionDuration]=a+"ms",this.indicator&&this.indicator.transitionTime(a)},getComputedPosition:function(){var a,b,c=window.getComputedStyle(this.scroller,null);return c=c[d.style.transform].split(")")[0].split(", "),a=+(c[12]||c[4]),b=+(c[13]||c[5]),{x:a,y:b}},_initIndicator:function(){var a,d=this.options.scrollX;a=d?b("h"):b(),this.wrapper.appendChild(a),this.indicator=new c(this,{el:a,scrollX:d}),this.$wrapper.css("position","relative"),this.on("scrollEnd",function(){this.indicator.fade()});var e=this;this.on("scrollCancel",function(){e.indicator.fade()}),this.on("scrollStart",function(){e.indicator.fade(1)}),this.on("beforeScrollStart",function(){e.indicator.fade(1,!0)}),this.on("refresh",function(){e.indicator.refresh()})},_translate:function(a,b){this.scrollerStyle[d.style.transform]="translate("+a+"px,"+b+"px)"+this.translateZ,this.x=a,this.y=b,this.options.scrollbars&&this.indicator.updatePosition()},resetPosition:function(a){var b=this.x,c=this.y,d=this.options;return a=a||0,!d.scrollX||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!d.scrollY||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),b==this.x&&c==this.y?!1:(this.scrollTo(b,c,a,this.options.bounceEasing),!0)},scrollTo:function(a,b,c,e){e=e||d.ease.circular,this.isInTransition=c>0,(!c||e.style)&&(this._transitionTimingFunction(e.style),this._transitionTime(c),this._translate(a,b))},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},_execEvent:function(a){if(this._events[a]){var b=0,c=this._events[a].length;if(c)for(;c>b;b++)this._events[a][b].call(this)}},destroy:function(){this._initEvents(!0),this._execEvent("destroy"),this.indicator&&this.indicator.destroy()},_transitionEnd:function(a){a.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},handleEvent:function(a){switch($("#log").html(a.type),a.type){case"touchstart":case"mousedown":this._start(a);break;case"touchmove":case"mousemove":this._moveCheck(a),this._move(a);break;case"touchend":case"mouseup":case"touchcancel":case"mousecancel":this._end(a);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a)}}},c.prototype={transitionTime:function(a){a=a||0,this.indicatorStyle[d.style.transitionDuration]=a+"ms"},transitionTimingFunction:function(a){this.indicatorStyle[d.style.transitionTimingFunction]=a},refresh:function(){this.transitionTime();var a,b,c=(this.wrapper.offsetHeight,this.wrapper.clientHeight),d=this.wrapper.clientWidth;this.options.scrollX?(b=Math.max(Math.round(d*d/(this.scroller.scrollerWidth||d||1)),8),this.indicatorStyle.width=b+"px",this.maxPosX=d-b,this.sizeRatioX=this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX):(a=Math.max(Math.round(c*c/(this.scroller.scrollerHeight||c||1)),8),this.indicatorStyle.height=a+"px",this.maxPosY=c-a,this.sizeRatioY=this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},destroy:function(){$(this.wrapper).remove()},updatePosition:function(){var a,b=Math.round(this.sizeRatioY*this.scroller.y)||0,c=Math.round(this.sizeRatioX*this.scroller.x)||0;this.y=b,this.x=c,a=this.options.scrollX?"translate("+c+"px, 0)":"translate(0,"+b+"px)",this.indicatorStyle[d.style.transform]=a+this.scroller.translateZ},fade:function(a,b){if(!b||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var c=a?250:500,e=a?0:300;a=a?"1":"0",this.wrapperStyle[d.style.transitionDuration]=c+"ms",this.fadeTimeout=setTimeout($.proxy(function(a){this.wrapperStyle.opacity=a,this.visible=+a},this),e)}}},a.utils=d,a}),define("cUIScrollRadioList",["cBase","cUILayer","cUIScroll"],function(a,b,c){var d={},e={prefix:"cui-"},f={};f["class"]=e.prefix+"warning",f.onCreate=function(){this.root.html(['<div class="cui-pop-box" lazyTap="true">','<div class="cui-hd"><div class="cui-text-center">'+this.title+"</div></div>",'<div class="cui-bd cui-roller-bd" style="overflow: hidden; position: relative; ">',"</div>","</div>"].join("")),this.title=this.root.find(".cui-text-center"),this.content=this.root.find(".cui-bd")},f.onShow=function(){var a=this;this.maskToHide(function(){a.hide()});var b=$('<ul class="cui-select-view " style="position: absolute; width: 100%; "></ul>');this.dataK={};for(var d in this.data){_data=this.data[d],_data.index=d,"undefined"==typeof _data.key&&(_data.key=_data.id),"undefined"==typeof _data.val&&(_data.val=_data.name);var e=_data.val||_data.key,f=$("<li>"+e+"</li>");f.attr("data-index",d),"undefined"!=typeof _data.disabled&&0==_data.disabled&&f.css("color","gray"),d==this.index&&f.addClass("current"),this.dataK[_data.key]=_data,b.append(f)}this.content.append(b);var g=this.data.length;this.disItemNum>g&&(this.disItemNum=g);var h=b.height()/g,i=h*this.disItemNum;this.content.css("height",i),this.scroll=new c({wrapper:this.content,scroller:b});var j=this.index;this.key&&(j=this.dataK[this.key].index),g-j<this.disItemNum&&(j=g-this.disItemNum);
var k=h*j*-1;this.scroll.scrollTo(0,k);var a=this;b.on("click",$.proxy(function(b){var c=$(b.target);if(c&&null!==c.attr("data-index")){var d=this.data[c.attr("data-index")];this.itemClick.call(a,d),this.hide()}},this)),this.scroller=b,this.setzIndexTop(),this.root.bind("touchmove",function(a){a.preventDefault()}),this.onHashChange=function(){this.hide()},$(window).on("hashchange",$.proxy(this.onHashChange,this))},f.onHide=function(){this.scroll.destroy(),this.root.unbind("touchmove"),this.root.remove(),$(window).off("hashchange",$.proxy(this.onHashChange,this)),this.scroller&&this.scroller.off("click")},d.__propertys__=function(){this.title,this.content,this.itemClick=function(){},this.scroll=null,this.data=[],this.index=-1,this.key=null,this.disItemNum=5},d.initialize=function($super,a){this.setOption(function(a,b){this[a]=b}),$super($.extend(f,a))};var g=new a.Class(b,d);return g}),define("cUIEventListener",["libs","cBase"],function(a,b){var c={};return c.__propertys__=function(){this.__events__={}},c.initialize=function(){},c.addEvent=function(a,b){if(!a||!b)throw"addEvent Parameter is not complete!";var c=this.__events__[a]||[];c.push(b),this.__events__[a]=c},c.removeEvent=function(a,b){if(!a)throw"removeEvent parameters must be at least specify the type!";var c=this.__events__[a];if(c)if(b)for(var d=Math.max(c.length-1,0);d>=0;d--)c[d]===b&&c.splice(d,1);else delete c[a]},c.trigger=function(a,b,c){var d=this.__events__[a];if(d)for(var e=0,f=d.length;f>e;e++)"function"==typeof d[e]&&d[e].apply(c||this,b)},new b.Class(c)}),define("cUISwitch",["cBase","cUIAbstractView"],function(a,b){var c={};return c.__propertys__=function(){this.mouseData={sX:0,eX:0,sY:0,eY:0},this.checkedFlag=!1},c.initialize=function($super,a){this.bindEvent(),this.allowsConfig.changed=!0,this.checkedFlag=a.checked,$super(a),this.show()},c.bindEvent=function(){this.addEvent("onShow",function(){this.el=this.root.find(".cui-switch"),this.switchBar=this.el.find(".cui-switch-bg"),$.flip(this.root,"left",$.proxy(function(){this.unChecked()},this)),$.flip(this.root,"right",$.proxy(function(){this.checked()},this)),$.flip(this.root,"tap",$.proxy(function(){this.el.hasClass("current")?this.unChecked():this.checked()},this))}),this.addEvent("onHide",function(){$.flipDestroy(this.el),this.root.remove()})},c.createHtml=function(){var a=this.checkedFlag?"current":"";return['<div class="cui-switch '+a+'">','<div class="cui-switch-bg '+a+'"></div>','<div class="cui-switch-scroll"></div>',"</div>"].join("")},c._getLRDir=function(){return this.mouseData.eX-this.mouseData.sX>0?"right":this.mouseData.eX-this.mouseData.sX<0?"left":void 0},c.unChecked=function(){this.getStatus()&&(this.el.removeClass("current"),this.switchBar.removeClass("current"),this._triggerChanged())},c.checked=function(){this.getStatus()||(this.el.addClass("current"),this.switchBar.addClass("current"),this._triggerChanged())},c._triggerChanged=function(){"function"==typeof this.changed&&this.changed.call(this)},c.getStatus=function(){return this.el.hasClass("current")},c.setStatus=function(a){a?(this.el.addClass("current"),this.switchBar.addClass("current")):(this.el.removeClass("current"),this.switchBar.removeClass("current"))},new a.Class(b,c)}),define("cUINum",["cBase","cUIAbstractView"],function(a,b){var c={};return c.__propertys__=function(){this.min=1,this.max=9,this.curNum=1,this.needText=!0,this.addClass="num-add",this.minusClass="num-minus",this.curClass="num-value-txt",this.invalid="num-invalid",this.minAble=!0,this.maxAble=!0,this.unit="",this.minDom=null,this.maxDom=null,this.curDom=null,this.hasBindEvent=!1,this.changed=function(){},this.changeAble=function(){}},c.initialize=function($super,a){for(var b in a)this[b]=a[b];$super(a),this.bindEvent(),this.show()},c.bindEvent=function(){this.addEvent("onHide",function(){this.root.off("click"),this.curDom.off("focus"),this.curDom.off("blur"),this.root.remove()}),this.addEvent("onShow",function(){this.maxDom=this.root.find("."+this.addClass),this.minDom=this.root.find("."+this.minusClass),this.curDom=this.root.find("."+this.curClass),this.resetNum(),0==this.needText&&this.curDom.attr("disabled","disabled"),0==this.hasBindEvent&&(this.root.on("click",$.proxy(function(a){var b=$(a.target);b.hasClass(this.curClass)||(b.hasClass(this.addClass)&&this.maxAble&&this.setVal(this.curNum+1),b.hasClass(this.minusClass)&&this.minAble&&this.setVal(this.curNum-1),a.preventDefault())},this)),this.needText&&(this.curDom.on("focus",$.proxy(function(){this.curDom.val("")},this)),this.curDom.on("blur",$.proxy(function(){this.setVal(this.curDom.val())},this))),this.hasBindEvent=!0)})},c.resetNum=function(a){this.curDom.attr("data-key",this.curNum),this.curDom.val(this.getText()),"function"!=typeof this.changed||a||this.changed.call(this,this.curNum),this.testValid()},c.getVal=function(){return this.curNum},c.setVal=function(a){if("function"==typeof this.changeAble&&0==this.changeAble.call(this,a))return this.resetNum(!0),!1;var b=!0;a==parseInt(a)&&(b=this.curNum==a,a=parseInt(a),this.curNum=a,a<this.min&&(this.curNum=this.min),a>this.max&&(this.curNum=this.max)),this.resetNum(b)},c.testValid=function(){this.curNum==this.min?(this.deactiveItem(this.minDom),this.minAble=!1):0==this.minAble&&(this.acticeItem(this.minDom),this.minAble=!0),this.curNum==this.max?(this.deactiveItem(this.maxDom),this.maxAble=!1):0==this.maxAble&&(this.acticeItem(this.maxDom),this.maxAble=!0)},c.deactiveItem=function(a){a&&a.addClass(this.invalid)},c.acticeItem=function(a){a&&a.removeClass(this.invalid)},c.getText=function(){return this.curNum+this.unit},c.createHtml=function(){return['<span class="cui-number-ma">','<i class="'+this.minusClass+'"></i>','<input type="tel"  class="'+this.curClass+'" >','<i class="'+this.addClass+'"></i>',"</span>"].join("")},new a.Class(b,c)}),define("cUIGroupList",["cBase","cUIAbstractView"],function(a,b){var c={};return c.__propertys__=function(){this.data=[],this.needFold=!1,this.foldAll=!1,this.unFoldOne=!1,this.selectedKey=null,this.el=null,this.filter="",this.click=function(){},this.OnClick=function(){},this.isCreated=!1,this.itemTemplate=!1},c.initialize=function($super,a){for(var b in a)this[b]=a[b];$super(a),this.paramFormat(),this.bindEvent(),this.show()},c.paramFormat=function(){var a=this.filter&&this.filter.split(",");"object"!=typeof a&&(a={}),this.filter=a},c.bindEvent=function(){this.addEvent("onShow",function(){if(!this.isCreated){this.isCreated=!0;this.init(),this.root.on("click",$.proxy(function(a){for(var b=$(a.target),c=!1;;){if(b.attr("id")==this.id)break;if("c"==b.attr("data-flag")){c=!0;break}b=b.parent()}if(c)return void this.setSelected(b.attr("data-key"));if(0!=this.needFold&&b.hasClass("cui-city-t")){var d=b.parent();d.hasClass("cui-arrow-close")?(this.unFoldOne&&this.root.find(".cui-city-itmes > li").attr("class","cui-arrow-close"),d.attr("class","cui-arrow-open")):(this.unFoldOne&&this.root.find(".cui-city-itmes > li").attr("class","cui-arrow-close"),d.attr("class","cui-arrow-close"))}},this))}})},c.destroy=function(){this.root.off("click"),this.root.remove()},c.init=function(){1==this.foldAll&&(this.needFold=!0),this.tmpt=_.template(['<ul class="cui-city-itmes">',"<%for(var i = 0, len = data.length; i < len; i++) { %>",'<li data-groupindex="<%=i%>" data-key="<%=data[i].id %>"  '+(this.needFold?'<%if(foldAll && ((typeof data[i].unFold == "undefined") || data[i].unFold != true)) {%> class="cui-arrow-close" <%} else {%> class="cui-arrow-open" <%}%>':"")+">",'<span class="cui-city-t" ><%=data[i].name %></span>',"<%var item = data[i].data; %>",'<ul class="cui-city-n">',"<%for(var j = 0, len1 = item.length; j < len1; j++) { %>","<% var itemData = item[j]; %>",'<% var _f = ""; for(var k in filter) { _f += (itemData[filter[k]] ? itemData[filter[k]] : "").toLowerCase() + " ";  } %>','<li data-skey="item_<%=itemData.id%>" '+("undefined"!=typeof this.groupFlag?'data-groupflag="'+this.groupFlag+'"':"")+' data-filter="<%=_f%>" data-key="<%=itemData.id%>" data-index="<%=i%>,<%=j%>" data-flag="c" <%if(itemData.id == selectedKey){%> class="current" <%}%> > '+(this.itemTemplate?this.itemTemplate:"<%=itemData.name %>")+" </li>","<%} %>","</ul>","</li>","<%} %>","</ul>"].join(""));var a=this.tmpt({data:this.data,foldAll:this.foldAll,selectedKey:this.selectedKey,filter:this.filter});this.root.html(a)},c.updateItem=function(){},c.updateGroup=function(a,b){var c=this.data[a];if(c){this.data[a]=b;var d=this.root.find('li[data-groupindex="'+a+'"]');this.tmpt=_.template(['<li data-groupindex="<%=i%>" data-key="<%=data.id %>"  '+(this.needFold?'<%if(foldAll && ((typeof data.unFold == "undefined") || data.unFold != true)) {%> class="cui-arrow-close" <%} else {%> class="cui-arrow-open" <%}%>':"")+">",'<span class="cui-city-t" ><%=data.name %></span>',"<%var item = data.data; %>",'<ul class="cui-city-n">',"<%for(var j = 0, len1 = item.length; j < len1; j++) { %>",'<% var _f = ""; for(var k in filter) { _f += (item[j][filter[k]] ? item[j][filter[k]] : "").toLowerCase() + " ";  } %>','<li data-skey="item_<%=item[j].id%>" '+("undefined"!=typeof this.groupFlag?'data-groupflag="'+this.groupFlag+'"':"")+' data-filter="<%=_f%>" data-key="<%=item[j].id%>" data-index="<%=i%>,<%=j%>" data-flag="c" <%if(item[j].id == selectedKey){%> class="current" <%}%> ><%=item[j].name %></li>',"<%} %>","</ul>","</li>"].join(""));var e=this.tmpt({data:b,foldAll:this.foldAll,selectedKey:this.selectedKey,filter:this.filter,i:a}),f=$(e);d.before(f),d.remove()}},c.reload=function(a){a&&(this.data=a),this.root.html(""),this.init()},c.setSelected=function(a,b){this.selectedKey=a;var c=this.getSelected();this.root.find(".cui-city-n li").removeClass("current"),this.el.addClass("current"),"function"==typeof this.onClick&&this.onClick.call(this,c),"function"!=typeof this.click||b||this.click.call(this,c)},c.getSelected=function(){if(this.el=this.root.find('li[data-skey="item_'+(this.selectedKey||"")+'"]'),"string"!=typeof this.el.attr("data-index"))return null;var a=this.el.attr("data-index").split(",");return 2!=a.length?null:this.data[parseInt(a[0])].data[parseInt(a[1])]},c.createHtml=function(){return""},new a.Class(b,c)}),define("cUIBusinessGroupList",["cBase","cUIAbstractView","cUIGroupList"],function(a,b,c){var d={};return d.__propertys__=function(){this.needTab=!0,this.groupIndex=0,this.groupObj=[],this.isCreated=!1,this.selectedKey=null,this.CLICK_RES=null,this.filter="",this.needFold=!1,this.foldAll=!1,this.unFoldOne=!1,this.showFnBtn=!1,this.fnBtnTxt="清除历史记录",this.fnBtnCallback=function(){},this.itemTemplate=!1,this.isAjax=!1,this.ajaxCallBack=function(){},this.lastKeyword="",this.ajaxData=[]},d.initialize=function($super,a){for(var b in a)this[b]=a[b];$super(a),this.isAjax&&(this.needFold=!1,this.foldAll=!1,this.filter="",this.needTab=!1),this.bindEvent(),this.show()},d.bindEvent=function(){this.addEvent("onHide",function(){this.destroyItemInstance(),this.unBindTabEvent(),this.unBindSeachEvent(),this.unBindSeachItemEvent(),this.unBindCancelEvent(),this.unBindFnBtn(),this.root.remove()}),this.addEvent("onShow",function(){if(!this.isCreated){this.isCreated=!0;this.init(),this.bindTabEvent(),this.bindSeachEvent(),this.bindSeachItemEvent(),this.bindCancelEvent(),this.bindFnBtn()}})},d.bindFnBtn=function(){this.showFnBtn&&this.root.find(".cui-btn-history").on("click",$.proxy(function(){this.fnBtnCallback.call(this)},this))},d.unBindFnBtn=function(){this.showFnBtn&&this.root.find(".cui-btn-history").off("click")},d.destroyItemInstance=function(){for(var a=0,b=this.groupObj.length;b>a;a++)this.groupObj[a].instance.destroy()},d.unBindTabEvent=function(){var a=this.tabWrapper.find("li");a.off("click")},d.bindTabEvent=function(){var a=this.tabWrapper.find("li");a.on("click",$.proxy(function(b){var c=$(b.target);a.removeClass("cui-tab-current"),c.addClass("cui-tab-current");var d=c.attr("data-index");this.groupObj[this.groupIndex].instance.hide(),this.groupObj[this.groupIndex].instance.selectedKey&&(this.selectedKey=this.groupObj[this.groupIndex].instance.selectedKey),this.selectedKey&&this.groupObj[d].instance.setSelected(this.selectedKey,!0),this.groupObj[d].instance.show(),this.groupIndex=d},this))},d.getSelected=function(){return this.selectedKey},d.unBindSeachEvent=function(){this.searchBox.off("focus")},d.bindSeachEvent=function(){this.searchBox.on("focus",$.proxy(function(){this.openSeach()},this))},d.unBindSeachItemEvent=function(){this.seachList.off("click")},d.bindSeachItemEvent=function(){this.seachList.on("click",$.proxy(function(a){for(var b=$(a.target),c=!1;;){if(b.hasClass("seach-list"))break;if("c"==b.attr("data-flag")){c=!0;break}b=b.parent()}return this.isAjax?void("function"==typeof this.click&&(this.click.call(this,this.ajaxData[b.attr("data-index")]),this.closeSeach())):(this.groupIndex=b.attr("data-groupflag"),this.selectedKey=b.attr("data-key"),this.groupObj[this.groupIndex].instance.setSelected(this.selectedKey),void this.closeSeach())},this))},d.unBindCancelEvent=function(){this.cancel.off("click")},d.bindCancelEvent=function(){this.cancel.on("click",$.proxy(function(){this.closeSeach()},this))},d.openSeach=function(){this.CLICK_RES||(this.CLICK_RES=setInterval($.proxy(function(){("INPUT"!=document.activeElement.nodeName||"text"!=document.activeElement.type)&&this.CLICK_RES&&(clearInterval(this.CLICK_RES),this.CLICK_RES=null);var a=this.searchBox.val().toLowerCase();if(""==a)return void setTimeout($.proxy(function(){("INPUT"!=document.activeElement.nodeName||"text"!=document.activeElement.type)&&this.closeSeach()},this),500);if(this.lastKeyword==a)return!0;if(this.lastKeyword=a,this.wrapper.addClass("cui-input-focus"),this.root.find(".cui-btn-history").hide(),this.listWrapper.hide(),this.tabWrapper.hide(),this.seachList.show(),this.seachList.html(""),this.noData.hide(),this.isAjax)return this.ajaxCallBack.call(this,a),void(this.LOADINGSRC=setTimeout($.proxy(function(){this.loading.show()},this),200));for(var b=this.listWrapper.find('li[data-filter*="'+a+'"]'),c=[],d=0,e=b.length;e>d;d++){var f=!1;for(var g in c)if($(c[g]).attr("data-key")==$(b[d]).attr("data-key")){f=!0;break}0==f&&c.push(b[d])}return 0==c.length?void this.noData.show():void this.seachList.append($(c).clone(!0))},this),500))},d.ajaxDataHandle=function(a){this.ajaxData=a;var b=["<% for(var i = 0, len = data.length; i < len; i++ ){ %>","<% itemData = data[i]; %>",'<li data-key="<%=itemData.id%>" data-index="<%=i%>" data-flag="c" '+(this.itemTemplate?this.itemTemplate:"<%=itemData.name %>")+" </li>","<% } %>"].join(""),c=_.template(b)({data:a});this.LOADINGSRC&&clearTimeout(this.LOADINGSRC),this.loading.hide(),this.seachList.html(c)},d.closeSeach=function(){this.CLICK_RES&&(clearInterval(this.CLICK_RES),this.CLICK_RES=null),this.wrapper.removeClass("cui-input-focus"),this.noData.hide(),this.searchBox.val(""),this.needTab&&this.tabWrapper.show(),this.seachList.hide(),this.listWrapper.show(),this.lastKeyword="",this.root.find(".cui-btn-history").show()},d.init=function(){this.tabWrapper=this.root.find(".cui-tab-mod"),this.tabBar=this.tabWrapper.find(".cui-tab-scrollbar"),this.noData=this.root.find(".cui-city-novalue"),this.wrapper=this.root.find(".cui-citys-hd"),this.listWrapper=this.root.find(".cui-citys-bd"),this.searchBox=this.root.find(".cui-input-box"),this.seachList=this.root.find(".seach-list"),this.cancel=this.root.find(".cui-btn-cancle"),this.loading=this.root.find(".cui-pro-load"),this.initTab(),this.initGroupList(),this.bindEvent()},d.initTab=function(){for(var a=0,b=this.groupObj.length;b>a;a++){var c='<li data-index="'+a+'" '+(a==this.groupIndex?'class="cui-tab-current"':"")+" >"+this.groupObj[a].name+"</li>";this.tabBar.before(c)}},d.initGroupList=function(){for(var a=this,b=0,d=this.groupObj.length;d>b;b++){var e=this.groupObj[b].data;this.groupObj[b].instance=new c({rootBox:this.listWrapper,data:e,filter:this.filter,click:this.click,foldAll:this.foldAll,needFold:this.needFold,itemTemplate:this.itemTemplate,unFoldOne:this.unFoldOne,groupFlag:b,onClick:function(){a.selectedKey=this.selectedKey}}),this.groupObj[b].instance.hide()}this.groupObj[this.groupIndex].instance.show(),this.groupObj[this.groupIndex].instance.setSelected(this.selectedKey,!0)},d.reload=function(a){a&&(this.groupObj=a),this.destroyItemInstance(),this.listWrapper.empty(),this.initGroupList()},d.updateTab=function(){},d.updateTabGroup=function(){},d.updateAllTabGroup=function(a,b){for(var c=0,d=this.groupObj.length;d>c;c++)this.groupObj[c].instance.updateGroup(a,b)},d.updateTabGroupItem=function(){},d.createHtml=function(){return['<section class="cui-citys-hd ">','<div class="cui-input-bd">','<input type="text" class="cui-input-box" placeholder="中文/拼音/首字母">','<span class="cui-pro-load" style="display: none;">','<span class="cui-pro-radius"></span>','<span class="cui-i cui-pro-logo"></span>',"</span>","</div>",'<button type="button" class="cui-btn-cancle">',"取消</button>","</section>",'<p class="cui-city-novalue" style="display: none;">没有结果</p>','<ul class="cui-tab-mod" '+(this.needTab?"":'style="display: none"')+" >",'<i class="cui-tab-scrollbar cui-tabnum'+this.groupObj.length+'"></i>',"</ul>",'<ul class="cui-city-associate seach-list"></ul>','<section  class="cui-citys-bd">',"</section>",this.showFnBtn?'<button type="button" class="cui-btn-history" >'+this.fnBtnTxt+"</button>":""].join("")},new a.Class(b,d)}),define("cUITab",["cBase","cUIAbstractView"],function(a,b){var c={};return c.__propertys__=function(){this.selectedKey=null,this.data=[],this.changed=function(){},this.changeAble=function(){},this.curEl=null},c.initialize=function($super,a){for(var b in a)this[b]=a[b];$super(a),this.bindEvent(),this.show()},c.bindEvent=function(){this.addEvent("onShow",function(){this.init(),this.root.on("click",$.proxy(function(a){var b=$(a.target);"li"==b[0].tagName.toLowerCase()&&this.setVal(b.attr("data-key"))},this))}),this.addEvent("onHide",function(){this.root.off("click"),this.root.remove()})},c.getVal=function(){return this.selectedKey},c.setVal=function(a){this.curEl=this.root.find('li[data-key="'+a+'"]');var b=this.curEl.attr("data-index"),c=this.data[b];if("function"==typeof this.changeAble&&0==this.changeAble.call(this,c))return!1;if(!c)return void 0;this._tab=this.root.find(".cui-tab-scrollbar");var d=this.selectedKey==a;if(this.selectedKey=a,this.tabs.removeClass("cui-tab-current"),this.curEl&&this.curEl.addClass("cui-tab-current"),navigator.userAgent.toLowerCase().indexOf("android")>-1){var e=this._tab.css("width");setTimeout($.proxy(function(){this._tab.css("width",e)},this),0)}0==d&&"function"==typeof this.changed&&this.changed.call(this,c)},c.setIndex=function(a){0>a||a>this.data.length-1||this.setVal(this.data[a].id)},c.getIndex=function(){for(var a=0,b=this.data.length;b>a;a++)if(this.getVal()==this.data[a].id)return a;return-1},c.init=function(){this.tmpt=_.template(['<ul class="cui-tab-mod">',"<%for(var i = 0, len = data.length; i < len; i++) { %>",'<li data-key="<%=data[i].id %>" data-index="<%=i%>" <% if(data[i].id == selectedKey) { %>class="cui-tab-current"<%} %> ><%=data[i].name %></li>',"<%} %>",'<i class="cui-tab-scrollbar cui-tabnum<%=len %>"></i>',"</ul>"].join(""));var a=this.tmpt({data:this.data,selectedKey:this.selectedKey});this.root.html(a),this.tabs=this.root.find("li"),this.curEl=this.root.find(".cui-tab-current")},c.createHtml=function(){return""},new a.Class(b,c)}),define("cUIImageSlider",["cBase","cUIBase","libs"],function(a,b){return new a.Class({__propertys__:function(){this.ENUM={DIR:{LEFT:"LEFT",RIGHT:"RIGHT"}},this.images=[],this.autoPlay=!0,this.index=0,this.delay=3e3,this.dir=this.ENUM.DIR.LEFT,this.errorImage="",this.lodingImage="",this.onChange,this.onImageClick,this.container,this.onChanged,this.scope,this.showNav=!0,this.autoHeight=!1,this.defaultImageUrl,this.defaultHeight,this.imageSize,this.loop=!1,this.errorImageUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v7+/v7+/v729vYAAADt7e3+/v6PQhf9AAAADnRSTlOtVTOIZpki1+wRd0TCAMJ8iPYAAAKfSURBVHjaxZWLjqMwDEXJO7FN7v//7WITOgQ6pVpptbdSecTxiW3iLOt/0g3cirj3po1ZL5lcuw8Sud8QgegJbALy+laMZb/UdY2n9Xj9F/wKFnwLXu/KRiSLG7ISwk+s6Fm9n9PgZUjNKvJ34LLeRThECl4L4ssDyMKak7NLTRvKc41z28Bia15dEVWxwkYiShAicgb26QiwAY6ZC1gV4wCTXdXUjey09gFMOCSvVSv46u2kiEnyMm3DNGGIP4GLCLpIgQyOmD266MsqKnuQPnJbkWhTBalSeIEFycAdZi3in2osOjHM4CqmO5i0gvcaG9ipr4gyDT+BaQKbUom3VLc6xqXewaymBfQdOOu3QFew14HSbGPVLYRCediPBHZ5D2b0bOt6BBvvBsZLoqtvGIEGCWRCJVOQOIEFVpMqfwleaEFajLImNId0dKWb6AXWqrQg8NvN8ggmJRHcBNZiJu1OwyIclY8UWZUAxyoinsBqHtcMegSnHcwzOJfKXODUrwfVa8lq7z+uZ7Dboo3gR3CB0q/gcs5kB+I8KSKlnmdwrTu4AXnpj706j213ATvtlQU8knIJ2HdkRjmfoLkplL0ikJAewYTwDnw0icxRbeRyhCPoaGpTEiiGdpwY+RFcDSSbJVu76vacmYlS31PN1nfpRfHVdnjuqPHcWfS919ttoD2BCXWcyRPYYVcgzr533ki1DwLBuJZw9ERsD0mPCUH3+nr7xc9ghu4jEvT18nGFyHvfcx3eTjGbyaEDMuLJgvG+JRTz3pmA1ApQQ/4d3KpOaxraRhhgd65xC0C0gOyiHs/7iBcrZ65HElKFuQkAPp1OLTUFiNoysU7lfKr/usa6L4TS0Vfm8uVoo8q17Y/KdseyXFP9T9VOn9s88gcLTIlzurC4gAAAAABJRU5ErkJggg==",this.loadImageUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v729vb+/v4AAADt7e3+/v6c4gmbAAAADnRSTlOtM4hmVZkiEdfsRMJ3AHDRYrYAAAGwSURBVHjaxdbZktsgEAVQLSxNL9z//9vQgvFYUjKpkqnkPhgJbI4bJMuL/af8DGeS8IcRZm+Shnwb21U/hQ1Ivx9gLL0pDbqMKbYJsN2TDlGPuiF3RzGhYrJ7FF9Rh42wT4VTbrD40WqBxEM89lAjpL2GA15j7h/gdIIzp0fwd2FijB62ER6TO/zdd40+g0kEVYQgw5EDbn3eWcRznEhFh6t4yhgrz+BXQYztDBfpucNyWmr9GNYTfCTSflrqyXDyO0Wv8OoDlH3cCpmRptmwe3cYr0jrsgzwv4EXXRAX2VTVInJAnL7UCvaXcNnjXGI7zuMdG/gLLuoRSG+fw7HDfIYTFWZCUGVboaXMvY89BNevML1PXIH9BRN7ImJvH8MJ5NwVDqqBCTwWpdjIftnjXfaHsGK7wyMCS9wmVtdmP50K+CCS8fFzVY/zxKwaa19qBlqn5qmwooxn8gkO6NmU01org3KpM2GG30cqqHa5uLad27F/h4q1OcAyEc7Fp8teWhMGHN73OG/9io7evGX78K9PjtkBcZLVa105ve2/2V5CLzHaewTyAJ6QlVf7a34BIRiNTVIrVfEAAAAASUVORK5CYII=",this._loadingNode,this._errorNode,this._isloadingImage=!1,this._pfix="slider",this._changing=!1,this._containerNode,this._rootNode,this._imageNode,this._navNode,this._imageLoaderNode,this._handerStartPos={x:0,y:0},this._moveValue=50,this._imageCount=0,this._played=!1,this._size={height:0,width:0},this._lastSize={height:0,width:0},this._displayImage,this._nextImage,this._loadingImage=new Image,this._changeCompletedEvents=[],this._autoPlayTimeout,this._loadMsg="加载中...",this.firstLoad=!0,this._defaultSize={width:0,height:0},this._loadingImage=new Image,this._errorImage=new Image},initialize:function(a){for(var b in a)switch(b){case"images":case"autoPlay":case"delay":case"dir":case"index":case"onChange":case"autoPlay":case"onImageClick":case"scope":case"onChanged":case"errorImageUrl":case"loadImageUrl":case"loop":case"showNav":case"defaultImageUrl":case"defaultHeight":case"imageSize":this[b]=a[b];break;case"container":this._containerNode="string"==typeof a[b]?$(a[b]):a[b],this[b]=a[b]}this._validArgs(),this._correctArgs(),this._imageCount=this.images.length,this._loadingImage.src=this.loadImageUrl,this._errorImage.src=this.errorImageUrl,this.autoHeight=this.imageSize&&this.imageSize.width&&this.imageSize.height?!1:!0},play:function(){this._played||(this._played=!0,this._injectHTML(),this._bindEvents()),this.rePlay()},stop:function(){this._clearAutoPlay()},rePlay:function(){this.autoPlay&&this._autoPlay()},_autoPlay:function(){this._autoPlayTimeout=setTimeout($.proxy(function(){this._isloadingImage||this._play()},this),this.delay)},next:function(){this._changing||this._play()},pre:function(){if(!this._changing){if(this.dir===this.ENUM.DIR.RIGHT)if(this.index>=this._imageCount-1){if(!this.loop)return;this.index=0}else this.index++;else if(this.index<=0){if(!this.loop)return;this.index=this._imageCount-1}else this.index--;this.goto(this.index)}},"goto":function(a){this.index=a,this._changeImage()},_play:function(){this.dir===this.ENUM.DIR.RIGHT?this._imageToRight():this._imageToLeft()},_clearAutoPlay:function(){clearTimeout(this._autoPlayTimeout)},_validArgs:function(){if(!this.container||!this._containerNode)throw"[c.widget.imageSlider]:no container!"},_correctArgs:function(){this.delay<=500&&(this.delay=2e3)},_createHTML:function(){return['<div class="cui-sliderContainer" style="width:100%;position:relative;">','<div class="cui-imageContainer" style="width:100%;">',"</div>",'<div class="cui-navContainer" style="color:#1491c5;position:absolute;"></div>','<div class="cui-imageLoader">',"</div>"].join("")},_createNav:function(){for(var a=[],b=0;b<this._imageCount;b++){var c=b==this.index?"cui-slide-nav-item-current":"";a.push('<span class="cui-slide-nav-item '+c+'"></span>')}this._navNode.empty().html(a.join(" "))},_injectHTML:function(){this._rootNode=$(this._createHTML()),this._containerNode.html(this._rootNode),this._imageNode=this._rootNode.find(".cui-imageContainer"),this._navNode=this._rootNode.find(".cui-navContainer"),this.showNav||this._navNode.css("display","none"),this._imageNode.empty(),this._createLoading(),this._imageCount>0?this._createImageItem(this.index,$.proxy(function(a,b){this._createNav(),this._setSize(b.height,b.width),this._setLoadingPos(),this._displayImage=a,this._createImageContainer()},this)):(this._createDefault(),this._loadingNode.css("display","none"))},_onImageClick:function(){var a=this.images[this.index];return a&&a.onClick?void a.onClick.call(this.scope||this,a):void(this.onImageClick&&this.onImageClick.call(this.scope||this))},_createImageItem:function(a,b){this._isloadingImage=!0,!a&&(a=0);var c=this._getImageInfo(a),d=new Image;c.src&&(d.src=c.src),c.alt&&(d.alt=c.alt);var e=this;d.onload=function(){c.orgImage=d,e.autoHeight||(e._defaultSize.width=d.width,e._defaultSize.height=d.height),e._isloadingImage=!1,b.call(e,c,d)},d.onerror=function(){c.loadError=!0,e._errorImage=new Image,e._errorImage.src=e.errorImageUrl,e._isloadingImage=!1,e._errorImage.onload=function(){c.orgImage=e._errorImage,b.call(e,c,e._errorImage)}}},_getImageInfo:function(a){!a&&(a=0);for(var b=0,c=this.images.length;c>b;b++)if(a===b)return this.images[b];throw new Error("[c.ui.imageSlider]:image index is "+a+",but images.length is "+c)},_bindEvents:function(){this._containerNode.bind("touchmove",$.proxy(this._touchmove,this)),this._containerNode.bind("touchstart",$.proxy(this._touchstart,this)),this._containerNode.bind("touchend",$.proxy(this._touchend,this)),$(window).on("resize",$.proxy(this._resize,this)),this._navNode.bind("click",$.proxy(this._switchImage,this)),this._imageNode.bind("click",$.proxy(this._onImageClick,this))},_switchImage:function(a){var b=a.targetElement||a.srcElement,c=$(b).data("index");(0===c||c)&&this.index!==+c&&(this.index=c,this._changeImage())},_imageToRight:function(){if(this.index<=0){if(!this.loop)return;this.index=this._imageCount-1}else this.index--;this._changeImage(this.ENUM.DIR.LEFT)},_imageToLeft:function(){if(this.index>=this._imageCount-1){if(!this.loop)return;this.index=0}else this.index++;this._changeImage(this.ENUM.DIR.RIGHT)},_changeImage:function(a){if(!(this._imageCount<=1)){this._clearAutoPlay(),this._changing=!0,!a&&(a=this.dir);var b=this.images[this.index];b.node?(this._nextImage=b,this._showSliderImage(a)):(this._nextImage={node:this._loadingNode,orgImage:this._loadingImage},this._showLoading(),this._createImageItem(this.index,$.proxy(function(b){this._createImageContainer(),this._nextImage=b,this._showSliderImage(a)},this)))}},_showSliderImage:function(a){var b=0,c=0,d=0,e=0;a===this.ENUM.DIR.LEFT?(b=-1*this._size.width,c=0,d=0,e=this._size.width):(b=this._size.width,c=0,d=0,e=-1*this._size.width),this._displayImage.node.css("left",c),this._nextImage.node.css("left",b).css("display",""),this._nextImage.node.animate({left:d},500,"ease-out",$.proxy(function(){this._changing=!1,this._changeCompeted(),this.rePlay()},this)),this._displayImage.node.animate({left:e},500,"ease-out",$.proxy(function(){this._displayImage.node.css("display","none").css("left",0),this._displayImage=this._nextImage},this))},_touchmove:function(a){if(!this._isMoved){var c=b.getMousePosOfElement(a.targetTouches[0],a.currentTarget);if(!this._isMovedChecked){var d=Math.abs(c.x-this._handerStartPos.x),e=Math.abs(c.y-this._handerStartPos.y);if(e>d)return void(this._isMoved=!0)}if(this._isMovedChecked=!0,a.preventDefault(),!this._changing){var f=c.x-this._handerStartPos.x;f>0&&f>this._moveValue?this._imageToRight():0>f&&Math.abs(f)>this._moveValue&&this._imageToLeft()}}},_touchstart:function(a){this._isMoved=!1,this._isMovedChecked=!1;var c=b.getMousePosOfElement(a.targetTouches[0],a.currentTarget);this._handerStartPos={x:c.x,y:c.y}},_touchend:function(a){a.preventDefault()},_setSize:function(a,b){this._size.width=Math.ceil($(document.body).width()),this._size.height=Math.ceil(a*(this._size.width/b)),this._size.height<100&&(this._size.height=100,this._size.width=b*(this._size.height/a)),this._rootNode.css("width",this._size.width).css("height",this._size.height),this._imageNode.find("div").find("img").css("width",this._size.width).css("height",this._size.height),this.showNav&&this._setNavPos()},_setNavPos:function(){var a=(this._size.width-20*this._imageCount)/2,b=this._size.height-30;this._navNode.css("left",a).css("top",b)},_resize:function(){this._lastSize.width=this._size.width,this._lastSize.height=this._size.height,this.imageSize&&this.imageSize.height&&this.imageSize.width?this._setSize(this.imageSize.height,this.imageSize.width):this._displayImage&&!this._displayImage.loadError&&this._setSize(this._displayImage.orgImage.height,this._displayImage.orgImage.width)},_changeCompeted:function(){for(var a in this._changeCompletedEvents)this._changeCompletedEvents[a]();this._changeCompletedEvents.length=0,this._changeNav(),this.autoHeight&&this._resize(),this.onChanged&&this.onChanged.call(this.scope||this,this.images[this.index],this.index)},_changeNav:function(){this.showNav&&(this._navNode.find("span").removeClass("cui-slide-nav-item-current"),$(this._navNode.find("span")[this.index]).addClass("cui-slide-nav-item-current"))},_createImageContainer:function(){var a=this.images[this.index];if(this._loadingNode.css("display","none"),!a.node){{b.getElementPos(this._rootNode[0]).top-48}a.node=$(a.loadError?this._createImageHtml(this.errorImageUrl,a.alt):this._createImageHtml(a.src,a.alt)),this._imageNode.append(a.node),a.node.css("position","absolute").css("left",0),a.node.bind("click",function(a){a.preventDefault()})}this.autoHeight&&this._resize()},_createLoading:function(){if(this.firstLoad){this._loadingNode=$(this._createImageHtml(this.loadImageUrl));var a=['<div class="cui-breaking-load">','<div class="cui-i cui-m-logo">','</div> <div class="cui-i cui-w-loading">',"</div></div>"];this._loadingNode.html(a.join(" ")).hide(),this.autoHeight||(this._resize(),this._setLoadingPos()),this._imageNode.append(this._loadingNode),this.firstLoad=!1}},_setLoadingPos:function(){if(this._loadingNode.css("position","absolute").css("height",this._size.height).css("width",this._size.width),this._size.height){var a=(this._size.height-70)/2;this._loadingNode.find(".cui-breaking-load").css("top",a)}},_showLoading:function(){this._loadingNode.css("display",""),this._setLoadingPos()},_createDefault:function(){if(this.defaultImageUrl){var a=new Image;a.src=this.defaultImageUrl;var b=this;a.onload=function(){var c=$(b._createImageHtml(b.defaultImageUrl));b._imageNode.append(c),b._displayImage=a,b.autoHeight?b._setSize(a.height,a.width):b._setSize(b.imageSize.height,b.imageSize.width)}}},_createImageHtml:function(a,b){return'<div class="image-node slider-imageContainerNode"><img style="width:'+this._size.width+"px;height:"+this._size.height+'px" src="'+a+'" alt="'+(b?b:"")+'"></div>'}})}),define("cUICore",["cHistory","cPageView","cDataSource","cUIBase","cUIAbstractView","cAdView","cUIAlert","cUIAnimation","cUICitylist","cUIHeadWarning","cUIInputClear","cUILayer","cUILoading","cUILoadingLayer","cUIMask","cUIPageview","cUIScrollRadio","cUIScrollRadioList","cUIScrollList","cUIToast","cUIWarning","cUIWarning404","cUIHashObserve","cUIEventListener","cUISwitch","cUINum","cUIGroupList","cUIBusinessGroupList","cUITab","cUIImageSlider","cUIBubbleLayer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){var F={prefix:"cui-"},G={History:a,View:b,DataSource:c,Tools:d,config:F,AbstractView:e,AdView:f,Alert:g,Animation:h,CityList:i,HeadWarning:j,InputClear:k,Layer:l,Loading:m,LoadingLayer:n,Mask:o,PageView:p,ScrollRadio:q,ScrollRadioList:r,ScrollList:s,Toast:t,Warning:u,HashObserve:w,EventListener:x,cuiSwitch:y,cuiNum:z,cUIGroupList:A,cUIBusinessGroupList:B,cUITab:C,cUIImageSlider:D,cUIBubbleLayer:E};
return G}),define("cUI",["cUICore"],function(a){return a}),define("cLazyload",["libs"],function(){var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEXy8vL6+vr+/v7+/v7+/v7v7+/+/v7+/v7+/v7+/v7+/v729vb+/v4AAADt7e3+/v673auIAAAADnRSTlPXrYhVZuwimTMRRMJ3AKjyf0QAAAH3SURBVHjaxdbZkqowGEXhzMM/ZL//2x6IEYh0Cd1addaFUhbJZyKKRv9TZ1iSHirpU6Gme3BB888h3kXwj8PLePZCc0F0lNn1Z0Irl3AQYVhZYnVYY/Zj+Nxze/Aa64ghYyRfrHieZ4Gz398qRV6KiNyL24AsS06e/RGuKqBKpJrWI31NIDo1Tsrt+foR9tfwLresBLcerYvplUu4oMlamGH6BWwXjREZIMGIruBq9jP/Co8pmLmsc9IC1ao6TXaCM0xfttUZnqO3MAkVgjwGaofXklDPQGgUaMA1Q0zW0kx9gQ0fK29hTUQCzuwqzA4TzslzxeJWtbszTPd/uTweNQ4C2eFiZc0hCoP7cQ6HqzpZwPoZbkj34RpZHmRlpAHveeT5+upwChlNpKFZKTsM6CU8Rxz6KvrGT59MRjjDDDRXlnNdQ6xHWLbSDZg4yxa7+UuOeoZTDrU22OUx+H2rCw7RHRiRt8A6KVbP8INxETJ9xgRDI3MPPk48wamBfoZJimqYr2rBtlv82YqrAesGU647nIHoyvxWI/yH8O62tMOCdvw6iQHsESag7vAHW+3buJ9LB0qE3eAe5XAcEZH1Cyv2jO52auSf9+OpMSID6RtwALiOLbdY4/DuH0jq1/gnWx3HgXTnnH2dE20M0F/DQvrlClU99Q/TJ4uko/HGBAAAAABJRU5ErkJggg==",b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v729vb+/v4AAADt7e3+/v6c4gmbAAAADnRSTlOtM4hmVZkiEdfsRMJ3AHDRYrYAAAGwSURBVHjaxdbZktsgEAVQLSxNL9z//9vQgvFYUjKpkqnkPhgJbI4bJMuL/af8DGeS8IcRZm+Shnwb21U/hQ1Ivx9gLL0pDbqMKbYJsN2TDlGPuiF3RzGhYrJ7FF9Rh42wT4VTbrD40WqBxEM89lAjpL2GA15j7h/gdIIzp0fwd2FijB62ER6TO/zdd40+g0kEVYQgw5EDbn3eWcRznEhFh6t4yhgrz+BXQYztDBfpucNyWmr9GNYTfCTSflrqyXDyO0Wv8OoDlH3cCpmRptmwe3cYr0jrsgzwv4EXXRAX2VTVInJAnL7UCvaXcNnjXGI7zuMdG/gLLuoRSG+fw7HDfIYTFWZCUGVboaXMvY89BNevML1PXIH9BRN7ImJvH8MJ5NwVDqqBCTwWpdjIftnjXfaHsGK7wyMCS9wmVtdmP50K+CCS8fFzVY/zxKwaa19qBlqn5qmwooxn8gkO6NmU01org3KpM2GG30cqqHa5uLad27F/h4q1OcAyEc7Fp8teWhMGHN73OG/9io7evGX78K9PjtkBcZLVa105ve2/2V5CLzHaewTyAJ6QlVf7a34BIRiNTVIrVfEAAAAASUVORK5CYII=",c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v7+/v7+/v729vYAAADt7e3+/v6PQhf9AAAADnRSTlOtVTOIZpki1+wRd0TCAMJ8iPYAAAKfSURBVHjaxZWLjqMwDEXJO7FN7v//7WITOgQ6pVpptbdSecTxiW3iLOt/0g3cirj3po1ZL5lcuw8Sud8QgegJbALy+laMZb/UdY2n9Xj9F/wKFnwLXu/KRiSLG7ISwk+s6Fm9n9PgZUjNKvJ34LLeRThECl4L4ssDyMKak7NLTRvKc41z28Bia15dEVWxwkYiShAicgb26QiwAY6ZC1gV4wCTXdXUjey09gFMOCSvVSv46u2kiEnyMm3DNGGIP4GLCLpIgQyOmD266MsqKnuQPnJbkWhTBalSeIEFycAdZi3in2osOjHM4CqmO5i0gvcaG9ipr4gyDT+BaQKbUom3VLc6xqXewaymBfQdOOu3QFew14HSbGPVLYRCediPBHZ5D2b0bOt6BBvvBsZLoqtvGIEGCWRCJVOQOIEFVpMqfwleaEFajLImNId0dKWb6AXWqrQg8NvN8ggmJRHcBNZiJu1OwyIclY8UWZUAxyoinsBqHtcMegSnHcwzOJfKXODUrwfVa8lq7z+uZ7Dboo3gR3CB0q/gcs5kB+I8KSKlnmdwrTu4AXnpj706j213ATvtlQU8knIJ2HdkRjmfoLkplL0ikJAewYTwDnw0icxRbeRyhCPoaGpTEiiGdpwY+RFcDSSbJVu76vacmYlS31PN1nfpRfHVdnjuqPHcWfS919ttoD2BCXWcyRPYYVcgzr533ki1DwLBuJZw9ERsD0mPCUH3+nr7xc9ghu4jEvT18nGFyHvfcx3eTjGbyaEDMuLJgvG+JRTz3pmA1ApQQ/4d3KpOaxraRhhgd65xC0C0gOyiHs/7iBcrZ65HElKFuQkAPp1OLTUFiNoysU7lfKr/usa6L4TS0Vfm8uVoo8q17Y/KdseyXFP9T9VOn9s88gcLTIlzurC4gAAAAABJRU5ErkJggg==",d={};return d.lazyload=function(d,e,f,g){var h=function(){var d=$(this),h=$(new Image),i=d.attr("src");if(d.addClass("cui-item-imgbg"),"string"==typeof i&&i.length>0){d.attr("src",b),"function"==typeof e&&e.call(this,this);var j=function(){d.attr("src",c)};j=f||j;var k=function(){d.attr("src",i),d.removeClass("cui-item-imgbg")};k=g||k,h.bind("error",j).bind("load",k).attr("src",i)}else d.attr("src",a)};$(d).each(h)},d}),define("c",["cBase","cUI","cUtility","cPageView","cModel","cStore","cStorage","cAjax","CommonStore","cLazyload"],function(a,b,c,d,e,f,g,h,i,j){var k={base:a,ui:b,view:d,utility:c,store:f,storage:g,model:e,ajax:h,commonStore:i,lazyload:j};return k}),define("cListAdapter",["libs","cBase"],function(a,b){var c=c||{},d=function(a){for(var b="",c=function(){var a=Math.floor(62*Math.random());return 10>a?a:String.fromCharCode(36>a?a+55:a+61)};b.length<a;)b+=c();return b},e=function(a,b){var c=d(8);return a.getItem(c)?void e(a,b):a.add(c,b)},f=function(a,b){for(var c=0;c<b.length;c++)e(a,b[c])};c.__propertys__=function(){this.observers=[]},c.initialize=function(a){this.setAdapter(a.data)},c.add=function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)e(this.map,a[b]),this.list.push(a[b]);else e(this.map,a),this.list.push(a);this.notifyDataChanged()},c.shift=function(){return this.map.shift(),this.notifyDataChanged(),this.list.shift()},c.pop=function(){return this.map.pop(),this.notifyDataChanged(),this.list.pop()},c.remove=function(a){for(var b=0;a>b;b++)this.map.pop(),this.list.pop();this.notifyDataChanged()},c.sortBy=function(a){this.map.sortBy(a),this.list=_.sortBy(this.list,a),this.notifyDataChanged()},c.setAdapter=function(a){a=a&&a instanceof Array?a:[],this.list=$.extend(!0,[],a),this.map=new b.Hash,f(this.map,a),this.notifyDataChanged()},c.regiseterObserver=function(a){-1===this.observers.indexOf(a)&&this.observers.push(a)},c.unregiseterObserver=function(a){var b=this.observers.indexOf(a);b&&this.observers.splice(b,1)},c.notifyDataChanged=function(){for(var a=0;a<this.observers.length;a++)this.observers[a].update()};var g=new b.Class(c);return g}),define("cGeoHelper",[],function(){var a={Aboard:2,Domestic:1,Unknown:-1,aroundAboardRectList:[[125478833,40538425,135928497,16590043],[128054454,54437790,136370032,49918776],[89567309,54351906,115617882,47881407],[71832315,54566279,82281980,46323836],[72788974,28001436,85887850,16590043],[92510877,48029708,111570476,45034268],[85593493,26157025,97294174,16519064],[97073406,20935216,107743838,16305964],[98324422,45190596,109142033,42854577],[71979493,45863038,78896877,41817208]],chinaRectList:[[85374342,41697126,124486996,28705892],[98942349,28714002,122527683,23331042],[108012216,23415965,119252965,17294543],[120025651,51286036,126391116,41330674],[82936701,46727439,90553182,41621242],[126188746,48211817,129757821,42485061],[129518656,47611932,131468770,44959641],[131376782,47487374,133805226,46225387],[79753968,41876130,85604309,30872189],[113457816,44802677,120117638,41517618],[118977005,23526282,121975765,21629857],[109667973,17321053,119050594,14580095],[76258482,40359687,80011530,35915704],[90534784,44710915,94030271,41531444],[80710628,45077082,83028687,41862379],[85935460,48414308,88437492,46645143],[93975079,42559912,101462779,41600531],[93956681,44157262,95354876,42491869],[116695740,46301949,120117638,44619006],[116401384,49444657,120191227,48057877],[121000708,53244099,124569783,51210984],[106724405,42232628,113494611,41683336],[112133211,44355602,113568200,42123151],[110918989,43155464,112206800,42232628],[115150367,45324216,116769330,44724032],[126299129,49588397,128102064,48057877],[128065270,49131761,129757821,48131826],[129721026,48622090,130530508,47611932],[124349016,52822665,125710416,51095279],[122325313,28884167,123760302,25662561],[111029373,14651757,118388292,10605300],[109778357,10095218,109778357,10095218],[109631178,10459649,116548562,7753573],[110514249,7826971,113678584,4734480],[124330619,41399976,125480450,40689610],[126345123,42512290,128046872,41827986],[127973283,42539507,129104717,42143692],[74510739,40162360,76350468,38678393],[119087389,21629857,120706351,20142916],[106853187,23339537,108067408,21990651],[129707229,44975967,130985841,43017244],[130958245,44582859,131169814,43104932],[131418176,46247729,133129126,45359896],[133073934,48054793,134269758,47409374],[99701237,23386249,101577762,22174986],[100179567,22243514,101559364,21745927],[101485775,23437187,104245370,22875776],[98008686,25240784,99057332,24181992],[124463999,40686109,124905534,40461646],[125457453,41334141,126055365,40979564],[126368119,41824546,126607284,41645397],[125475850,40979564,125687419,40853958],[124477797,40465160,124728460,40343852],[124470898,40347371,124618076,40285757],[124891736,40694862,125153898,40607283],[126046166,41332407,126262335,41165784],[127214395,41836586,128083666,41546995],[126386516,50257998,126386516,50257998],[126280732,50257998,127513351,49580921],[126363520,50934256,127117809,50225552],[125669022,52398490,126276133,51247082],[80948643,30905163,81403976,30280446],[83574857,30911112,85488176,29214825],[98136317,28872274,99079179,27642374]],largeChinaRect:[73083331,54006559,135266195,17015367],isInRect:function(a,b,c){return a>=c[0]&&a<=c[2]&&b>=c[3]&&b<=c[1]?!0:!1},isInRectList:function(a,b,c){for(var d=0;d<c.length-1;d++)if(smallRect=c[d],this.isInRect(a,b,smallRect))return!0;return!1},getCountry:function(a,b){var c=this.Unknown,d=1e6*b,e=1e6*a;return isInAboard=!this.isInRect(e,d,this.largeChinaRect),isInAboard||(isInAboard=this.isInRectList(e,d,this.aroundAboardRectList)),isInAboard?c=this.Aboard:(inInLand=this.isInRectList(e,d,this.chinaRectList),inInLand&&(c=this.Domestic)),c}};return a}),define("cWidgetGeolocation",["cBase","cUtility","cWidgetFactory","cStore","cHybridFacade","cUtilityPerformance","cGeoHelper"],function(a,b,c,d,e,f,g){var h="Geolocation",i="0b895f63ca21c9e82eb158f46fe7f502";if(!c.hasWidget(h)){var j=j||{},k=new f;j.requestGeographic=function(a,b){var c=k.getUuid();k.group(c,{name:"GeoRequest",url:"Google service",type:"Google service"});var d=function(b){k.groupEnd(c),a&&a(b)},e=function(a){k.groupEnd(c);var d="未能获取到您当前位置，请重试或选择城市";switch(a.code){case a.TIMEOUT:d="获取您当前位置超时，请重试或选择城市！";break;case a.PERMISSION_DENIED:d="您拒绝了使用位置共享服务，查询已取消，请开启位置共享或选择城市！";break;case a.POSITION_UNAVAILABLE:d="获取您当前位置信息失败，请重试或选择城市！"}b&&b(a,d)};window.navigator.geolocation.getCurrentPosition(d,e,{enableHighAccuracy:!0,maximumAge:5e3,timeout:2e4})},j.requestAMapAddress=function(a,b,c,d,e){function f(c,d){if(1==d){var e=c&&c.regeocode||"",f=e.addressComponent.city,g=e.addressComponent.province,h=e.addressComponent.district,i="";return _.isString(f)?i=f:_.isString(g)&&(i=g),{address:_.isString(e.formatted_address)?e.formatted_address:"",location:j,info:e&&e.addressComponent,city:i,province:g,district:h,lng:a,lat:b,country:"中国"}}if(c&&"OK"===c.status){var h="",i="",k="",g="";return _.find(c.results,function(a){var b=a&&a.address_components[0]&&a.address_components[0].long_name;a.types&&("country"==a.types[0]&&"political"==a.types[1]&&(k=b),"administrative_area_level_1"===a.types[0]&&"political"===a.types[1]&&(g=b),"locality"===a.types[0]&&"political"===a.types[1]&&(i=b),"administrative_area_level_2"===a.types[0]&&"political"===a.types[1]&&(h=b),"sublocality_level_1"===a.types[0]&&"sublocality"===a.types[1]&&(h=b))}),""==k&&""==g&&""==i&&""==h?!1:{address:_.isString(c.results[0].formatted_address)?c.results[0].formatted_address:"",location:j,info:c.results[0].address_components,lng:a,lat:b,country:k,province:g,city:i,district:h}}return!1}var h=k.getUuid();k.group(h,{name:"GeoRequest",url:"http://restapi.amap.com/v3/geocode/regeo",type:"AMap service"});var j="121.473704,31.230393",l=1;a&&b&&(j=a+","+b,l=g.getCountry(a,b)),e=e||8e3;var m=1==l?"http://restapi.amap.com/v3/geocode/regeo?"+$.param({location:j,key:i,radius:0,extensions:"all"}):"https://maps.googleapis.com/maps/api/geocode/json?"+$.param({latlng:b+","+a,sensor:!1});$.ajax({url:m,dataType:1==l?"jsonp":"json",success:function(a){k.groupEnd(h);var b=f(a,l);_.isObject(b)?c&&c(f(a,l)):d&&d(a)},error:function(a){k.groupEnd(h),d&&d(a)},timeout:e})},j.requestAMapAround=function(a,b,c,d,e){var f=k.getUuid();k.group(f,{name:"GeoRequest",url:"http://restapi.amap.com/v3/place/around",type:"AMap service"});var g="121.473704,31.230393";a&&b&&(g=a+","+b);var h=$.param({location:g,key:i,radius:500,offset:4,page:1});e=e||8e3,$.ajax({url:"http://restapi.amap.com/v3/place/around?"+h,dataType:"jsonp",success:function(a){k.groupEnd(f);var b=a&&a.pois||[];c&&c(b)},error:function(a){k.groupEnd(f),d&&d(a)},timeout:e})},j.requestAMapKeyword=function(a,b,c,d,e){var f=k.getUuid();k.group(f,{name:"GeoRequest",url:"http://restapi.amap.com/v3/place/text",type:"AMap service"});var g=$.param({keywords:a,city:b,key:i,offset:10,page:1,extensions:"all"});e=e||8e3,$.ajax({url:"http://restapi.amap.com/v3/place/text?"+g,dataType:"jsonp",success:function(a){k.groupEnd(f);var b=a&&a.pois||[];c&&c(b)},error:function(a){k.groupEnd(f),d&&d(a)},timeout:e})},j.tansformLongitude=function(a,b,c,d,e){var f=k.getUuid();k.group(f,{name:"GeoRequest",url:"http://restapi.amap.com/v3/assistant/coordinate/convert",type:"AMap service"});var h=g.getCountry(a,b);if(1!=h)return k.groupEnd(f),void c(a,b);var j=$.param({locations:a+","+b,key:i,coordsys:"gps"});e=e||8e3,$.ajax({url:"http://restapi.amap.com/v3/assistant/coordinate/convert?"+j,dataType:"jsonp",success:function(a){if(k.groupEnd(f),a&&"1"===a.status){var b=a.locations.split(",");c&&c(b[0],b[1])}else d&&d()},error:function(a){k.groupEnd(f),d&&d(a)},timeout:e})},j.requestCityInfo=function(a,c,d,f,g){var h=function(){var b=k.getUuid();k.group(b,{name:"GeoRequest",url:"Native function",type:"Native function"});var g=function(c){if(k.groupEnd(b),!c||!c.value)return void h("网络不通，当前无法定位",1);if(c){if(c.locateStatus){if(-1==c.locateStatus)return void h("网络不通，当前无法定位",1);if(-2==c.locateStatus)return void h("定位没有开启",2)}c.value&&_.isObject(c.value)&&(2==_.size(c.value)?d&&d(c.value.lng,c.value.lat):a&&a({lng:c.value.lng,lat:c.value.lat,city:c.value.ctyName||c.value.province,address:c.value.addrs}))}},h=function(a,d){return k.groupEnd(b),"function"==typeof f?void f(a,d):void(c&&c(d))};e.request({name:e.METHOD_LOCATE,success:g,error:h})},i=function(){var b=k.getUuid();k.group(b,{name:"GeoRequest",url:"Web function",type:"Web function"});var e=function(e){k.groupEnd(b);var f=e.coords.longitude,h=e.coords.latitude;d&&d(f,h);var i=function(b){a&&a(b)},l=function(){c&&c()};g?j.tansformLongitude(f,h,function(a,b){j.requestAMapAddress(a,b,i,l)},function(a){l(a)}):j.requestAMapAddress(f,h,i,l)},h=function(a,d){return k.groupEnd(b),"function"==typeof f?void f(d,a):void(c&&c(d))};j.requestGeographic(e,h)},l=b.isInApp()?h:i;l()},j.requestAroundInfo=function(a,b,c){var d=a.split(",")[0],e=a.split(",")[1],f=function(a){b&&b(a)},g=function(){c&&c()};j.requestAMapAround(d,e,f,g)},j.requestKeywordInfo=function(a,b,c,d){var e=function(a){c&&c(a)},f=function(){d&&d()};j.requestAMapKeyword(a,b,e,f)};var l=j.PositionStore=a.Class(d,{__propertys__:function(){this.key="POSITION_CITY",this.lifeTime="10M"},initialize:function($super,a){$super(a)}});j.requestCacheCityInfo=function(a,b,c){var d=l.getInstance(),e=d.get();e?a&&a.call(c,e):j.requestCityInfo(function(b){d.set(b),a&&a.call(c,b)},function(a,d){b&&b.call(c,a,d)})},j.requestMap=function(a){function c(a,b,c,d){this.point_=a,this.name_=b,this.map_=c,this.div_=d,this.setMap&&this.setMap(c)}var d=function(a){function b(a,b,d){function f(a,b,d){var f=$("<DIV/>").addClass("map-content");1==d&&$("<IMG/>").attr({src:"http://res.m.ctrip.com/html5/Content/images/map_address.png"}).appendTo(f),a.content&&$("<SPAN/>").html(a.content).appendTo(f);var g;if(1==d)g=new AMap.Marker({position:new AMap.LngLat(a.lng,a.lat),map:b,id:a.markerId}),a.id&&""!=a.id&&b.setCenter(new AMap.LngLat(a.lng,a.lat)),g.setContent(f[0]),a.callBack&&b.bind(g,"click",function(){a.callBack(a.markerId)});else{g=new google.maps.Marker({position:new google.maps.LatLng(a.lat,a.lng),map:b,icon:"http://res.m.ctrip.com/html5/Content/images/map_address.png",id:a.markerId}),a.id&&""!=a.id&&b.setCenter(new google.maps.LatLng(a.lat,a.lng));var h=new c(new google.maps.LatLng(a.lat,a.lng),a.content,b,f[0]);e.marekrs.push(g),e.overlays.push(h),a.callBack&&google.maps.event.addListener(g,"click",function(){a.callBack(a.markerId)})}}if(a instanceof Array&&a.length>0)for(var g=0;g<a.length;g++){var h=a[g];if(!h||!h.lat||!h.lng)break;f(h,b,d)}else f(a,b,d)}if(!(a&&a.lat&&a.lng&&a.id))return a.error&&a.error(),!1;var d,e={marekrs:[],overlays:[]},f=g.getCountry(a.lng,a.lat);if(1==f){if(!AMap)return a.error&&a.error(),!1}else{if(!google)return a.error&&a.error(),!1;c.prototype=new google.maps.OverlayView,c.prototype.onAdd=function(){var a=this.getPanes();a.overlayImage.appendChild(this.div_)},c.prototype.draw=function(){var a=this.getProjection(),b=a.fromLatLngToDivPixel(this.point_),c=this.div_;if(c){c.style.left=b.x+20+"px",c.style.top=b.y-50+"px",c.style.position="absolute";var d=c.children[0];d&&(d.style.bottom="0px",d.style.left="0px")}},c.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null}}var h=13,i=1==f?new AMap.Map(a.id,{center:new AMap.LngLat(a.lng,a.lat),level:a.level||h}):new google.maps.Map(document.getElementById(a.id),{center:new google.maps.LatLng(a.lat,a.lng),zoom:a.level||h,zoomControl:!0});a.zoomCallBack&&(1==f?AMap.event.addListener(i,"zoomchange",function(){var c=a.zoomCallBack&&a.zoomCallBack(this.getZoom());c&&(this.clearMap(),b(c,this,1))}):google.maps.event.addListener(i,"zoom_changed",function(){var c=a.zoomCallBack&&a.zoomCallBack(this.getZoom());if(c){if(e.marekrs&&e.marekrs.length>0){for(var d=0;d<e.marekrs.length;d++)e.overlays[d].setMap&&e.overlays[d].setMap(null),e.marekrs[d].setMap&&e.marekrs[d].setMap(null);e={marekrs:[],overlays:[]}}b(c,this,2)}})),d=a.markers instanceof Array&&a.markers.length>0?a.markers:a,b(d,i,f)},e=function(){},f=a.forceAmap||b.isInApp()?e:d;f(a)},j.show_map=function(a){if(!a)throw new Error('function show_map error is "param is null"');a.name=e.METHOD_SHOW_MAP,e.request(a)},j.app_show_map_with_POI_list=function(a){e.request({name:e.METHOD_APP_SHOW_MAP_WITH_POI_LIST,poiList:a.poiList})},c.register({name:h,fn:j})}}),define("cGeoService",["cWidgetFactory","cWidgetGeolocation","cWidgetGuider"],function(a){var b={},c=a.create("Geolocation"),d=a.create("Guider"),e=c.PositionStore.getInstance();return b.GeoLocation=function(){function a(a,b,c){for(var d in i)i[d]&&"function"==typeof i[d][a]&&i[d][a].apply(i[d].scope,b);c&&(i={})}var b=0,f=1,g=2,h=3,i={},j=b,k=null;return{Subscribe:function(b,l,m,n){l=l||{},i[b]||(i[b]={name:b,onStart:l.onStart,onComplete:l.onComplete,onError:l.onError,onPosComplete:l.onPosComplete,onPosError:l.onPosError,scope:m});var o=e.get();if(n&&(o=null),o)j=f,a("onStart",null),j=g,a("onPosComplete",[o.lng,o.lat]),a("onComplete",[o],!0);else{if(clearTimeout(k),k=setTimeout(function(){j===f&&(j=h,d.print({log:"#cGeoService -- 22 second timeout call onError"}),a("onError",[null],!0))},35e3),j===f)return void(i[b]&&"function"==typeof i[b].onStart&&i[b].onStart.call(m));j=f,a("onStart",null),d.print({log:"#cGeoService -- start request city info"}),c.requestCityInfo(function(b){j=g,e.set(b),a("onComplete",[b],!0)},function(b,c){j=h,"number"==typeof c&&2===c&&(c={code:1}),d.print({log:"#cGeoService -- locate onError"}),a("onError",[b,c],!0)},function(b,c){a("onPosComplete",[b,c])},function(b,c){j=h,"number"==typeof c&&2===c&&(c={code:1}),a("onPosError",[b,c],!0)},!0)}},UnSubscribe:function(a){a=_.isArray(a)?a:[a];for(var b=0;b<a.length;b++)delete i[a[b]]},ClearPosition:function(){e.remove()}}}(),b.GeoAround=function(){return{Subscribe:function(a,b,d,e){c.requestAroundInfo(a,function(a){b.call(e,a)},function(){d.call(e)})}}}(),b.GeoKeyword=function(){return{Subscribe:function(a,b,d,e,f){c.requestKeywordInfo(a,b,function(a){d.call(f,a)},function(){e.call(f)})}}}(),b}),define("cMessageCenter",["cBase"],function(a){var b=a.Class({__propertys__:function(){this.msgGroup={}},initialize:function(){},_verify:function(a){if(!a)throw Error("参数错误");if(!a.namespace)throw Error("必须知道该消息的命名空间");if(!a.id)throw Error("该消息必须具备key值");if(!a.handler&&_.isFunction(a.handler))throw Error("该消息必须具备事件句柄")},register:function(a,b,c){var d={};_.isObject(a)?d=a:(d.namespace=a,d.id=b,d.handler=c),this._verify(d),this.msgGroup[d.namespace]||(this.msgGroup[d.namespace]={}),this.msgGroup[d.namespace][d.id]||(this.msgGroup[d.namespace][d.id]=[]),this.msgGroup[d.namespace][d.id].push(d.handler)},unregister:function(){var a=["clearMessageGroup","clearNamespace","clearObservers","removeObserver"],b=a[arguments.length];_.isFunction(b)&&b.call(this,arguments)},clearMessageGroup:function(){this.msgGroup={}},clearNamespace:function(a){this.msgGroup[a]&&(this.msgGroup[a]={})},clearObservers:function(a,b){this.msgGroup[a]&&this.msgGroup[a][b]&&(this.msgGroup[a][b]=[])},removeObserver:function(a,b,c){var d,e,f;if(this.msgGroup[a]&&this.msgGroup[a][b])for(f=this.msgGroup[a][b],d=0,e=f.length;e>d;d++)f[d]===c&&f[b].splice(d,1)},dispatch:function(a,b,c,d){var e,f,g;if(a&&b&&this.msgGroup[a]&&this.msgGroup[a][b])for(g=this.msgGroup[a][b],e=0,f=g.length;f>e;e++)_.isFunction(g[e])&&g[e].call(d||this,c)},MAP:{APP:"app",VIEW:"view",MODEL:"model",UI:"ui"}});return b.getInstance=function(){return this.instance||(this.instance=new b),this.instance},b.getInstance()}),define("cPageParser",["cBase","cStore","CommonStore"],function(cBase,cStore,CommonStore){function getID(){var a="client_id_viewport_"+ ++uuid+"_"+(new Date).getTime();return a}function _containFunc(a,b){var c=!1;for(var d in a){if(c)return!0;if(_.isFunction(a[d])&&a[d].toString().indexOf(b.trim())>-1)return a[d]=a[d].toString().trim(),!0;(_.isObject(a[d])||_.isArray(a[d]))&&(c=_containFunc(a[d],b))}return c}function reString(a){var b={"\r":"\\r","\n":"\\n","	":"\\t"},c=/([\.\\\/\+\*\?\[\]\{\}\(\)\^\$\|])/g,d=/[\r\t\n]/g;return a.replace(c,"\\$1").replace(d,function(a){return b[a]})}function fixReString(a){for(var b=a.split(""),c=!1,d="",e=[];d=b.shift();)e.push(d),"\\"==d?e.push(b.shift()):"["!=d||c?"]"==d&&c?c=!1:"("!=d||c||("?"!=b[0]||":"!=b[1]&&"!"!=b[1]&&"="!=b[1]||(b.shift(),b.shift()),e.push("?"),e.push(":")):c=!0;return e.join("")}function urlParse(a,b){var c=[],d=[],e={},f=a.replace(/\{\{(.+?)\}\}/g,function(a,b){return d.push(b),"{@"+(d.length-1)+"}"}).replace(/\{(@?)(.+?)\}|[^\{\}]+/g,function(a,b,e){var f="";if(e)if(b){var g=d[e].match(/^(?:(?:\((\w+)\))?([^!=]+?)|([^!=]+?)=(.*))$/);if(g)if(g[2]){switch(g[1]){case"number":f="(\\d+(?:\\.\\d*)?|\\.\\d+)";break;case"int":f="(\\d+)";break;case"letter":f="([a-z _\\-\\$]+)";break;default:f="([^\\/]*)"}c.push(g[2])}else if(c.push(g[3]),/^\/.*\/$/.test(g[4]))f="("+fixReString(g[4].slice(1,-1))+")";else{for(var h=g[4].split("||"),i=0;i<h.length;i++)h[i]=reString(h[i]);f="("+h.join("|")+")"}else f=""}else c.push(e),f="([^\\/]*)";else f=reString(a);return f});b=b.replace(/[#\?].*$/g,"");var g=b.match(new RegExp(f,"i")),h="/([^/]*)";"\\"!=f[f.length-1]&&(h="\\/([^/]*)");var i=b.match(new RegExp(f+h,"i"));if(g&&!i){for(var j=0;j<c.length;j++)e[c[j]]=g[j+1]||null;return{reStr:f,param:e,index:g.index}}return{}}function getPageParams(a,b){a=decodeURIComponent(a);var c={};"string"==typeof b&&(b=[b]),_.each(b,function(b){var d=Lizard.schema2re(b,a);d.reStr&&d.param&&(c=d.param)});for(var d,e,f,g,h=a.replace(/^[^\?#]*\??/g,"").replace(/#DIALOG_.*$/g,"").replace(/#\|cui-.*$/g,""),i=/([^&=?]+)=([^&]+)/g,j=/\/+.*\?/,k=/(.+)\[\]$/;d=i.exec(h);){if(e=d[1].toLowerCase(),f=d[2],g=e.match(k),j.test(f)){c[e]=h.substr(h.indexOf(f));break}g?(e=g[1],c[e]=c[e]||[],c[e].push(f)):c[e]=f}return c}function getPageUrlschema(){var configStr=getPageConfigStr(),ret="",arr=configStr.match(/([\'\"])?url_schema\1\s*:\s*([\'\"])(.*?)\2/)||configStr.match(/([\'\"])?url_schema\1\s*:\s*\[\s*([\'\"])((.|\s)*?)\2(\s*|,)]/);return arr?(eval("ret = {"+arr[0]+"}['url_schema']"),ret):""}function getPageConfigStr(){var a=pageDocNode.find('script[type="text/lizard-config"]').text();return a||(a='{"url_schema": "","model": {"apis": []},"view":{}}'),a}function getPageConfig(){var configStr=getPageConfigStr(),ajaxDataMatch=configStr.match(/Lizard.D\(([\'\"])(.*?)([\'\"])\)(.*?)(,|\s)/g),dataexpr=[];return ajaxDataMatch&&_.each(ajaxDataMatch,function(a){var b=a.split(",").join("").split("}").join("");dataexpr.push(b)}),eval("var ret = "+configStr),ret.dataexpr=dataexpr,ret}function getPageTemplates(){var a={},b=pageDocNode.find('script[type="text/lizard-template"]');return _.each(b,function(b){var c=$(b);c.attr("id")&&(a[c.attr("id")]={runat:c.attr("runat")||"all",text:removeTags(c.text(),"client")})}),a}function removeTags(a,b){var c=$("<SCRIPT>"+a+"</SCRIPT>");return c.find("[runat="+b+"]").remove(),c.text()}function _runUnderscore(a,b){b||(b={});var c="";if(a){{var d=_.template(a);Lizard.T}c=d(b,{Lizard:Lizard}).trim()}return c}function _setTDKInfo(a,b){var c=[],d=b.model.setTDK?b.model.setTDK(a):{},e=pageDocNode.find("title");return d.title&&(e&&e.remove(),c.push("<title>"+d.title+"</title>")),_.each(d,function(a,b){if(a){var d=pageDocNode.find('meta[name="'+b+'"]');d&&d.remove(),c.push('<meta name="'+b+'" content="'+a+'" />')}}),{TDK:d,TDKStr:c.join("")}}function _setUBTInfo(){var varNames=["page_id","bf_ubt_orderid","ab_testing_tracker"];if(_.each(varNames,function(varName){var values="",node=pageDocNode.find("#"+varName);node.get(0)&&(values=node.val()),eval(varName+" = '"+values+"'")}),_.isArray(ab_testing_tracker)){var ret=[];_.each(ab_testing_tracker,function(a){_.each(a.attr("value").split(";"),function(a){a&&ret.push(a)})}),ab_testing_tracker=ret.join(";")}}var pageDocNode=null,uuid=0;Lizard._initParser=function(a,b){pageDocNode=$("<DIV>"+b+"</DIV>"),Lizard.T.lizTmpl=getPageTemplates(),Lizard.P.lizParam=getPageParams(a,getPageUrlschema());var c=getPageConfig();return c.pageUrl=a,c},Lizard.getModels=function(pageConfig){pageConfig.model||(pageConfig.model={});var apis=pageConfig.model.apis||[],ret=[],dataexpr=pageConfig.dataexpr;return _.each(apis,function(api){api.runat=api.runat||"all",("client"==api.runat&&api.runat==Lizard.renderAt||"all"==api.runat)&&ret.push(api),api.suspend="suspend"in api?api.suspend.toString():!1,_.each(dataexpr,function(p){var postdataStr=JSON.stringify(api.postdata);(JSON.stringify(postdataStr).indexOf(p)>-1||_containFunc(api.postdata,p)||api.suspend&&api.suspend.indexOf(p)>-1)&&(api.depends||(api.depends=[],api.expressionMap={}),api.depends.push(eval(p.match(/Lizard.D\(([\'\"])(.*?)([\'\"])\)/g)[0].split("Lizard.D").join(""))),api.expressionMap[p]=dataexpr[p])})}),Lizard.errorBack=_.isFunction(pageConfig.errorBack)?pageConfig.errorBack:null,apis},Lizard.S=function(a,b,c){return this.loacaStores||(this.loacaStores={}),this.loacaStores[a]||(this.loacaStores[a]="SALES"==a?CommonStore.SalesStore:"SALES_OBJECT"==a?CommonStore.SalesObjectStore:"UNION"==a?CommonStore.UnionStore:new cBase.Class(cStore,{__propertys__:function(){this.key=a}})),b?this.loacaStores[a].getInstance().get()&&this.loacaStores[a].getInstance().get().hasOwnProperty(b)?this.loacaStores[a].getInstance().get()[b]:c:this.loacaStores[a].getInstance().get()},Lizard.T=Lizard._T=function(a,b){if(1==arguments.length){var c="",d=Lizard.T.lizTmpl[a];return d&&"server"!=d.runat&&(c=d.text),c}return _runUnderscore(Lizard._T(a),b)},Lizard.P=function(a,b){var c=null;return c=_.isUndefined(b)?Lizard.P.lizParam[a]||Lizard.P.lizParam[a.toLowerCase()]:Lizard.P.lizParam[a]=b},Lizard.D=function(a){return this.ajaxDatas&&this.ajaxDatas[a]?this.ajaxDatas[a]:null},Lizard.schema2re=urlParse,Lizard.render=function(a,b,c){var d={header:"",viewport:""},e=!0;if(_.isFunction(a.validate))e=a.validate(b),!e&&_.isFunction(a.modelOnError)&&(d=a.modelOnError(b));else{var f=_setTDKInfo(b,a);2==arguments.length&&_setUBTInfo(),a.model.filter&&(b=a.model.filter.call(this,b,f.TDK))}for(var g in a.view)a.view.hasOwnProperty(g)&&(d[g]=_runUnderscore(a.view[g],b));var h=c?c.pageID+"$"+c.dialogName:getID(a.pageUrl);return d.viewport=['<div id="',h,'" page-url="',a.pageUrl,'">',d.viewport,"</div>"].join("").trim(),d.id=h,d.controller=a.controller,d.config=a,d.datas=b,d.lizTmpl=Lizard.T.lizTmpl,d.lizParam=Lizard.P.lizParam,d.TDK=f.TDKStr,d.validateRet=e,c?d=_.extend(d,c.ubtInfo):(d.page_id=page_id,d.ab_testing_tracker=ab_testing_tracker,d.bf_ubt_orderid=bf_ubt_orderid),d},Lizard.getController=function(a){return a.controller}}),define("cUtilityUtil",["cUtilityPath"],function(a){function b(a,b,d){return"post"!=a?location.href=b:c(b,d),!0}function c(a,b){var c,d="hidden",e="none",f=window.document,g=$("<FORM/>").attr({method:"post",action:a,target:"_blank"}).css({display:e}).appendTo(f.body).eq(0);for(c in b)$("<INPUT/>").attr({type:d,name:c,value:b[c]}).appendTo(g);g.submit(),$(g).remove()}var d={};return d.isSupportPushState=function(){return Lizard.isHybrid?!1:!!(window.history&&window.history.pushState&&window.history.replaceState)}(),d.uuid=0,d.dialogUuid=0,d.isExternalLink=function(a){var b=new RegExp(/^mailto:|^tel:|^javascript:/);return b.test(a)},d.goExternalLink=function(c,e){var f=a.isSameDomain(a.makeUrlAbsolute(c),window.location.href),e=e||{},g=e.type||"get",h=e.data||{};if(!f)return b(g,c,h);if(Lizard.isHybrid){if("get"==g){if(e.target||e.jump){var i=["cWidgetFactory","cWidgetGuider"];return require(i,function(){var a=arguments[0],b=a.create("Guider");b.jump({targetModel:"open",url:location.href.replace(/[\?#].+$/,"")+"#"+encodeURIComponent(c),title:""})}),!0}return!1}return!1}return e.target||e.jump||!d.isSupportPushState?b(g,c,h):!1},d}),define("cUtilityStateHistory",["cUtilityUtil"],function(a){function b(){this.forwardStack=[],this.historyStack=[]}return b.prototype={getTimestamp:function(){return(new Date).getTime()},getHash:function(){var a=window.location.hash;return"#"==a.charAt(0)&&(a=a.substring(1)),decodeURIComponent(a)},setHash:function(a){a||(a=""),window.location.hash=encodeURIComponent(a)},replaceHash:function(a){a||(a=""),location.replace("#"+encodeURIComponent(a))},handleBackButton:function(){var a=this.historyStack.pop(),b=this.historyStack[this.historyStack.length-1];return this.forwardStack.push(a),b},handleForwardButton:function(){var a=this.forwardStack.pop();return this.historyStack.push(a),a},addToHistory:function(a,b){b?0==this.historyStack.length?this.historyStack.push(a):this.historyStack[this.historyStack.length-1]=a:0==this.historyStack.length?this.historyStack.push(a):a&&(this.historyStack[this.historyStack.length-1].hash==a.hash||this.historyStack.push(a))},pushState:function(b,c,d){if(Lizard.group(),Lizard.isHybrid){Lizard.log("data:",JSON.stringify(b)),Lizard.log("title:",c),Lizard.log("url:",d);var e=(this.getTimestamp(),d);this.setHash(e),this.addToHistory({hash:e,state:b,title:c,url:d},!1)}else if(a.isSupportPushState)Lizard.log("data:",JSON.stringify(b)),Lizard.log("title:",c),Lizard.log("url:",d),history.pushState(b,c,d);else{Lizard.log("isSupportPushState:",a.isSupportPushState),Lizard.log("data:",JSON.stringify(b)),Lizard.log("title:",c),Lizard.log("url:",d);var f=d.split("#DIALOG_")[1];f&&(DialogMag[d]=b,DialogHist.unshift(b),location.hash="#DIALOG_"+f)}Lizard.groupEnd()},replaceState:function(b,c,d){if(Lizard.group(),Lizard.isHybrid){Lizard.log("data:",JSON.stringify(b)),Lizard.log("title:",c),Lizard.log("url:",d);var e=(this.getTimestamp(),d);this.replaceHash(e),this.addToHistory({hash:e,state:b,title:c,url:d},!0)}else a.isSupportPushState?(Lizard.log("data:",JSON.stringify(b)),Lizard.log("title:",c),Lizard.log("url:",d),history.replaceState(b,c,d)):Lizard.log("isSupportPushState:",a.isSupportPushState);Lizard.groupEnd()},popstate:function(b){var c=this,d=$.proxy(function(a){Lizard.log("popstate");var b=a.state||a.originalEvent&&a.originalEvent.state;!Lizard.stopStateWatch&&b&&this.showView(b)},b),e=$.proxy(function(a){function c(a){Lizard.log("hashchange goBack",a.url),b.showView(a)}Lizard.log("hashchange"),a=a||{},Lizard.log("e:",a);var d=a.newURL,e=a.oldURL,f=e.split("#DIALOG_")[1]||d.split("#DIALOG_")[1];if(f){var g=location.href;if(g===(DialogHist[0]&&DialogHist[0].url)&&DialogHist.length>1)return Lizard.log("We are on the right panel."),!0;if(""===location.hash){Lizard.log("location.hash is empty"),DialogHist.shift();var h=DialogHist[0];return c(h),!0}if(DialogHist[1]&&g===DialogHist[1].url){Lizard.log("DialogHist[1] && url === DialogHist[1].url"),DialogHist.shift();var h=DialogHist[0];return c(h),!0}DialogMag[g]&&(Lizard.log("DialogMag[url] exist"),DialogHist.unshift(DialogMag[g]),c(DialogMag[g]))}},b),f=$.proxy(function(a){if(!this.observe)return!1;Lizard.log("hybridHashChangeHandler");var b=c.historyStack.length,d=c.getHash(),e={id:"newPage",opts:{},url:d};if(!d){var f=this.bookmarkAnchor,g=f.href;window.location.href==g&&(d=decodeURIComponent(f.hash))}if(c.forwardStack.length>0&&c.forwardStack[c.forwardStack.length-1].hash===d){var a=c.handleForwardButton();return e=a.state,this.showView(e),void(1==c.historyStack.length&&(this.bookmarkAnchor.isFirst=!0))}var h=-1;if(b>=2){for(var i=b;i>=2;i--)c.historyStack[i-2].hash===d&&(h=i-2);
if(h>-1){for(var i=b-2;i>=h;i--)a=c.handleBackButton();return e=a.state,this.showView(e),void(1==c.historyStack.length&&(this.bookmarkAnchor.isFirst=!0))}}this.showView(e)},b);Lizard.isHybrid?$(window).bind("hashchange",f):a.isSupportPushState?$(window).bind("popstate",d):$(window).bind("hashchange",e)}},b}),define("cUtilityCacheView",[],function(){function a(){this.catchs={},this.backups={},this.orderCaches=[]}return a.prototype={add:function(a,b){this.catchs[a]=b,this.orderCaches.push({key:a,url:b.url,viewName:b.viewName}),this.backups[a]={url:b.url,opts:b.opts,text:b.text,datas:b.datas,viewName:b.viewName}},_delElemFromCollection:function(a,b,c){_.reject(a,function(a){return a[b]==c})},delOrderCaches:function(a,b){this._delElemFromCollection(this.orderCaches,a,b)},delById:function(a){this.catchs[a]&&delete this.catchs[a],this.delOrderCaches("key",a)},delByName:function(a){this._delElemFromCollection(this.catchs,"viewName",a),this.delOrderCaches("viewName",a)},delByURL:function(a){this._delElemFromCollection(this.catchs,"url",a),this.delOrderCaches("url",a)},delByIdFromBackups:function(a){this.backups[a]&&delete this.backups[a],this.delOrderCaches("key",a)},delByNameFromBackups:function(a){this._delElemFromCollection(this.backups,"viewName",a),this.delOrderCaches("viewName",a)},delByURLFromBackups:function(a){this._delElemFromCollection(this.backups,"url",a),this.delOrderCaches("url",a)},findById:function(a){return this.catchs[a]},findByName:function(a){return _.findWhere(this.catchs,{viewName:a})},findByIdFromBackups:function(a){return this.backups[a]},findByNameFromBackups:function(a){return _.findWhere(this.backups,{viewName:a})},findByURLFromBackups:function(a){return _.findWhere(this.backups,{url:a})},length:function(){return _.size(this.catchs)},each:function(a){_.isFunction(a)&&_.each(this.catchs,function(b,c){a(c,b)})}},a}),define("cUtilityCrypt",[],function(){var a,b={},c=b.Base64,d="2.1.4";"undefined"!=typeof module&&module.exports&&(a=require("buffer").Buffer);var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=function(a){for(var b={},c=0,d=a.length;d>c;c++)b[a.charAt(c)]=c;return b}(e),g=String.fromCharCode,h=function(a){if(a.length<2){var b=a.charCodeAt(0);return 128>b?a:2048>b?g(192|b>>>6)+g(128|63&b):g(224|b>>>12&15)+g(128|b>>>6&63)+g(128|63&b)}var b=65536+1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320);return g(240|b>>>18&7)+g(128|b>>>12&63)+g(128|b>>>6&63)+g(128|63&b)},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,j=function(a){return a.replace(i,h)},k=function(a){var b=[0,2,1][a.length%3],c=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),d=[e.charAt(c>>>18),e.charAt(c>>>12&63),b>=2?"=":e.charAt(c>>>6&63),b>=1?"=":e.charAt(63&c)];return d.join("")},l=b.btoa?function(a){return b.btoa(a)}:function(a){return a.replace(/[\s\S]{1,3}/g,k)},m=a?function(b){return new a(b).toString("base64")}:function(a){return l(j(a))},n=function(a,b){return b?m(a).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}).replace(/=/g,""):m(a)},o=function(a){return n(a,!0)},p=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),q=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),c=b-65536;return g((c>>>10)+55296)+g((1023&c)+56320);case 3:return g((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return g((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},r=function(a){return a.replace(p,q)},s=function(a){var b=a.length,c=b%4,d=(b>0?f[a.charAt(0)]<<18:0)|(b>1?f[a.charAt(1)]<<12:0)|(b>2?f[a.charAt(2)]<<6:0)|(b>3?f[a.charAt(3)]:0),e=[g(d>>>16),g(d>>>8&255),g(255&d)];return e.length-=[0,0,2,1][c],e.join("")},t=b.atob?function(a){return b.atob(a)}:function(a){return a.replace(/[\s\S]{1,4}/g,s)},u=a?function(b){return new a(b,"base64").toString()}:function(a){return r(t(a))},v=function(a){return u(a.replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(){var a=b.Base64;return b.Base64=c,a};if(b.Base64={VERSION:d,atob:t,btoa:l,fromBase64:v,toBase64:n,utob:j,encode:n,encodeURI:o,btou:r,decode:v,noConflict:w},"function"==typeof Object.defineProperty){var x=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};b.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return v(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(a){return n(this,a)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return n(this,!0)}))}}return b}),define("cUtilityFlip",[],function(){!function(){function a(a,b,c,d,e){var f=Math.abs(a-b),g=Math.abs(c-d),h=f>=g?a-b>0?"left":"right":c-d>0?"up":"down";return e&&("left"==h||"right"==h?g/f>e&&(h=""):("up"==h||"down"==h)&&f/g>e&&(h="")),h}function b(b,c,i,j,k){b&&b.on(f,function(a){var b=a.touches&&a.touches[0]||a;e.x1=b.pageX,e.y1=b.pageY}).on(g,function(a){var b=a.touches&&a.touches[0]||a;e.x2=b.pageX,e.y2=b.pageY,j||a.preventDefault()}).on(h,function(){if(e.x2&&Math.abs(e.x1-e.x2)>d||e.y2&&Math.abs(e.y1-e.y2)>d){var b=a(e.x1,e.x2,e.y1,e.y2,k);c===b&&"function"==typeof i&&i()}else"tap"===c&&"function"==typeof i&&i()})}function c(a){a&&a.off(f).off(g).off(h)}var d=20,e={},f="touchstart",g="touchmove",h="touchend";"ontouchstart"in window||(f="mousedown",g="mousemove",h="mouseup"),$.flip=b,$.flipDestroy=c}()}),define("cSessionStorage",["cBase","cAbstractStorage"],function(a,b){var c=new a.Class(b,{__propertys__:function(){},initialize:function($super,a){this.proxy=window.sessionStorage,$super(a)}});return c.getInstance=function(){return this.instance?this.instance:this.instance=new this},c.sessionStorage=c.getInstance(),c}),define("cSessionStore",["cBase","cAbstractStore","cSessionStorage"],function(a,b,c){var d=new a.Class(b,{__propertys__:function(){this.sProxy=c.getInstance()},initialize:function($super,a){$super(a)}});return d}),define("memStore",["cBase","cStore"],function(a,b){var c=new a.Class(b,{__propertys__:function(){this.idField="",this.data=null,this.store=null,this.useLocalStore=!1},initialize:function(a){for(var c=["key","lifeTime","useServerTime","isLocal","defaultData","rollbackEnabled","useLocalStore"],d={},e=0,f=c.length;f>e;e++){var g=a[c[e]]||this[c[e]];"undefined"!=typeof g&&(d[c[e]]=g)}this.store=new b(d)},refresh:function(){var a=this.store.get();!this.data&&a&&this.data&&this.data[this.idField]!==a[this.idField]&&(this.data=a)},commit:function(){this.store.set(this.data)},rollback:function(){this.data=null},set:function(a,b){this.data=a,b&&(this.dataMap||(this.dataMap={}),this.dataMap[b]=a,this.store.useLocalStore&&this.store.set(_.pick(this.dataMap,[b])))},setAttr:function(a,b){this.data[a]=b},set2Store:function(a){this.set(a),this.commit()},get:function(a){return a?(this.dataMap||(this.dataMap=this.store.get()),this.dataMap&&this.dataMap[a]?this.dataMap[a]:null):this.data},getAttr:function(a){return this.data[a]}});return c.getInstance=function(){return this.instance?this.instance:this.instance=new this},c}),define("PageStore",["cBase","cStore","cUtility"],function(a,b){var c=new a.Class(b,{__propertys__:function(){this.CONST_TAG="tag",this.CONST_BACKURL="backurl",this.CONST_CALLBACK="callback",this.CONST_CURVALUE="curvalue"},initialize:function($super,a){$super(a)},save:function(a){var b=this.get(),c=this;$.isArray(b.callback)?$.each(b.callback,function(b,d){c._callFunByStr(d,a)}):this._callFunByStr(b.callback,a)},setCurrent:function(a,b,c,d){var e={};e[this.CONST_TAG]=a,e[this.CONST_BACKURL]=b,e[this.CONST_CALLBACK]=c,e[this.CONST_CURVALUE]=d,this.set(e)},getCurrent:function(){return this.get()},getValue:function(){var a=this.get();return this._callFunByStr(a.curvalue)},_callFunByStr:function(a,b,c,d){c=c||TaxiStore;var e,f,g,h=/^(?:(.*)::)?(.*):(.*)$/i.exec(a);if(h&&4===h.length&&!h[1]){if(e=c[h[2]],f=h[3],e&&e.getInstance){var i=e.getInstance()[f](b);return d&&d(i),i}}else h&&4===h.length&&h[1]&&(g=h[1],e=h[2],f=h[3],requirejs([g],function(a){if(a&&a[e]&&a[e].getInstance){var c=a[e].getInstance(),g=c[f]&&c[f](b);d&&d(g)}}));return!1}});return c}),define("cUserModel",["cBase","cModel","CommonStore"],function(a,b,c){var d=c.UserStore.getInstance(),e=(c.HeadStore.getInstance(),{});return e.NotUserLoginModel=new a.Class(b,{__propertys__:function(){this.url="/html5/Account/NonUserLogin",this.param={},this._abortres={},this.isAbort=!1},initialize:function($super,a){$super(a)},excute:function(a,c,e,f,g){this.isAbort=!1;var h="http://"+b.baseurlold().domain+this.url,i=function(b){1==b.ServerCode&&b.Data?(d.setUser(b.Data),"function"==typeof a&&a.call(f,b)):"function"==typeof c&&c.call(f)},j=function(){return this.isAbort?("function"==typeof g&&g.call(f),void(this.isAbort=!1)):void("function"==typeof c&&c.apply(f,arguments))};this._abortres=$.ajax({type:"get",url:h,dataType:"json",crossDomain:!0,success:$.proxy(i,this),error:$.proxy(j,this),timeout:25e3})},abort:function(){this.isAbort=!0,this._abortres&&"function"==typeof this._abortres.abort&&this._abortres.abort()}}),e.UserLoginModel=new a.Class(b,{__propertys__:function(){this.param={},this.url="10090/GetUserInfoToH5.json"},initialize:function($super,a){$super(a),this.baseurl=this.seturl()},seturl:function(){var a=window.location.host,b="restapi/soa2/",c="m.ctrip.com";return a.match(/^m\.ctrip\.com/i)?c="m.ctrip.com":a.match(/\.uat\.qa/i)?c="gateway.m.uat.qa.nt.ctripcorp.com":a.match(/\.fat/i)&&(c="gateway.m.fws.qa.nt.ctripcorp.com"),{domain:c,path:b}}}),e}),define("cMultipleDate",["libs","c"],function(a,b){var c=b.base,d=new c.Class({__propertys__:function(){this.models=new c.Hash,this.index=0,this.results={}},initialize:function(a){this.setOption(a)},setOption:function(a){for(var b in a)switch(b){case"models":this.addModels(a[b])}},addModel:function(a,b){this.models.add(a,b)},addModels:function(a){for(var b in a)a.hasOwnProperty(b)&&this.models.add(b,a[b])},removeModelByName:function(a){this.models.del(a)},removeModelByIndex:function(a){this.models.delByIndex(a)},excute:function(a,b,c,d,e){if(!this.models.length())throw"No model";this.index=0,this._request(a,b,c,d,e)},_request:function(a,b,c,d,e){var f=this.models.index(this.index),g=this;f.excute(function(f){return g.results[g.models.getKey(g.index)]=f,g.index++,g.index>=g.models.length()?(a&&a.call(this,g.results),void(g.results={})):void g._request(a,b,c,d,e)},function(a){b&&b.call(this,a)},c,d,e)}});return d}),define("cUIView",["libs","cUIAlert","cUIWarning","cUIHeadWarning","cUIWarning404","cUIToast","cSales","cStorage","cBase","CommonStore","cUtility","cAdView","cUILoading","cUIBubbleLayer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a,b,c){a&&a.originalEvent&&alert(a.originalEvent.message+" "+b+" "+c)}function p(){return!1}var q=h.localStorage;document.body&&(document.body.tabIndex=1e4);var r=new b({title:"提示信息",message:"",buttons:[{text:"知道了",click:function(){this.hide()}}]}),s=new b({title:"提示信息",message:"您的订单还未完成，是否确定要离开当前页面？",buttons:[{text:"取消",click:function(){this.hide()},type:b.STYLE_CANCEL},{text:"确定",click:function(){this.hide()},type:b.STYLE_CONFIRM}]}),t=new c({title:""}),u=new d({title:""}),v=new e,w=new m,x=new f,y=new n,z=null;return Backbone.View.extend({ENUM_STATE_NOCREATE:0,ENUM_STATE_CREATE:1,ENUM_STATE_LOAD:2,ENUM_STATE_SHOW:3,ENUM_STATE_HIDE:4,pageid:0,scrollPos:{x:0,y:0},header:null,footer:null,cSales:g,warning:null,alert:null,onCreate:function(){},viewInitialize:function(){},initialize:function(a,b,c){1==arguments.length&&(this.$el=arguments[0].el,a={query:{}},b={forward:function(){0},backward:function(){0},loadView:function(){0}},c=""),this.$el.addClass("sub-viewport"),this.id=_.uniqueId("viewport"),3==arguments.length&&this.$el.attr("id","id_"+this.id),c&&(this.viewname=c),this.pageid&&this.$el.attr("page-id",this.pageid),this.viewdata={},this.appliction=b,this.request=a,this.$el.attr("page-url",this.request.viewpath),this.state=this.ENUM_STATE_CREATE,this.alert=r,this.warning=t,this.headwarning=u,this.warning404=v,this.loading=w,this.toast=x,this.bubbleLayer=y,this.confirm=s,this.viewport=$(".main-viewport"),_.isArray(this.css)&&this.appendCss(this.css),l&&(this.footer=l.getInstance()),this.debug();try{this.onCreate()}catch(d){}},_initializeHeader:function(){var a=this;this.header.backUrl&&this.$el.on("click","#js_return",function(){a.back(a.header.backUrl)}),this.header.home&&this.$el.delegate("#js_home","click",function(){a.home()}),this.header.phone&&this.$el.find("#js_phone").attr("href","tel:"+this.header.phone),this.header.title&&this.$el.find("header h1").text(this.header.title),this.header.subtitle&&this.$el.find("header p").text(this.header.subtitle),this.header.rightAction&&this.$el.delegate("header div","click",this.header.rightAction)},_initializeFooter:function(){if(this.footer&&(this.footer.hide(),this.footer.setCurrentView(this)),!k.isInApp()&&this.hasAd&&!this.footer.isExpire()){var a=this.adContainer?this.$el.find("#"+this.adContainer):$("#footer"),b=this.footer.rootBox;b&&b.attr("id")!=a.attr("id")&&(this.footer.remove(),this.footer.isCreate=!1),this.footer.update({rootBox:a}),this.footer.show()}},__onLoad:function(a){document.activeElement&&document.activeElement.blur(),this.getServerDate(),this.disposeChannel(),this.header=this._getDefaultHeader(),this.state=this.ENUM_STATE_LOAD,this.onLoad&&this.onLoad(a)},__onShow:function(){document.activeElement&&document.activeElement.blur(),document.activeElement.blur,this.state=this.ENUM_STATE_SHOW,window.scrollTo(0,0),this.onShow&&this.onShow(),this._sendUbt(),this._initializeHeader(),this._initializeFooter(),this.__updateSales(this.$el),this.onBottomPull&&(this._onWidnowScroll=$.proxy(this.onWidnowScroll,this),this.addScrollListener()),this._sendGa(),this._sendKenshoo(),this.resetViewMinHeight(),this.FixedInput||(this.$("input").on("focus",function(a){("tel"==a.target.type||"text"==a.target.type)&&(z||(p(),z=setInterval(function(){p()},500)))}),this.FixedInput=!0)},resetViewMinHeight:function(){},__onHide:function(a){this.state=this.ENUM_STATE_HIDE,this.onHide&&this.onHide(a),this.hideHeadWarning(),this.hideWarning(),this.hideLoading(),this.hideWarning404(),this.hideToast(),this.hideConfirm(),this.hideMessage(),this.onBottomPull&&this.removeScrollListener()},showLoading:function(){this.loading.show(),this.loading.firer=this},hideLoading:function(){this.loading.firer&&this.loading.firer!=this||this.loading.hide()},forward:function(){this.appliction.forward.apply(null,arguments)},back:function(){this.appliction.back.apply(null,arguments)},jump:function(a,b){k.isInApp()?(a=a.replace(window.BASEURL,""),this.forward(a)):b?window.location.replace(a):window.location.href=a},home:function(){this.appliction.forward("")},setTitle:function(a){this.appliction.setTitle("携程旅行网-"+a)},restoreScrollPos:function(){window.scrollTo(this.scrollPos.x,this.scrollPos.y)},getQuery:function(a){return this.request.query[a]||null},getPath:function(a){return this.request.path[a]||null},getRoot:function(){return this.request.root||null},showMessage:function(a,b){this.alert.setViewData({message:a,title:b}),this.alert.show()},hideMessage:function(){this.alert.hide()},showConfirm:function(a,c,d,e,f,g){this.confirm.setViewData("object"==typeof a&&a.message?a:{message:a,title:c,buttons:[{text:g||"取消",click:function(){"function"==typeof e&&e(),this.hide()},type:b.STYLE_CANCEL},{text:f||"确定",click:function(){"function"==typeof d&&d(),this.hide()},type:b.STYLE_CONFIRM}]}),this.confirm.show()},hideConfirm:function(){this.confirm.hide()},showWarning:function(a,b){a&&this.warning.setTitle(a,b),this.warning.show()},hideWarning:function(){this.warning.hide()},showHeadWarning:function(a,b,c){a&&this.headwarning.setTitle(a,b,c),this.headwarning.show()},hideHeadWarning:function(){this.headwarning.hide()},showBubbleLayer:function(a){this.bubbleLayer.showMenu(a)},hideBubbleLayer:function(){this.bubbleLayer.hide()},showWarning404:function(a,b){a&&this.warning404.retryClick(a),this.warning404.show(),b&&this.warning404.options(b),this.warning404.firer=this},hideWarning404:function(){this.warning404.firer&&this.warning404.firer!==this||this.warning404.hide()},showNoHeadWarning:function(a,b){a&&this.NoHeadWarning.setContent(a,b),this.NoHeadWarning.show()},showToast:function(a,b,c,d){this.toast.isShow()||(d="undefined"!=typeof d?d:!0,this.toast.show(a,b,c,d),this.toast.firer=this)},hideToast:function(){this.toast.firer&&this.toast.firer!=this||this.toast.hide()},updateHeader:function(a){for(var b in a)this.header[b]=a[b];this._initializeHeader()},_getDefaultHeader:function(){return{backUrl:null,home:!1,phone:null,title:null,subtitle:null,rightAction:null}},__updateSales:function(a){var b=location.host,c=document.referrer,d="";b&&-1===c.indexOf(b)&&(c=c.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),c.indexOf("baidu")>-1&&(d="SEO_BAIDU"),c.indexOf("google")>-1&&(d="SEO_GOOGLE"),c.indexOf("soso.com")>-1&&(d="SEO_SOSO"),c.indexOf("sogou")>-1&&(d="SEO_SOGOU"),c.indexOf("m.so.com")>-1&&(d="SEO_SO"),c.indexOf("so.360")>-1&&(d="SEO_360SO"),c.indexOf("bing.com")>-1&&(d="SEO_BING"),c.indexOf("yahoo")>-1&&(d="SEO_YAHOO"),c.indexOf("youdao")>-1&&(d="SEO_YOUDAO"),(c.indexOf("jike.com")>-1||c.indexOf("babylon.com")>-1||c.indexOf("ask.com")>-1||c.indexOf("avg.com")>-1||c.indexOf("easou.com")>-1||c.indexOf("panguso.com")>-1||c.indexOf("yandex.com")>-1)&&(d="SEO_360SO"));var e=window.localStorage.getItem("SOURCEID"),f=this.getQuery("sourceid"),i=this.getQuery("sales"),k=j.SalesStore.getInstance().get(),l=this.getQuery("sales")||d||k&&k.sales,m=this.getQuery("sourceid")||e||k&&k.sourceid;(f&&+f>0||i&&i.length>0)&&h.localStorage.oldRemove("APP_DOWNLOAD"),l||m?(l&&g.setSales(l),m&&g.setSourceId(m),g.getSalesObject(l||m,$.proxy(function(b){if((!b.appurl||b.appurl.length<=0)&&this.footer&&this.footer.rootBox){var c=this.footer.rootBox.find("#dl_app");c.length>0&&c.hide()}this.warning404.tel=b.tel?b.tel:"4000086666",g.replaceContent(a)},this))):b&&-1===c.indexOf(b)&&(c=c.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),c.indexOf("baidu")>-1&&(l="SEO_BAIDU"),c.indexOf("google")>-1&&(l="SEO_GOOGLE"),c.indexOf("soso.com")>-1&&(l="SEO_SOSO"),c.indexOf("sogou")>-1&&(l="SEO_SOGOU"),c.indexOf("m.so.com")>-1&&(l="SEO_SO"),c.indexOf("so.360")>-1&&(l="SEO_360SO"),c.indexOf("bing.com")>-1&&(l="SEO_BING"),c.indexOf("yahoo")>-1&&(l="SEO_YAHOO"),c.indexOf("youdao")>-1&&(l="SEO_YOUDAO"),(c.indexOf("jike.com")>-1||c.indexOf("babylon.com")>-1||c.indexOf("ask.com")>-1||c.indexOf("avg.com")>-1||c.indexOf("easou.com")>-1||c.indexOf("panguso.com")>-1||c.indexOf("yandex.com")>-1)&&(d="SEO_360SO"),l&&g.setSales(l),setTimeout(function(){g.replaceContent(a)},1))},getServerDate:function(a){return k.getServerDate(a)},now:function(){return k.getServerDate()},debug:function(){var a=this.request.query.debug||q.get("DEBUG");"yes"==a?($(window).unbind("error",o),$(window).bind("error",o),q.set("DEBUG",a,new i.Date(i.getServerDate()).addDay(1).valueOf())):"no"==a&&($(window).unbind("error",o),q.remove("DEBUG"))},_sendUbt:function(){if(window.$_bf&&1==window.$_bf.loaded){if(0==this.pageid)return;var a=this._getAurl(),b=this.request.query,c=$("#page_id"),d=$("#bf_ubt_orderid"),e=location.protocol+"//"+location.host+a,f=+this.pageid;k.isInApp()&&(f+=1e3,e="http://hybridm.ctrip.com/"+a.substr(a.indexOf("webapp"))),1==c.length&&c.val(f),1==d.length&&d.val(b&&b.orderid?b.orderid:""),window.$_bf.asynRefresh({page_id:f,url:location.protocol+"//"+location.host+a})}else k.isInApp()||setTimeout($.proxy(this._sendUbt,this),300)},_sendGa:function(){if("undefined"!=typeof _gaq){var a=this._getAurl();_gaq.push(["_trackPageview",a])}else setTimeout($.proxy(this._sendGa,this),300)},_sendKenshoo:function(){var a=this.request.query;if(a&&a.orderid){var b="https://2113.xg4ken.com/media/redir.php?track=1&token=8515ce29-9946-4d41-9edc-2907d0a92490&promoCode=&valueCurrency=CNY&GCID=&kw=&product=";b+="&val="+a.val+"&orderId="+a.orderid+"&type="+a.type;var c="<img width='1' height='1' src='"+b+"'/>";$("body").append(c)}},_getAurl:function(){var a,b=this.request.root;return this.request.viewpath&&(b+="#"+this.request.viewpath),this.request.path.length>0&&(a=$.param(this.request.query),b+="!"+this.request.path.join("/")+(a.length?"?"+a:"")),b},disposeChannel:function(){var a,b=this.getQuery("allianceid"),c=this.getQuery("sid"),d=this.getQuery("ouid");if(b&&c){if(a={AllianceID:b,SID:c,OUID:d},j.UnionStore.getInstance().set(a),this.footer&&this.footer.rootBox){var e=this.footer.rootBox.find("#dl_app");e.length>0&&e.hide()}}else{var f=location.host,g=document.referrer;if(f&&-1===g.indexOf(f)&&(g=g.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),g.indexOf("baidu")>-1&&(b=b||"4897",c=c||"353693",d=d||""),g.indexOf("google")>-1&&(b=b||"4899",c=c||"353694",d=d||""),g.indexOf("soso.com")>-1&&(b=b||"4900",c=c||"353696",d=d||""),g.indexOf("sogou")>-1&&(b=b||"4901",c=c||"353698",d=d||""),g.indexOf("m.so.com")>-1&&(b=b||"5376",c=c||"353699",d=d||""),g.indexOf("so.360")>-1&&(b=b||"5376",c=c||"353700",d=d||""),g.indexOf("bing.com")>-1&&(b=b||"4902",c=c||"353701",d=d||""),g.indexOf("yahoo")>-1&&(b=b||"4903",c=c||"353703",d=d||""),g.indexOf("youdao")>-1&&(b=b||"4904",c=c||"353704",d=d||""),(g.indexOf("jike.com")>-1||g.indexOf("babylon.com")>-1||g.indexOf("ask.com")>-1||g.indexOf("avg.com")>-1||g.indexOf("easou.com")>-1||g.indexOf("panguso.com")>-1||g.indexOf("yandex.com")>-1)&&(b=b||"5376",c=c||"353700",d=d||""),b&&c&&(a={AllianceID:b,SID:c,OUID:d},j.UnionStore.getInstance().set(a),this.footer&&this.footer.rootBox))){var e=this.footer.rootBox.find("#dl_app");e.length>0&&e.hide()}}},getGuid:function(){return k.getGuid()},setTitle:function(a){document.title=a},appendCss:function(a){if(a)for(var b=0,c=a.length;c>b;b++)this.css[a[b]]||(this.head.append($('<link rel="stylesheet" type="text/css" href="'+a[b]+'" />')),this.css[a[b]]=!0)},addClass:function(a){this.$el.addClass(a)},removeClass:function(a){this.$el.removeClass(a)},__load:function(a){this.__onLoad(a)},show:function(){this.$el.parent()==this.viewport&&this.viewport.append(this.$el),this.$el.show(),this.__onShow()},hide:function(a){this.$el.hide(),this.__onHide(a)}})}),define("cWidgetHeaderView",["cBase","cUICore","cWidgetFactory","cUtility","cSales","cHybridFacade"],function(a,b,c,d,e,f){function g(c){if(g.instance)return g.instance.reset(c),g.instance;var d=new a.Class(b.AbstractView,k);return g.instance=new d(c)}var h="HeaderView";if(!c.hasWidget(h)){var i=function(){var a=this.templateFactory(this.data);return $(a)},j=function(a){if(this.html="",a&&a.data){a.data.customtitle&&this.htmlMap.title?delete this.htmlMap.title:this.htmlMap.title="<h1><%=title %></h1>";for(var b in this.htmlMap)a.data[b]&&(this.html+=this.htmlMap[b]);var c="",d=a.data.style;d&&(c=' style="'+d+'"'),this.html="<header"+c+">"+this.html+"</header>"}},k=k||{};k.__propertys__=function(){},k.initialize=function($super,a){a?(this.rootBox=a.container||$($("#headerview").length>0?"#headerview":'<div id="headerview"></div>'),this.data=a.data,this.html=a.html||this.html,this.data&&(this.bindEvents=a.data.bindEvents||function(){}),j.call(this,a),a.onShow=this.onShow):(this.rootBox=$($("#headerview").length>0?"#headerview":'<div id="headerview"></div>'),a={onShow:this.onShow}),$super(a)},k.createHtml=function(){return this.html?(this.templateFactory=this.template(this.html),i.call(this)):void 0},k.onShow=function(){if(this.rootBox.off("click"),this.data&&this.data.btn&&"function"==typeof this.bindEvents&&this.bindEvents(this.getView()),this.data&&this.data.events&&this.delegateEvents(this.data.events,this.data.view),this.data&&this.data.commit){var a=this.data.commit,b=this.getView(),c=this,d=function(){a.callback.call(c.view)};b.find("#"+a.id).on("click",d),f.register({tagname:f.METHOD_COMMIT,callback:d})}},k.set=function(a){a&&(this.htmlMap&&!this.htmlMap.title&&(this.htmlMap.title="<h1><%=title %></h1>"),this.data=a,j.call(this,{data:a}),this.bindEvents=this.data.bindEvents,this.isCreate=!1,this.hide())},k.reset=function(a){a&&(this.set(a),this.trigger("onShow"))},k.delegateEvents=function(a,b){if(a){l.call(this,"#c-ui-header-home","click",a.homeHandler,b),l.call(this,"#c-ui-header-return","click",a.returnHandler,b),this.rootBox.find("header").append($("#c-ui-header-return"));var c=this,d=function(){a.returnHandler.call(b||c)};if(f.register({tagname:f.METHOD_BACK,callback:d}),a.citybtnHandler){var e=function(){a.citybtnHandler.call(b||c)};f.register({tagname:f.METHOD_CITY_CHOOSE,callback:e})}}};var l=function(a,b,c,d){this.rootBox.find(a).on(b,function(){c.call(d||this)})};k.getView=function(){return this.rootBox},k.updateHeader=function(a,b){this.data[a]=b,this.set(this.data),this.show()},k.html=null,k.htmlMap={home:'<i class="icon_home i_bef" id="c-ui-header-home"></i>',tel:'<a href="tel:<%=tel.number||4000086666 %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a>',customtitle:"<div><%=customtitle %></div>",title:"<h1><%=title %></h1>",back:'<i id="c-ui-header-return" class="returnico i_bef"></i>',btn:'<i id="<%=btn.id%>" class="<%=btn.classname%>"><%=btn.title %></i>',custom:"<%=custom %>"},k.create=function(){this.isCreate||this.status===b.AbstractView.STATE_ONCREATE||(this.rootBox=this.rootBox||$("body"),this.rootBox.empty(),this.root=$(this.createHtml()),this.rootBox.append(this.root),setTimeout($.proxy(function(){e.replaceContent(this.root)},this),200),d.isInApp()||this.rootBox.css("height",this.root.css("height")),this.trigger("onCreate"),this.status=b.AbstractView.STATE_ONCREATE,this.isCreate=!0)},k.hideHandler=function(){d.isInApp()?this.isHidden||(f.request({name:f.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!0}),this.isHidden=!0):this.hide()},k.showAction=function(a){d.isInApp()?(this.rootBox.hide(),this.isHidden&&(f.request({name:f.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!1}),this.isHidden=!1),this.saveHead()):this.root.show(),a()},k.saveHead=function(){var a={left:[],center:[],centerButtons:[],right:[]},b=this.data;b.back&&a.left.push({tagname:"back"}),b.title&&a.center.push({tagname:"title",value:b.title}),b.subtitle&&a.center.push({tagname:"subtitle",value:b.subtitle}),b.btn&&a.right.push({tagname:"commit",value:b.btn.title}),b.tel&&a.right.push({tagname:"call"}),b.home&&a.right.push({tagname:"home"}),b.citybtn&&a.centerButtons.push({tagname:"cityChoose",value:b.citybtn,a_icon:"icon_arrowx",i_icon:"icon_arrowx.png"});try{var c=JSON.stringify(a);f.request({name:f.METHOD_REFRESH_NAV_BAR,config:c})}catch(d){}},c.register({name:h,fn:g})}}),define("cWidgetListView",["cBase","cUICore","cWidgetFactory"],function(a,b,c){var d="ListView";if(!c.hasWidget(d)){var e=function(b){for(var c=new a.Hash,d=0;d<b.length;d++)c.add($(b[d]).data("hash"),$(b[d]));return c},f=f||{};f.__propertys__=function(){},f.initialize=function($super,a){if(a.container&&(this.rootBox=a.container),this.noResultText="您还没有记录哦",this.autoEmptyView="undefined"!=typeof a.autoEmptyView?a.autoEmptyView:!0,a.noResultText&&(this.noResultText=a.noResultText),a.listadapter&&(this.listadapter=a.listadapter,this.listadapter.regiseterObserver(this)),a.origin&&(this.origin=a.origin),!a.itemView)throw"ListView:no item view template";this.templateFactory=this.template(a.itemView),this.bindItemViewEvent=a.bindItemViewEvent,this.onUpdatePrepared=a.onUpdatePrepared,this.onUpdateFinished=a.onUpdateFinished,$super(a)},f.createHtml=function(){return this.update()},f.createItemView=function(a,b){var c=this.templateFactory(a);return $(c).addClass("c-item-view").data("hash",b)},f.update=function(){var b=this.rootBox.find(".c-item-view");this.map=e(b),this.onUpdatePrepared&&"function"==typeof this.onUpdatePrepared&&this.onUpdatePrepared();var c=new a.Hash,d=this,f=function(a,b,e){var f=d.map.getItem(b);f||(a.C_ITEM_INDEX=e,a.__origin__=d.origin,f=d.createItemView(a,b),d.bindItemViewEvent(f)),c.add(b,f)};if(this.listadapter.map.each(f),this.rootBox.hide(),this.rootBox.empty(),this.listadapter.list.length>0){var g=function(a){d.rootBox.append(a)};c.each(g)}else this.autoEmptyView&&this.rootBox.append('<div class="cui-load-error"><div class="cui-i cui-wifi cui-exclam"></div>'+this.noResultText+"</div>");this.rootBox.show(),this.onUpdateFinished&&"function"==typeof this.onUpdateFinished&&this.onUpdateFinished()},f.onUpdatePrepared=function(){},f.onUpdateFinished=function(){},f.openAutoEmptyView=function(){this.autoEmptyView=!0},f.closeAutoEmptyView=function(){this.autoEmptyView=!1};var g=new a.Class(b.AbstractView,f);c.register({name:d,fn:g})}}),define("cWidgetTipslayer",["cBase","cUICore","cWidgetFactory","cUIScroll"],function(a,b,c,d){var e="TipsLayer";if(!c.hasWidget(e)){var f=new a.Class(b.Layer,{__propertys__:function(){this.showTitle=!0,this.contentDom,this.title="",this.body="",this.mask=new b.Mask({classNames:[b.config.prefix+"opacitymask"]});var a=this;this.mask.addEvent("onShow",function(){this.setzIndexTop(-1),$(window).bind("resize",this.onResize),this.onResize();var b=this;this.root.bind("click",function(){b.hide(),b.root.unbind("click"),a.hide()})}),this._loadButtonHtml=function(){if(0==this.buttons.length)return"";var a=['<div class="cui-roller-btns">'];return $.each(this.buttons,function(b,c){var d="cui-btns-sure";"cancle"==c.type&&(d="cui-btns-cancle"),a.push('<div class="cui-flexbd '+d+'">'+c.text+"</div>")}),a.push("</div>"),a.join("")},this.html=""},initialize:function($super,a){$super({onCreate:function(){},onShow:function(){this.title=a.title||"",this.buttons=a.buttons||[],this.html=a.html||"","undefined"!=typeof a.showTitle&&(this.showTitle=a.showTitle),this.html=$(this.html),this.btns=$(this._loadButtonHtml()),this.header=a.header,this.footer=a.footer,this.buttons=a.buttons||[],this.contentDom.html(['<div class="cui-pop-box">','<div class="cui-hd">'+this.title+'<div class="lab-close-area"><span class="cui-top-close">×</span></div></div>','<div class="cui-bd" style="overflow: hidden; position: relative; background-color: #fafafa; width: 100%;">',"</div>","</div>"].join("")),a.width&&this.contentDom.find(".cui-pop-box").css({width:a.width+"px"}),this.mask.show(),this.reposition(),this.closeDom=this.contentDom.find(".cui-top-close").parent(),this.body=this.contentDom.find(".cui-bd"),this.header&&this.body.before($(this.header)),this.footer&&this.body.after($(this.footer)),this.html.length>1&&(this.html=$('<div style="width: 100%;"></div>').append(this.html)),this.html.css("background-color","white"),this.body.append(this.html);var b=parseInt(.7*$(window).height()),c=a.height||b,e=this.html.height();c>b&&(c=b),e>c&&this.body.css({height:c+"px"}),this.showTitle||this.contentDom.find(".cui-hd").hide();var f={wrapper:this.body,scroller:this.html};$.extend(f,a),this.s=new d(f),this.contentDom.find(".cui-pop-box").append(this.btns);var g=this;this.closeDom.on("click",function(){g.hide()}),$.each(this.btns.children(),function(a,b){var c=g.buttons[a].click;$(b).on("click",function(){c.call(g)})}),this.setHtml=function(a){g.body.html(a)}},onHide:function(){this.s&&this.s.destroy(),this.mask.hide(),this.closeDom.off("click"),this.root.remove(),this.mask.root.remove()}})}});c.register({name:e,fn:f})}}),define("cWidgetInputValidator",["cBase","cUICore","cWidgetFactory","cUtility","libs"],function(cBase,cUICore,WidgetFactory,util){var validate=util.validate,WIDGET_NAME="InputValidator";if(!WidgetFactory.hasWidget(WIDGET_NAME)){var InputValidator=new cBase.Class(cUICore.Layer,{__propertys__:function(){this.TypeMsg={idCard:"身份证格式错误",num:"不是数字",email:"email格式错误",phone:"手机格式错误",chinese:"不是中文",password:"密码格式错误"},this.validatorArr={}},initialize:function($super,a){a=a||{},$super(a),this.requredMsg=a.requredMsg||"该项必填",this.rangeMsg=a.rangeMsg||"您输入的字符范围错误",this.regexMsg=a.regexMsg||"格式错误",this.compareMsg=a.compareMsg||"对比不成立",this.els=a.els||$(".formValidate"),this.msgPosition=a.msgPosition||"bottom",this.isShowMsg=a.isShowMsg||!1,this.init()
},init:function(){for(var a=0,b=this.els.length;b>a;a++){var c=$(this.els[a]);this.initItem(c)}},initItem:function(el,insertType){var scope=this;"string"==typeof el&&(el=$("#"+el));var cfg=el.attr("data-cfg");if(!cfg||0==cfg.length)return!1;if(cfg=eval("("+cfg+")"),cfg.check!==!1&&(cfg.check=!0),insertType&&(cfg.check=!0),cfg.check===!1)return!1;cfg.id=el.attr("id")||"_"+Math.random(),cfg.el=el,cfg.validate=function(){scope.funcValidate(cfg)},this.validatorArr[cfg.id]=cfg;var s=""},validate:{requred:function(a){return""==a?!1:!0},regex:function(a,b){return b.test(a)?!0:!1},range:function(a,b){var c=b.split("|");return 3!=c.length?(0,!1):this["_"+c[0]](a,c[1],c[2])},_num:function(a,b,c){return a=parseInt(a),a>b&&c>a?!0:!1},_str:function(a,b,c){return a.length>b&&a.length<c?!0:!1},_date:function(){return!0},compare:function(a,b){var c=b.split("|");return 3!=c.length?(0,!1):this["_c"+c[0]](a,$("#"+c[1]).val(),c[2])},_cnum:function(a,b,c){if(a=parseInt(a),b=parseInt(b),"<"==c){if(b>a)return!0}else if("="==c){if(a==b)return!0}else if(">"==c&&a>b)return!0;return!1},_cstr:function(a,b,c){if(a=a.length,b=b.length,"<"==c){if(b>a)return!0}else if("="==c){if(a==b)return!0}else if(">"==c&&a>b)return!0;return!1},_cdate:function(){return!0}},funcValidate:function(a){if(void 0===this.validatorArr[a.id])return!1;var b=a.el.val()||a.el.html().replace(/(^\s*)|(\s*$)/g,""),c={};if(c.isPass=!0,c.el=a.el,c.id=a.id,c.errorItem={},this.validatorArr[a.id].check===!1)return this.validatorArr[a.id].result=c,!1;if(a.requred&&(c.errorItem.requred=this.validate.requred(b),c.errorItem.requred===!0?c.isPass=!0:(c.isPass=!1,c.msg=this.requredMsg)),c.isPass&&"string"==typeof a.type&&""!=b){var d=a.type;d="is"+d.substr(0,1).toUpperCase()+d.substr(1,d.length),c.errorItem[a.type]=validate[d](b),c.errorItem[a.type]===!0?c.isPass=!0:(c.isPass=!1,c.msg=this.TypeMsg[a.type]||"格式错误")}c.isPass&&a.regexObj&&""!=b&&(c.errorItem.regex=this.validate.regex(b,a.regexObj),c.errorItem.regex===!0?c.isPass=!0:(c.isPass=!1,c.msg=a.errorMsg||this.regexMsg)),c.isPass&&a.rangeObj&&""!=b&&(c.errorItem.range=this.validate.range(b,a.rangeObj),c.errorItem.range===!0?c.isPass=!0:(c.isPass=!1,c.msg=a.errorMsg||this.rangeMsg)),c.isPass&&a.compareObj&&""!=b&&(c.errorItem.compare=this.validate.compare(b,a.compareObj),c.errorItem.compare===!0?c.isPass=!0:(c.isPass=!1,c.msg=a.errorMsg||this.compareMsg)),this.validatorArr[a.id].result=c},showMsg:function(a){this.msgTimer&&clearTimeout(this.msgTimer);for(var b=$("body"),c=0,d=a.length;d>c;c++){var e=$("#"+a[c].id+"Tips");if(!e[0]){e=$('<div class="validateTips validateError" id="'+a[c].id+'Tips"><div class="triangle_icon"><div class="before"></div><div class="after"></div></div>'+a[c].msg+"</div>");var f=a[c].el.offset(),g=parseInt(a[c].el.height()),h=parseInt(a[c].el.width()),i=f.left,j=f.top;"bottom"==this.msgPosition?(e.addClass("posBottom"),j+=g+4):"right"==this.msgPosition?(e.addClass("posRight"),i+=h+6):"top"==this.msgPosition&&(e.addClass("posTop"),j+=-1*g-8),e.css({left:i,top:j}),b.append(e)}}this.msgTimer=setTimeout(function(){$(".validateTips").remove()},3e3)},validateAll:function(a,b,c){for(var d in this.validatorArr){var e=this.validatorArr[d];e.validate()}var f=this.getValidatorState();f===!0?"function"==typeof a&&a.call(c):(this.isShowMsg&&this.showMsg(f),"function"==typeof b&&b.call(c,f))},removeValidator:function(a){if(a&&this.validatorArr[a]){{this.validatorArr[a]}this.validatorArr[a].check=!1}},addValidator:function(a){"string"==typeof a&&(a=$("#"+a)),this.initItem(a,"add")},getValidatorState:function(){var a=!0,b=[];for(var c in this.validatorArr)0==this.validatorArr[c].result.isPass&&(a=!1,b.push(this.validatorArr[c].result));return a?!0:b}});WidgetFactory.register({name:WIDGET_NAME,fn:InputValidator})}}),define("cWidgetPublisher",["cUtility","cWidgetFactory","CommonStore"],function(a,b,c){var d="Publisher",e=!1;if(!b.hasWidget(d)){var f=f||{},g={non_member_login:function(a){h.non_member_login=function(b){a.callback(b)}},locate:function(a){h.locate=function(b){try{var c=b;"string"==typeof b&&(c=JSON.parse(b)),a.success(c)}catch(d){a.error(!0,"定位失败")}}},login:function(a){h.login=function(b){"string"==typeof b&&(b=JSON.parse(b));{var d=c.UserStore.getInstance();d.getUser()}d.setUser(b.data);var e=c.HeadStore.getInstance(),f=e.get();f.auth=b.data.Auth,e.set(f),"function"==typeof a.success&&a.success()}},back:function(a){h.back=a.callback},commit:function(a){h.commit=a.callback}},h={refresh:function(){window.location.reload()}},i={non_member_login:function(a){"function"==typeof h.non_member_login&&h.non_member_login(a)},locate:function(a){"function"==typeof h.locate&&h.locate(a)},login:function(a){"function"==typeof h.login&&h.login(a)},back:function(){"function"==typeof h.back&&h.back()},commit:function(){"function"==typeof h.commit&&h.commit()}},j={callback:function(a){if(!e){var b=a;if("string"==typeof a)try{b=JSON.parse(window.decodeURIComponent(a))}catch(c){setTimeout(function(){0},0)}document.activeElement.blur(),"function"==typeof i[b.tagname]&&i[b.tagname](b.param)}}},k=function(a){for(var b in j)a[b]=a[b]||j[b]};f.setApi=function(){if(a.isInApp()){var b=window.app=window.app||{};k(b)}},f.register=function(b){a.isInApp()&&"function"==typeof g[b.name]&&g[b.name](b)},f.lock=function(){a.isInApp()&&(e=!0)},f.unlock=function(){a.isInApp()&&(e=!1)},f.requestEntryInfo=function(){a.isInApp()&&app_entry()},f.requestAnomyousUser=function(){a.isInApp()&&app_non_member_login()},f.monitor=function(b){a.isInApp()&&app_log_event(b)},f.sendHotelInfo=function(b,c,d,e){a.isInApp()&&app_go_to_hotel_detail(b,c,d,e)},f.requestAutoLogin=function(){a.isInApp()&&app_member_auto_login()},b.register({name:d,fn:f})}}),define("cWidgetAbstractCalendar",["cCoreInherit","cUIAbstractView","cWidgetFactory"],function(a,b,c){"user strict";var d="Abstract.Calendar";if(!c.hasWidget(d)){var e=new a.Class(b,{__propertys__:function(){this.CONSTANT={CALENDAR_CHINESE_LUNAR_INFO:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835],CALENDAR_CHINESE_WEEKDAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],CALENDAR_CHINESE_NUMBER:["日","一","二","三","四","五","六","七","八","九","十"],CALENDAR_CHINESE_CARRT:["初","十","廿","卅","　"],CALENDAR_CHINESE_HOLIDAY:{1230:"除夕","0101":"初一","0115":"元宵","0505":"端午","0707":"七夕","0815":"中秋","0909":"重阳"},CALENDAR_COMMON_HOLIDAY:{"0101":"元旦","0214":"情人节","0501":"五一",1001:"国庆",1225:"圣诞节"},CALENDAR_WEEKDAY_NAME:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},CALENDAR_WEEKDAY_SHORTNAME:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},CALENDAR_WEEKDAY_SHORTNAME2:{0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},CALENDAR_INIT_DATE:1,CALENDAR_MONTH:5,INIT_DATE_TIME:{H:0,M:0,S:0,MS:0},CALENDAR:"calendar"}},initialize:function($super,a){this.isLeapYear(this.startMonth.getFullYear())||this.isLeapYear(this.startMonth.getFullYear()-1)?(this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0404"]="清明",delete this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0405"]):(this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0405"]="清明",delete this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0404"]),$super(a)},setCalendarDate:function(a){this.dateObj="undefined"!==a?a:new Date,this.SY=this.dateObj.getFullYear(),this.SM=this.dateObj.getMonth(),this.SD=this.dateObj.getDate(),this.lunarInfo=this.CONSTANT.CALENDAR_CHINESE_LUNAR_INFO},leapMonth:function(a){return 15&this.lunarInfo[a-1900]},monthDays:function(a,b){return this.lunarInfo[a-1900]&65536>>b?30:29},leapDays:function(a){return this.leapMonth(a)?65536&this.lunarInfo[a-1900]?30:29:0},lYearDays:function(a){for(var b=348,c=32768;c>8;c>>=1)b+=this.lunarInfo[a-1900]&c?1:0;return b+this.leapDays(a)},Lunar:function(a){var b,c=0,d=0,e={},f=new Date(1900,0,31),g=(a-f)/864e5;for(e.dayCyl=g+40,e.monCyl=14,b=1900;2050>b&&g>0;b++)d=this.lYearDays(b),g-=d,e.monCyl+=12;for(0>g&&(g+=d,b--,e.monCyl-=12),e.year=b,e.yearCyl=b-1864,c=this.leapMonth(b),e.isLeap=!1,b=1;13>b&&g>0;b++)c>0&&b===c+1&&e.isLeap===!1?(--b,e.isLeap=!0,d=this.leapDays(e.year)):d=this.monthDays(e.year,b),e.isLeap===!0&&b===c+1&&(e.isLeap=!1),g-=d,e.isLeap===!1&&e.monCyl++;return 0===g&&c>0&&b===c+1&&(e.isLeap?e.isLeap=!1:(e.isLeap=!0,--b,--e.monCyl)),0>g&&(g+=d,--b,--e.monCyl),e.month=b,e.day=g+1,e},cDay:function(a,b){var c,d=this.CONSTANT.CALENDAR_CHINESE_NUMBER,e=this.CONSTANT.CALENDAR_CHINESE_CARRT;switch(c=a>10?"十"+d[a-10]:d[a],c+="月",b){case 10:c+="初十";break;case 20:c+="二十";break;case 30:c+="三十";break;default:c+=e[Math.floor(b/10)],c+=d[b%10]}return c},solarDay2:function(a){this.setCalendarDate(a);var b=new Date(this.SY,this.SM,this.SD),c=this.Lunar(b),d=(c.month>=10?c.month:"0"+c.month)+""+(c.day>=10?c.day:"0"+c.day);return c=null,d},weekday:function(){var a=this.CONSTANT.CALENDAR_CHINESE_WEEKDAY;return a[this.dateObj.getDay()]},YYMMDD:function(){var a=[this.SY,"年",this.SM+1,"月",this.SD,"日"];return a.join("")},_isDate:function(a){var b=Object.prototype.toString.call(a);return"[object Date]"===b},_objectKey:function(a){var b=[];if(a)for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},isLeapYear:function(a){return 0===a?!1:a%4!=0?!1:a%100==0&&a%400!=0?!1:!0}});c.register({name:d,fn:e})}}),define("cWidgetCalendar",["cCoreInherit","cUtility","cUIBase","cUIHashObserve","cWidgetFactory","cWidgetAbstractCalendar"],function(a,c,d,e,f){"user strict";var g="Calendar";if(!f.hasWidget(g)){var h=f.create("Abstract.Calendar"),j=new a.Class(h,{__propertys__:function(){this.chineseHoliday=this.CONSTANT.CALENDAR_CHINESE_HOLIDAY,this.holiday=this.CONSTANT.CALENDAR_COMMON_HOLIDAY,this.DAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME,this.SDAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME2,this.DAYTITLE2=this.CONSTANT.CALENDAR_WEEKDAY_NAME,this.addClass(d.config.prefix+this.CONSTANT.CALENDAR),this.startMonth=c.getServerDate(),this.startMonth.setDate(this.CONSTANT.CALENDAR_INIT_DATE),this.Months=this.CONSTANT.CALENDAR_MONTH,this.validStartDate=c.getServerDate(),this.validStartDate.setHours(this.CONSTANT.INIT_DATE_TIME.H,this.CONSTANT.INIT_DATE_TIME.M,this.CONSTANT.INIT_DATE_TIME.S,this.CONSTANT.INIT_DATE_TIME.MS),this.validEndDate,this.date,this.dateVal={},this.titledom,this.leftback,this.cls=[this.CONSTANT.CALENDAR],this.title,this.noabsolute=!1,this.curDate,this.dateDoms={},this._chineseHoliday={},this.html,this.clickEnabled=!0,this.msg="",this.callback=function(){},this.hashObserve=new e({hash:this.id,callback:function(){this._hide()},scope:this}),this.animatSwitch=!1,this.timeNum=250},initialize:function($super,a){this.setOption(function(a,b){switch(a){case"Months":case"timeNum":case"date":case"curDate":case"root":case"callback":case"title":case"noabsolute":case"msg":case"clickEnabled":case"animatSwitch":this[a]=b;break;case"cls":this.cls.push(b);break;case"validStartDate":case"validEndDate":this[a]=b,this[a].setHours(0,0,0,0);break;case"startMonth":this[a]=b,this[a].setDate(1)}}),$super(a),this.buildEvent()},selectedDate:function(){var a;for(var b in this.date)a=this.root.find("."+this.buildSelectCls(b))[0],this.dateDoms[b]=a,this.dateVal[b]=this.date[b].value;!this.curDate&&(this.curDate=b)},buildEvent:function(){this.addEvent("onCreate",this.onCreate),this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},buildElement:function(){this.titledom=this.root.find("header"),this.leftback=this.root.find("#js_return")},onCreate:function(){this.selectedDate(),this.buildElement(),this.buildElementsEvent(),this.noabsolute||this.root.css({position:"absolute"}),this.windowResizeHander=$.proxy(this.position,this)},onShow:function(){if(this.root.css({top:0,left:0,width:"100%"}),$(window).bind("resize",this.windowResizeHander),this.setzIndexTop(),this.hashObserve.start(),this.animatSwitch){var a=this;window.scrollTo(0,0),this.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)",top:"0px"},0,function(){a.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)"},a.timeNum,function(){a.windowResizeHander()})})}},position:function(){this.root.css({left:"0px",top:"0px"});var a=d.getPageSize();this.root.css({width:$(window).width(),height:a.height})},onHide:function(){$(window).unbind("resize",this.windowResizeHander),this.hashObserve.end()},createHtml:function(){return this.createCalendar()},buildElementsEvent:function(){var a=this;this.clickEnabled&&this.root.delegate(".cui_cld_daybox li","click",function(){b=$(this),b.hasClass("valid")||(b=b.closest(".valid"));var d=b.attr("data-date");d&&(d=c.Date.parse(d).valueOf(),a.isAccordBound(d)&&a._setDate(d,b))}),this.root.delegate("#js_return","click",$.proxy(function(){this._hide()},this))},_hide:function(){if(this.animatSwitch){var a=this;this.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)",top:"0px"},0,function(){a.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)"},a.timeNum,function(){a.hide()})})}else this.hide()},isAccordBound:function(a){var b=this.date[this.curDate];if(!b.bound)return!0;if(!b.bound.rules||!b.bound.error)return!0;var c,d=b.bound.rules;for(var e in d)if(c="string"==typeof d[e]?this.dateVal[d[e]]:this._isDate(d[e])&&d[e],a.setHours(0,0,0,0),c)switch(c.setHours(0,0,0,0),e){case"<":if(!(c>a))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case">":if(!(a>c))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case"<=":if(!(c>=a))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case">=":if(!(a>=c))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1}return!0},_setDate:function(a,b){var d=this.root.find("."+this.buildSelectCls(this.curDate));d.each($.proxy(function(a,b){var e=$(b);e.html(this.formatTitle(c.Date.parse(d.attr("data-date")).valueOf())),e.removeClass(this.buildSelectCls(this.curDate)),e.removeClass(this.buildSelectCls())},this)),this.dateDoms[this.curDate]=b;var e,f=$(b),g=this.date[this.curDate].title;e="function"==typeof g?this.formatTitle2(g):this.formatTitle,f.html(e.call(this,a)),f.removeClass("cui_cld_dayfuture"),f.removeClass("cui_cld_day_hint"),f.addClass("cui_cld_day_havetxt"),f.addClass(this.buildSelectCls(this.curDate)),f.addClass(this.buildSelectCls()),this.dateVal[this.curDate]=a,this.callback&&this.callback.call(this,a,this.curDate,this.dateVal,this.getDateInfo(a),this.calendarend)},setCurDate:function(a){this.curDate=a,this.create();var b=this.getCurTitle();this.titledom.html(b)},getEndDate:function(){return this.calendarend},buildSelectCls:function(a){return a?"selected-"+a:"cui_cld_daycrt"},getCurTitle:function(){var a=this.date[this.curDate],b="";return a&&(b=a.headtitle||this.title),b||this.title},createCalendar:function(){var a,b=[],d=this.getCurTitle(),e=c.isInApp(),f=e?' style=" margin-top: 0"':"";this.title&&!e&&b.push(["<header>","<h1>"+d+'</h1><i class="returnico i_bef" id="js_return"></i>',"</header>"].join("")),b.push(['<article class="cont_wrap"',f,'><div class="cui_cldwrap">'].join("")),b.push(this.createWeek(e));for(var g=0;g<this.Months;g++)a=new Date(this.startMonth),a.setMonth(a.getMonth()+g),b.push(this.createMonth(a));return b.push(["</div></atricle>"].join("")),b.join("")},createWeek:function(a){var b=a?" cui_cldweek_top0":"",c=['<ul class="cui_cldweek'+b+'">'];this.msg&&c.push('<p  class="cui_cldmsg">'+this.msg+"</p>");for(i in this.SDAYTITLE)c.push("<li>"+this.SDAYTITLE[i]+"</li>");return c.push("</ul>"),c.join("")},createMonth:function(a){var b,d=this.calcStructData(a),e=[];e.push('<section class="cui_cldunit">'),e.push('<h1 class="cui_cldmonth">'+c.Date.format(a,"Y年n月")+"</h1>"),e.push('<ul class="cui_cld_daybox">');for(var f,g,h=d.days.length,b=0;h>b;b++){g=d.days[b].length;for(var i=0;g>i;i++){f={};var j=d.days[b][i];if(j){var k=this.validStartDate||d.start,l=this.validEndDate||d.end;j>=k&&l>=j?f.valid=!0:(f.cui_cld_daypass=!0,f.invalid=!0)}else f.cui_cld_dayfuture=!0,f.invalid=!0;var m,n=this.getDateInfo(j);if(n?(m=n.daytitle||n.holiday||n.chineseday,m?(f.cui_cld_day_havetxt=!0,(n.holiday||n.chineseday)&&(f.cui_cld_day_hint=!0),m="<em>"+n.date+"</em><i>"+m+"</i>"):m="<em>"+n.date+"</em>"):m="",this.date)for(var o in this.date)j&&c.Date.format(this.dateVal[o]||this.date[o].value,"Y-m-d")==c.Date.format(j,"Y-m-d")&&(delete f.cui_cld_dayfuture,delete f.cui_cld_day_hint,f.cui_cld_day_havetxt=!0,f[this.buildSelectCls()]=!0,f[this.buildSelectCls(o)]=!0,m=this.date[o].title(j,function(){return n.daytitle||n.holiday||n.chineseday||n.date}),m="<em>"+m+"</em>");e.push('<li data-date="'+c.Date.format(j,"Y-m-d")+'" '+(f?' class="'+this._objectKey(f).join(" ")+'"':"")+">"+m+"</li>")}}return e.push("</ul></section>"),e.join("")},formatTitle:function(a){if(a){var b=this.getDateInfo(a);return b.holiday||b.chineseday||b.daytitle||b.date}return""},getDateInfo:function(a){if(a){var b=c.getServerDate(),d=new Date(a);d.setHours(1,1,1,0),b.setHours(1,1,1,0);var e=(d-b)/864e5,f={};f.daytitle=c.Date.format(b,"Ymd")==c.Date.format(a,"Ymd")?"今天":1==e?"明天":2==e?"后天":"";var g=this.solarDay2(a);this.chineseHoliday[g]&&!this._chineseHoliday[g]?(this._chineseHoliday[g]=1,f.chineseday=this.chineseHoliday[g]):f.chineseday="";var h=c.Date.format(a,"md");return f.holiday=this.holiday[h]?this.holiday[h]:"",f.week=this.DAYTITLE[a.getDay()],f.week2=this.DAYTITLE2[a.getDay()],f.date=c.Date.format(a,"j"),f}},formatTitle2:function(a){return $.proxy(function(b){return a(b,$.proxy(function(a){return this.formatTitle(a)},this))},this)},calcStructData:function(a){var b=new Date(a),c=new Date(a);b.setDate(1),b.setHours(0,0,0,0);var d=b.getDay();c.setMonth(c.getMonth()+1,1),c.setHours(-24,0,0,0);for(var e,f=c.getDay(),g=(c.getDate()+(d+(6-f)))/7,h=[],i=0,j=0;g>i;i++){h[i]=[];for(var k=0;7>k;k++)if(0==i&&d>k)h[i].push("");else{if(e=new Date(b),e.setDate(e.getDate()+j),e>c)break;h[i].push(e),j++}}return this.calendarend=c,{start:b,end:c,days:h,loops:g}},setDate:function(a){this.create();for(var b in a)if(this.date[b]&&this._isDate(a[b])){a[b].setHours(0,0,0,0),this.date[b].value=a[b],this.dateVal[b]=a[b];var d=this.root.find("."+this.buildSelectCls(b));if(d.length){var e=c.Date.parse(d.data("date")).valueOf();d.removeClass(this.buildSelectCls(b)),d.removeClass(this.buildSelectCls()),d.html(this.formatTitle(e))}var f=this.root.find('[data-date="'+c.Date.format(a[b],"Y-m-d")+'"]');f.each($.proxy(function(c,d){d=$(d),d.hasClass("valid")&&(d.addClass(this.buildSelectCls(b)),d.addClass(this.buildSelectCls()),d.html(this.formatTitle2(this.date[b].title)(a[b])))},this)),this.dateDoms[b]=f}},addDate:function(a,b){this.create();var d,e,f;for(var g in a)if(!this.date[g]||b){this.date[g]=a[g],d=this.date[g]&&this.date[g].value,e=this.date[g]&&this.date[g].title,e="function"==typeof e?this.formatTitle2(e):$.proxy(this.formatTitle,this);var h=this.root.find("."+this.buildSelectCls(g));h.length&&(h.removeClass(this.buildSelectCls(g)),h.removeClass(this.buildSelectCls())),d&&(f=this.root.find('[data-date="'+c.Date.format(d,"Y-m-d")+'"]'),f.each($.proxy(function(a,b){b=$(b),b.hasClass("valid")&&(b.html(e(d)),b.addClass(this.buildSelectCls(g)),b.addClass(this.buildSelectCls()),this.dateVal[g]=d)},this)))}},removeDate:function(a){this.create();for(var b,d=0,e=a.length;e>d;d++)if(b=a[d],this.date[b]){var f=this.root.find("."+this.buildSelectCls(b));f.each($.proxy(function(a,d){var e=$(d);e.removeClass(this.buildSelectCls(b)),e.removeClass(this.buildSelectCls()),e.html(this.formatTitle(c.Date.parse(e.data("date")).valueOf()))},this)),delete this.date[b],delete this.dateVal[b]}},getDate:function(){var a={};for(var b in this.date)a[b]=this.date[b].value;return _.isEmpty(this.dateVal)?_.isEmpty(a)?{}:a:this.dateVal},update:function(a){this.setOption(function(a,b){switch(a){case"Months":case"date":case"curDate":case"root":case"callback":case"title":case"noabsolute":this[a]=b;break;case"cls":this.cls.push(b);break;case"validStartDate":case"validEndDate":this[a]=b,this[a].setHours(0,0,0,0);break;case"startMonth":this[a]=b,this[a].setDate(1)}}),this.readOption(a),this._chineseHoliday={},this.create(),this.root.html(this.createCalendar()),this.trigger("onChange")}});f.register({name:g,fn:j})}}),define("cWidgetCalendarPrice",["cCoreInherit","cUtility","cUIBase","cWidgetFactory","cWidgetAbstractCalendar","cWidgetGuider"],function(a,c,d,e){"user strict";var f="Calendar.Price",g=0;if(!e.hasWidget(f)){var h=e.create("Guider"),j=e.create("Abstract.Calendar"),k=new a.Class(j,{__propertys__:function(){this.chineseHoliday=this.CONSTANT.CALENDAR_CHINESE_HOLIDAY,this.holiday=this.CONSTANT.CALENDAR_COMMON_HOLIDAY,this.DAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME,this.SDAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME2,this.addClass(d.config.prefix+this.CONSTANT.CALENDAR),this.showChineseHoliday=!0,this.showHoliday=!0,this.startMonth=c.getServerDate(),this.startMonth.setDate(this.CONSTANT.CALENDAR_INIT_DATE),this.Months=this.CONSTANT.CALENDAR_MONTH,this.validStartDate=c.getServerDate(),this.validStartDate.setHours(this.CONSTANT.INIT_DATE_TIME.H,this.CONSTANT.INIT_DATE_TIME.M,this.CONSTANT.INIT_DATE_TIME.S,this.CONSTANT.INIT_DATE_TIME.MS),this.validEndDate,this.date,this.onlyread=!1,this.dateVal={},this.cls=[this.CONSTANT.CALENDAR],this.curDate,this.dateDoms={},this.html,this.windowResizeHander,this.animatSwitch=!1,this.lowerPriceClass="",this.holidayClass="",this.todayClass="",this.lowestpriceMap={},this._chineseHoliday={},this._formatPrice=function(a,b){return b(a)},this.callback=function(){},this.title=!1,this.returnCallback=function(){}},initialize:function($super,a){this.setOption(function(a,b){switch(a){case"Months":case"curDate":case"root":case"callback":case"onlyread":case"title":case"returnCallback":case"showChineseHoliday":case"animatSwitch":case"lowerPriceClass":case"holidayClass":case"todayClass":this[a]=b;break;case"date":if(b)for(var c in b)this.dateVal[c]=b[c].value;this[a]=b;break;case"formatPrice":this._formatPrice=b;break;case"showHoliday":this[a]=b;break;case"validDates":this[a]=b;break;case"cls":this.cls.push(b);break;case"validStartDate":case"validEndDate":this[a]=b,this[a].setHours(1,1,1,0);break;case"startMonth":this[a]=b,this[a].setDate(1)}}),$super(a),this.buildEvent(),this.lowerPriceClass&&this.validDates&&this.sortMonthPrice()},sortMonthPrice:function(){this.lowestpriceMap={};var a=this;$.each(this.validDates,function(b){var c=a.validDates[b].date;return"undefined"==typeof a.lowestpriceMap[c.getFullYear().toString()+c.getMonth().toString()]?void(a.lowestpriceMap[c.getFullYear().toString()+c.getMonth().toString()]=a.validDates[b].price):a.lowestpriceMap[c.getFullYear().toString()+c.getMonth().toString()]>a.validDates[b].price?void(a.lowestpriceMap[c.getFullYear().toString()+c.getMonth().toString()]=a.validDates[b].price):void 0})},selectedDate:function(){var a;for(var b in this.date)a=this.root.find("."+this.buildSelectCls(b))[0],this.dateDoms[b]=a,this.dateVal[b]=this.date[b].value;!this.curDate&&(this.curDate=b)},buildEvent:function(){this.addEvent("onCreate",this.onCreate),this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},onCreate:function(){this.selectedDate(),this.buildElementsEvent(),this.root.css({position:"absolute"}),this.windowResizeHander=$.proxy(this.position,this)},onShow:function(){$(window).bind("resize",this.windowResizeHander),this.root.css("z-index","1000"),this.windowResizeHander(),setTimeout(this.windowResizeHander,100);var a=this;if(h.apply({hybridCallback:function(){a.root.find(".cui_cldweek").css("top","0")},callback:function(){}}),this.animatSwitch){var a=this;window.scrollTo(0,0),this.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)",top:"0px"},0,function(){a.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)"},a.timeNum,function(){a.windowResizeHander()})})}},position:function(){this.root.css({left:"0px",top:"0px"});var a=d.getPageSize();this.root.css({width:$(window).width(),height:a.height})},onHide:function(){$(window).unbind("resize",this.windowResizeHander)},createHtml:function(){return this.createCalendar()},buildElementsEvent:function(){var a=this;this.root.delegate("li.valid","click",function(){b=$(this),b.hasClass("valid")||(b=b.closest(".valid"));var d=c.Date.parse(b.attr("data-date")).valueOf();a.isAccordBound(d)&&a._setDate(d,b)}),this.root.delegate("#js_return","click",$.proxy(function(){this.returnCallback&&this.returnCallback(),this.hide()},this))},_hide:function(){if(this.animatSwitch){var a=this;this.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)",top:"0px"},0,function(){a.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)"},a.timeNum,function(){a.hide()})})}else this.hide()},isAccordBound:function(a){var b=this.date[this.curDate];if(!b.bound)return!0;if(!b.bound.rules||!b.bound.error)return!0;var c,d=b.bound.rules;for(var e in d)switch(c="string"==typeof d[e]?this.dateVal[d[e]]:this._isDate(d[e])&&d[e],e){case"<":if(!(c>a))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case">":if(!(a>c))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case"<=":if(!(c>=a))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case">=":if(!(a>=c))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1}return!0},_setDate:function(a,b){if(!this.onlyread){if(this.dateDoms[this.curDate]){var c=$(this.dateDoms[this.curDate]);c.removeClass(this.buildSelectCls(this.curDate)),c.removeClass(this.buildSelectCls())}this.dateDoms[this.curDate]=b;var d,e=$(b),f=this,g=this.date[this.curDate].title;d="function"==typeof g?function(a){return g(a,function(a){return f.formatTitle(a)})}:this.formatTitle;{var h=parseFloat(parseInt(100*(b.attr("data-price")||0))/100);$.proxy(this.formatPrice,this)}e.addClass(this.buildSelectCls(this.curDate)),e.addClass(this.buildSelectCls()),this.dateVal[this.curDate]=a;var i=($.grep(this.validDates,function(b){var c=b.date.valueOf()==a.valueOf();return c}),e.html().replace(/^\d+/gm,""));isNaN(i)===!1&&(i=this.DAYTITLE[a.getDay()]),this.callback&&this.callback.call(this,a,h,i,this.dateVal)}},setCurDate:function(a){this.curDate=a},buildSelectCls:function(a){return a?"selected-"+a:"cui_cld_daycrt"},createCalendar:function(){var a,b=[];this.title&&b.push(["<header>","<h1>"+this.title+'</h1><i class="returnico i_bef" id="js_return"></i>',"</header>"].join("")),b.push(['<article class="cont_wrap" style="margin: 0 0 0">','<div class="cui_cldwrap">'].join("")),b.push(this.createWeek());for(var c=0;c<this.Months;c++)a=new Date(this.startMonth),a.setMonth(a.getMonth()+c),b.push(this.createMonth(a));return b.push(["</div></atricle>"].join("")),b.join("")},createWeek:function(){var a=['<ul class="cui_cldweek">'];for(i in this.SDAYTITLE)a.push("<li>"+this.SDAYTITLE[i]+"</li>");return a.push("</ul>"),a.join("")},createMonth:function(a){var b,d=this.calcStructData(a),e=[];e.push('<section class="cui_cldunit">'),e.push('<h1 class="cui_cldmonth">'+c.Date.format(a,"Y年n月")+"</h1>"),e.push('<ul class="cui_cld_daybox">');var f,h,i=d.days.length,j=this;0;for(var b=0;i>b;b++){h=d.days[b].length;for(var k=0;h>k;k++){g++,f={};var l=d.days[b][k];if(l){var m=this.validStartDate||d.start,n=this.validEndDate||d.end;l>=m&&n>=l?(f.cui_cld_dayfuture=!0,f.valid=!0):(f.cui_cld_daypass=!0,f.invalid=!0)}else f.cui_cld_dayfuture=!0,f.invalid=!0;var o="",p="";if(this.validDates&&l){var q=$.grep(this.validDates,function(a){return a.date.getFullYear()===l.getFullYear()&&a.date.getMonth()===l.getMonth()&&a.date.getDate()===l.getDate()?!0:!1});0===q.length?(delete f.valid,f.invalid=!0):(f.cui_cld_day_havetxt=!0,o=q[0].price,p=l.getFullYear().toString()+l.getMonth().toString())}var r=this.formatTitle;if(this.date)for(var s in this.date)this.dateVal[s]&&f.valid&&c.Date.format(this.dateVal[s]||this.date[s].value,"Y-m-d")==c.Date.format(d.days[b][k],"Y-m-d")&&(delete f.cui_cld_dayfuture,delete f.cui_cld_day_hint,f[this.buildSelectCls()]=!0,f[this.buildSelectCls(s)]=!0,r=function(a){return function(b){return a(b,function(a){return j.formatTitle(a)})}}(this.date[s].title));var t=$.proxy(this.formatPrice,this),u=this._formatPrice(o,t,!!f.valid);o&&this.lowerPriceClass&&p&&this.lowestpriceMap[p]===o&&(u=u.split("<i>").join('<i class="'+this.lowerPriceClass+'">'));var v=r.call(this,l);if(l&&v!=l.getDate()){var w=c.getServerDate(),x=new Date(l);x.setHours(1,1,1,0),w.setHours(1,1,1,0);var y=(x-w)/864e5;v=2>=y?'<em class="'+this.todayClass+'">'+v+"</em>":this.holidayClass?'<em class="'+this.holidayClass+'">'+v+"</em>":"<em>"+v+"</em>"}else v="<em>"+v+"</em>";e.push('<li data-price="'+o+'" data-date="'+c.Date.format(l,"Y-m-d")+'" '+(f?' class="'+this._objectKey(f).join(" ")+'"':"")+">"+v+u+"</li>")}}return e.push("</ul></section>"),e.join("")},formatPrice:function(a){return a>0?"<i>&yen;"+a+"</i>":""},formatTitle:function(a){if(!a)return"";var b=c.getServerDate();if(c.Date.format(b,"Ymd")==c.Date.format(a,"Ymd"))return"今天";var d=new Date(a);d.setHours(1,1,1,0),b.setHours(1,1,1,0);var e=(d-b)/864e5;if(1==e)return"明天";if(2==e)return"后天";if(this.showChineseHoliday===!0){var f=this.solarDay2(a);if(this.chineseHoliday[f]&&!this._chineseHoliday[f])return this._chineseHoliday[f]=1,this.chineseHoliday[f]}if(1==this.showHoliday){var g=c.Date.format(a,"md");if(this.holiday[g])return this.holiday[g]}return c.Date.format(a,"j")},calcStructData:function(a){var b=new Date(a),c=new Date(a);b.setDate(1),b.setHours(0,0,0,0);var d=b.getDay();c.setMonth(c.getMonth()+1,1),c.setHours(-24,0,0,0);for(var e,f=c.getDay(),g=(c.getDate()+(d+(6-f)))/7,h=[],i=0,j=0;g>i;i++){h[i]=[];for(var k=0;7>k;k++)if(0==i&&d>k)h[i].push("");else{if(e=new Date(b),e.setDate(e.getDate()+j),e>c)break;h[i].push(e),j++}}return{start:b,end:c,days:h,loops:g}},setDate:function(a){for(var b in a)if(this.date[b]&&this._isDate(a[b])){a[b].setHours(1,1,1,0),this.date[b].value=a[b],this.dateVal[b]=a[b];var d=$(this.dateDoms[b]);d.removeCls(this.buildSelectCls(b)),d.removeCls(this.buildSelectCls());var e=$(this.root.query('[data-date="'+c.Date.format(a[b],"Y-m-d")+'"]')[0]);e.hasClass("valid")&&(e.addClass(this.buildSelectCls(b)),e.addClass(this.buildSelectCls())),this.dateDoms[b]=e}},getDate:function(){return this.dateVal}});e.register({name:f,fn:k})}}),define("cWidgetSlide",["cBase","cUICore","cWidgetFactory","libs"],function(a,b,c){var d="Slide";if(!c.hasWidget(d)){var e=0,f=new a.Class({__propertys__:function(){this.images=[],this.index=1,this.delay=3,this.defaultIndex,this.autoplay=!1,this.root,this.imageinter,this.imageouter,this.navbox,this.navs,this.navinter,this.container,this.interWidth,this.itemWidth,this.onchange=function(){},this.onerror=function(){},this.loop=!0,this.ENUM_STATE_EMPTY=0,this.ENUM_STATE_NOTEMPTY=1,this.state=this.ENUM_STATE_EMPTY,this.notimage="",this.notimagedom,this.setTimeoutResoure,this.isMove=!1,this.isadaptive=!1,this.dirs={left:"next",right:"pre"},this.dir="left",this.startX=0,this.startY=0},initialize:function(a){this.setOption(a),this.createLayout(),this.addImageItems();var c=function(){this.calcinterWidth(),this.state===this.ENUM_STATE_NOTEMPTY&&(this.initposition(),this.autoplay&&this.play(),this.images&&this.images.length>1&&this.buildEvent())};setTimeout($.proxy(c,this),0);var d=this;this.isadaptive&&$(window).on("resize",function(){d.calcinterWidth(),d.initposition();
var a=0;$("."+b.config.prefix+"slide-img-item img").each(function(b,c){$(c).height()>a&&(a=$(c).height())}),d.imageinter.height(a),d.imageouter.height(a),d.container.height(a)})},setOption:function(a){for(var b in a)switch(b){case"autoplay":case"defaultIndex":case"container":case"notimage":case"delay":case"dir":case"loop":case"onchange":case"onerror":case"isadaptive":this[b]=a[b];break;case"images":if(a[b]&&"string"==typeof a[b][0]){for(var c=[],d=0,e=a[b].length;e>d;d++)c.push({src:a[b][d]});this[b]=c}else this[b]=a[b]}},calcinterWidth:function(){var a=this.imageinter.find("."+b.config.prefix+"slide-img-item"),c=0;this.interWidth=c,this.itemWidth=this.imageouter.width(),a.css("width",this.itemWidth+"px"),a.each(function(){c+=$(this).width()}),this.imageinter.css("width",c+"px")},createLayout:function(){this.root=$(['<div class="'+b.config.prefix+'slide">','<div class="'+b.config.prefix+'slide-imgsouter">','<div class="'+b.config.prefix+'slide-imgsinter">',"</div>","</div>",'<div class="'+b.config.prefix+'slide-nav">','<div class="'+b.config.prefix+'slide-nav-padding">',"</div>","</div>","</div>"].join("")),this.imageouter=this.root.find("."+b.config.prefix+"slide-imgsouter"),this.imageinter=this.root.find("."+b.config.prefix+"slide-imgsinter"),this.navbox=this.root.find("."+b.config.prefix+"slide-nav"),this.navinter=this.root.find("."+b.config.prefix+"slide-nav-padding"),this.isadaptive&&this.container.height(e),this.container.empty().append(this.root)},createImageItem:function(a,c,d){var e=[b.config.prefix+"slide-img-item"];c&&e.push(b.config.prefix+"slide-img-item-current"),d&&[].push.call(e,d);var f=$(['<div class="'+e.join(" ")+'">','<a href="'+(a.link?a.link:"javascript:void(0);")+'"><img src="'+a.src+'" title="'+(a.title||"")+'"/></a>',"</div>"].join("")),g=this;return f.find("img").bind("error",function(){var a=this;setTimeout(function(){g.notimage&&(a.src=g.notimage),g.onerror&&g.onerror(a),$(a).unbind("error")},100)}),f},addImageItems:function(){for(var a=0,c=this.images.length;c>a;a++)this.addItem(this.images[a],this.defaultIndex===a);var d,e;if(this.images.length){if(this.state=this.ENUM_STATE_NOTEMPTY,d=this.createImageItem(this.images[0],null,[b.config.prefix+"slide-img-pre"]),e=this.createImageItem(this.images[Math.max(0,this.images.length-1)],null,[b.config.prefix+"slide-img-last"]),this.loop||(d.css({visibility:"hidden"}),e.css({visibility:"hidden"})),this.isadaptive){var f=this,g=d.find("img");g.on("load",function(){f.container.height(g.height())})}this.imageinter.append(d),this.imageinter.prepend(e),this.navs=this.navinter.find("."+b.config.prefix+"slide-nav-item")}else this.state=this.ENUM_STATE_EMPTY,this.addEmptyItem(this.notimage)},initposition:function(){this.go(this.index,function(){},!0),this.onchange(this.index,this.index);var a=this.calcNextIndex();this.setNavCurrent(a)},addEmptyItem:function(a){var c=[b.config.prefix+"slide-img-item",b.config.prefix+"slide-img-item-empey"];this.notimagedom=$('<div class="'+c.join(" ")+'"></div>'),this.notimagedom.append(a),this.imageinter.append(this.notimagedom)},buildEvent:function(){this.imageouter.bind("touchstart",$.proxy(this.onTouchStart,this)),this.imageouter.bind("touchmove",$.proxy(this.onTouchMove,this)),this.imageouter.bind("touchend",$.proxy(this.onTouchEnd,this)),this.imageouter.bind("touchcancel",$.proxy(this.onTouchEnd,this))},onTouchStart:function(a){if(a.preventDefault(),this.isMove)return void(this.isTouchStart=!1);this.isTouchStart=!0;var c=b.Tools.getMousePosOfElement(a.targetTouches[0],a.currentTarget);this.stop(),this.startX=c.x,this.startY=c.y,this.imageinterLeft=parseInt(this.imageinter.css("left"))},onTouchMove:function(a){if(a.preventDefault(),!this.isMove&&this.isTouchStart){{var c=b.Tools.getMousePosOfElement(a.targetTouches[0],a.currentTarget),d=c.x-this.startX;c.y-this.startY}this.imageinter.css("left",this.imageinterLeft+d+"px")}},onTouchEnd:function(a){if(a.preventDefault(),!this.isMove&&this.isTouchStart){var c=b.Tools.getMousePosOfElement(a.changedTouches[0],a.currentTarget),d=c.x-this.startX,e=(c.y-this.startY,$.proxy(function(){this.autoplay&&this.loop&&this.play()},this)),f=this.calcNextIndex()+1,g=this.images.length;d>50&&this.loop||d>50&&!this.loop&&1!==f?this.pre(e):-50>d&&this.loop||-50>d&&!this.loop&&g>f?this.next(e):this.imageinter.animate({left:this.imageinterLeft+"px"},null,e)}},createNavItem:function(a){return $(['<span class="'+b.config.prefix+"slide-nav-item"+(a?b.config.prefix+"slide-nav-item-current":"")+'"></span>'].join(""))},addItem:function(a,b){var c=this.createImageItem(a,b),d=this.createNavItem(b);this.imageinter.append(c),this.navinter.append(d)},play:function(){clearInterval(this.setTimeoutResoure),!this.images||this.images.length<2||(this.setTimeoutResoure=setInterval($.proxy(function(){this[this.dirs[this.dir]]()},this),1e3*this.delay))},stop:function(){clearInterval(this.setTimeoutResoure)},go:function(a,b,c){this.isMove=!0;var d=-(this.itemWidth*a);c?(this.imageinter.css({left:d+"px"}),this.isMove=!1,b&&b()):this.imageinter.animate({left:d+"px"},null,null,$.proxy(function(){this.isMove=!1,b&&b()},this))},next:function(a){var b=this.index;this.go(++this.index,$.proxy(function(){if(this.index===this.images.length+1){this.index=1;var c=-(this.itemWidth*this.index);this.imageinter.css({left:c+"px"})}var d=this.calcNextIndex();this.setNavCurrent(d),this.onchange(this.index,b),a&&a()},this))},setNavCurrent:function(a){this.navs.removeClass(b.config.prefix+"slide-nav-item-current"),$(this.navs.get(a)).addClass(b.config.prefix+"slide-nav-item-current")},calcNextIndex:function(){return this.index>this.images.length?0:this.index-1},pre:function(a){0==this.index&&(this.index=1);var b=this.index;this.go(--this.index,$.proxy(function(){if(0===this.index){this.index=this.images.length;var c=-(this.itemWidth*this.index);this.imageinter.css({left:c+"px"})}var d=this.calcPreIndex();this.setNavCurrent(d),this.onchange(this.index,b),a&&a()},this))},calcPreIndex:function(){return this.index<1?Math.max(0,this.images.length-1):this.index-1},empty:function(){this.stop(),this.imageinter.find("img").remove()}});c.register({name:d,fn:f})}}),define("cWidgetMember",["cUtility","cUserModel","cWidgetFactory","cHybridFacade","cUtility","cUtilityCrypt","CommonStore"],function(a,b,c,d,e,f,g){var h="Member",i=window.location.host,j="accounts.ctrip.com";i.match(/^m\.ctrip\.com/i)?j="accounts.ctrip.com":i.match(/.uat\.qa/i)?j="accounts.uat.qa.nt.ctripcorp.com":i.match(/.fat/i)||i.match(/.fws/i)?j="accounts.fat49.qa.nt.ctripcorp.com":i.match(/^(localhost|172\.16|127\.0)/i)&&(j="accounts.fat49.qa.nt.ctripcorp.com");var k={MEMBER_LOGIN:"https://"+j+"/H5Login/#login",REGISTER:"https://"+j+"/H5Register/"},l=function(a,b){var c=a,d=location,f=b&&b.param&&"string"==typeof b.param?b.param:"";if(f){f=e.getUrlParams(b.param);var g=f&&f.backurl?decodeURIComponent(f.backurl):"",h=f&&f.from?decodeURIComponent(f.from):"",i=d.protocol+"//"+d.host;e.validate.isUrl(g)?f.backurl=g:""!==g&&(f.backurl=i+g),e.validate.isUrl(h)?f.from=h:""!==h&&(f.from=i+h);var j=$.param(f);""!=j&&(c=c+"?"+j)}window.location.href=c},m={memberLogin:function(a){l(k.MEMBER_LOGIN,a)},nonMemberLogin:function(a){var c=b.NotUserLoginModel.getInstance();a=_.extend({callback:function(){}},a||{}),c.excute(a.callback,a.callback)},register:function(a){l(k.REGISTER,a)},autoLogin:function(a){var c,d=a.url||window.location.href,h=e.getUrlParam(d,"__token__"),i=g.UserStore.getInstance(),j=g.HeadStore.getInstance(),k=this;if(h){try{var l=f.Base64.decode(decodeURIComponent(h));c=JSON.parse(l)}catch(m){return void(a.callback&&a.callback())}var n=function(){i.removeUser(),j.setAuth(c.auth);var d=b.UserLoginModel.getInstance();d.param={Auth:c.auth};var e=function(b){b.UserID&&(b.Auth=c.auth,b.LoginName="",delete b.ResponseStatus,delete b.Result,i.setUser(b),i.setExpireTime(c.time)),a.callback&&a.callback()},f=function(){k.memberLogin()};d.excute(e,f)};i.getAuth()===c.auth?i.isNonUser()?n():a.callback&&a.callback():i.getAuth()!==c.auth&&n()}else a.callback&&a.callback()},app_finished_login:function(){return!1}},n={memberLogin:function(a){d.request({name:d.METHOD_MEMBER_LOGIN,callback:a.callback,isShowNonMemberLogin:a.isShowNonMemberLogin})},nonMemberLogin:function(a){d.request({name:d.METHOD_NON_MEMBER_LOGIN,callback:a.callback})},register:function(a){d.request({name:d.METHOD_REGISTER,callback:a.callback})},autoLogin:function(a){d.request({name:d.METHOD_AUTO_LOGIN,callback:a.callback})},app_finished_login:function(a){d.request({name:d.METHOD_APP_FINISHED_LOGIN,userInfo:a.userInfo,callback:a.callback})}};c.register({name:h,fn:a.isInApp()?n:m})}),define("cWidgetCaptcha",["cWidgetFactory","cStorage","c"],function(a,b,c){var d="Captcha",e=function(){};e={islock:!1,getCode:function(a,b){var d=this;if(!d.islock){b.showLoading(),this.islock=!0;a.excute(function(a){if(b.hideLoading(),d.islock=!1,0==a.rc)d.islock=!0,d.showtime(b.els.sendcodebtn);else if(2==a.rc){a.rmsg="很抱歉，您的验证次数已达上限，请明天再试";var e=new c.ui.Alert({message:a.rmsg,buttons:[{text:"确定",click:function(){this.hide();for(var a in b.els){var c=b.els[a][0];c&&"INPUT"==c.nodeName&&!c.disabled&&(c.value="")}}}]});e.show()}else a.rmsg=a.rmsg||"获取验证码失败，请重试",b.showToast(a.rmsg)},function(){d.islock=!1,b.hideLoading(),b.showToast("获取验证码失败，请重试")})}},showtime:function(a){var b=60,c=this;if(c.islock)var d=setInterval(function(){a.addClass("cgrey"),a.removeClass("cblue1"),a.text(b+"秒后重发"),(0>=b||!c.islock)&&(clearInterval(d),a.removeClass("cgrey"),a.addClass("cblue1"),a.text("免费获取"),c.islock=!1),b--},1e3)},setinit:function(){this.islock=!1}},a.register({name:d,fn:e})}),define("cCalendar",["cUtility"],function(a){function b(a){if(a%100===0){if(a%400===0)return!0}else if(a%4===0)return!0;return!1}function c(a,c){return[31,b(a)?29:28,31,30,31,30,31,31,30,31,30,31][c]}function d(){}var e=a.Date.format,f=a.getServerDate(),g=function(){var a=new Date(f);return a.setHours(0,0,0,0),a}(),h={cls:"cui-calendar",monthsNum:1,animateSwitch:"right",format:"Y-m-d",days:"min",monthFormate:"Y年n月",appendElement:"body",startTime:g,todayCls:"cui_cld_today",endTime:Number.MAX_VALUE,header:{title:"",tel:!1,home:!1,homeHandler:d},headerTemplate:'<header><h1><%= title %></h1><i id="js_return" class="returnico lefthead"></i><% if(home) { %> <i class="icon_home i_bef" id="c-ui-header-home"></i> <% } %><% if(tel) { %><a href="tel:<%= tel %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a><% } %></header>',bodyPrefixTemplate:'<article class="cont_wrap"><div class="cui_cldwrap">',daysTemplate:'<ul class="cui_cldweek"><% _.each(days, function(day) { %><li><%= day %><% }); %></ul>',monthTemplate:'<section class="cui_cldunit"><h1 class="cui_cldmonth"><%= monthFormate %></h1><ul class="cui_cld_daybox"><% _.each(month, function(day) { %><li data-date="<%= day.format %>" class="<% if (day.invalid) { print("cui_cld_invalid cui_cld_daypass"); } else { print("cui_cld_valid"); } if(day.desc) { print(" cui_cld_day_havetxt"); } if (day.cls) { print(" " + day.cls); } %>"><em><%= day.value %></em><% if (day.desc) { %><i><%= day.desc %></i><% } %><% }); %></ul></section>',bodySuffixTemplate:"</div></article>",callback:d,onShow:d,onHide:d,constant:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"]}},i=function(a){a=a||{},this.options=$.extend(!0,{},h,a),this.$el=$("<div>").addClass(this.options.cls),this.initialize.apply(this,arguments),this.render()};return i.prototype={constructor:i,initialize:d,hasPushState:history&&history.pushState,show:function(){var a=this.options,b=this.$el,c=this.animateHandler(),d=this;return this._isShow?void 0:(this.hasPushState&&this.options.header&&("undefined"!=typeof Lizard&&(Lizard.stopStateWatch=!0),history.pushState({},document.title,location.href),$(window).one("popstate",function(){d.hide(!0),"undefined"!=typeof Lizard&&(Lizard.stopStateWatch=!1)})),a.animateSwitch?b.css({"-webkit-transform":c,transform:c}).show().animate({"-webkit-transform":"translate(0, 0)",transform:"translate(0, 0)"},500,"ease-in-out",function(){b.css({"-webkit-transform":"",transform:"",width:"100%"})}):b.show().css({width:"100%"}),this._isShow=!0,a.onShow.call(this),this)},hide:function(a){var b=this,c=this.options,d=this.$el,e=this.animateHandler();return this._isShow&&!a&&this.hasPushState&&this.options.header?(history.back(),this):(c.animateSwitch?d.animate({"-webkit-transform":e,transform:e},500,"ease-in-out",function(){d.hide()}):d.hide(),c.onHide.call(b),this._isShow=!1,this)},remove:function(){var a=this.$el;this.options.animateSwitch?setTimeout(function(){a.remove()},501):a.remove()},animateHandler:function(){var a,b=this.options.animateSwitch;if(b)switch(b){case"top":a="translate(0, 100%)";break;case"bottom":a="translate(0, -100%)";break;case"left":a="translate(-100%, 0)";break;case"right":a="translate(100%, 0)";break;default:a="translate(100%, 0)"}return a},setOptions:function(a,b){return _.isObject(a)?_.each(a,function(a,b){this.options[b]=a},this):this.options[a]=b,this},isValid:function(a){var b,c=this.options.startTime.getTime();return a=a.getTime(),b=_.isDate(this.options.endTime)?this.options.endTime.getTime():this.options.endTime,a-c>=0&&b-a>=0},bindEvents:function(){var a=this,b=this.options.header;this.$el.on("click",".cui_cld_valid",function(){var b=$(this),c=b.attr("data-date").split("-"),d=new Date(c[0],parseInt(c[1],10)-1,c[2]),f=d.getDay(),g=d.getMonth(),h=a.options.constant,i={days:h.days[f],daysShort:h.daysShort[f],daysMin:h.daysMin[f],months:h.months[g],monthsShort:h.monthsShort[g],value:e(d,a.options.format),holiday:a.getDateDesc(d).desc};a.options.callback.call(a,d,i,b)}),b&&(this.$el.on("click","#js_return",function(){a.hide()}),b.home&&this.$el.on("click","#c-ui-header-home",function(){b.homeHandler.call(a)}))},render:function(){var a=this.options,b=[],c=a.startTime.getFullYear(),d=a.startTime.getMonth();b.push(this.createHeader()),b.push(a.bodyPrefixTemplate),b.push(this.createDays());for(var e=0;e<a.monthsNum;e++)d+1>12&&(d=0,c++),b.push(this.createMonth(c,d++));b.push(a.bodySuffixTemplate),this.$el.css("display","none").html(b.join("")).appendTo($(a.appendElement)),"body"===a.appendElement?this.$el.css({position:"absolute",zIndex:3001,top:0,left:0,width:"99.5%"}):this.$el.addClass("cui-calendar-static"),this.bindEvents()},createHeader:function(){var a=this.options.header;return a?_.template(this.options.headerTemplate,a):""},createDays:function(){var a,b=this.options.days,c=this.options.constant;return a="short"===b?c.daysShort:"min"===b?c.daysMin:c.days,_.template(this.options.daysTemplate,{days:a})},createMonth:function(a,b){for(var c=new Date(a,b),d=c.getDay(),f={monthFormate:e(c,this.options.monthFormate),month:[]},g=this.generateMonthModel(a,b),h=0;d>h;h++)f.month.push({invalid:!0,value:""});return f.month=f.month.concat(g),_.template(this.options.monthTemplate,f)},generateMonthModel:function(a,b){for(var d,f,g=c(a,b),h=[],i=1;g>=i;i++)d=new Date(a,b,i),f={invalid:!0,value:i},_.extend(f,this.getDateDesc(d)),this.isValid(d)&&(f.invalid=!1,f.format=e(d,"Y-m-d")),h.push(f);return h},getDateDesc:function(a){var b=864e5,c="",d="",e=a.getTime(),f=g.getTime();return e===f?(c="今天",d=this.options.todayCls):e-f===b?(c="明天",d=this.options.todayCls):e-f===2*b&&(c="后天",d=this.options.todayCls),{cls:d,desc:c}}},_.extend(i,{isLeapYear:b,getDaysInMonth:c,extend:Backbone.View.extend,dateFormat:e,defaults:h,serverDate:f}),i}),define("cHolidayCalendar",["cCalendar"],function(a){function b(a){return 15&g[a-1900]}function c(a,b){return g[a-1900]&65536>>b?30:29}function d(a){return b(a)?65536&g[a-1900]?30:29:0}function e(a){for(var b=348,c=32768;c>8;c>>=1)b+=g[a-1900]&c?1:0;return b+d(a)}function f(a){var f,g=0,h=0,i={},j=new Date(1900,0,31),k=(a-j)/864e5;for(i.dayCyl=k+40,i.monCyl=14,f=1900;2050>f&&k>0;f++)h=e(f),k-=h,i.monCyl+=12;for(0>k&&(k+=h,f--,i.monCyl-=12),i.year=f,i.yearCyl=f-1864,g=b(f),i.isLeap=!1,f=1;13>f&&k>0;f++)g>0&&f===g+1&&i.isLeap===!1?(--f,i.isLeap=!0,h=d(i.year)):h=c(i.year,f),i.isLeap===!0&&f===g+1&&(i.isLeap=!1),k-=h,i.isLeap===!1&&i.monCyl++;return 0===k&&g>0&&f===g+1&&(i.isLeap?i.isLeap=!1:(i.isLeap=!0,--f,--i.monCyl)),0>k&&(k+=h,--f,--i.monCyl),i.month=f,i.day=k+1,i}var g=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835],h=_.defaults({holidayCls:"cui_cld_holiday",solarHoliday:{"0101":"元旦","0214":"情人节","0405":"清明","0501":"劳动节",1001:"国庆",1225:"圣诞节"},lunarHoliday:{1230:"除夕","0101":"春节","0115":"元宵","0505":"端午","0707":"七夕","0815":"中秋","0909":"重阳"},_lunarHoliday:{}},a.defaults),i=a.extend({initialize:function(a){this.options=$.extend(!0,{},h,a)},getDateDesc:function(a){var b,c,d,e=i.__super__.getDateDesc.apply(this,arguments),g=this.generateHolidayKey(a.getMonth()+1,a.getDate()),h=this.options;return h.solarHoliday[g]?(e.desc=h.solarHoliday[g],e.cls=h.holidayCls):(c=f(a),b=this.generateHolidayKey(c.month,c.day),d=a.getFullYear()+b,h.lunarHoliday[b]&&(h._lunarHoliday[d]&&h._lunarHoliday[d]===g?(e.desc=h.lunarHoliday[b],e.cls=h.holidayCls):h._lunarHoliday[d]||(e.desc=h.lunarHoliday[b],e.cls=h.holidayCls,h._lunarHoliday[d]=g))),e},generateHolidayKey:function(a,b){return 10>a&&(a="0"+a),10>b&&(b="0"+b),""+a+b}},{defaults:h});return i}),define("cHolidayPriceCalendar",["cHolidayCalendar"],function(a){var b=_.defaults({unit:"¥",lowestCls:"price_lowest",monthTemplate:'<section class="cui_cldunit"><h1 class="cui_cldmonth"><%= monthFormate %></h1><ul class="cui_cld_daybox"><% _.each(month, function(day) { %><li <% if (day.price) { %> data-price="<%= day.price %>" <% } %> data-date="<%= day.format %>" class="<% if (day.invalid) { print("cui_cld_invalid cui_cld_daypass"); } else { print("cui_cld_valid"); } if(day.desc) { print(" cui_cld_day_havetxt"); } if (day.cls) { print(" " + day.cls); } %>"><em><%= day.value %></em><% if (day.desc) { %><i><%= day.desc %></i><% } %><% }); %></ul></section>',priceDate:[],startPriceTime:!1,voidInvalid:!0},a.defaults),c=a.extend({initialize:function(a){this.options=$.extend(!0,{},b,a),this.setPriceDate(this.options.priceDate)},generateMonthModel:function(b,c){for(var d,e,f,g,h=a.getDaysInMonth(b,c),i=[],j=this.options,k=1;h>=k;k++)d=new Date(b,c,k),f=d.getTime(),e=this.getDateDesc(d),g=j.priceDate[f],"undefined"!=typeof g?(e.value=e.desc?e.desc:k,e.desc=0!=g?j.unit+g:"",e.price=g):(e.invalid=j.voidInvalid,e.value=k),this.isPriceValidTime(d)||(e.invalid=!0),e.format=a.dateFormat(f,"Y-m-d"),i.push(e);return i},isPriceValidTime:function(a){var b=this.options.startPriceTime;return b?a.getTime()-b.getTime()>=0:this.isValid(a)},findMinPrice:function(){var a=this.$el.find(".cui_cld_daybox"),b=this.options.lowestCls;a.each(function(){var a,c=$(this).find("[data-price]"),d=[];c.each(function(){d.push(parseInt(this.getAttribute("data-price"),10))}),a=Math.min.apply(null,d),c.each(function(){var c=$(this),d=parseInt(c.attr("data-price"),10);d===a&&c.addClass(b)})})},setPriceDate:function(a){var b={};_.each(a,function(a){b[a.date.getTime()]=a.price}),this.options.priceDate=b}});return c}),define("cImgLazyload",["libs","cBase"],function(a,b){var c=new b.Class({__propertys__:function(){this.isError=!1,this.uuid=_.uniqueId()+(new Date).getTime()},initialize:function(a){this.handleOpts(a),this.init()},checkWrapperDisplay:function(){this.isError||(this.TIMERRES&&clearInterval(this.TIMERRES),0==$(this.imgs[0]).offset().top&&(this.isError=!0,this.TIMERRES=setInterval($.proxy(function(){0,$(this.imgs[0]).offset().top>0&&(this.TIMERRES&&clearInterval(this.TIMERRES),0,this.isError=!1,this.refresh())},this),100)))},handleOpts:function(a){return this.isError=!1,a&&a.imgs&&a.imgs.length?(this.imgs=a.imgs,this.container=a.container||$(window),this.width=a.width,this.height=a.height,this.loadingImg=a.loadingImg||"http://pic.c-ctrip.com/vacation_v2/h5/group_travel/no_product_pic.png",this.loadingBg=a.loadingBg||"#ebebeb",this.needWrapper=!1,(this.width||this.height)&&(this.needWrapper=!0),this.wrapper=a.wrapper||'<div class="cui_lazyload_wrapper" style="text-align: center; vertical-align: middle; "></div>',void(this.imgContainer={})):void(this.isError=!0)},init:function(){this.isError||(this.initImgContainer(),this.lazyLoad(),this.bindEvents())},refresh:function(a){a&&this.handleOpts(a),this.init()},bindEvents:function(){this.isError||(this.destroy(),this.container.on("scroll.imglazyload"+this.uuid,$.proxy(function(){this.lazyLoad()},this)),$(window).on("resize.imglazyload"+this.uuid,$.proxy(function(){this.initImgContainer()},this)))},initImgContainer:function(){if(!this.isError){var a,b,c,d;for(b=0,c=this.imgs.length;c>b;b++)a=$(this.imgs[b]),a.attr("data-src")&&""!=a.attr("data-src")&&"1"!=a.attr("data-load")&&(d=a.offset(),this.imgContainer[d.top]||(this.imgContainer[d.top]=[]),this.imgContainer[d.top].push(a))}},_handleImg:function(a){var b,c;a.attr("data-src")&&""!=a.attr("data-src")&&(this.needWrapper&&(c=$(this.wrapper),c.css({width:this.width+"px",height:this.height+"px","background-color":this.loadingBg}),c.insertBefore(a),c.append(a)),b=$(new Image),a.attr("src")||a.attr("src",this.loadingImg),b.on("error",function(){a.attr("src",this.loadingImg)}).on("load",function(){a.attr("src",a.attr("data-src")),a.attr("data-load","1"),setTimeout(function(){c&&c[0]&&(a.insertBefore(c),c.remove())},1)}).attr("src",a.attr("data-src")))},lazyLoad:function(){if(!this.isError){var a,b,c,d,e,f=this.container.height(),g=this.container.scrollTop();for(a in this.imgContainer)if(parseInt(a)<g+f){for(b=this.imgContainer[a],d=0,e=b.length;e>d;d++)c=$(b[d]),this._handleImg(c);delete this.imgContainer[a]}}},destroy:function(){this.isError||(this.TIMERRES&&clearInterval(this.TIMERRES),this.container.off(".imglazyload"+this.uuid),$(window).off(".imglazyload"+this.uuid))}});return c}),define("cBasePageView",["libs","c","cWidgetFactory","cWidgetHeaderView","cWidgetGuider"],function(a,b,c){var d=c.create("Guider"),e=e||{};e.injectHeaderView=function(a){var b=c.create("HeaderView");this.headerview=new b(a),$("#main").before(this.headerview.getView())},e._initializeHeader=function(){},e._getDefaultHeader=function(){},e.hybridBridgeRender=function(){var a=this,b=$.proxy(a.showView,a),c=$.proxy(a.showView,a);d.apply({hybridCallback:b,callback:c})},e.registerCallback=function(){},e.callAppInit=function(a){var b=0;if(window.localStorage){var c=window.localStorage.getItem("APPINFO");c=JSON.parse(c),c&&(b=c.version)}d.init({version:b,callback:a})};var f=b.view.extend(e);return f.ONCLICK="click",f}),define("cCommonPageFactory",["libs"],function(){var a=a||{};return a.products={},a.hasPage=function(b){return!!a.products[b]},a.register=function(b){if(!(b&&b.name&&b.fn))throw"CommonPageFactory: factory is lack of necessary infomation.";if(a.products[b.name])throw"CommonPageFactory: factory has been register in CommonPageFactory";a.products[b.name]=b.fn},a.create=function(b){return a.products[b]},a}),define("cCommonListPage",["libs","cUI","cPageView","cWidgetFactory","cCommonPageFactory","cWidgetListView"],function(a,b,c,d,e){var f="CommonListPage";if(!e.hasPage(f)){var g=g||{};g.injectListView=function(a){a.workspace||(a.workspace=$(this.defaultHtml)),this.$el.append(a.workspace),a.container=a.container?this.$el.find(a.container):a.workspace.find("#c-list-view-container");var b=d.create("ListView");this.listview=new b(a)},g._onWidnowScroll=null,g.__isComplete__=!1,g.__isLoading__=!1,g.bottomLoading=null,g.addScrollListener=function(){this.__isComplete__=!1,this.__isLoading__=!1,$(window).bind("scroll",this._onWidnowScroll)},g.removeScrollListener=function(){$(window).unbind("scroll",this._onWidnowScroll),this.bottomLoading&&(this.bottomLoading.remove(),this.bottomLoading=null)},g.onWidnowScroll=function(){var a=b.Tools.getPageScrollPos();if(0!=a.top){var c=a.pageHeight-(a.top+a.height);81>=c&&!this.__isComplete__&&!this.__isLoading__&&(this.__isLoading__=!0,this.onBottomPull&&this.onBottomPull())}},g.closeBottomPull=function(){this.__isComplete__=!0},g.endPull=function(){this.__isLoading__=!1},g.showBottomLoading=function(){this.bottomLoading||(this.bottomLoading=$('<div class="cui-zl-load" id="zlLoading" style=""> <div class="cui-i cui-b-loading"></div><div class="cui-i  cui-mb-logo"></div> <p>加载中</p></div>')),this.$el.append(this.bottomLoading),this.bottomLoading.show()},g.hideBottomLoading=function(){this.bottomLoading&&this.bottomLoading.hide(),this.__isLoading__=!1},g.defaultHtml='<section class="res_list"><ul class="res_list_tab_arr_r" id="c-list-view-container"></ul></section>';var h=c.extend(g);e.register({name:f,fn:h})}}),define("lizard",["CommonStore","cMessageCenter","cUILoading","cUIWarning404","cUIHeader","cBase","cModel","memStore","cUtilityPath","cUtilityUtil","cUtilityStateHistory","cUtilityPerformance","cUtilityCacheView","cUIAnimation","cUtilityFlip","cPageParser"],function(CommonStore,MessageCenter,Loading,Warning404,cUIHeader,Base,cModel,mStore,path,utils,History,Performance,CacheViews,animation){function APP(a){this.initialize(a)}var location=window.location,history=window.history,DialogHist=[],DialogMag={};/\/html5\//i.test(location.href.replace(/[\?#].+$/,""))&&$("<base/>").attr("href",location.href.replace(/\/html5\//i,"/webapp/")).prependTo($("head").eq(0)),Lizard.runAt="client";var renderAt=$(".main-viewport").attr("renderat");Lizard.renderAt="server",renderAt||(Lizard.renderAt="client"),Lizard.allowDebug=!1,Lizard.log=function(){if(window.console&&console.log&&Lizard.allowDebug){var a=Array.prototype.splice.call(arguments,0,arguments.length);a.unshift("(LOG)"),console.log.apply(console,a)}},Lizard.group=function(){var a=Lizard.group.caller.name;if(window.console&&console.group&&console.time&&Lizard.allowDebug){var b="Lizard.";0,0}},Lizard.groupEnd=function(a){var b=a||Lizard.groupEnd.caller.name;if(window.console&&console.groupEnd&&console.timeEnd&&Lizard.allowDebug){var c="Lizard.";0,0}},Lizard.dirs=function(a){window.console&&console.dir&&Lizard.allowDebug&&0};var _animAPIs=animation,chistory=new History,cperformance=new Performance;return window.cacheViews=new CacheViews,window.cacheModels=new CacheViews,APP.defaults={mainRoot:"#main",header:"header",viewport:".main-viewport",animForwardName:"slideleft",animBackwardName:"slideright",isAnim:!1,maxsize:10},APP.prototype={registerMsg:function(a,b){MessageCenter.register(MessageCenter.MAP.APP,a,b)},dispatchMsg:function(a,b,c){MessageCenter.dispatch(MessageCenter.MAP.APP,a,b,c)},viewReady:function(a){this.registerMsg("viewReady",a)},createCommonUI:function(){this.loading=new Loading},showLoading:function(){this.loading.show()},hideLoading:function(){this.loading.hide()},initialize:function(a){var b=this.initProperty(a);this.options=b,this.firstState=null,this.mainRoot=$(b.mainRoot),this.header=$(b.header),this.viewport=this.mainRoot.find(b.viewport),this.curView=null,this.lastView=null,this.chistory=chistory,this.views=cacheViews,this.maxsize=b.maxsize,this.createCommonUI(),this.animAPIs=_animAPIs,this.animForwardName=b.animForwardName,this.animBackwardName=b.animBackwardName,this.isAnim=b.isAnim,this.animatName=this.animForwardName,this.observe=!1;this.validate();this.start(),MessageCenter.register(MessageCenter.MAP.APP,"switchview",function(a){var b=a[0],c=a[1],d=a[2];b.nextPageShow||!this.isAnim?(this.curView&&this.curView.$el.hide(),c.show(),_.isFunction(this.header.html)&&this.header.html(d.header)):c.hide()})},initProperty:function(a){var b=_.extend({},APP.defaults,a||{});return b},validate:function(){return this.mainRoot.length<1?"mainRoot 不存在":this.header.length<1?"header 不存在":this.viewport.length<1?"viewport 不存在":!1},start:function(){if(Lizard.group(),this.bookmarkAnchor={},this.bindEvents(),Lizard.isHybrid?this.header.parent().hide():this.header.parent().show(),!Lizard.isHybrid||Lizard.isInCtripApp){var a=path.documentUrl.href.replace(/#DIALOG_.*$/,""),b=document.documentElement.outerHTML;Lizard.log("Lizard.renderAt::"+Lizard.renderAt),Lizard.log("Lizard.runAt::"+Lizard.runAt);var c=a.indexOf(path.parseUrl(a).pathname);this.loadView(a.substring(c),b,{viewName:this.options.firstPageViewName||"viewName",loading:"server"!=Lizard.renderAt?this.options.isFirstPageHideLoading?!1:null:!1,landingpage:1},"server"==Lizard.renderAt)}else{var d=this.chistory.getHash();d||(d=Lizard.localRoute.config.defaultView?Lizard.localRoute.config.defaultView:_.first(_.keys(Lizard.localRoute.config)).replace(/(\{(.+?)\})/g,function(){return""}),d||(d="/index///"));var d=d.replace(/#DIALOG_.*$/,"");this.goTo(d,{viewName:this.options.firstPageViewName||"viewName",loading:this.options.isFirstPageHideLoading?!1:null})}Lizard.groupEnd()},bindEvents:function(){$.bindFastClick&&$.bindFastClick(),this._handleLink(),chistory.popstate(this)},_handleLink:function(){(Lizard.isHybrid||utils.isSupportPushState)&&$("body").on("click",$.proxy(function(a){for(var b=$(a.target),c=!1;;){if(!b[0])break;if("BODY"==b[0].nodeName)break;if(b.hasClass("sub-viewport"))break;if("A"==b[0].nodeName){c=!0;break}b=b.parent()}if(c){var d=b.attr("href"),e={},f=b.attr("lizard-data");if("off"==b.attr("lizard-catch")||d&&utils.isExternalLink(d))return!0;a.preventDefault(),f&&(e.data=JSON.parse(f)),"back"==b.attr("data-jumptype")?this.back(b.attr("href"),e):"forward"==b.attr("data-jumptype")&&this.goTo(b.attr("href"),e)}},this))},loadView:function(a,b,c,d){window.__bfi&&window.__bfi.push(["_unload",1]),Lizard.group(),c=c||{};var e=!1;d||(e=c.pushState,e!==!1&&(e=!0),this.closeObserve());var f=cperformance.getUuid(),g=cperformance.getUuid();cperformance.group(f,{name:"Domready",landingpage:1==c.landingpage?1:0,url:a}),cperformance.group(g,{name:"Onload",landingpage:1==c.landingpage?1:0,url:a}),c.loading===!1||d||(this.options.isHideAllLoading?1==c.loading&&this.showLoading():this.showLoading()),this.parsePage(a,b,_.bind(this._renderCallback,this),[null,d,c,f,g,a,b,e])},_renderCallback:function(a,b,c,d,e,f,g,h){if(a.config.configEmpty)return void(c.loading===!1||b||this.hideLoading());var i=$(b?this.viewport[0].firstChild:a.viewport);b||(c.stateid?i.attr("id",c.stateid):i.attr("id",a.id)),cperformance.groupEnd(d),b||(this.firstState||this.viewport.html(""),i.appendTo(this.viewport),this.header.html(a.header));var j={id:b?i.attr("id"):c.stateid||a.id,url:b?location.href:f,opts:c},k=_.omit(_.clone(a),["header","viewport","TDK"]);(b||c.stateid)&&(k.id=i.attr("id"));var l=_.extend({viewName:a.config.viewName||c.viewName,text:g,opts:c,$el:i,state:j,url:f,single:!1,pushState:h,callback:$.proxy(function(d,f){c.loading===!1||b||this.hideLoading(),d&&d.switchByOut?d.turning=function(){f&&f.hide(),MessageCenter.dispatch(MessageCenter.MAP.APP,"switchview",[c,i,a],this)}:MessageCenter.dispatch(MessageCenter.MAP.APP,"switchview",[c,i,a],this),this.switchView(d,f),cperformance.groupEnd(e)},this)},k);this.controller(l)},parsePage:function(a,b,c,d){Lizard.group();var e=Lizard._initParser(a,b),f=Lizard.getController(e);
f&&require([f]),Lizard.retyClickFunc=function(){Lizard.goTo(a)},this.getData(e,function(f){var g=cperformance.getUuid();cperformance.group(g,{name:"TemplateRender",url:a});var h=Lizard.render(e,f);cperformance.groupEnd(g),Lizard.urlSchemaMap||(Lizard.urlSchemaMap={}),h.config.url_schema&&(_.isString(h.config.url_schema)&&(h.config.url_schema=[h.config.url_schema]),_.each(h.config.url_schema,function(c){var d=Lizard.schema2re(c,a);d.reStr&&!Lizard.urlSchemaMap[d.reStr]&&(Lizard.urlSchemaMap[d.reStr]={html:b,urlMatchIndex:d.index})})),d[0]=h,_.isFunction(c)&&c.apply(this,d),Lizard.groupEnd("parsePage")})},getData:function(a,b){var c=Lizard.getModels(a);0==c.length&&b.call(this,[]),Lizard.ajaxDatas={},Lizard.errorCalled=!1,this._processModels(c,b,[],_.isFunction(a.validate))},_transfuncToVal:function(obj){for(var p in obj)obj.hasOwnProperty(p)&&(_.isString(obj[p])&&0==obj[p].indexOf("function")?obj[p]=eval("("+obj[p]+")()"):(_.isObject(obj[p])||_.isArray(obj[p]))&&this._transfuncToVal(obj[p]))},_onSucess:function(a,b,c,d,e,f){var g=d[c];g.done=!0,g.error=!1,b[c]=a,g.name&&(Lizard.ajaxDatas[g.name]=a),_.every(d,function(a){return a.done})?e.call(this,b):this._processModels(d,e,b,f)},_processModels:function(models,callback,datas,ignoreError){var _this=this;if(!_.some(models,function(a){return a.error})||Lizard.errorCalled)_.each(models,function(model,index){if(!model.processed&&(!model.depends||_.every(model.depends,function(a){return a in Lizard.ajaxDatas}))){var url=model.url,emodel=cacheModels.findById(url);if(emodel)_this._transfuncToVal(model.postdata),emodel.setAttr("param",model.postdata);else{emodel=new Base.Class(cModel,{__propertys__:function(){this.urlParseRet=path.parseUrl(url),this.protocol=this.urlParseRet.protocol.substr(0,this.urlParseRet.protocol.length-1)}}).getInstance(),emodel.setAttr("url",url),_this._transfuncToVal(model.postdata),emodel.setAttr("param",model.postdata);var cacheStore=emodel.getResultStore();if(!cacheStore){var cachStore=new mStore({key:url,useLocalStore:model.useLocalStore});emodel.setAttr("result",cachStore)}cacheModels.add(url,emodel)}model.processed=!0,model.suspend&&eval("("+model.suspend+")()")?_this._onSucess({},datas,index,models,callback):emodel.excute(function(a){_this._onSucess(a,datas,index,models,callback)},function(a){!ignoreError&&a instanceof XMLHttpRequest?(model.error=!0,_this._processModels(models,callback,datas,ignoreError)):(_this._onSucess(a,datas,index,models,callback,ignoreError),a instanceof XMLHttpRequest&&_this._stopdependModel(model,models,datas,callback))},!1,this)}});else{Lizard.errorCalled=!0,this.hideLoading();var errorData={callback:function(){waring404.hide(),Lizard.retyClickFunc()},headData:{title:"网络不给力",events:{returnHandler:function(){waring404.hide(),Lizard.isHybrid&&this.bookmarkAnchor.isFirst?CtripUtil.app_back_to_home():window.location.reload()}}}};Lizard.errorBack&&(errorData=_.extend(errorData,Lizard.errorBack(datas)));var waring404=new Warning404;waring404.show(),waring404.options(errorData),errorData.tel&&(waring404.tel=errorData.tel),waring404.callback=function(){errorData.callback.call(this),waring404.hide()};var hDom=$("#headerview");if(errorData.headData){var headerview=new cUIHeader({root:hDom});if(errorData.headData.events||(errorData.headData.events={}),errorData.headData.events.returnHandler){var returnFunc=errorData.headData.events.returnHandler;errorData.headData.events.returnHandler=function(){waring404.hide(),returnFunc.call(this)}}else errorData.headData.events.returnHandler=function(){waring404.hide(),Lizard.isHybrid&&this.bookmarkAnchor.isFirst?CtripUtil.app_back_to_home():window.location.reload()};headerview.set(errorData.headData)}}},_stopdependModel:function(a,b,c,d){var e=this;_.each(b,function(f,g){f!=a&&f.depends&&_.indexOf(f.depends,a.name)>-1&&(f.done=!0,f.error=!1,c[g]={},f.name&&(Lizard.ajaxDatas[f.name]={}),e._stopdependModel(f,b,c,d))})},controller:function a(b){Lizard.group();var a=b.controller,c=_.clone(b),d=b.callback||function(){};c.pushState!==!1&&(c.pushState=!0),c=_.omit(c,["controller","header","viewport","TDK","callback"]),this.loadController(a,$.proxy(function(a){a?(this.lastView=this.curView,this.curView=new a({el:c.$el}),c=_.omit(c,["$el","single"]),this.curView.timestamp=(new Date).getTime(),c.viewName&&this.curView.$el.data("viewName",c.viewName),c.viewportID=c.id,delete c.id,this.curView=_.extend(this.curView,c),this.curView.onmessage=this.curView.onmessage||function(a){Lizard.log("onmessage",a)},this.curView.postMessage=function(a){var a=a||{},b=a.viewName,c=a.data;if(b){var d=this.views.findByViewName(b);d&&d.onmessage&&c&&d.onmessage(c)}else this.views.values.each(function(a,b){b.onmessage&&c&&b.onmessage(c)})},this.curView.refresh=function(a){var b=this.config.view.viewport;if(b){var c=_.template(b),d=c(a);this.$el.html(d)}},this.curView.referrer=this.lastView&&this.lastView.url||"",this.views.add(c.viewportID,this.curView)):(this.lastView=this.curView,c.timestamp=c.timestamp||(new Date).getTime(),c=_.omit(c,["single","opts","pushState","text","viewName"]),this.curView=c,this.curView.referrer=this.lastView&&this.lastView.url||"",this.curView.show=function(){this.$el.show()},this.curView.hide=function(){this.$el.hide()},this.curView.refresh=function(){},this.curView.sendUbt=function(){},this.views.add(this.curView.id,this.curView)),!this.firstState||this.replaceFirstState?(this.firstState=c.state,this.bookmarkAnchor.href=window.location.href,this.bookmarkAnchor.isFirst=!0,chistory.replaceState(c.state,c.url,c.url),this.bookmarkAnchor.hash=chistory.getHash()):c.pushState&&(chistory.pushState(c.state,c.url,c.url),this.bookmarkAnchor.isFirst=!1),Lizard.groupEnd("controller"),d(this.curView,this.lastView)},this))},loadController:function(a,b){return Lizard.group(),Lizard.log("controller:",a),a?void requirejs([a],function(a){_.isFunction(b)&&b(a),Lizard.groupEnd("loadController")}):(_.isFunction(b)&&b(),void Lizard.groupEnd())},switchView:function(a,b){Lizard.group(),Lizard.log("inView.id:",a&&a.id),Lizard.log("outView.id:",b&&b.id),Lizard.log("this.isAnim:",this.isAnim),b&&!document.getElementById(b.id)&&a&&!a.switchByOut&&(b.$el.appendTo(this.viewport),b.$el.hide()),a&&!document.getElementById(a.id)&&(a.$el.appendTo(this.viewport),a.$el.hide());var c;if(!a)throw"inview 未被实例化";Lizard.T.lizTmpl=a.lizTmpl,Lizard.P.lizParam=a.lizParam,b?(b.saveScrollPos(),this.isAnim&&(c=this.animAPIs[this.animatName]),a.fromView=b.viewName,c&&_.isFunction(c)?c(a,b,$.proxy(function(a,b){Lizard.groupEnd("switchView"),this._onSwitchEnd(a,b)},this)):(a&&!a.switchByOut&&b.hide(),a.show(),Lizard.groupEnd("switchView"),this._onSwitchEnd(a,b))):(a.show(),Lizard.groupEnd("switchView"),this._onSwitchEnd(a,b))},_onSwitchEnd:function(a,b){setTimeout(function(){b&&b.$el&&b.$el.hide()},10),a.sendUbt(!0),this.dispatchMsg("viewReady",a),this._destroyViews()},_destroyViews:function(a){if(this.openObserve(),Lizard.group(),a){var b=this.views.findById(a);return void(b&&(b.destroy(),this.views.delById(a),this.views.delByIdFromBackups(a)))}var c=this.views.length()-this.maxsize;if(1>c)return void Lizard.groupEnd();for(var d=0;c>d;d++){var e=this.views.orderCaches.shift(),f=e.key,b=this.views.findById(f);if(b){b.$el.remove();var g=b.viewportID;this.views.delById(g)}}Lizard.groupEnd()},goTo:function(a,b){function c(){Lizard.log("url:",a),Lizard.log("opts:",JSON.stringify(b)),d.showPageByHref(a,b),Lizard.groupEnd()}var d=this;if(d.header=$("#headerview>header"),Lizard.group(),a&&(!_.isObject(a)||(b=a,a=b.url)))if(b=b||{},this.animatName=b.animatName||this.animForwardName,this.replaceFirstState=b.replaceFirstState||!1,b.viewName){var e=d.views,f=e.findByName(b.viewName);if(f)if(b.cache){var g=b.pushState;g!==!1&&(g=!0),d.lastView=d.curView,d.curView=f;var h=f.config.view.header;h&&d.header.html(h),d.curView.timestamp>d.lastView.timestamp?(d.curView.navigationType="forward",d.animatName=d.animForwardName):(d.curView.navigationType="back",d.animatName=d.animBackwardName),d.closeObserve(),g&&chistory.pushState(f.state,f.url,f.url),d.switchView(d.curView,d.lastView)}else d._destroyViews(f.viewportID),c();else{var f=e.findByNameFromBackups(b.viewName);if(f)if(b.cache){var b=f.opts;b.viewName=f.viewName,d.loadView(f.url,f.text,b)}else d._destroyViews(f.viewportID),c();else c()}}else c()},showPageByHref:function(a,b){Lizard.group();var c=this,b=b||{},d=b.type||"get";b.data&&(d="post"),b.data||(b.data={});var e=b.data;if(b.jump=c.options.isAllPageJump,!utils.goExternalLink(a,b)){var f=Lizard.isHybrid&&Lizard.localRoute.mapUrl(a);f?requirejs([f],function(d){Lizard.log("localRouteRet 存在"),Lizard.groupEnd(),c.loadView(a,d,b)}):(Lizard.log("url:",a),Lizard.log("type:",d),Lizard.log("data:",JSON.stringify(e)),$[d](a,e,function(d){Lizard.log("新页面请求成功"),Lizard.groupEnd(),c.loadView(a,d,b)}))}},closeObserve:function(){Lizard.group(),this.observe=!1,Lizard.groupEnd()},openObserve:function(){Lizard.group();var a=this;setTimeout(function(){a.observe=!0},0),Lizard.groupEnd()},showView:function(a){Lizard.log("Lizard.showView start");var b=this.views.findById(a.id);if(b){Lizard.log("data.url: "+a.url+" already exist"),b.delegateEvents&&b.delegateEvents(),this.lastView=this.curView,this.curView=b;var c=b.config.view.header;c&&this.header.html(c),this.curView.timestamp>this.lastView.timestamp?(this.curView.navigationType="forward",this.animatName=this.animForwardName):(this.curView.navigationType="back",this.animatName=this.animBackwardName),Lizard.log("Lizard.showView end"),this.switchView(this.curView,this.lastView)}else{var b=this.views.findByIdFromBackups(a.id);if(b){var d=b.opts;this._destroyViews(b.viewportID),d.viewName=b.viewName,d.stateid=a.id,d.pushState=!1,this.loadView(b.url,b.text,d,!1)}else Lizard.log("data.url: "+a.url+" not exist"),Lizard.log("Lizard.showView end"),a.opts.stateid=a.id,a.opts.pushState=!1,this.goTo(a.url,a.opts)}},goBack:function(a,b){var c=this;if(c.header=$("#headerview>header"),b=b||{},b.viewName){var d=b.pushState;d!==!1&&(d=!0);var e=c.views,f=e.findByName(b.viewName);if(f){c.lastView=c.curView,c.curView=f;var g=f.config.view.header;g&&c.header.html(g),c.curView.timestamp>c.lastView.timestamp?(c.curView.navigationType="forward",c.animatName=c.animForwardName):(c.curView.navigationType="back",c.animatName=c.animBackwardName),c.closeObserve(),d&&chistory.pushState(f.state,f.url,f.url),c.switchView(c.curView,c.lastView)}else{var f=e.findByNameFromBackups(b.viewName);if(f){var b=f.opts;c._destroyViews(f.viewportID),b.viewName=f.viewName,c.loadView(f.url,f.text,b)}else a&&this.goTo(a,b)}}else if("string"!=typeof a)if(history.length>1){if(!Lizard.isHybrid||!this.bookmarkAnchor.isFirst)return void history.back();var h=["cWidgetFactory","cWidgetGuider"];require(h,function(){var a=arguments[0],b=a.create("Guider");b.backToLastPage({})})}else"object"==typeof a&&(b=a,b.animatName=b.animatName||this.animBackwardName,b.replaceFirstState=!0,b.isPushState=!0,this.goTo(b.defaultView,b));else b.animatName=b.animatName||this.animBackwardName,b.isPushState=!1,this.goTo(a,b)},go:function(a){history.go(a)},showDialog:function(a,b){function c(c){var d=cperformance.getUuid();cperformance.group(d,{name:"TemplateRender",url:k});var h=Lizard.render(a,c,{pageID:i,dialogName:f,ubtInfo:{ab_testing_tracker:b.ab_testing_tracker||"",bf_ubt_orderid:b.bf_ubt_orderid||"",page_id:b.page_id||""}});cperformance.groupEnd(d),h.dialogName=f,e._renderCallback(h,!1,b,l,m,k,j,g)}this.closeObserve();var d="DIALOG_",e=this;b=b||{},b.loading!==!1&&(e.options.isHideAllLoading?1==b.loading&&e.showLoading():e.showLoading());var f=b.dialogName||"dialog"+ ++utils.dialogUuid;this.animatName=b.animatName||this.animForwardName;var g=(b.single,b.pushState);g!==!1&&(g=!0);var h=(b.viewName,this.curView.url.replace(/#DIALOG_.*$/,"")),i=this.curView.id.replace(/\$.*/,""),j=(this.curView.lizTmpl,this.curView.lizParam,this.curView.text);DialogHist.length||DialogHist.unshift({url:h,id:i});var k=h+"#"+d+f,a=a||{};a.model||(a.model={}),a.view||(a.view={});var l=cperformance.getUuid(),m=cperformance.getUuid();cperformance.group(l,{name:"Domready",landingpage:0,url:k}),cperformance.group(m,{name:"Onload",landingpage:0,url:k}),e.getData(a,function(b){var d=a.model.data;d&&(b=b.concat([d])),c(b)})},"interface":function(){return{goTo:this.goTo,goBack:this.goBack,showDialog:this.showDialog,forward:this.goTo,back:this.goBack,go:this.go,registerMsg:this.registerMsg,viewReady:this.viewReady,showLoading:this.showLoading,hideLoading:this.hideLoading}}},APP}),function(){function a(){var a=navigator.userAgent.toLowerCase();return"ctripwireless"==a.match(/ctripWireless/i)?!0:!1}function b(){for(var a=0;a<j.length;a++){var b=j[a];b&&b.call(window)}}function c(a,b){l[a]=b}function d(){for(var a=document.getElementsByTagName("script")||[],b="",c=/lizard\.seed\.(src\.)*js.*$/gi,d=0;d<a.length;d++){var e=a[d].getAttribute("src");if(e&&c.test(e)){b=e.replace(c,"");var f=a[d].getAttribute("pdConfig");f&&(g=f);try{a[d].getAttribute("lizardConfig")&&(h=new Function("return {"+a[d].getAttribute("lizardConfig")+"}")())}catch(i){0}return b}}return b}function e(a,b){var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.onload=b,c.src=a,document.body.appendChild(c)}function f(a,b){function c(){f++,f>=d&&b()}var d=a.length,f=0;if(!d)return void c();for(var g=0;d>g;g++){var h=a[g];e(h,c)}}!function(){navigator.userAgent.indexOf("Android")>0&&(JSON.stringify={}),function(){function a(a){return 10>a?"0"+a:a}function b(a){return d.lastIndex=0,d.test(a)?'"'+a.replace(d,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var g,i,j,k,l,m=e,n=d[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof h&&(n=h.call(d,a,n)),typeof n){case"string":return b(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(e+=f,l=[],"[object Array]"===Object.prototype.toString.apply(n)){for(k=n.length,g=0;k>g;g+=1)l[g]=c(g,n)||"null";return j=0===l.length?"[]":e?"[\n"+e+l.join(",\n"+e)+"\n"+m+"]":"["+l.join(",")+"]",e=m,j}if(h&&"object"==typeof h)for(k=h.length,g=0;k>g;g+=1)"string"==typeof h[g]&&(i=h[g],j=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(j=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));return j=0===l.length?"{}":e?"{\n"+e+l.join(",\n"+e)+"\n"+m+"}":"{"+l.join(",")+"}",e=m,j}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,e,f,g,h;"function"!=typeof JSON.stringify&&(d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,d){var g;if(e="",f="","number"==typeof d)for(g=0;d>g;g+=1)f+=" ";else"string"==typeof d&&(f=d);if(h=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return c("",{"":a})})}()}();var g="",h="",i=!1,j=[];if("undefined"==typeof Lizard&&(Lizard={}),Lizard.version="2.0",Lizard.isInCtripApp=a()&&"file:"!=window.location.protocol,Lizard.isHybrid=!!(window.Internal&&window.Internal.isInApp||window.LizardLocalroute),Lizard.isHybrid&&(CtripUtil.app_check_network_status(),Lizard.localRoute={config:{},addConfig:function(a){for(var b in a)a.hasOwnProperty(b)&&(Lizard.localRoute.config[b]=a[b])},mapUrl:function(a){var b="",c=0;for(var d in Lizard.localRoute.config)if(Lizard.localRoute.config.hasOwnProperty(d)){var e=Lizard.schema2re(d,a);e.reStr&&e.param&&e.reStr.length>c&&(c=e.reStr.length,b=Lizard.localRoute.config[d])}return b}},window.LizardLocalroute)){Lizard.localRoute.addConfig(window.LizardLocalroute);var k=document.getElementById("LizardLocalroute");k&&(Lizard.weinre=k.getAttribute("LizardWeinre"),Lizard.ip=k.getAttribute("LizardIP"),Lizard.chanal=k.getAttribute("LizardChanal"))}Lizard.ready=function(a){i?a&&a.call(window):j.push(a)};var l={};Lizard.config=function(a,b){var d=typeof a;switch(d){case"string":return c(a,b);case"object":for(var e in a)a.hasOwnProperty(e)&&c(e,a[e]);break;default:return l}};var m=d();if(!m)throw"没有引入lizard.seed.js文件";Lizard.dir=m,h&&Lizard.config(h);var n=(Lizard.dir+"parser.js",Lizard.dir+"3rdlibs/require.min.js"),o=[],p="undefined"!=typeof require;o=p?[]:[n],f(o,function(){function a(){window.requirejs&&define("R",function(){}),window.JSON&&define("json2",function(){}),window.__bridge_callback&&define("bridge",function(){}),window.Zepto&&define("$",function(){}),window._&&define("_",function(){}),window.Backbone&&define("B",function(){}),window.$&&window.$.bindFastClick&&define("F",function(){})}function c(){var a=["lizard","cWidgetFactory","cWidgetGuider","cWidgetMember"];require(a,function(){function a(){function a(){var a=_.extend({},l),b=new c(a);Lizard.instance=b;var e=b.interface();for(var f in e)Lizard[f]=$.proxy(e[f],b);if(Lizard.isHybrid){var g=d.create("Guider");g.create()}Lizard.isHybrid||!function(){"undefined"==typeof _gaq&&(_gaq=[]),_gaq.push(["_setAccount","UA-3748357-1"]),_gaq.push(["_setDomainName",".ctrip.com"]),_gaq.push(["_setAllowHash",!1]),_gaq.push(["_addOrganic","soso","w"]),_gaq.push(["_addOrganic","sogou","query"]),_gaq.push(["_addOrganic","youdao","q"]),_gaq.push(["_addOrganic","so.360.cn","q"]),_gaq.push(["_addOrganic","so.com","q"]),_gaq.push(["_addOrganic","m.baidu.com","word"]),_gaq.push(["_addOrganic","wap.baidu.com","word"]),_gaq.push(["_addOrganic","wap.soso.com","key"]),_gaq.push(["_trackPageview"]),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}(),Lizard.isHybrid||!function(){for(var a=document.getElementsByTagName("script")||[],b=/_bfa\.min\.js/i,c=0;c<a.length;c++)if(b.test(a[c].src))return;if(!(window.$_bf&&window.$_bf.loaded||window.$LAB||window.CtripJsLoader)){var d=new Date,e="?v="+d.getFullYear()+d.getMonth()+"_"+d.getDate()+".js",f=document.createElement("script");f.type="text/javascript",f.charset="utf-8",f.async=!0;try{var g="https:"==document.location.protocol}catch(h){var g="https:"==document.URL.match(/[^:]+/)+":"}f.src=g?"https://webresource.c-ctrip.com/code/ubt/_mubt.min.js"+e:"http://webresource.c-ctrip.com/code/ubt/_mubt.min.js"+e;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(f,i)}}()}i=!0,b(),g?e(g,a):a()}var c=arguments[0],d=arguments[1];if(Lizard.isHybrid||Lizard.isInCtripApp)a();else{var f=d.create("Member");f.autoLogin({callback:a})}})}var d=["appBaseUrl","webresourceBaseUrl","restfullApi","restfullApiHttps","WebresourcePDBaseUrl"];!function(){for(var a=document.getElementsByTagName("meta"),b=0;b<a.length;b++){var c=a[b].getAttribute("name"),e=a[b].getAttribute("content");a[b].getAttribute("lizardExpansion")&&(Lizard[c]=e);for(var f=0;f<d.length;f++){var g=d[f];c==g&&(Lizard[c]||(Lizard[c]=e))}}}();var f=function(){var a=Lizard.dir+"3rdlibs/zepto",b=window.navigator.userAgent.indexOf("IEMobile")>-1?!0:!1,c=(window.navigator.userAgent.indexOf("MSIE")>-1?!0:!1,0);return b&&(c=window.navigator.userAgent.match(/IEMobile\/\d+/),c.length>0&&(c=c[0].split("/"),c=c[1])),(!("__proto__"in{})||b&&10>c)&&(a=Lizard.dir+"3rdlibs/jquery"),a}();if(Lizard.weinre&&require.config({urlArgs:"v="+(new Date).getTime(),baseUrl:"http://"+Lizard.ip+":5389/"+Lizard.chanal}),require.config({shim:{$:{exports:"zepto"},_:{exports:"_"},B:{deps:["_","$"],exports:"Backbone"},F:{deps:["$"],exports:"Fastclick"},lizard:{deps:["$","_","B","F"]},libs:{deps:["_","$","B"],exports:"libs"},common:{deps:["libs"]},cBase:{exports:"cBase"},cAjax:{exports:"cAjax"},cPageView:{deps:["B"],exports:"cPageView"}},paths:{json2:Lizard.dir+"3rdlibs/json2",bridge:Lizard.dir+"3rdlibs/bridge",R:Lizard.dir+"3rdlibs/require",$:f,_:Lizard.dir+"3rdlibs/underscore",B:Lizard.dir+"3rdlibs/backbone",F:Lizard.dir+"3rdlibs/fastclick",lizard:Lizard.dir+"lizard",libs:Lizard.dir+"3rdlibs/libs",text:Lizard.dir+"3rdlibs/require.text",cCoreInherit:Lizard.dir+"core/c.core.inherit",AbstractAPP:Lizard.dir+"c.abstract.app",App:Lizard.dir+"business/c.business.app",rsa:Lizard.dir+"business/c.business.rsa",cBusinessCommon:Lizard.dir+"business/c.business.common",c:Lizard.dir+"common/c",cBase:Lizard.dir+"common/c.base",cSales:Lizard.dir+"common/c.sales",cLazyload:Lizard.dir+"common/c.lazyload",cListAdapter:Lizard.dir+"common/c.common.listadapter",cGeoService:Lizard.dir+"common/c.geo.service",cGeoHelper:Lizard.dir+"common/c.geo.helper",cMessageCenter:Lizard.dir+"common/c.message.center",cAjax:Lizard.dir+"common/c.ajax",cImgLazyload:Lizard.dir+"common/c.img.lazyload",cUtilityHybrid:Lizard.dir+"util/c.utility.hybrid",cUtilityHash:Lizard.dir+"util/c.utility.hash",cUtilityDate:Lizard.dir+"util/c.utility.date",cUtilityServertime:Lizard.dir+"util/c.utility.servertime",cUtilityCrypt:Lizard.dir+"util/c.utility.crypt",cUtility:Lizard.dir+"util/c.utility",cUtilityFlip:Lizard.dir+"util/c.utility.flip",Validate:Lizard.dir+"util/c.validate",cUtilityPath:Lizard.dir+"util/c.utility.path",cUtilityUtil:Lizard.dir+"util/c.utility.utils",cUtilityStateHistory:Lizard.dir+"util/c.utility.state.history",cUtilityPerformance:Lizard.dir+"util/c.utility.performance",cUtilityCacheView:Lizard.dir+"util/c.utility.cacheview",cPageParser:Lizard.dir+"page/c.page.parser",cAbstractStore:Lizard.dir+"store/c.abstract.store",cAbstractStorage:Lizard.dir+"store/c.abstract.storage",cStore:Lizard.dir+"store/c.local.store",cStorage:Lizard.dir+"store/c.local.storage",cSessionStore:Lizard.dir+"store/c.session.store",cSessionStorage:Lizard.dir+"store/c.session.storage",memStore:Lizard.dir+"store/c.memorystore",CommonStore:Lizard.dir+"store/c.common.store",PageStore:Lizard.dir+"store/c.store.package",cAbstractModel:Lizard.dir+"model/c.abstract.model",cModel:Lizard.dir+"model/c.model",cUserModel:Lizard.dir+"model/c.user.model",cMultipleDate:Lizard.dir+"model/c.multiple.data",cUI:Lizard.dir+"ui/c.ui",cUICore:Lizard.dir+"ui/c.ui.core",cHistory:Lizard.dir+"ui/c.ui.history",cUIView:Lizard.dir+"ui/c.ui.view",cDataSource:Lizard.dir+"ui/c.ui.datasource",cUIBase:Lizard.dir+"ui/c.ui.base",cUIAbstractView:Lizard.dir+"ui/c.ui.abstract.view",cAdView:Lizard.dir+"ui/c.ui.ad",cUIAlert:Lizard.dir+"ui/c.ui.alert",cUIHeader:Lizard.dir+"ui/c.ui.header",cUIAnimation:Lizard.dir+"ui/c.ui.animation",cUICitylist:Lizard.dir+"ui/c.ui.citylist",cUIHeadWarning:Lizard.dir+"ui/c.ui.head.warning",cUIInputClear:Lizard.dir+"ui/c.ui.input.clear",cUILayer:Lizard.dir+"ui/c.ui.layer",cUILoading:Lizard.dir+"ui/c.ui.loading",cUILoadingLayer:Lizard.dir+"ui/c.ui.loading.layer",cUIMask:Lizard.dir+"ui/c.ui.mask",cUIPageview:Lizard.dir+"ui/c.ui.page.view",cUIScrollRadio:Lizard.dir+"ui/c.ui.scroll.radio",cUIScrollRadioList:Lizard.dir+"ui/c.ui.scroll.radio.list",cUIScrollList:Lizard.dir+"ui/c.ui.scrolllist",cUIToast:Lizard.dir+"ui/c.ui.toast",cUIWarning:Lizard.dir+"ui/c.ui.warning",cUIWarning404:Lizard.dir+"ui/c.ui.warning404",cUIHashObserve:Lizard.dir+"ui/c.ui.hash.observe",cUIEventListener:Lizard.dir+"ui/c.ui.event.listener",cUISwitch:Lizard.dir+"ui/c.ui.switch",cUIScroll:Lizard.dir+"ui/c.ui.scroll",cUINum:Lizard.dir+"ui/c.ui.num",cUIGroupList:Lizard.dir+"ui/c.ui.group.list",cUIBusinessGroupList:Lizard.dir+"ui/c.ui.business.group.list",cUITab:Lizard.dir+"ui/c.ui.tab",cUIImageSlider:Lizard.dir+"ui/c.ui.imageSlider",cUIBubbleLayer:Lizard.dir+"ui/c.ui.bubble.layer",cWidgetFactory:Lizard.dir+"widget/c.widget.factory",cWidgetHeaderView:Lizard.dir+"widget/c.widget.headerview",cWidgetListView:Lizard.dir+"widget/c.widget.listview",cWidgetTipslayer:Lizard.dir+"widget/c.widget.tipslayer",cWidgetInputValidator:Lizard.dir+"widget/c.widget.inputValidator",cWidgetPublisher:Lizard.dir+"widget/c.widget.publisher",cWidgetGeolocation:Lizard.dir+"widget/c.widget.geolocation",cWidgetAbstractCalendar:Lizard.dir+"widget/c.widget.abstract.calendar",cWidgetCalendar:Lizard.dir+"widget/c.widget.calendar",cWidgetCalendarPrice:Lizard.dir+"widget/c.widget.calendar.price",cWidgetSlide:Lizard.dir+"widget/c.widget.slide",cWidgetMember:Lizard.dir+"widget/c.widget.member",cWidgetGuider:Lizard.dir+"widget/c.widget.guider",cWidgetCaptcha:Lizard.dir+"widget/c.widget.captcha",cCalendar:Lizard.dir+"widget/c.calendar",cHolidayCalendar:Lizard.dir+"widget/c.holiday.calendar",cHolidayPriceCalendar:Lizard.dir+"widget/c.holiday.price.calendar",cBasePageView:Lizard.dir+"page/c.page.base",cCommonPageFactory:Lizard.dir+"page/c.page.factory",cCommonListPage:Lizard.dir+"page/c.page.common.list",cPageView:Lizard.dir+"page/c.page.view",cBI:Lizard.dir+"business/c.bi",cHybridFacade:Lizard.dir+"hybrid/c.hybrid.facade"}}),a(),Lizard.isHybrid||Lizard.isInCtripApp)if(window.appInstance=!1,window.localStorage.setItem("ISINAPP","1"),window.app={},l.isBeforeViewFinishedLoadInitApp&&c(),window.app.callback=function(a){var b={web_view_finished_load:function(){if(!Lizard.web_view_finished_load){if(Lizard.web_view_finished_load=1,window.localStorage){var b=a.param;b&&window.localStorage.setItem("APPINFO",JSON.stringify(b)),0,0}!l.isBeforeViewFinishedLoadInitApp&&l.isViewFinishedLoadInitApp&&c(),CtripUtil.app_init_member_H5_info()}},init_member_H5_info:function(a){require(["libs","CommonStore"],function(b,d){window.appInstance=!0;var e=window.localStorage;if(e&&a){0,0;var f=d.HeadStore.getInstance(),g=d.UserStore.getInstance(),h=d.UnionStore.getInstance(),i=f.get();if(a.userInfo)try{{g.getUser()}a.userInfo.data.BMobile=a.userInfo.data.BindMobile,g.setUser(a.userInfo.data),i.auth=a.userInfo.data.Auth}catch(j){alert("set data error")}else g.removeUser();if(a.device){var k={device:a.device};e.setItem("DEVICEINFO",JSON.stringify(k))}if(a.appId){var m={version:a.version,appId:a.appId,serverVersion:a.serverVersion,platform:a.platform};e.setItem("APPINFO",JSON.stringify(m))}if(a.timestamp){var n=new Date,o={server:a.timestamp,local:n.getTime()};e.setItem("SERVERDATE",JSON.stringify(o))}if(a.sourceId&&(i.sid=a.sourceId,e.setItem("SOURCEID",a.sourceId)),a.isPreProduction&&e.setItem("isPreProduction",a.isPreProduction),a.clientID&&(i.cid=a.clientID,e.setItem("GUID",a.clientID)),a.extSouceID&&(i.xsid=a.extSouceID),a.platform&&(i.syscode="1"==a.platform?12:32),a.version&&(i.cver=a.version),a.allianceID&&a.sID){var p={AllianceID:a.allianceID,SID:a.sID,OUID:a.ouID?a.ouID:""};h.set(p)}f.set(i)}l.isBeforeViewFinishedLoadInitApp||l.isViewFinishedLoadInitApp||c()})},app_h5_need_refresh:function(){c()}};a&&"function"==typeof b[a.tagname]&&b[a.tagname](a.param),l.isBeforeViewFinishedLoadInitApp?Lizard.facadeMethods={web_view_finished_load:b.web_view_finished_load,init_member_H5_info:b.init_member_H5_info}:l.isViewFinishedLoadInitApp&&(Lizard.facadeMethods={init_member_H5_info:b.init_member_H5_info})},Internal.isIOS||Internal.isAndroid||Internal.isWinOS);else{var h=function(){return"Win32"==window.navigator.platform}();if(!h)return;var j={tagname:"web_view_finished_load",param:{platform:"2",osVersion:"Android_18",extSouceID:"",version:"5.5"}};Internal.isAndroid="2"==j.param.platform,Internal.isInApp=!0,Internal.appVersion=j.param.version,Internal.osVersion=j.param.osVersion,window.localStorage&&(window.localStorage.clear(),j&&window.localStorage.setItem("APPINFO",JSON.stringify(j)),window.localStorage.setItem("ISINAPP","1")),window.Util_a={},window.Util_a.h5Log=function(a){0},window.Util_a.openUrl=function(a){0},window.Locate_a={},window.Locate_a.locate=function(){},window.NavBar_a={},window.NavBar_a.setNavBarHidden=function(){},window.User_a={},window.User_a.initMemberH5Info=function(){},window.app.callback({tagname:"web_view_finished_load"}),window.app.callback({tagname:"init_member_H5_info",param:{appId:"ctrip.android.view",clientID:"32043596200000129090",device:"samsung_GT-N7102",extSouceID:"",isPreProduction:"0",osVersion:"Android_18",platform:"2",serverVersion:"5.7",sourceId:"8892",timestamp:"1402930469100",userInfo:{data:{Auth:"",BMobile:"",BindMobile:"",IsNonUser:!0,UserID:""},timeby:1,timeout:"2015/06/16"},version:"5.5"}})}else c()});var q=!1;window.onpageshow=function(){q&&window.location.reload(),q=!0}}.call(this),define("lizard.seed",function(){});