define(["c","cUICore","cWidgetFactory","PayModel","PayStore","CommonStore","cUtility","paymentPipe","CrdtRule","DeptRule"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){e=e||{},this.view=e.view,this.module=e.module,this.valHash={},this.isLayerShow=!1,this.isReRender=!0;var n=i.SelectIdStore.getInstance(),r=1;this.addRule=function(e){e&&e.policyId&&!this.valHash[e.policyId]&&(this.valHash[e.policyId]=e.valFn)},this.removeRule=function(e){e&&this.valHash[e]&&delete this.valHash[e]},this.updateRule=function(e){e&&e.policyId&&this.valHash[e.policyId]&&(this.valHash[e.policyId]=e.valFn)},this.updateModule=function(){this.module=="deposit"?this.valHash=f:this.module=="credit"&&(this.valHash=a)},this.init=function(){var e=this;this.updateModule()},this.setReRender=function(e){var t=!!e;this.isReRender=e},this.setModule=function(e){this.module=e,this.updateModule()},this.setLayerShow=function(e){var t=!!e;typeof e=="boolean"&&(this.isLayerShow=e)},this.showToast=function(e,t,n){var r=this.view;this.isLayerShow||(r.showToast(e,t,n),this.setLayerShow(!0))},this.initErrAlert=function(e,n){var r=this.view,i="",s="";arguments.length==1?s=arguments[0]:arguments.length==2&&(i=e,s=n);if(!this.isLayerShow){var o=new t.Alert({title:i||"",message:s||"",buttons:[{text:"确认",type:"confirm",click:function(){this.hide()}}]});o.show(),this.setLayerShow(!0)}},this.addErrClass=function(e,t){r&&(e.focus(),r=0),e&&e.addClass("cui-input-error"),t&&t.addClass("cui-input-error")},this.clearErrClass=function(e,t){r=1,e&&e.removeClass("cui-input-error"),t&&t.removeClass("cui-input-error")},this.isNull=function(e){var e=e,t=!0;return typeof e=="string"?e=e.trim():typeof e=="number"&&(e=e.toString().trim()),e&&(t=!1),t},this.showCardType=function(){var e=this.view;this.setReRender(!1),e.forward("payid?from="+encodeURIComponent(e.getViewUrl()))},this.showCardTypeFn=function(e,t){var r=n;r&&r.get()?r.getAttr("idname")&&r.getAttr("dcard")&&(e.attr("data-value",r.getAttr("dcard")),e.html(r.getAttr("idname"))):(e.attr("data-value","1"),e.html("身份证")),r.getAttr("changcard")&&t.val(""),this.getCardTypeId()==1?t.attr("maxlength","18"):t.attr("maxlength","40")},this.getCardTypeId=function(){var e=0;return n&&n.getAttr("dcard")?e=n.getAttr("dcard"):e=1,e},this.getDatePeriod=function(e){var t=/^[0-9]*$/,n=e.val(),r=n.substr(0,1),i=e[0];t.test(n)?parseInt(r)>1&&setTimeout(function(){e.val(""),e.val("0"+r)},50):(n=n.replace(/[^0-9]/ig,""),e.val(n))},this.init()};return l})