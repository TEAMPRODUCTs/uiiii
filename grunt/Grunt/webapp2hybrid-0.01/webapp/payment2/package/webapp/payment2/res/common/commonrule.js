define(["c","cWidgetFactory","PayModel","PayStore","CommonStore","cUtility","paymentPipe","Business"],function(e,t,n,r,i,s,o,u){var a=r.SelectIdStore.getInstance(),f=r.ExtendInfoStore.getInstance(),l=r.PaymentWayStore.getInstance(),c=e.base,h=c.Date,p=e.utility.validate,d=u.getPayMeth,v=function(e){var t=f,n=!1,r=t.getAttr("lastGuranteeDay");if(!r)return!0;var i=h.parse(""+r).format("Ym"),s=i?parseInt(i):0,o=e.substring(2,4),u=e.substring(0,2),a="20"+o+u;return a>=s&&(n=!0),n},m=function(e){var t=0;a&&a.getAttr("dcard")?t=a.getAttr("dcard"):t=1;var n=t,r=e.params.valHash,i=e.value,s=e._scope,o=e.params.obj,u=e.params.wrapObj;r[4]?n==1?i.length==18?/[^\dx]/gi.test(i)?(s.addErrClass(o,u),s.showToast("请输入正确的证件号码")):p.isIdCard(i)?s.clearErrClass(o,u):(s.addErrClass(o,u),s.showToast("请输入正确的证件号码")):i.length==15?(s.addErrClass(o,u),s.initErrAlert("根据国家规定，2013年1月起一代身份证停用。请填写二代身份证号。")):(s.addErrClass(o,u),s.showToast("请输入正确的证件号码")):n==4?i.length<=40?/[^\{\d\u4e00-\u9fa5 a-z]/gi.test(i)?(s.addErrClass(o,u),s.showToast("请输入正确的证件号码")):s.clearErrClass(o,u):(s.addErrClass(o,u),s.showToast("请输入正确的证件号码")):i.length<=40?/[^\(\)\d a-z]/gi.test(i)?(s.addErrClass(o,u),s.showToast("请输入正确的证件号码")):s.clearErrClass(o,u):(s.addErrClass(o,u),s.showToast("请输入正确的证件号码")):i.length<=40?/[^\(\)\d a-z]/gi.test(i)?(s.addErrClass(o,u),s.showToast("请输入正确的证件号码")):s.clearErrClass(o,u):(s.addErrClass(o,u),s.showToast("请输入正确的证件号码"))},g=function(){};return g.prototype[1]=function(e){var t=e.obj,n=e.wrapObj,r=t.val(),i=this;i.isNull(t.val())?(i.addErrClass(t,n),i.showToast("请输入信用卡验证码，卡背面3位数字",1.2)):t.val().trim().length>=3&&t.val().trim().length<=4?(r=r.trim(),/\D/gi.test(r)?(i.addErrClass(t,n),i.showToast("请输入正确的信用卡验证码，卡背面3位数字",1.2)):i.clearErrClass(t,n)):t.val().trim().length<3&&(i.addErrClass(t,n),i.showToast("请输入正确的信用卡验证码，卡背面3位数字",1.2))},g.prototype[2]=function(e){var t=e.obj,n=e.wrapObj,r=this,i=t.val(),s="",o="",u=0;r.isNull(i)?(r.addErrClass(t,n),r.showToast("请输入持卡人姓名",1.2)):(i=i.trim(),s=i.match(/[a-z]/gi)||[],o=i.match(/[^a-z]/gi)||[],u=s.length+o.length*2,/[^\s\/\u4e00-\u9fa5 a-z]/gi.test(i)?(r.addErrClass(t,n),r.showToast("请输入正确的持卡人姓名，只能包含汉字、英文字母、斜杠",1.2)):u>=4&&u<=40?r.clearErrClass(t,n):(r.addErrClass(t,n),r.showToast("请输入正确的持卡人姓名，只能包含汉字、英文字母、斜杠",1.2)))},g.prototype[4]=function(){},g.prototype[8]=function(e){var t=e.obj,n=e.wrapObj,r=this,i=t.val();r.isNull(i)?(r.addErrClass(t,n),r.showToast("请输入证件号码",1.2)):(i=i.trim(),m({value:i,_scope:r,params:e}))},g.prototype[16]=function(e){var t=e.obj,n=e.wrapObj,r=this,i=t.val();r.isNull(i)?(r.addErrClass(t,n),r.showToast("请填写手机号码",1.2)):(i=i.trim(),i.length==11?/\D/gi.test(i)?(r.addErrClass(t,n),r.showToast("请填写正确的手机号码",1.2)):/\d{11}/g.test(i)&&r.clearErrClass(t,n):(r.addErrClass(t,n),r.showToast("请填写正确的手机号码",1.2)))},g.prototype[32]=function(e){var t=e.obj,n=e.wrapObj,r=this,i=t.val().trim();r.isNull(i)?(r.addErrClass(t,n),r.showToast("请输入短信验证码",1.2)):(i=i.trim(),i.length==6?/\d{6}/g.test(i)?r.clearErrClass(t,n):(r.addErrClass(t,n),r.showToast("验证码错误,请重试",1.2)):(r.addErrClass(t,n),r.showToast("验证码错误,请重试",1.2)))},g.prototype[64]=function(e){var t=e.obj,n=e.wrapObj,r=t.val(),i=/\d{4}/gi,s=this;if(s.isNull(r))s.addErrClass(t,n),s.showToast("有效期填写错误，请检查",1.2);else{r=r.trim();if(i.test(r)){var o=Number(r.substr(0,2)),u=Number(r.substr(2)),a=new Date,f=a.getMonth()+1,l=a.getFullYear()?a.getFullYear():2014,c="";if(o<1){s.addErrClass(t,n),s.showToast("有效期填写错误，请检查",1.2);return}l&&(c=l.toString(),c.length==4&&(l=parseInt(c.slice(2))));if(o>12)s.addErrClass(t,n),s.showToast("有效期填写错误，请检查",1.2);else if(u<l?!0:u==l&&o<f?!0:!1)s.addErrClass(t,n),s.showToast("信用卡已过期，请重新填写或更换新卡",1.2);else{var h=!1;d()==1?u<l?(h=!0,s.addErrClass(t,n),s.showToast("有效期填写错误，请检查",1.2)):u==l?o>=f?s.clearErrClass(t,n):(h=!0,s.addErrClass(t,n),s.showToast("信用卡即将过期，请重新填写或更换新卡",1.2)):s.clearErrClass(t,n):d()==2&&(o+1>12?(o=1,u+=1):o+=1,u<l?(h=!0,s.addErrClass(t,n),s.showToast("有效期填写错误，请检查",1.2)):u==l?o>f+1?s.clearErrClass(t,n):(h=!0,s.addErrClass(t,n),s.showToast("信用卡即将过期，请重新填写或更换新卡",1.2)):s.clearErrClass(t,n)),h||(v(r)?s.clearErrClass(t,n):(s.addErrClass(t,n),s.showToast("信用卡即将过期，请重新填写或更换新卡",1.2)))}}else s.addErrClass(t,n),s.showToast("有效期填写错误，请检查",1.2)}},g.prototype[128]=function(e){var t=e.obj,n=e.wrapObj,r=t.val(),i=this;i.isNull(r)?(i.addErrClass(t,n),i.showToast("请输入信用卡号码",1.2)):(r=r.trim().replace(/\s/g,""),/\D/gi.test(r)?(i.addErrClass(t,n),i.showToast("请输入正确的信用卡卡号，或更换其他的信用卡",1.2)):r.length>=14&&r.length<=16?i.clearErrClass(t,n):(i.addErrClass(t,n),i.showToast("请输入正确的信用卡卡号，或更换其他的信用卡",1.2)))},g})