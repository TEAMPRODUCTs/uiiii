function __bridge_callback(e){e=decodeURIComponent(e);var t=JSON.parse(e);if(null!=t){if(null!=t.param&&t.param.hasOwnProperty("platform")){var n=navigator.userAgent;n.indexOf("Youth_CtripWireless")>0&&(Internal.isYouthApp=!0),platform=t.param.platform;var r=typeof platform;"number"==r?(1==platform||2==platform||3==platform)&&(Internal.isIOS=1==platform,Internal.isAndroid=2==platform,Internal.isWinOS=3==platform):"string"==r&&("1"==platform||"2"==platform||"3"==platform)&&(Internal.isIOS="1"==platform,Internal.isAndroid="2"==platform,Internal.isWinOS="3"==platform),Internal.isInApp=!0,Internal.appVersion=t.param.version,Internal.osVersion=t.param.osVersion,Internal.isWinOS?(window.navigator.userAgent.winPhoneUserAgent=window.navigator.userAgent+"_CtripWireless_"+Internal.appVersion,console=CtripConsole):Internal.isIOS&&(console=CtripConsole)}return val=window.app.callback(t),Internal.isWinOS&&(val=val?"true":"false"),val}return-1}function __writeLocalStorage(e,t){Internal.isNotEmptyString(e)&&localStorage.setItem(e,t)}var requirejs,require,define;!function(aa){function I(e){return"[object Function]"===L.call(e)}function J(e){return"[object Array]"===L.call(e)}function y(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function M(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function s(e,t){return ga.call(e,t)}function m(e,t){return s(e,t)&&e[t]}function G(e,t){for(var n in e)if(s(e,n)&&t(e[n],n))break}function R(e,t,n,r){return t&&G(t,function(t,i){(n||!s(e,i))&&(r&&"string"!=typeof t?(e[i]||(e[i]={}),R(e[i],t,n,r)):e[i]=t)}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ba(e){if(!e)return e;var t=aa;return y(e.split("."),function(e){t=t[e]}),t}function B(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ha(e){function t(e,t,n){var r,i,s,o,u,a,f,l=t&&t.split("/");r=l;var c=k.map,h=c&&c["*"];if(e&&"."===e.charAt(0))if(t){for(r=m(k.pkgs,t)?l=[t]:l.slice(0,l.length-1),t=e=r.concat(e.split("/")),r=0;t[r];r+=1)if(i=t[r],"."===i)t.splice(r,1),r-=1;else if(".."===i){if(1===r&&(".."===t[2]||".."===t[0]))break;r>0&&(t.splice(r-1,2),r-=2)}r=m(k.pkgs,t=e[0]),e=e.join("/"),r&&e===t+"/"+r.main&&(e=t)}else 0===e.indexOf("./")&&(e=e.substring(2));if(n&&c&&(l||h)){for(t=e.split("/"),r=t.length;r>0;r-=1){if(s=t.slice(0,r).join("/"),l)for(i=l.length;i>0;i-=1)if((n=m(c,l.slice(0,i).join("/")))&&(n=m(n,s))){o=n,u=r;break}if(o)break;!a&&h&&m(h,s)&&(a=m(h,s),f=r)}!o&&a&&(o=a,u=f),o&&(t.splice(0,u,o),e=t.join("/"))}return e}function n(e){A&&y(document.getElementsByTagName("script"),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName?(t.parentNode.removeChild(t),!0):void 0})}function r(e){var t=m(k.paths,e);return t&&J(t)&&1<t.length?(n(e),t.shift(),x.require.undef(e),x.require([e]),!0):void 0}function i(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,n,r,s){var o,u,a=null,f=n?n.name:null,l=e,c=!0,h="";return e||(c=!1,e="_@r"+(F+=1)),e=i(e),a=e[0],e=e[1],a&&(a=t(a,f,s),u=m(H,a)),e&&(a?h=u&&u.normalize?u.normalize(e,function(e){return t(e,f,s)}):t(e,f,s):(h=t(e,f,s),e=i(h),a=e[0],h=e[1],r=!0,o=x.nameToUrl(h))),r=!a||u||r?"":"_unnormalized"+(q+=1),{prefix:a,name:h,parentMap:n,unnormalized:!!r,url:o,originalName:l,isDefine:c,id:(a?a+"!"+h:h)+r}}function a(e){var t=e.id,n=m(L,t);return n||(n=L[t]=new x.Module(e)),n}function f(e,t,n){var r=e.id,i=m(L,r);!s(H,r)||i&&!i.defineEmitComplete?a(e).on(t,n):"defined"===t&&n(H[r])}function c(e,t){var n=e.requireModules,r=!1;t?t(e):(y(n,function(t){(t=m(L,t))&&(t.error=e,t.events.error&&(r=!0,t.emit("error",e)))}),r||l.onError(e))}function h(){T.length&&(ia.apply(D,[D.length-1,0].concat(T)),T=[])}function p(e){delete L[e],delete M[e]}function d(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,y(e.depMaps,function(r,i){var s=r.id,o=m(L,s);o&&!e.depMatched[i]&&!n[s]&&(m(t,s)?(e.defineDep(i,H[s]),e.check()):d(o,t,n))}),n[r]=!0)}function v(){var e,t,i,s,o=(i=1e3*k.waitSeconds)&&x.startTime+i<(new Date).getTime(),u=[],a=[],f=!1,l=!0;if(!E){if(E=!0,G(M,function(i){if(e=i.map,t=e.id,i.enabled&&(e.isDefine||a.push(i),!i.error))if(!i.inited&&o)r(t)?f=s=!0:(u.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(f=!0,!e.prefix))return l=!1}),o&&u.length)return i=B("timeout","Load timeout for modules: "+u,null,u),i.contextName=x.contextName,c(i);l&&y(a,function(e){d(e,{},{})}),o&&!s||!f||!A&&!da||C||(C=setTimeout(function(){C=0,v()},50)),E=!1}}function g(e){s(H,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(h();D.length;){if(e=D.shift(),null===e[0])return c(B("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));g(e)}}var E,S,x,N,C,k={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},L={},M={},_={},D=[],H={},j={},F=1,q=1;return N={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=H[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return k.config&&m(k.config,e.map.id)||{}},exports:H[e.map.id]}}},S=function(e){this.events=m(_,e.id)||{},this.map=e,this.shim=m(k.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;j[e]||(j[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(I(i)){if(this.events.error)try{r=x.execCb(n,i,t,r)}catch(s){e=s}else r=x.execCb(n,i,t,r);if(this.map.isDefine&&((t=this.module)&&void 0!==t.exports&&t.exports!==this.exports?r=t.exports:void 0===r&&this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=[this.map.id],e.requireType="define",c(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(H[n]=r,l.onResourceLoad)&&l.onResourceLoad(x,this.map,this.depMaps),p(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,r=o(e.prefix);this.depMaps.push(r),f(r,"defined",u(this,function(r){var i,h;h=this.map.name;var d=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(r.normalize&&(h=r.normalize(h,function(e){return t(e,d,!0)})||""),r=o(e.prefix+"!"+h,this.map.parentMap),f(r,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(h=m(L,r.id))&&(this.depMaps.push(r),this.events.error&&h.on("error",u(this,function(e){this.emit("error",e)})),h.enable())):(i=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],G(L,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&p(e.map.id)}),c(e)}),i.fromText=u(this,function(t,r){var u=e.name,f=o(u),h=O;r&&(t=r),h&&(O=!1),a(f),s(k.config,n)&&(k.config[u]=k.config[n]);try{l.exec(t)}catch(p){return c(B("fromtexteval","fromText eval for "+n+" failed: "+p,p,[n]))}h&&(O=!0),this.depMaps.push(f),x.completeLoad(u),v([u],i)}),r.load(e.name,v,i,k))})),x.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){M[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,u(this,function(e,t){var n,r;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=m(N,e.id))return void (this.depExports[t]=n(this));this.depCount+=1,f(e,"defined",u(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&f(e,"error",this.errback)}n=e.id,r=L[n],!s(N,n)&&r&&!r.enabled&&x.enable(e,this)})),G(this.pluginMaps,u(this,function(e){var t=m(L,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){y(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:k,contextName:e,registry:L,defined:H,urlFetched:j,defQueue:D,Module:S,makeModuleMap:o,nextTick:l.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=k.pkgs,n=k.shim,r={paths:!0,config:!0,map:!0};G(e,function(e,t){r[t]?"map"===t?(k.map||(k.map={}),R(k[t],e,!0,!0)):R(k[t],e,!0):k[t]=e}),e.shim&&(G(e.shim,function(e,t){J(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=x.makeShimExports(e)),n[t]=e}),k.shim=n),e.packages&&(y(e.packages,function(e){e="string"==typeof e?{name:e}:e,t[e.name]={name:e.name,location:e.location||e.name,main:(e.main||"main").replace(ja,"").replace(ea,"")}}),k.pkgs=t),G(L,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(aa,arguments)),t||e.exports&&ba(e.exports)}},makeRequire:function(n,r){function i(t,u,f){var h,p;return r.enableBuildCallback&&u&&I(u)&&(u.__requireJsBuild=!0),"string"==typeof t?I(u)?c(B("requireargs","Invalid require call"),f):n&&s(N,t)?N[t](L[n.id]):l.get?l.get(x,t,n,i):(h=o(t,n,!1,!0),h=h.id,s(H,h)?H[h]:c(B("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+e+(n?"":". Use require([])")))):(w(),x.nextTick(function(){w(),p=a(o(null,n)),p.skipMap=r.skipMap,p.init(t,u,f,{enabled:!0}),v()}),i)}return r=r||{},R(i,{isBrowser:A,toUrl:function(e){var r,i=e.lastIndexOf("."),s=e.split("/")[0];return-1!==i&&("."!==s&&".."!==s||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),x.nameToUrl(t(e,n&&n.id,!0),r,!0)},defined:function(e){return s(H,o(e,n,!1,!0).id)},specified:function(e){return e=o(e,n,!1,!0).id,s(H,e)||s(L,e)}}),n||(i.undef=function(e){h();var t=o(e,n,!0),r=m(L,e);delete H[e],delete j[t.url],delete _[e],r&&(r.events.defined&&(_[e]=r.events),p(e))}),i},enable:function(e){m(L,e.id)&&a(e).enable()},completeLoad:function(e){var t,n,i=m(k.shim,e)||{},o=i.exports;for(h();D.length;){if(n=D.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);g(n)}if(n=m(L,e),!t&&!s(H,e)&&n&&!n.inited){if(k.enforceDefine&&(!o||!ba(o)))return r(e)?void 0:c(B("nodefine","No define call for "+e,null,[e]));g([e,i.deps||[],i.exportsFn])}v()},nameToUrl:function(e,t,n){var r,i,s,o,u,a;if(l.jsExtRegExp.test(e))o=e+(t||"");else{for(r=k.paths,i=k.pkgs,o=e.split("/"),u=o.length;u>0;u-=1){if(a=o.slice(0,u).join("/"),s=m(i,a),a=m(r,a)){J(a)&&(a=a[0]),o.splice(0,u,a);break}if(s){e=e===s.name?s.location+"/"+s.main:s.location,o.splice(0,u,e);break}}o=o.join("/"),o+=t||(/\?/.test(o)||n?"":".js"),o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+o}return k.urlArgs?o+((-1===o.indexOf("?")?"?":"&")+k.urlArgs):o},load:function(e,t){l.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){("load"===e.type||ka.test((e.currentTarget||e.srcElement).readyState))&&(P=null,e=b(e),x.completeLoad(e.id))},onScriptError:function(e){var t=b(e);return r(t.id)?void 0:c(B("scripterror","Script error",e,[t.id]))}},x.require=x.makeRequire(),x}var l,w,x,D,t,E,P,K,Q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,A="undefined"!=typeof window&&!!navigator&&!!document,da=!A&&"undefined"!=typeof importScripts,ka=A&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},r={},T=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(I(requirejs))return;r=requirejs,requirejs=void 0}"undefined"!=typeof require&&!I(require)&&(r=require,require=void 0),l=requirejs=function(e,t,n,r){var i,s="_";return!J(e)&&"string"!=typeof e&&(i=e,J(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=m(F,s))||(r=F[s]=l.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},l.config=function(e){return l(e)},l.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=l),l.version="2.1.5",l.jsExtRegExp=/^\/|:|\?|\.js$/,l.isBrowser=A,w=l.s={contexts:F,newContext:ha},l({}),y(["toUrl","undef","defined","specified"],function(e){l[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),A&&(x=w.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(x=w.head=D.parentNode),l.onError=function(e){throw e},l.load=function(e,t,n){var r,i=e&&e.config||{};if(A)return r=i.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),r.type=i.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code")||Y?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(O=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,K=r,D?x.insertBefore(r,D):x.appendChild(r),K=null,r;if(da)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(B("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},A&&M(document.getElementsByTagName("script"),function(e){return x||(x=e.parentNode),(t=e.getAttribute("data-main"))?(r.baseUrl||(E=t.split("/"),Q=E.pop(),fa=E.length?E.join("/")+"/":"./",r.baseUrl=fa,t=Q),t=t.replace(ea,""),r.deps=r.deps?r.deps.concat(t):[t],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),J(t)||(n=t,t=[]),!t.length&&I(n)&&n.length&&(n.toString().replace(la,"").replace(ma,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t)),O&&((r=K)||(P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(e){return"interactive"===e.readyState?P=e:void 0}),r=P),r&&(e||(e=r.getAttribute("data-requiremodule")),i=F[r.getAttribute("data-requirecontext")])),(i?i.defQueue:T).push([e,t,n])},define.amd={jQuery:!0},l.exec=function(b){return eval(b)},l(r)}}(this),define("R",function(){});var __CTRIP_JS_PARAM="?jsparam=",__CTRIP_URL_PLUGIN="ctrip://h5/plugin"+__CTRIP_JS_PARAM,__CTRIP_YOUTH_URL_PLUGIN="ctripyouth://h5/plugin"+__CTRIP_JS_PARAM,Internal={isIOS:!1,isAndroid:!1,isWinOS:!1,isInApp:!1,appVersion:"",osVersion:"",isYouthApp:!1,isAppVersionGreatThan:function(e){if(Internal.isYouthApp)return!0;if("string"==typeof e&&e.length>0&&Internal.appVersion){var t=e.replace(/\./g,""),n=Internal.appVersion.replace(/\./g,""),r=parseFloat(t),i=parseFloat(n);if(isNaN(i)||i-r>=0)return!0}return!1},isSupportAPIWithVersion:function(e){return!0},appVersionNotSupportCallback:function(e){var t={tagname:"app_version_too_low",start_version:e,app_version:Internal.appVersion};CtripTool.app_log(JSON.stringify(t)),window.app.callback(t)},paramErrorCallback:function(e){var t={tagname:"app_param_error",description:e};CtripTool.app_log(JSON.stringify(t)),window.app.callback(t)},isNotEmptyString:function(e){return"string"==typeof e&&e.length>0?!0:!1},loadURL:function(e){if(0!=e.length){var t=document.createElement("iframe"),n=document.body||document.documentElement;t.style.display="none",t.setAttribute("src",e),n.appendChild(t),setTimeout(function(){t.parentNode.removeChild(t),t=null},200)}},makeParamString:function(e,t,n,r){return Internal.isNotEmptyString(e)&&Internal.isNotEmptyString(t)?(n||(n={}),n.service=e,n.action=t,n.callback_tagname=r,JSON.stringify(n)):""},makeURLWithParam:function(e){return null==e&&(e=""),e=encodeURIComponent(e),Internal.isYouthApp?__CTRIP_YOUTH_URL_PLUGIN+e:__CTRIP_URL_PLUGIN+e},callWin8App:function(e){window.external.notify(e)}},originalConsole=console,console=originalConsole,CtripConsole={log:function(e){Internal.isWinOS?Internal.callWin8App("wp-log:#wp#Log:"+e):Internal.isIOS&&Internal.loadURL("ios-log:#iOS#Log:"+e)},debug:function(e){Internal.isWinOS?Internal.callWin8App("wp-log:#wp#Debug:"+e):Internal.isIOS&&Internal.loadURL("ios-log:#iOS#Debug:"+e)},info:function(e){Internal.isWinOS?Internal.callWin8App("wp-log:#wp#info:"+e):Internal.isIOS&&Internal.loadURL("ios-log:#iOS#Info:"+e)},warn:function(e){Internal.isWinOS?Internal.callWin8App("wp-log:#wp#warn:"+e):Internal.isIOS&&Internal.loadURL("ios-log:#iOS#warn:"+e)},error:function(e){Internal.isWinOS?Internal.callWin8App("wp-log:#wp#Error:"+e):Internal.isIOS&&Internal.loadURL("ios-log:#iOS#Error:"+e)}},CtripTool={app_is_in_ctrip_app:function(){if(Internal.isInApp)return!0;var e=!1,t=navigator.userAgent;return t.indexOf("CtripWireless")>0&&(e=!0),e}},CtripUtil={app_init_member_H5_info:function(){var e=Internal.makeParamString("User","initMemberH5Info",null,"init_member_H5_info");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.User_a.initMemberH5Info(e):Internal.isWinOS&&Internal.callWin8App(e)},app_call_phone:function(e,t,n){e||(e="");var r={};r.pageId=t,r.phone=e,r.businessCode=n;var i=Internal.makeParamString("Util","callPhone",r,"call_phone");if(Internal.isIOS){var s=Internal.makeURLWithParam(i);Internal.loadURL(s)}else Internal.isAndroid?window.Util_a.callPhone(i):Internal.isWinOS&&Internal.callWin8App(i)},app_back_to_home:function(){var e=Internal.makeParamString("Util","backToHome",null,"back_to_home");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else if(Internal.isAndroid){var n="ctrip://wireless/";Internal.isYouthApp&&(n="ctripyouth://wireless/"),CtripUtil.app_open_url(n,1,"  ")}else Internal.isWinOS&&Internal.callWin8App(e)},app_back_to_last_page:function(e,t){var n={};e||(e=""),n.callbackString=e,n.isDeleteH5Page=t;var r=Internal.makeParamString("Util","backToLast",n,"back_to_last_page");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.Util_a.backToLast(r):Internal.isWinOS&&Internal.callWin8App(r)},app_open_url:function(e,t,n,r,i){var s={};e||(e=""),n||(n=""),r||(r=""),s.openUrl=e,s.title=n,s.targetMode=t,s.pageName=r,s.isShowLoadingPage=i;var o=Internal.makeParamString("Util","openUrl",s,"open_url");if(Internal.appVersion){var u=!1;if(5==t&&!Internal.isAppVersionGreatThan("5.9")){var a=e.indexOf("/");if(a>0){var f=e.substr(0,a),l=e.substr(a+1);CtripUtil.app_cross_package_href(f,l)}else Internal.appVersionNotSupportCallback("传入URL有错误，eg. car/index.html#xxooee");u=!0}if(!u)if(Internal.isIOS){var c=Internal.makeURLWithParam(o);Internal.loadURL(c)}else Internal.isAndroid?window.Util_a.openUrl(o):Internal.isWinOS&&Internal.callWin8App(o)}else{var h=navigator.userAgent,p=h.indexOf("Android")>0&&h.indexOf("CtripWireless")>0;if(p)try{window.Util_a.openUrl(o)}catch(d){window.location.href=e}else window.location.href=e}},app_cross_package_href:function(e,t){var n={};e||(e=""),t||(t=""),n.path=e,n.param=t;var r=Internal.makeParamString("Util","crossPackageJumpUrl",n,"cross_package_href");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.Util_a.crossPackageJumpUrl(r):Internal.isWinOS&&Internal.callWin8App(r)},app_check_network_status:function(){var e=Internal.makeParamString("Util","checkNetworkStatus",null,"check_network_status");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Util_a.checkNetworkStatus(e):Internal.isWinOS&&Internal.callWin8App(e)},app_check_app_install_status:function(e,t){var n={};e||(e=""),t||(t=""),n.openUrl=e,n.packageName=t;var r=Internal.makeParamString("Util","checkAppInstallStatus",n,"check_app_install_status");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.Util_a.checkAppInstallStatus(r):Internal.isWinOS&&Internal.callWin8App(r)},app_refresh_native_page:function(e,t){var n={};e||(e=""),t||(t=""),n.pageName=e,n.jsonStr=t;var r=Internal.makeParamString("Util","refreshNativePage",n,"refresh_native_page");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.Util_a.refreshNativePage(r):Internal.isWinOS&&Internal.callWin8App(r)},app_copy_string_to_clipboard:function(e){if(Internal.isSupportAPIWithVersion("5.3")){var t={};e||(e=""),t.copyString=e;var n=Internal.makeParamString("Util","copyToClipboard",t,"copy_string_to_clipboard");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Util_a.copyToClipboard(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_read_copied_string_from_clipboard:function(){if(Internal.isSupportAPIWithVersion("5.3")){var e=Internal.makeParamString("Util","readCopiedStringFromClipboard",null,"read_copied_string_from_clipboard");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Util_a.readCopiedStringFromClipboard(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_download_data:function(e,t,n){if(Internal.isSupportAPIWithVersion("5.3")){var r={};e||(e=""),t||(t=""),r.downloadUrl=e,r.suffix=t,r.pageUrl=window.location.href,r.isIgnoreHttpsCertification=n;var i=Internal.makeParamString("Util","downloadData",r,"download_data");if(Internal.isIOS){var s=Internal.makeURLWithParam(i);Internal.loadURL(s)}else Internal.isAndroid?window.Util_a.downloadData(i):Internal.isWinOS&&Internal.callWin8App(i)}},app_open_other_app:function(e,t,n){if(Internal.isSupportAPIWithVersion("5.3")){var r={};e||(e=""),t||(t=""),n||(n=""),r.packageId=e,r.jsonParam=t,r.url=n;var i=Internal.makeParamString("Util","openOtherApp",r,"open_other_app");if(Internal.isIOS){var n=Internal.makeURLWithParam(i);Internal.loadURL(n)}else Internal.isAndroid?window.Util_a.openOtherApp(i):Internal.isWinOS&&Internal.callWin8App(i)}},app_log:function(e,t){if(Internal.isNotEmptyString(e)){Internal.isNotEmptyString(t)||(t="");var n={};n.log=e,n.result=t;var r=Internal.makeParamString("Util","h5Log",n,"log");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.Util_a.h5Log(r):Internal.isWinOS&&Internal.callWin8App(r)}},app_choose_photo:function(e,t,n){if(Internal.isSupportAPIWithVersion("5.7")){var r={};r.maxFileSize=e,r.maxPhotoCount=t,r.meta=n;var i=Internal.makeParamString("Util","choosePhoto",r,"choose_photo");if(Internal.isIOS){var s=Internal.makeURLWithParam(i);Internal.loadURL(s)}else Internal.isAndroid?window.Util_a.choosePhoto(i):Internal.isWinOS&&Internal.callWin8App(i)}},app_save_photo:function(e,t,n){if(Internal.isSupportAPIWithVersion("5.7")){var r={};e||(e=""),t||(t=""),n||(n=""),r.photoUrl=e,r.photoBase64String=t,r.imageName=n;var i=Internal.makeParamString("Util","savePhoto",r,"save_photo");if(Internal.isIOS){var s=Internal.makeURLWithParam(i);Internal.loadURL(s)}else Internal.isAndroid?window.Util_a.savePhoto(i):Internal.isWinOS&&Internal.callWin8App(i)}},app_h5_page_finish_loading:function(){if(Internal.isSupportAPIWithVersion("5.8")){var e=Internal.makeParamString("Util","h5PageFinishLoading",null,"h5_page_finish_loading");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Util_a.h5PageFinishLoading(e):Internal.isWinOS&&Internal.callWin8App(e)}}},CtripUser={app_member_login:function(e){var t={};t.isShowNonMemberLogin=e;var n=Internal.makeParamString("User","memberLogin",t,"member_login");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.User_a.memberLogin(n):Internal.isWinOS&&Internal.callWin8App(n)},app_non_member_login:function(){var e=Internal.makeParamString("User","nonMemberLogin",null,"non_member_login");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.User_a.nonMemberLogin(e):Internal.isWinOS&&Internal.callWin8App(e)},app_member_auto_login:function(){var e=Internal.makeParamString("User","memberAutoLogin",null,"member_auto_login");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.User_a.memberAutoLogin(e):Internal.isWinOS&&Internal.callWin8App(e)},app_member_register:function(){var e=Internal.makeParamString("User","memberRegister",null,"member_register");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.User_a.memberRegister(e):Internal.isWinOS&&Internal.callWin8App(e)},app_finished_register:function(e){if(Internal.isSupportAPIWithVersion("5.7")){e||(e="");var t={};t.userInfoJson=e;var n=Internal.makeParamString("User","finishedRegister",t,"finished_register");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.User_a.finishedRegister(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_finished_login:function(e){if(Internal.isSupportAPIWithVersion("5.8")){e||(e="");var t={};t.userInfoJson=e;var n=Internal.makeParamString("User","finishedLogin",t,"finished_login");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.User_a.finishedLogin(n):Internal.isWinOS&&Internal.callWin8App(n)}}},CtripEncrypt={app_base64_encode:function(e){if(Internal.isSupportAPIWithVersion("5.3")){e||(e=""),params={},params.toIncodeString=e;var t=Internal.makeParamString("Encrypt","base64Encode",params,"base64_encode");if(Internal.isIOS){var n=Internal.makeURLWithParam(t);Internal.loadURL(n)}else Internal.isAndroid?window.Encrypt_a.base64Encode(t):Internal.isWinOS&&Internal.callWin8App(t)}},app_md5_hash:function(e){if(Internal.isSupportAPIWithVersion("5.5")){e||(e=""),params={},params.inString=e;var t=Internal.makeParamString("Encrypt","md5Hash",params,"md5_hash");if(Internal.isIOS){var n=Internal.makeURLWithParam(t);Internal.loadURL(n)}else Internal.isAndroid?window.Encrypt_a.md5Hash(t):Internal.isWinOS&&Internal.callWin8App(t)}},app_ctrip_encrypt:function(e,t){if(Internal.isSupportAPIWithVersion("5.5")){e||(e=""),params={},params.inString=e,params.encType=t;var n=Internal.makeParamString("Encrypt","ctripEncrypt",params,"ctrip_encrypt");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Encrypt_a.ctripEncrypt(n):Internal.isWinOS&&Internal.callWin8App(n)}}},CtripPay={app_check_pay_app_install_status:function(){if(Internal.isSupportAPIWithVersion("5.4")){var e=Internal.makeParamString("Pay","checkPayAppInstallStatus",null,"check_pay_app_install_status");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Pay_a.checkPayAppInstallStatus(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_open_pay_app_by_url:function(e,t,n,r){if(Internal.isSupportAPIWithVersion("5.4")){t||(t=""),e||(e=""),n||(n=""),r||(r="");var i={};i.payMeta=t,i.payAppName=e,i.successRelativeURL=n,i.detailRelativeURL=r;var s=Internal.makeParamString("Pay","openPayAppByURL",i,"open_pay_app_by_url");if(Internal.isIOS){var o=Internal.makeURLWithParam(s);Internal.loadURL(o)}else Internal.isAndroid?window.Pay_a.openPayAppByURL(s):Internal.isWinOS&&Internal.callWin8App(s)}},app_call_pay:function(e){if(e=e||{},e.param=e.param||"","string"==typeof e.param){for(var t=e.param.split("?")[1]||"",n=t.split("&")||[],r="",i=0;i<n.length;i++){var s=n[i].split("=")||[],o=s[0],u=s[1];if("bustype"===o){r=u;break}}e.names=["payment_route_"+r];var a=Internal.makeParamString("Pay","callPay",e,"call_pay");if(Internal.isIOS){var f=Internal.makeURLWithParam(a);Internal.loadURL(f)}else Internal.isAndroid?window.Pay_a.callPay(a):Internal.isWinOS&&Internal.callWin8App(a)}}},CtripPipe={app_send_HTTP_pipe_request:function(e,t,n,r,i,s,o){if(Internal.isSupportAPIWithVersion("5.4")){e||(e=""),t||(t=""),n||(n=""),r||(r=""),i||(i=""),o||(o="");var u={};u.baseURL=e,u.path=t,u.method=n,u.header=r,u.parameters=i,u.sequenceId=o,u.isIgnoreHTTPSCertification=s;var a=Internal.makeParamString("Pipe","sendHTTPPipeRequest",u,"send_http_pipe_request");if(Internal.isIOS){var f=Internal.makeURLWithParam(a);Internal.loadURL(f)}else Internal.isAndroid?window.Pipe_a.sendHTTPPipeRequest(a):Internal.isWinOS&&Internal.callWin8App(a)}},app_abort_HTTP_pipe_request:function(e){if(Internal.isSupportAPIWithVersion("5.4")){e||(e="");var t={};t.sequenceId=e;var n=Internal.makeParamString("Pipe","abortHTTPRequest",t,"abort_http_pipe_request");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Pipe_a.abortHTTPRequest(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_send_H5_pipe_request:function(e,t,n,r,i){if(Internal.isSupportAPIWithVersion("5.4")){e||(e=""),t||(t=""),n||(n=""),r||(r=""),i||(i=0);var s={};s.serviceCode=e,s.header=t,s.data=n,s.sequenceId=r,s.pipeType=i;var o=Internal.makeParamString("Pipe","sendH5PipeRequest",s,"send_h5_pipe_request");if(Internal.isIOS){var u=Internal.makeURLWithParam(o);Internal.loadURL(u)}else Internal.isAndroid?window.Pipe_a.sendH5PipeRequest(o):Internal.isWinOS&&Internal.callWin8App(o)}}},CtripSumSungWallet={app_check_ticket_in_samsung_wallet:function(e){e||(e="");var t={};t.ticketID=e,paramString=Internal.makeParamString("SamSungWallet","checkTicketInSamSungWallet",t,"check_ticket_in_samsung_wallet"),Internal.isAndroid&&window.SamSungWallet_a.checkTicketInSamSungWallet(paramString)},app_download_ticket_in_samsung_wallet:function(e){e||(e="");var t={};t.ticketID=e,paramString=Internal.makeParamString("SamSungWallet","downloadTicketInSamSungWallet",t,"download_ticket_in_samsung_wallet"),Internal.isAndroid&&window.SamSungWallet_a.downloadTicketInSamSungWallet(paramString)},app_show_ticket_in_samsung_wallet:function(e){e||(e="");var t={};t.ticketID=e,paramString=Internal.makeParamString("SamSungWallet","showTicketInSamSungWallet",t,"show_ticket_in_samsung_wallet"),Internal.isAndroid&&window.SamSungWallet_a.showTicketInSamSungWallet(paramString)}},CtripFile={app_get_current_sandbox_name:function(){if(Internal.isSupportAPIWithVersion("5.4")){var e={};e.pageUrl=window.location.href;var t=Internal.makeParamString("File","getCurrentSandboxName",e,"get_current_sandbox_name");if(Internal.isIOS){var n=Internal.makeURLWithParam(t);Internal.loadURL(n)}else Internal.isAndroid?window.File_a.getCurrentSandboxName(t):Internal.isWinOS&&Internal.callWin8App(t)}},app_write_text_to_file:function(e,t,n,r){if(Internal.isSupportAPIWithVersion("5.4")){e||(e=""),t||(t=""),n||(n="");var i={};i.pageUrl=window.location.href,i.text=e,i.fileName=t,i.relativeFilePath=n,i.isAppend=r;var s=Internal.makeParamString("File","writeTextToFile",i,"write_text_to_file");if(Internal.isIOS){var o=Internal.makeURLWithParam(s);Internal.loadURL(o)}else Internal.isAndroid?window.File_a.writeTextToFile(s):Internal.isWinOS&&Internal.callWin8App(s)}},app_delete_file:function(e,t){if(Internal.isSupportAPIWithVersion("5.4")){e||(e=""),t||(t="");var n={};n.fileName=e,n.relativeFilePath=t,n.pageUrl=window.location.href;var r=Internal.makeParamString("File","deleteFile",n,"delete_file");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.File_a.deleteFile(r):Internal.isWinOS&&Internal.callWin8App(r)}},app_read_text_from_file:function(e,t){if(Internal.isSupportAPIWithVersion("5.4")){e||(e=""),t||(t="");var n={};n.fileName=e,n.pageUrl=window.location.href,n.relativeFilePath=t;var r=Internal.makeParamString("File","readTextFromFile",n,"read_text_from_file");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.File_a.readTextFromFile(r):Internal.isWinOS&&Internal.callWin8App(r)}},app_get_file_size:function(e,t){if(Internal.isSupportAPIWithVersion("5.4")){e||(e=""),t||(t="");var n={};n.fileName=e,n.relativeFilePath=t,n.pageUrl=window.location.href;var r=Internal.makeParamString("File","getFileSize",n,"get_file_size");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.File_a.getFileSize(r):Internal.isWinOS&&Internal.callWin8App(r)}},app_check_file_exist:function(e,t){if(Internal.isSupportAPIWithVersion("5.4")){e||(e=""),t||(t="");var n={};n.fileName=e,n.relativeFilePath=t,n.pageUrl=window.location.href;var r=Internal.makeParamString("File","checkFileExist",n,"check_file_exist");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.File_a.checkFileExist(r):Internal.isWinOS&&Internal.callWin8App(r)}},app_make_dir:function(e,t){if(Internal.isSupportAPIWithVersion("5.4")){e||(e=""),t||(t="");var n={};n.dirName=e,n.pageUrl=window.location.href,n.relativeDirPath=t;var r=Internal.makeParamString("File","makeDir",n,"make_dir");if(Internal.isIOS){var i=Internal.makeURLWithParam(r);Internal.loadURL(i)}else Internal.isAndroid?window.File_a.makeDir(r):Internal.isWinOS&&Internal.callWin8App(r)}}},CtripBar={app_refresh_nav_bar:function(e){if(Internal.isNotEmptyString(e)){jsonObj=JSON.parse(e),jsonObj.service="NavBar",jsonObj.action="refresh",jsonObj.callback_tagname="refresh_nav_bar";var t=JSON.stringify(jsonObj);if(Internal.isIOS){var n=Internal.makeURLWithParam(t);Internal.loadURL(n)}else Internal.isAndroid?window.NavBar_a.refresh(t):Internal.isWinOS&&Internal.callWin8App(t)}},app_set_navbar_hidden:function(e){if(Internal.isSupportAPIWithVersion("5.4")){var t={};t.isHidden=e;var n=Internal.makeParamString("NavBar","setNavBarHidden",t,"set_navbar_hidden");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.NavBar_a.setNavBarHidden(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_set_toolbar_hidden:function(e){if(Internal.isSupportAPIWithVersion("5.4")){var t={};t.isHidden=e;var n=Internal.makeParamString("NavBar","setToolBarHidden",t,"set_toolbar_hidden");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.NavBar_a.setToolBarHidden(n):Internal.isWinOS&&Internal.callWin8App(n)}}},CtripMap={app_locate:function(e,t,n,r){var i={};i.timeout=e,i.isNeedCtripCity=t,i.isForceLocate=n,i.sequenceId=r;var s=Internal.makeParamString("Locate","locate",i,"locate");if(Internal.isIOS){var o=Internal.makeURLWithParam(s);Internal.loadURL(o)}else Internal.isAndroid?window.Locate_a.locate(s):Internal.isWinOS&&Internal.callWin8App(s)},app_stop_locate:function(e){if(Internal.isSupportAPIWithVersion("6.0")){var t={};t.sequenceId=e;var n=Internal.makeParamString("Locate","stopLocate",t,"stop_locate");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Locate_a.stopLocate(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_show_map:function(e,t,n,r){if(Internal.isSupportAPIWithVersion("5.5")){n||(n=""),r||(r="");var i={};i.latitude=e,i.longitude=t,i.title=n,i.subtitle=r;var s=Internal.makeParamString("Locate","showMap",i,"show_map");if(Internal.isIOS){var o=Internal.makeURLWithParam(s);Internal.loadURL(o)}else Internal.isAndroid?window.Locate_a.showMap(s):Internal.isWinOS&&Internal.callWin8App(s)}},app_show_map_with_POI_list:function(e){if(Internal.isSupportAPIWithVersion("5.8")){var t={};t.poiList=e;var n=Internal.makeParamString("Locate","showMapWithPOIList",t,"show_map_with_POI_list");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Locate_a.showMapWithPOIList(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_get_cached_ctrip_city:function(){if(Internal.isSupportAPIWithVersion("6.0")){var e=Internal.makeParamString("Locate","getCachedCtripCity",null,"get_cached_ctrip_city");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Locate_a.getCachedCtripCity(e):Internal.isWinOS&&Internal.callWin8App(e)}}},CtripBusiness={app_choose_invoice_title:function(e){if(Internal.isSupportAPIWithVersion("5.6")){e||(e="");var t={};t.selectedInvoiceTitle=e;var n=Internal.makeParamString("Business","chooseInvoiceTitle",t,"choose_invoice_title");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Business_a.chooseInvoiceTitle(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_show_voice_search:function(e){if(Internal.isSupportAPIWithVersion("5.7")){var t={};t.businessType=e;var n=Internal.makeParamString("Business","showVoiceSearch",t,"show_voice_search");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Business_a.showVoiceSearch(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_open_adv_page:function(e){if(Internal.isSupportAPIWithVersion("5.4")){var t={};t.advUrl=e,paramString=Internal.makeParamString("Util","openAdvPage",t,"open_adv_page"),Internal.isIOS?(url=Internal.makeURLWithParam(paramString),Internal.loadURL(url)):Internal.isAndroid?window.Util_a.openAdvPage(paramString):Internal.isWinOS&&Internal.callWin8App(paramString)}},app_show_newest_introduction:function(){var e=Internal.makeParamString("Util","showNewestIntroduction",null,"show_newest_introduction");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Util_a.showNewestIntroduction(e):Internal.isWinOS&&Internal.callWin8App(e)},app_check_update:function(){var e=Internal.makeParamString("Util","checkUpdate",null,"check_update");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Util_a.checkUpdate(e):Internal.isWinOS&&Internal.callWin8App(e)},app_recommend_app_to_friends:function(){var e=Internal.makeParamString("Util","recommendAppToFriends",null,"recommend_app_to_friends");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Util_a.recommendAppToFriends(e):Internal.isWinOS&&Internal.callWin8App(e)},app_add_weixin_friend:function(){var e=Internal.makeParamString("Util","addWeixinFriend",null,"add_weixin_friend");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Util_a.addWeixinFriend(e):Internal.isWinOS&&Internal.callWin8App(e)},app_call_system_share:function(e,t,n,r){CtripShare.app_call_system_share(e,t,n,r)},app_log_event:function(e){if(Internal.isNotEmptyString(e)){var t={};t.event=e;var n=Internal.makeParamString("Util","logEvent",t,"log_event");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Util_a.logEvent(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_get_device_info:function(){if(Internal.isSupportAPIWithVersion("5.7")){var e=Internal.makeParamString("Business","getDeviceInfo",null,"get_device_info");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Business_a.getDeviceInfo(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_read_verification_code_from_sms:function(){if(Internal.isSupportAPIWithVersion("5.8")){var e=Internal.makeParamString("Business","readVerificationCodeFromSMS",null,"read_verification_code_from_sms");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Business_a.readVerificationCodeFromSMS(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_log_google_remarkting:function(e){if(Internal.isSupportAPIWithVersion("5.8")){e||(e="");var t={};t.screenName=e;var n=Internal.makeParamString("Business","logGoogleRemarking",t,"log_google_remarkting");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Business_a.logGoogleRemarking(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_choose_contact_from_addressbook:function(){if(Internal.isSupportAPIWithVersion("5.9")){var e=Internal.makeParamString("Business","chooseContactFromAddressbook",null,"choose_contact_from_addressbook");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Business_a.chooseContactFromAddressbook(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_send_ubt_log:function(e){if(Internal.isSupportAPIWithVersion("5.9")){var t={};t.tags=e;var n=Internal.makeParamString("Business","sendUBTLog",t,"send_ubt_log");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Business_a.sendUBTLog(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_do_business_job:function(e,t,n,r){if(Internal.isSupportAPIWithVersion("6.0")){var i={};i.businessType=e,i.businessCode=t,i.jsonParam=n,i.sequenceId=r;var s=Internal.makeParamString("Business","doBusinessJob",i,"do_business_job");if(Internal.isIOS){var o=Internal.makeURLWithParam(s);Internal.loadURL(o)}else Internal.isAndroid?window.Business_a.doBusinessJob(s):Internal.isWinOS&&Internal.callWin8App(s)}}},CtripPage={app_set_page_name:function(e){if(Internal.isSupportAPIWithVersion("5.6")){e||(e="");var t={};t.pageName=e;var n=Internal.makeParamString("Page","setPageName",t,"set_page_name");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Page_a.setPageName(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_back_to_page:function(e){if(Internal.isSupportAPIWithVersion("5.8")){e||(e="");var t={};t.pageName=e;var n=Internal.makeParamString("Page","backToPage",t,"back_to_page");if(Internal.isIOS){var r=Internal.makeURLWithParam(n);Internal.loadURL(r)}else Internal.isAndroid?window.Page_a.backToPage(n):Internal.isWinOS&&Internal.callWin8App(n)}},app_show_loading_page:function(){if(Internal.isSupportAPIWithVersion("5.9")){var e=Internal.makeParamString("Page","showLoadingPage",null,"show_loading_page");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Page_a.showLoadingPage(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_hide_loading_page:function(){if(Internal.isSupportAPIWithVersion("5.9")){var e=Internal.makeParamString("Page","hideLoadingPage",null,"hide_loading_page");if(Internal.isIOS){var t=Internal.makeURLWithParam(e);Internal.loadURL(t)}else Internal.isAndroid?window.Page_a.hideLoadingPage(e):Internal.isWinOS&&Internal.callWin8App(e)}},app_enable_drag_animation:function(e){if(Internal.isSupportAPIWithVersion("5.9")){var t={};t.isEnable=e;var n=Internal.makeParamString("Page","enableDragAnimation",t,"enable_drag_animation");Internal.isIOS?(url=Internal.makeURLWithParam(n),Internal.loadURL(url)):Internal.isAndroid||Internal.isWinOS&&Internal.callWin8App(n)}}},CtripShare={app_call_system_share:function(e,t,n,r){if(Internal.isSupportAPIWithVersion("5.3")){var i={};i.title=n,i.text=t,i.linkUrl=r,i.imageRelativePath=e;var s=Internal.makeParamString("Util","callSystemShare",i,"call_system_share");if(Internal.isIOS){var o=Internal.makeURLWithParam(s);Internal.loadURL(o)}else Internal.isAndroid?window.Util_a.callSystemShare(s):Internal.isWinOS&&Internal.callWin8App(s)}},wrap_call_default_share:function(e,t,n,r,i){var s={};s.shareType="Default",s.imageUrl=e,s.title=t,s.text=n,s.linkUrl=r;var o=[];o.push(s),CtripShare.app_call_custom_share(o,i)},app_call_custom_share:function(e,t){var n={};n.dataList=e,n.businessCode=t;var r=Internal.makeParamString("Share","callCustomShare",params,"call_custom_share");Internal.isIOS?(url=Internal.makeURLWithParam(r),Internal.loadURL(url)):Internal.isAndroid?window.Share_a.callCustomShare(r):Internal.isWinOS&&Internal.callWin8App(r)},app_call_one_share:function(e,t,n,r,i,s){var o={};o.shareType=e,o.imageUrl=t,o.title=n,o.text=r,o.linkUrl=i,o.businessCode=s;var u=Internal.makeParamString("Share","callOneShare",params,"call_one_share");Internal.isIOS?(url=Internal.makeURLWithParam(u),Internal.loadURL(url)):Internal.isAndroid?window.Share_a.callOneShare(u):Internal.isWinOS&&Internal.callWin8App(u)}};define("bridge",function(){});var Zepto=function(){function e(e){return null==e?String(e):V[$.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function r(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function i(t){return"object"==e(t)}function s(e){return i(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function o(e){return"number"==typeof e.length}function u(e){return A.call(e,function(e){return null!=e})}function a(e){return e.length>0?x.fn.concat.apply([],e):e}function f(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(e){return e in _?_[e]:_[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function c(e,t){return"number"!=typeof t||D[f(e)]?t:t+"px"}function h(e){var t,n;return M[e]||(t=O.createElement(e),O.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),M[e]=n),M[e]}function p(e){return"children"in e?L.call(e.children):x.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function d(e,t,n){for(S in t)n&&(s(t[S])||G(t[S]))?(s(t[S])&&!s(e[S])&&(e[S]={}),G(t[S])&&!G(e[S])&&(e[S]=[]),d(e[S],t[S],n)):t[S]!==E&&(e[S]=t[S])}function v(e,t){return null==t?x(e):x(e).filter(t)}function m(e,n,r,i){return t(n)?n.call(e,r,i):n}function g(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function y(e,t){var n=e.className||"",r=n&&n.baseVal!==E;return t===E?r?n.baseVal:n:void (r?n.baseVal=t:e.className=t)}function b(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:/^0/.test(e)||isNaN(t=Number(e))?/^[\[\{]/.test(e)?x.parseJSON(e):e:t):e}catch(n){return e}}function w(e,t){t(e);for(var n=0,r=e.childNodes.length;r>n;n++)w(e.childNodes[n],t)}var E,S,x,T,N,C,k=[],L=k.slice,A=k.filter,O=window.document,M={},_={},D={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},P=/^\s*<(\w+|!)[^>]*>/,H=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,B=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,j=/^(?:body|html)$/i,F=/([A-Z])/g,I=["val","css","html","text","data","width","height","offset"],q=["after","prepend","before","append"],R=O.createElement("table"),U=O.createElement("tr"),z={tr:O.createElement("tbody"),tbody:R,thead:R,tfoot:R,td:U,th:U,"*":O.createElement("div")},W=/complete|loaded|interactive/,X=/^[\w-]*$/,V={},$=V.toString,J={},K=O.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},G=Array.isArray||function(e){return e instanceof Array};return J.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=K).appendChild(e),r=~J.qsa(i,t).indexOf(e),s&&K.removeChild(e),r},N=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},C=function(e){return A.call(e,function(t,n){return e.indexOf(t)==n})},J.fragment=function(e,t,n){var r,i,o;return H.test(e)&&(r=x(O.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(B,"<$1></$2>")),t===E&&(t=P.test(e)&&RegExp.$1),t in z||(t="*"),o=z[t],o.innerHTML=""+e,r=x.each(L.call(o.childNodes),function(){o.removeChild(this)})),s(n)&&(i=x(r),x.each(n,function(e,t){I.indexOf(e)>-1?i[e](t):i.attr(e,t)})),r},J.Z=function(e,t){return e=e||[],e.__proto__=x.fn,e.selector=t||"",e},J.isZ=function(e){return e instanceof J.Z},J.init=function(e,n){var r;if(!e)return J.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&P.test(e))r=J.fragment(e,RegExp.$1,n),e=null;else{if(n!==E)return x(n).find(e);r=J.qsa(O,e)}else{if(t(e))return x(O).ready(e);if(J.isZ(e))return e;if(G(e))r=u(e);else if(i(e))r=[e],e=null;else if(P.test(e))r=J.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==E)return x(n).find(e);r=J.qsa(O,e)}}return J.Z(r,e)},x=function(e,t){return J.init(e,t)},x.extend=function(e){var t,n=L.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){d(e,n,t)}),e},J.qsa=function(e,t){var n,i,s="#"==t[0],o=!s&&"."==t[0],u=s||o?t.slice(1):t,a=X.test(u);if(i=r(e)&&a&&s?(n=e.getElementById(u))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:L.call(a&&!s?o?e.getElementsByClassName(u):e.getElementsByTagName(t):e.querySelectorAll(t)),1!==e.nodeType)return i;for(var f=[],l=0,c=i.length;c>l;l++)e.contains(i[l])&&f.push(i[l]);return f},x.contains=O.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},x.type=e,x.isFunction=t,x.isWindow=n,x.isArray=G,x.isPlainObject=s,x.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},x.inArray=function(e,t,n){return k.indexOf.call(t,e,n)},x.camelCase=N,x.trim=function(e){return null==e?"":String.prototype.trim.call(e)},x.uuid=0,x.support={},x.expr={},x.map=function(e,t){var n,r,i,s=[];if(o(e))for(r=0;r<e.length;r++)n=t(e[r],r),null!=n&&s.push(n);else for(i in e)n=t(e[i],i),null!=n&&s.push(n);return a(s)},x.each=function(e,t){var n,r;if(o(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},x.grep=function(e,t){return A.call(e,t)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()}),x.fn={forEach:k.forEach,reduce:k.reduce,push:k.push,sort:k.sort,indexOf:k.indexOf,concat:k.concat,map:function(e){return x(x.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return x(L.apply(this,arguments))},ready:function(e){return W.test(O.readyState)&&O.body?e(x):O.addEventListener("DOMContentLoaded",function(){e(x)},!1),this},get:function(e){return e===E?L.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return k.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):x(A.call(this,function(t){return J.matches(t,e)}))},add:function(e,t){return x(C(this.concat(x(e,t))))},is:function(e){return this.length>0&&J.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==E)this.each(function(t){e.call(this,t)||n.push(this)});else{var r="string"==typeof e?this.filter(e):o(e)&&t(e.item)?L.call(e):x(e);this.forEach(function(e){r.indexOf(e)<0&&n.push(e)})}return x(n)},has:function(e){return this.filter(function(){return i(e)?x.contains(this,e):x(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!i(e)?e:x(e)},last:function(){var e=this[this.length-1];return e&&!i(e)?e:x(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?x(e).filter(function(){var e=this;return k.some.call(n,function(t){return x.contains(t,e)})}):1==this.length?x(J.qsa(this[0],e)):this.map(function(){return J.qsa(this,e)}):[]},closest:function(e,t){var n=this[0],i=!1;for("object"==typeof e&&(i=x(e));n&&!(i?i.indexOf(n)>=0:J.matches(n,e));)n=n!==t&&!r(n)&&n.parentNode;return x(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=x.map(n,function(e){return(e=e.parentNode)&&!r(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return v(t,e)},parent:function(e){return v(C(this.pluck("parentNode")),e)},children:function(e){return v(this.map(function(){return p(this)}),e)},contents:function(){return this.map(function(){return L.call(this.childNodes)})},siblings:function(e){return v(this.map(function(e,t){return A.call(p(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return x.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var r=x(e).get(0),i=r.parentNode||this.length>1;return this.each(function(t){x(this).wrapAll(n?e.call(this,t):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){x(this[0]).before(e=x(e));for(var t;(t=e.children()).length;)e=t.first();x(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var r=x(this),i=r.contents(),s=n?e.call(this,t):e;i.length?i.wrapAll(s):r.append(s)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=x(this);(e===E?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return x(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return x(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;x(this).empty().append(m(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=m(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(i(e))for(S in e)g(this,S,e[S]);else g(this,e,m(this,t,n,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:E},removeAttr:function(e){return this.each(function(){1===this.nodeType&&g(this,e)})},prop:function(e,t){return e=Q[e]||e,1 in arguments?this.each(function(n){this[e]=m(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(e,t){var n="data-"+e.replace(F,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,t):this.attr(n);return null!==r?b(r):E},val:function(e){return 0 in arguments?this.each(function(t){this.value=m(this,e,t,this.value)}):this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=x(this),r=m(this,e,t,n.offset()),i=n.offsetParent().offset(),s={top:r.top-i.top,left:r.left-i.left};"static"==n.css("position")&&(s.position="relative"),n.css(s)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2){var r=this[0],i=getComputedStyle(r,"");if(!r)return;if("string"==typeof t)return r.style[N(t)]||i.getPropertyValue(t);if(G(t)){var s={};return x.each(t,function(e,t){s[t]=r.style[N(t)]||i.getPropertyValue(t)}),s}}var o="";if("string"==e(t))n||0===n?o=f(t)+":"+c(t,n):this.each(function(){this.style.removeProperty(f(t))});else for(S in t)t[S]||0===t[S]?o+=f(S)+":"+c(S,t[S])+";":this.each(function(){this.style.removeProperty(f(S))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(x(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?k.some.call(this,function(e){return this.test(y(e))},l(e)):!1},addClass:function(e){return e?this.each(function(t){if("className"in this){T=[];var n=y(this),r=m(this,e,t,n);r.split(/\s+/g).forEach(function(e){x(this).hasClass(e)||T.push(e)},this),T.length&&y(this,n+(n?" ":"")+T.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===E)return y(this,"");T=y(this),m(this,e,t,T).split(/\s+/g).forEach(function(e){T=T.replace(l(e)," ")}),y(this,T.trim())}})},toggleClass:function(e,t){return e?this.each(function(n){var r=x(this),i=m(this,e,n,y(this));i.split(/\s+/g).forEach(function(e){(t===E?!r.hasClass(e):t)?r.addClass(e):r.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===E?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===E?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),r=j.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(x(e).css("margin-top"))||0,n.left-=parseFloat(x(e).css("margin-left"))||0,r.top+=parseFloat(x(t[0]).css("border-top-width"))||0,r.left+=parseFloat(x(t[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||O.body;e&&!j.test(e.nodeName)&&"static"==x(e).css("position");)e=e.offsetParent;return e})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});x.fn[e]=function(i){var s,o=this[0];return i===E?n(o)?o["inner"+t]:r(o)?o.documentElement["scroll"+t]:(s=this.offset())&&s[e]:this.each(function(t){o=x(this),o.css(e,m(this,i,t,o[e]()))})}}),q.forEach(function(t,n){var r=n%2;x.fn[t]=function(){var t,i,s=x.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:J.fragment(n)}),o=this.length>1;return s.length<1?this:this.each(function(e,t){i=r?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var u=x.contains(O.documentElement,i);s.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!i)return x(e).remove();i.insertBefore(e,t),u&&w(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},x.fn[r?t+"To":"insert"+(n?"Before":"After")]=function(e){return x(e)[t](this),this}}),J.Z.prototype=x.fn,J.uniq=C,J.deserializeValue=b,x.zepto=J,x}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(a){function b(e,t,n){var r=a.Event(t);return a(e).trigger(r,n),!r.isDefaultPrevented()}function c(e,t,n,r){return e.global?b(t||s,n,r):void 0}function d(e){e.global&&0===a.active++&&c(e,null,"ajaxStart")}function e(e){e.global&&!--a.active&&c(e,null,"ajaxStop")}function f(e,t){var n=t.context;return t.beforeSend.call(n,e,t)===!1||c(t,n,"ajaxBeforeSend",[e,t])===!1?!1:void c(t,n,"ajaxSend",[e,t])}function g(e,t,n,r){var s=n.context,o="success";n.success.call(s,e,o,t),r&&r.resolveWith(s,[e,o,t]),c(n,s,"ajaxSuccess",[t,n,e]),i(o,t,n)}function h(e,t,n,r,s){var o=r.context;r.error.call(o,n,t,e),s&&s.rejectWith(o,[n,t,e]),c(r,o,"ajaxError",[n,r,e||t]),i(t,n,r)}function i(t,n,r){var i=r.context;r.complete.call(i,n,t),c(r,i,"ajaxComplete",[n,r]),e(r)}function j(){}function k(e){return e&&(e=e.split(";",2)[0]),e&&(e==x?"html":e==w?"json":u.test(e)?"script":v.test(e)&&"xml")||"text"}function l(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function m(e){e.processData&&e.data&&"string"!=a.type(e.data)&&(e.data=a.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=l(e.url,e.data),e.data=void 0)}function n(e,t,n,r){return a.isFunction(t)&&(r=n,n=t,t=void 0),a.isFunction(n)||(r=n,n=void 0),{url:e,data:t,success:n,dataType:r}}function o(e,t,n,r){var i,s=a.isArray(t),u=a.isPlainObject(t);a.each(t,function(t,l){i=a.type(l),r&&(t=n?r:r+"["+(u||"object"==i||"array"==i?t:"")+"]"),!r&&s?e.add(l.name,l.value):"array"==i||!n&&"object"==i?o(e,l,n,t):e.add(t,l)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/;a.active=0,a.ajaxJSONP=function(e,t){if("type"in e){var n,i,o=e.jsonpCallback,u=(a.isFunction(o)?o():o)||"jsonp"+ ++r,l=s.createElement("script"),c=window[u],p=function(e){a(l).triggerHandler("error",e||"abort")},d={abort:p};return t&&t.promise(d),a(l).on("load error",function(r,s){clearTimeout(i),a(l).off().remove(),"error"!=r.type&&n?g(n[0],d,e,t):h(null,s||"error",d,e,t),window[u]=c,n&&a.isFunction(c)&&c(n[0]),c=n=void 0}),f(d,e)===!1?(p("abort"),d):(window[u]=function(){n=arguments},l.src=e.url.replace(/\?(.+)=\?/,"?$1="+u),s.head.appendChild(l),e.timeout>0&&(i=setTimeout(function(){p("timeout")},e.timeout)),d)}return a.ajax(e)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c=a.extend({},b||{}),e=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===c[p]&&(c[p]=a.ajaxSettings[p]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host),c.url||(c.url=window.location.toString()),m(c);var i=c.dataType,n=/\?.+=\?/.test(c.url);if(n&&(i="jsonp"),c.cache!==!1&&(b&&b.cache===!0||"script"!=i&&"jsonp"!=i)||(c.url=l(c.url,"_="+Date.now())),"jsonp"==i)return n||(c.url=l(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),a.ajaxJSONP(c,e);var o,r=c.accepts[i],s={},t=function(e,t){s[e.toLowerCase()]=[e,t]},u=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,v=c.xhr(),w=v.setRequestHeader;if(e&&e.promise(v),c.crossDomain||t("X-Requested-With","XMLHttpRequest"),t("Accept",r||"*/*"),(r=c.mimeType||r)&&(r.indexOf(",")>-1&&(r=r.split(",",2)[0]),v.overrideMimeType&&v.overrideMimeType(r)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&t("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(q in c.headers)t(q,c.headers[q]);if(v.setRequestHeader=t,v.onreadystatechange=function(){if(4==v.readyState){v.onreadystatechange=j,clearTimeout(o);var b,d=!1;if(v.status>=200&&v.status<300||304==v.status||0==v.status&&"file:"==u){i=i||k(c.mimeType||v.getResponseHeader("content-type")),b=v.responseText;try{"script"==i?(1,eval)(b):"xml"==i?b=v.responseXML:"json"==i&&(b=y.test(b)?null:a.parseJSON(b))}catch(f){d=f}d?h(d,"parsererror",v,c,e):g(b,v,c,e)}else h(v.statusText||null,v.status?"error":"abort",v,c,e)}},f(v,c)===!1)return v.abort(),h(null,"abort",v,c,e),v;if(c.xhrFields)for(q in c.xhrFields)v[q]=c.xhrFields[q];var x="async"in c?c.async:!0;v.open(c.type,c.url,x,c.username,c.password);for(q in s)w.apply(v,s[q]);return c.timeout>0&&(o=setTimeout(function(){v.onreadystatechange=j,v.abort(),h(null,"timeout",v,c,e)},c.timeout)),v.send(c.data?c.data:null),v},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var e=n.apply(null,arguments);return e.type="POST",a.ajax(e)},a.getJSON=function(){var e=n.apply(null,arguments);return e.dataType="json",a.ajax(e)},a.fn.load=function(e,r,i){if(!this.length)return this;var s,o=this,u=e.split(/\s/),f=n(e,r,i),l=f.success;return u.length>1&&(f.url=u[0],s=u[1]),f.success=function(e){o.html(s?a("<div>").html(e.replace(t,"")).find(s):e),l&&l.apply(o,arguments)},a.ajax(f),this};var z=encodeURIComponent;a.param=function(e,t){var n=[];return n.add=function(e,t){this.push(z(e)+"="+z(t))},o(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!e.match(/\(Macintosh\; Intel /),o=e.match(/(iPad).*OS\s([\d_]+)/),u=e.match(/(iPod)(.*OS\s([\d_]+))?/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),f=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=e.match(/Windows Phone ([\d.]+)/),c=f&&e.match(/TouchPad/),h=e.match(/Kindle\/([\d.]+)/),p=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/),v=e.match(/(BB10).*Version\/([\d.]+)/),m=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),g=e.match(/PlayBook/),y=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),b=e.match(/Firefox\/([\d.]+)/),w=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),E=!y&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),S=E||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!r)&&(n.version=r[1]),i&&(t.android=!0,t.version=i[2]),a&&!u&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),u&&(t.ios=t.ipod=!0,t.version=u[3]?u[3].replace(/_/g,"."):null),l&&(t.wp=!0,t.version=l[1]),f&&(t.webos=!0,t.version=f[2]),c&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),v&&(t.bb10=!0,t.version=v[2]),m&&(t.rimtabletos=!0,t.version=m[2]),g&&(n.playbook=!0),h&&(t.kindle=!0,t.version=h[1]),p&&(n.silk=!0,n.version=p[1]),!p&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),y&&(n.chrome=!0,n.version=y[1]),b&&(n.firefox=!0,n.version=b[1]),w&&(n.ie=!0,n.version=w[1]),S&&(s||t.ios)&&(n.safari=!0,s&&(n.version=S[1])),E&&(n.webview=!0),t.tablet=!!(o||g||i&&!e.match(/Mobile/)||b&&e.match(/Tablet/)||w&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!(t.tablet||t.ipod||!(i||a||f||d||v||y&&e.match(/Android/)||y&&e.match(/CriOS\/([\d.]+)/)||b&&e.match(/Mobile/)||w&&e.match(/Touch/)))}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e){function t(e){return e._zid||(e._zid=h++)}function n(e,n,s,o){if(n=r(n),n.ns)var u=i(n.ns);return(m[t(e)]||[]).filter(function(e){return!(!e||n.e&&e.e!=n.e||n.ns&&!u.test(e.ns)||s&&t(e.fn)!==t(s)||o&&e.sel!=o)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function i(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function s(e,t){return e.del&&!y&&e.e in b||!!t}function o(e){return w[e]||y&&b[e]||e}function u(n,i,u,a,l,h,p){var d=t(n),v=m[d]||(m[d]=[]);i.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(u);var i=r(t);i.fn=u,i.sel=l,i.e in w&&(u=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?i.fn.apply(this,arguments):void 0}),i.del=h;var d=h||u;i.proxy=function(e){if(e=f(e),!e.isImmediatePropagationStopped()){e.data=a;var t=d.apply(n,e._args==c?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},i.i=v.length,v.push(i),"addEventListener"in n&&n.addEventListener(o(i.e),i.proxy,s(i,p))})}function a(e,r,i,u,a){var f=t(e);(r||"").split(/\s/).forEach(function(t){n(e,t,i,u).forEach(function(t){delete m[f][t.i],"removeEventListener"in e&&e.removeEventListener(o(t.e),t.proxy,s(t,a))})})}function f(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(T,function(e,r){var i=n[e];t[e]=function(){return this[r]=E,i&&i.apply(n,arguments)},t[r]=S}),(n.defaultPrevented!==c?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=E)),t}function l(e){var t,n={originalEvent:e};for(t in e)x.test(t)||e[t]===c||(n[t]=e[t]);return f(n,e)}var c,h=1,p=Array.prototype.slice,d=e.isFunction,v=function(e){return"string"==typeof e},m={},g={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",e.event={add:u,remove:a},e.proxy=function(n,r){var i=2 in arguments&&p.call(arguments,2);if(d(n)){var s=function(){return n.apply(r,i?i.concat(p.call(arguments)):arguments)};return s._zid=t(n),s}if(v(r))return i?(i.unshift(n[r],n),e.proxy.apply(null,i)):e.proxy(n[r],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var E=function(){return!0},S=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r,i,s){var o,f,h=this;return t&&!v(t)?(e.each(t,function(e,t){h.on(e,n,r,t,s)}),h):(v(n)||d(i)||i===!1||(i=r,r=n,n=c),(d(r)||r===!1)&&(i=r,r=c),i===!1&&(i=S),h.each(function(c,h){s&&(o=function(e){return a(h,e.type,i),i.apply(this,arguments)}),n&&(f=function(t){var r,s=e(t.target).closest(n,h).get(0);return s&&s!==h?(r=e.extend(l(t),{currentTarget:s,liveFired:h}),(o||i).apply(s,[r].concat(p.call(arguments,1)))):void 0}),u(h,t,i,r,n,f||o)}))},e.fn.off=function(t,n,r){var i=this;return t&&!v(t)?(e.each(t,function(e,t){i.off(e,n,t)}),i):(v(n)||d(r)||r===!1||(r=n,n=c),r===!1&&(r=S),i.each(function(){a(this,t,r,n)}))},e.fn.trigger=function(t,n){return t=v(t)||e.isPlainObject(t)?e.Event(t):f(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,r){var i,s;return this.each(function(o,u){i=l(v(t)?e.Event(t):t),i._args=r,i.target=u,e.each(n(u,t.type||t),function(e,t){return s=t.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),s},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){v(e)||(t=e,e=t.type);var n=document.createEvent(g[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),f(n)}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n,r=[];return e([].slice.call(this.get(0).elements)).each(function(){t=e(this),n=t.attr("type"),"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked)&&r.push({name:t.attr("name"),value:t.val()})}),r},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e,t){function n(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function r(e){return i?i+e:e.toLowerCase()}var i,s,o,u,a,f,l,c,h,p,d="",v={Webkit:"webkit",Moz:"",O:"o"},m=window.document,g=m.createElement("div"),y=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,b={};e.each(v,function(e,n){return g.style[e+"TransitionProperty"]!==t?(d="-"+e.toLowerCase()+"-",i=n,!1):void 0}),s=d+"transform",b[o=d+"transition-property"]=b[u=d+"transition-duration"]=b[f=d+"transition-delay"]=b[a=d+"transition-timing-function"]=b[l=d+"animation-name"]=b[c=d+"animation-duration"]=b[p=d+"animation-delay"]=b[h=d+"animation-timing-function"]="",e.fx={off:i===t&&g.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:d,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},e.fn.animate=function(n,r,i,s,o){return e.isFunction(r)&&(s=r,i=t,r=t),e.isFunction(i)&&(s=i,i=t),e.isPlainObject(r)&&(i=r.easing,s=r.complete,o=r.delay,r=r.duration),r&&(r=("number"==typeof r?r:e.fx.speeds[r]||e.fx.speeds._default)/1e3),o&&(o=parseFloat(o)/1e3),this.anim(n,r,i,s,o)},e.fn.anim=function(r,i,d,v,m){var g,w,E,S={},x="",T=this,N=e.fx.transitionEnd,C=!1;if(i===t&&(i=e.fx.speeds._default/1e3),m===t&&(m=0),e.fx.off&&(i=0),"string"==typeof r)S[l]=r,S[c]=i+"s",S[p]=m+"s",S[h]=d||"linear",N=e.fx.animationEnd;else{w=[];for(g in r)y.test(g)?x+=g+"("+r[g]+") ":(S[g]=r[g],w.push(n(g)));x&&(S[s]=x,w.push(s)),i>0&&"object"==typeof r&&(S[o]=w.join(", "),S[u]=i+"s",S[f]=m+"s",S[a]=d||"linear")}return E=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(N,E)}else e(this).unbind(N,E);C=!0,e(this).css(b),v&&v.call(this)},i>0&&(this.bind(N,E),setTimeout(function(){C||E.call(T)},1e3*i+25)),this.size()&&this.get(0).clientLeft,this.css(S),0>=i&&setTimeout(function(){T.each(function(){E.call(this)})},0),this},g=null}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(Zepto),define("$",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?void (this._wrapped=e):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);r>i;)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0===t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=O(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&O(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("_",function(){}),function(){var e,t=this,n=t.Backbone,r=[],i=(r.push,r.slice);r.splice,e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var s=t._;s||"undefined"==typeof require||(s=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(e,t,n){if(!a(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!a(this,"once",e,[t,n])||!t)return this;var r=this,i=s.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,o,u,f,l,c,h;if(!this._events||!a(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(u=e?[e]:s.keys(this._events),f=0,l=u.length;l>f;f++)if(e=u[f],o=this._events[e]){if(this._events[e]=r=[],t||n)for(c=0,h=o.length;h>c;c++)i=o[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!a(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&f(n,t),r&&f(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;"object"==typeof t&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},u=/\s+/,a=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(u.test(n)){for(var s=n.split(u),o=0,a=s.length;a>o;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},f=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,s);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},l={listenTo:"on",listenToOnce:"once"};s.each(l,function(e,t){o[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=s.uniqueId("l"));return i[o]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}),o.bind=o.on,o.unbind=o.off,s.extend(e,o);var c=e.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},h=/^(\S+)\s*(.*)$/,p=["model","collection","el","id","attributes","className","tagName","events"];s.extend(c.prototype,o,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=s.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(s.isFunction(n)||(n=this[e[t]]),n){var r=t.match(h),i=r[1],o=r[2];n=s.bind(n,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,n):this.$el.on(i,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=s.extend({},s.result(this,"options"),e)),s.extend(this,s.pick(e,p)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var t=s.extend({},s.result(this,"attributes"));this.id&&(t.id=s.result(this,"id")),this.className&&(t["class"]=s.result(this,"className"));var n=e.$("<"+s.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}});var d=function(e,t){var n,r=this;n=e&&s.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},s.extend(n,r,t);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,e&&s.extend(n.prototype,e),n.__super__=r.prototype,n};c.extend=d}.call(this),define("B",function(){}),function(e){function t(t){if(t.targetTouches.length>1)return!0;m=t.target;var n=e(m).closest(".nofastclick");if(n.length>0)return!0;if(x){var r=window.getSelection();if(r.rangeCount&&!r.isCollapsed)return!0;if(t.targetTouches[0].identifier===T)return event.preventDefault(),!1;T=t.targetTouches[0].identifier}return h=!0,p=t.timeStamp,g=t.targetTouches[0].pageX,y=t.targetTouches[0].pageY,t.timeStamp-d<0&&(d=t.timeStamp),t.timeStamp-d<200&&t.preventDefault(),!0}function n(e){return h?(b=e.changedTouches[0].pageX,w=e.changedTouches[0].pageY,(Math.abs(b-g)>E||Math.abs(w-y)>E)&&(m=null,h=!1),!0):!0}function r(t){if(!h)return!0;if(t.timeStamp-d<200)return v=!0,!0;d=t.timeStamp,h=!1;var n=m.tagName.toLowerCase();if("label"==n){var r=f(m);if(r){var i=e(r);if("checkbox"==i.attr("type")||"radio"==i.attr("type")?i.attr("checked")?i.removeAttr("checked"):i.attr("checked","checked"):e(r).focus(),S)return!1;m=r}}else if(a(m)){if(t.timeStamp-p>100)return m=null,!1;var s;return x&&m.setSelectionRange&&0!==m.type.indexOf("date")&&"time"!==m.type?(s=m.value.length,m.setSelectionRange(s,s)):m.focus(),"select"!==n&&(m=null,t.preventDefault()),!1}return p=0,u(m)||(t.preventDefault(),l(m,t)),!1}function i(){h=!1,m=null}function s(t){var n=t.target,r=e(n).closest(".nofastclick");return r.length>0?!0:m?t.touchEvent?!0:t.cancelable&&(!u(m)||v)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0}function o(e){if(h)return h=!1,m=null,!0;if("submit"===e.target.type&&0===e.detail)return!0;var t=s(e);return t||(m=null),t}function u(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(x&&"file"===e.type||e.disabled)return!0;break;case"video":return!0}return/\bneedclick\b/.test(e.className)}function a(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedfocus\b/.test(e.className)}}function f(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")}function l(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.touchEvent=!0,e.dispatchEvent(n)}function c(){return"undefined"==typeof window.ontouchstart?!1:!0}var h=!1,p=0,d=0,v=!1,m=null,g=0,y=0,b=0,w=0,E=4,S=navigator.userAgent.indexOf("Android")>0,x=/iP(ad|hone|od)/.test(navigator.userAgent),T=0;x&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),e.needFocus=a,e.bindFastClick=function(){return c()?void e(document).ready(function(){S&&(document.addEventListener("mouseover",s,!0),document.addEventListener("mousedown",s,!0),document.addEventListener("mouseup",s,!0)),document.addEventListener("click",o,!0),e(document).on("touchstart",t).on("touchmove",n).on("touchend",r).on("touchcancel",i)}):!0},e.unbindFastClick=function(){return c()?(S&&(document.removeEventListener("mouseover",s,!0),document.removeEventListener("mousedown",s,!0),document.removeEventListener("mouseup",s,!0)),document.removeEventListener("click",o,!0),void e(document).off("touchstart",t).off("touchmove",n).off("touchend",r).off("touchcancel",i)):!0}}(Zepto),define("F",function(){}),require.config({shim:{$:{exports:"zepto"},_:{exports:"_"},B:{deps:["_","$"],exports:"Backbone"},common:{deps:["libs"]}},paths:{$:"res/libs/zepto",_:"res/libs/underscore",B:"res/libs/backbone",libs:"libs_r",common:"app/common"}}),require(["$","_","B"],function(){}),define("libs",function(){}),define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a="undefined"!=typeof location&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||void 0),h=[],p=e.config&&e.config()||{};return t={version:"2.0.5+",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),-1!==s&&(i="strip"===r.substring(s+1),r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],!(s&&s!==n||o&&o.toLowerCase()!==r.toLowerCase()||(u||o)&&u!==i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText)return void r();p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r){if(h.hasOwnProperty(n)){var i=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(){var n=function(e){return i(f,e)};n.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,n,s)},s)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");0===r.indexOf("﻿")&&(r=r.substring(1)),t(r)}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,n,r,i){var s,o=t.createXhr();if(o.open("GET",e,!0),i)for(s in i)i.hasOwnProperty(s)&&o.setRequestHeader(s.toLowerCase(),i[s]);p.onXhr&&p.onXhr(o,e),o.onreadystatechange=function(){var t,i;4===o.readyState&&(t=o.status,t>399&&600>t?(i=new Error(e+" HTTP status: "+t),i.xhr=o,r(i)):n(o.responseText))},o.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{for(n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),n.append(r);null!==(r=u.readLine());)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}}),t}),define("cCoreInherit",["libs"],function(){var e=[].slice,t=function(){};return t.Class=function(){function t(){this.__propertys__(),this.initialize.apply(this,arguments)}if(0==arguments.length||arguments.length>2)throw"参数错误";var n=null,r=e.call(arguments);"function"==typeof r[0]&&(n=r.shift()),r=r[0],t.superclass=n,t.subclasses=[];var i=function(){},s=r.__propertys__||function(){};if(n){n.prototype.__propertys__&&(i=n.prototype.__propertys__);var o=function(){};o.prototype=n.prototype,t.prototype=new o,n.subclasses.push(t)}var u=t.superclass&&t.superclass.prototype;for(var f in r){var l=r[f];if(u&&"function"==typeof l){var c=/^\s*function\s*\(([^\(\)]*?)\)\s*?\{/i.exec(l.toString())[1].replace(/\s/i,"").split(",");"$super"===c[0]&&u[f]&&(l=function(t,n){return function(){var r=this,i=[function(){return u[t].apply(r,arguments)}];return n.apply(this,i.concat(e.call(arguments)))}}(f,l))}t.prototype[f]=l}t.prototype.initialize||(t.prototype.initialize=function(){}),t.prototype.__propertys__=function(){i.call(this),s.call(this)};for(key in n)n.hasOwnProperty(key)&&"prototype"!==key&&"superclass"!==key&&(t[key]=n[key]);return t.prototype.constructor=t,t},t.extend=function(){var t=e.call(arguments),n=t.shift()||{};if(!n)return!1;for(var r=0,i=t.length;i>r;r++)if("object"==typeof t[r])for(var s in t[r])n[s]=t[r][s];return n},t.implement=function(e,t){if("function"!=typeof e)return!1;for(var n in t)e.prototype[n]=t[n];return e},t}),define("rsa",[],function(){function e(e){H=e,B=new Array(H);for(var n=0;n<B.length;n++)B[n]=0;F=new t,I=new t,I.digits[0]=1}function t(e){this.digits="boolean"==typeof e&&1==e?null:B.slice(0),this.isNeg=!1}function n(e){var n=new t(!0);return n.digits=e.digits.slice(0),n.isNeg=e.isNeg,n}function r(e){var n=new t;n.isNeg=0>e,e=Math.abs(e);for(var r=0;e>0;)n.digits[r++]=e&X,e=Math.floor(e/U);return n}function s(e){for(var t="",n=e.length-1;n>-1;--n)t+=e.charAt(n);return t}function o(e,n){var r=new t;r.digits[0]=n;for(var i=N(e,r),o=V[i[1].digits[0]];1==T(i[0],F);)i=N(i[0],r),digit=i[1].digits[0],o+=V[i[1].digits[0]];return(e.isNeg?"-":"")+s(o)}function u(e){var t=15,n="";for(i=0;4>i;++i)n+=$[e&t],e>>>=4;return s(n)}function a(e){for(var t="",n=(d(e),d(e));n>-1;--n)t+=u(e.digits[n]);return t}function f(e){var t,n=48,r=n+9,i=97,s=i+25,o=65,u=90;return t=e>=n&&r>=e?e-n:e>=o&&u>=e?10+e-o:e>=i&&s>=e?10+e-i:0}function l(e){for(var t=0,n=Math.min(e.length,4),r=0;n>r;++r)t<<=4,t|=f(e.charCodeAt(r));return t}function c(e){for(var n=new t,r=e.length,i=r,s=0;i>0;i-=4,++s)n.digits[s]=l(e.substr(Math.max(i-4,0),Math.min(i,4)));return n}function h(e,n){var r;if(e.isNeg!=n.isNeg)n.isNeg=!n.isNeg,r=p(e,n),n.isNeg=!n.isNeg;else{r=new t;for(var i,s=0,o=0;o<e.digits.length;++o)i=e.digits[o]+n.digits[o]+s,r.digits[o]=i%U,s=Number(i>=U);r.isNeg=e.isNeg}return r}function p(e,n){var r;if(e.isNeg!=n.isNeg)n.isNeg=!n.isNeg,r=h(e,n),n.isNeg=!n.isNeg;else{r=new t;var i,s;s=0;for(var o=0;o<e.digits.length;++o)i=e.digits[o]-n.digits[o]+s,r.digits[o]=i%U,r.digits[o]<0&&(r.digits[o]+=U),s=0-Number(0>i);if(-1==s){s=0;for(var o=0;o<e.digits.length;++o)i=0-r.digits[o]+s,r.digits[o]=i%U,r.digits[o]<0&&(r.digits[o]+=U),s=0-Number(0>i);r.isNeg=!e.isNeg}else r.isNeg=e.isNeg}return r}function d(e){for(var t=e.digits.length-1;t>0&&0==e.digits[t];)--t;return t}function v(e){var t,n=d(e),r=e.digits[n],i=(n+1)*R;for(t=i;t>i-R&&0==(32768&r);--t)r<<=1;return t}function m(e,n){for(var r,i,s,o=new t,u=d(e),a=d(n),f=0;a>=f;++f){for(r=0,s=f,j=0;u>=j;++j,++s)i=o.digits[s]+e.digits[j]*n.digits[f]+r,o.digits[s]=i&X,r=i>>>q;o.digits[f+u+1]=r}return o.isNeg=e.isNeg!=n.isNeg,o}function g(e,n){var r,i,s;result=new t,r=d(e),i=0;for(var o=0;r>=o;++o)s=result.digits[o]+e.digits[o]*n+i,result.digits[o]=s&X,i=s>>>q;return result.digits[1+r]=i,result}function y(e,t,n,r,i){for(var s=Math.min(t+i,e.length),o=t,u=r;s>o;++o,++u)n[u]=e[o]}function b(e,n){var r=Math.floor(n/R),i=new t;y(e.digits,0,i.digits,r,i.digits.length-r);for(var s=n%R,o=R-s,u=i.digits.length-1,a=u-1;u>0;--u,--a)i.digits[u]=i.digits[u]<<s&X|(i.digits[a]&J[s])>>>o;return i.digits[0]=i.digits[u]<<s&X,i.isNeg=e.isNeg,i}function w(e,n){var r=Math.floor(n/R),i=new t;y(e.digits,r,i.digits,0,e.digits.length-r);for(var s=n%R,o=R-s,u=0,a=u+1;u<i.digits.length-1;++u,++a)i.digits[u]=i.digits[u]>>>s|(i.digits[a]&K[s])<<o;return i.digits[i.digits.length-1]>>>=s,i.isNeg=e.isNeg,i}function E(e,n){var r=new t;return y(e.digits,0,r.digits,n,r.digits.length-n),r}function S(e,n){var r=new t;return y(e.digits,n,r.digits,0,r.digits.length-n),r}function x(e,n){var r=new t;return y(e.digits,0,r.digits,0,n),r}function T(e,t){if(e.isNeg!=t.isNeg)return 1-2*Number(e.isNeg);for(var n=e.digits.length-1;n>=0;--n)if(e.digits[n]!=t.digits[n])return e.isNeg?1-2*Number(e.digits[n]>t.digits[n]):1-2*Number(e.digits[n]<t.digits[n]);return 0}function N(e,r){var i,s,o=v(e),u=v(r),a=r.isNeg;if(u>o)return e.isNeg?(i=n(I),i.isNeg=!r.isNeg,e.isNeg=!1,r.isNeg=!1,s=p(r,e),e.isNeg=!0,r.isNeg=a):(i=new t,s=n(e)),new Array(i,s);i=new t,s=e;for(var f=Math.ceil(u/R)-1,l=0;r.digits[f]<z;)r=b(r,1),++l,++u,f=Math.ceil(u/R)-1;s=b(s,l),o+=l;for(var c=Math.ceil(o/R)-1,m=E(r,c-f);-1!=T(s,m);)++i.digits[c-f],s=p(s,m);for(var y=c;y>f;--y){var S=y>=s.digits.length?0:s.digits[y],x=y-1>=s.digits.length?0:s.digits[y-1],N=y-2>=s.digits.length?0:s.digits[y-2],C=f>=r.digits.length?0:r.digits[f],k=f-1>=r.digits.length?0:r.digits[f-1];i.digits[y-f-1]=S==C?X:Math.floor((S*U+x)/C);for(var L=i.digits[y-f-1]*(C*U+k),A=S*W+(x*U+N);L>A;)--i.digits[y-f-1],L=i.digits[y-f-1]*(C*U|k),A=S*U*U+(x*U+N);m=E(r,y-f-1),s=p(s,g(m,i.digits[y-f-1])),s.isNeg&&(s=h(s,m),--i.digits[y-f-1])}return s=w(s,l),i.isNeg=e.isNeg!=a,e.isNeg&&(i=a?h(i,I):p(i,I),r=w(r,l),s=p(r,s)),0==s.digits[0]&&0==d(s)&&(s.isNeg=!1),new Array(i,s)}function C(e,t){return N(e,t)[0]}function k(e){this.modulus=n(e),this.k=d(this.modulus)+1;var r=new t;r.digits[2*this.k]=1,this.mu=C(r,this.modulus),this.bkplus1=new t,this.bkplus1.digits[this.k+1]=1,this.modulo=L,this.multiplyMod=A,this.powMod=O}function L(e){var t=S(e,this.k-1),n=m(t,this.mu),r=S(n,this.k+1),i=x(e,this.k+1),s=m(r,this.modulus),o=x(s,this.k+1),u=p(i,o);u.isNeg&&(u=h(u,this.bkplus1));for(var a=T(u,this.modulus)>=0;a;)u=p(u,this.modulus),a=T(u,this.modulus)>=0;return u}function A(e,t){var n=m(e,t);return this.modulo(n)}function O(e,n){var r=new t;r.digits[0]=1;for(var i=e,s=n;;){if(0!=(1&s.digits[0])&&(r=this.multiplyMod(r,i)),s=w(s,1),0==s.digits[0]&&0==d(s))break;i=this.multiplyMod(i,i)}return r}function M(e,t,n){this.e=c(e),this.d=c(t),this.m=c(n),this.digitSize=2*d(this.m)+2,this.chunkSize=this.digitSize-11,this.radix=16,this.barrett=new k(this.m)}function _(e,n){if(e.chunkSize>e.digitSize-11)return"Error";for(var r=new Array,i=n.length,s=0;i>s;)r[s]=n.charCodeAt(s),s++;var u,f,l,c=r.length,h="";for(s=0;c>s;s+=e.chunkSize){l=new t,u=0;var p,d=s+e.chunkSize>c?c%e.chunkSize:e.chunkSize,v=new Array;for(p=0;d>p;p++)v[p]=r[s+d-1-p];v[d]=0;var m=Math.max(8,e.digitSize-3-d);for(p=0;m>p;p++)v[d+1+p]=Math.floor(254*Math.random())+1;for(v[e.digitSize-2]=2,v[e.digitSize-1]=0,f=0;f<e.digitSize;++u)l.digits[u]=v[f++],l.digits[u]+=v[f++]<<8;var g=e.barrett.powMod(l,e.e),y=16==e.radix?a(g):o(g,e.radix);h+=y+" "}return h.substring(0,h.length-1)}function D(e){var t,n,r,i,s,o,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);for(r=e.length,n=0,t="";r>n;){if(i=255&e.charCodeAt(n++),n==r){t+=u.charAt(i>>2),t+=u.charAt((3&i)<<4),t+="==";break}if(s=e.charCodeAt(n++),n==r){t+=u.charAt(i>>2),t+=u.charAt((3&i)<<4|(240&s)>>4),t+=u.charAt((15&s)<<2),t+="=";break}o=e.charCodeAt(n++),t+=u.charAt(i>>2),t+=u.charAt((3&i)<<4|(240&s)>>4),t+=u.charAt((15&s)<<2|(192&o)>>6),t+=u.charAt(63&o)}return t}function P(e){var t=_(Q,D(e));return t}var H,B,F,I,q=16,R=q,U=65536,z=U>>>1,W=U*U,X=U-1;e(20);var V=(r(1e15),new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z")),$=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),J=new Array(0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535),K=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535);e(131);var Q=new M("10001","","B7273B08845EB1D93C9A6EB9C45BE087AF9E692C8B7DD6D38DECFA732E9A6CDCB52106BDDB9E13100AEF3638358D5B5EB9011C33B7AC3F697078C0572585B94119196F627025C6E7FA9AA5C82B149E2BB30FEA7D777AA453324A301FD46413E11A7DB4A9D5B2D4BD6330AE2C477D48250F057ABEF2BD76DC7574897254736A71");return{rsaEncrypted:P}}),define("cUtilityHybrid",[],function(){var e={};return e.isInApp=function(){var e=window.navigator.userAgent;if(e.indexOf("CtripWireless")>-1)return!0;var t=window.localStorage.getItem("isInApp");if(t)return"1"==t?!0:!1;var n=window.localStorage.getItem("ISINAPP");return n?"1"==n?!0:!1:void 0},e.isInWeichat=function(){var e=window.navigator.userAgent;return e.indexOf("MicroMessenger")>-1?!0:!1},e.isPreProduction=function(){return window.localStorage.getItem("isPreProduction")},e.getAppSys=function(){var e=navigator.userAgent,t=/.+_(\w+)_CtripWireless_/,n=t.exec(e);return n&&n[1]?n[1].toLowerCase():null},e.isLite=function(){return"ctriplite"==this.getAppSys()},e.getSystemCode=function(){var e=navigator.userAgent,t=/.+_(\w+)_CtripWireless_/,n=t.exec(e);return n&&n[1]?n[1]:null},e}),define("cUtilityHash",["cCoreInherit"],function(e){var t=function(e,t){if(!t)return-1;if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},n={},r={};return r.__propertys__=function(){this.keys=[],this.values=[]},r.initialize=function(e){"object"!=typeof e&&(e={});for(var t in e)e.hasOwnProperty(t)&&(this.keys.push(t),this.values.push(e[t]))},r.length=function(){return this.keys.length},r.getItem=function(e){var n=t(e,this.keys);return 0>n?null:this.values[n]},r.getKey=function(e){return this.keys[e]},r.index=function(e){return this.values[e]},r.push=function(e,n,r){if("object"!=typeof e||n){var i=t(e,this.keys);0>i||r?(r&&this.del(e),this.keys.push(e),this.values.push(n)):this.values[i]=n}else for(var s in e)e.hasOwnProperty(s)&&that.push(s,e[s],r);return this},r.add=function(e,t){return this.push(e,t)},r.del=function(e){var n=t(e,this.keys);return 0>n?this:(this.keys.splice(n,1),this.values.splice(n,1),this)},r.delByIndex=function(e){return 0>e?this:(this.keys.splice(e,1),this.values.splice(e,1),this)},r.pop=function(){return this.keys.length?(this.keys.pop(),this.values.pop()):null},r.indexOf=function(e){var n=t(e,this.values);return n>=0?this.keys[n]:-1},r.shift=function(){return this.keys.length?(this.keys.shift(),this.values.shift()):null},r.unshift=function(e,n,r){if("object"!=typeof e||n){var i=t(e,this.keys);0>i||r?(r&&this.del(e),this.keys.unshift(e),this.values.unshift(n)):this.values[i]=n}else for(var s in e)e.hasOwnProperty(s)&&this.unshift(s,e[s]);return this},r.slice=function(e,t){for(var n=this.keys.slice(e,t||null),r=this.values.slice(e,t||null),i={},s=0;s<n.length;s++)i[n[s]]=r[s];return i},r.splice=function(e,t){for(var n=this.keys.splice(e,t||null),r=this.values.splice(e,t||null),i={},s=0,o=n.length;o>s;s++)i[n[s]]=r[s];return i},r.filter=function(e){var t={};if("function"!=typeof e)return null;for(var n=0;n<this.keys.length;n++)e.call(this.values[n],this.values[n],this.keys[n])&&(t[this.keys[n]]=this.values[n]);return t},r.each=function(e){if("function"!=typeof e)return null;for(var t=0;t<this.keys.length;t++)e.call(this.values[t],this.values[t],this.keys[t],t)},r.valueOf=function(){for(var e={},t=0;t<this.keys.length;t++)e[this.keys[t]]=this.values[t];return e},r.sortBy=function(e){for(var t=_.sortBy(this.values,e),n=[],r=0;r<t.length;r++){var i=this.indexOf(t[r]);n[r]=i}this.values=t,this.keys=n},r.toString=function(){return"undefined"!=typeof JSON&&JSON.stringify?JSON.stringify(this.valueOf()):typeof this.values},n.Hash=new e.Class(r),n}),define("cUtilityServertime",["cUtilityHybrid"],function(e){var t={};return t.getServerDate=function(t){var n=new Date,r=function(e){return"function"==typeof t?t(e):e},i=function(){var e=window.localStorage.getItem("SERVERDATE");if(!e)return r(n);try{if(e=JSON.parse(e),e&&e.server&&e.local){var t=window.parseInt(e.server),i=window.parseInt(e.local),s=(new Date).getTime(),o=new Date(t+s-i);return r(o)}return r(n)}catch(u){return r(n)}},s=function(){if(location.pathname.match(/^\/?html5/i))return r(n);if("undefined"==typeof __SERVERDATE__||!__SERVERDATE__.server)return r(n);var e=new Date(__SERVERDATE__.server.valueOf()+((new Date).valueOf()-__SERVERDATE__.local.valueOf()));return r(e)};return e.isInApp()?i():s()},t}),define("cUtilityDate",["cCoreInherit","cUtilityServertime"],function(e,t){var n={};return n.Date=new e.Class({initialize:function(e){e=e||new Date,this.date=new Date(e)},addDay:function(e){return e=e||0,this.date.setDate(this.date.getDate()+e),this},addMonth:function(e){return e=e||0,this.date.setMonth(this.date.getMonth()+e),this},addHours:function(e){return e=e||0,this.date.setHours(this.date.getHours()+e),this},addMinutes:function(e){return e=e||0,this.date.setMinutes(this.date.getMinutes()+e),this},addSeconds:function(e){return e=e||0,this.date.setSeconds(this.date.getSeconds()+e),this},addYear:function(e){return e=e||0,this.date.setYear(this.date.getFullYear()+e),this},setHours:function(){return this.date.setHours.apply(this.date,arguments),this},valueOf:function(){return this.date},getTime:function(){return this.date.valueOf()},toString:function(){return this.date.toString()},format:function(e){"string"!=typeof e&&(e="");for(var t in this._MAPS)e=this._MAPS[t].call(this,e,this.date,t);return e},diffMonth:function(e){var t=parseInt(this.format("Y"),10),r=parseInt(this.format("m"),10),i=new n.Date(e),s=parseInt(i.format("Y"),10),o=parseInt(i.format("m"),10);return 12*(s-t)+(o-r)},_DAY1:["周日","周一","周二","周三","周四","周五","周六"],_DAY2:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],_MAPS:{d:function(e,t,n){var r=t.getDate().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},j:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getDate())},N:function(e,t,n){var r=t.getDay();return 0===r&&(r=7),e.replace(new RegExp(n,"mg"),r)},w:function(e,t,n){var r=t.getDay(),i=this._DAY1[r];return e.replace(new RegExp(n,"mg"),i)},W:function(e,t,n){var r=t.getDay(),i=this._DAY2[r];return e.replace(new RegExp(n,"mg"),i)},m:function(e,t,n){var r=(t.getMonth()+1).toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},n:function(e,t,n){return e.replace(n,t.getMonth()+1)},Y:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getFullYear())},y:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getYear())},g:function(e,t,n){var r=t.getHours();return r>=12&&(r-=12),e.replace(new RegExp(n,"mg"),r)},G:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getHours())},h:function(e,t,n){var r=t.getHours();return r>=12&&(r-=12),r+="",r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},H:function(e,t,n){var r=t.getHours().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},i:function(e,t,n){var r=t.getMinutes().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},s:function(e,t,n){var r=t.getSeconds().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},I:function(e,t,n){var r=t.getMinutes().toString();return e.replace(new RegExp(n,"mg"),r)},S:function(e,t,n){var r=t.getSeconds().toString();return e.replace(new RegExp(n,"mg"),r)},D:function(e,n,r){var i=t.getServerDate();i.setHours(0,0,0,0),n=new Date(n.valueOf()),n.setHours(0,0,0,0);var s=864e5,o="",u=n-i;return u>=0&&(s>u?o="今天":2*s>u?o="明天":3*s>u&&(o="后天")),e.replace(new RegExp(r,"mg"),o)}}}),e.extend(n.Date,{parse:function(e,t){if("undefined"==typeof e)return new Date;if("string"==typeof e){e=e||"";var r=/^(\d{4})\-?(\d{1,2})\-?(\d{1,2})/i;e.match(r)&&(e=e.replace(r,"$2/$3/$1"));var i=Date.parse(e),s=new Date(i||new Date);return t?s:new n.Date(s)}return"number"==typeof e?new Date(e):new Date},getHM:function(e){var t=this._getDate(e),n=t.getHours(),r=t.getMinutes();return(10>n?"0"+n:""+n)+":"+(10>r?"0"+r:""+r)},getIntervalDay:function(e,t){var n=this._getDate(e),r=this._getDate(t);return n.setHours(0,0,0,0),r.setHours(0,0,0,0),parseInt((r-n)/864e5)},m2H:function(e){var t=Math.floor(e/60),n=e%60;return(t>0?t+"小时":"")+(n>0?n+"分钟":"")},_getDate:function(e){var t=n.Date.parse(e,!0),r=new Date;return r.setTime(t),r},format:function(e,t){return(new n.Date(e)).format(t)},weekday:function(e){var t=["周日","周一","周二","周三","周四","周五","周六"],n=new Date(e);return t[n.getDay()]},diffMonth:function(e,t){return e=new n.Date(e),e.diffMonth(t)}}),n.Date}),define("Validate",["$"],function(){var e={};_toString=Object.prototype.toString,$.each("String Function Boolean RegExp Number Date Object Null Undefined".split(" "),function(t,n){var r;switch(n){case"Null":r=function(e){return null===e};break;case"Undefined":r=function(e){return void 0===e};break;default:r=function(e){return(new RegExp(n+"]","i")).test(_toString.call(e))}}e["is"+n]=r});var t={isEmail:function(e){var t=/^(?:\w+\.?)*\w+@(?:\w+\.?)*\w+$/;return t.test(e)},isPassword:function(e){var t=/^[a-zA-Z0-9]{6,20}$/;return t.test(e)},isMobile:function(e){var t=/^(1[3-8][0-9])\d{8}$/;return t.test(e)},isChinese:function(e){var t=/^[\u4e00-\u9fff]{0,}$/;return t.test(e)},isEnglish:function(e){var t=/^[A-Za-z]+$/;return t.test(e)},isZip:function(e){var t=/^\d{6}$/;return t.test(e)},isDate:function(e){var t=/^(([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})(((0[13578]|1[02])(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)(0[1-9]|[12][0-9]|30))|(02(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))0229)$/;return t.test(e)?!0:!1},isNum:function(e){var t=/^\d+$/;return t.test(e)},isCellPhone:function(e){var t=/(^0{0,1}1[3|4|5|6|7|8][0-9]{9}$)/;return t.test(e)},isIDCardNo:function(e){var t=/^[A-Za-z0-9]+$/;return t.test(e)},isEnglishAndSpace:function(e){var t=/^([a-zA-Z ]+|[\u4e00-\u9fa5]+)$/;return t.test(e)},isTraditional:function(e){for(var t="萬與醜專業叢東絲兩嚴喪個爿豐臨為麗舉麼義烏樂喬習鄉書買亂爭於虧雲亙亞產畝親褻嚲億僅從侖倉儀們價眾優夥會傴傘偉傳傷倀倫傖偽佇體餘傭僉俠侶僥偵側僑儈儕儂俁儔儼倆儷儉債傾傯僂僨償儻儐儲儺兒兌兗黨蘭關興茲養獸囅內岡冊寫軍農塚馮衝決況凍淨淒涼淩減湊凜幾鳳鳧憑凱擊氹鑿芻劃劉則剛創刪別剗剄劊劌剴劑剮劍剝劇勸辦務勱動勵勁勞勢勳勩勻匭匱區醫華協單賣盧鹵臥衛卻巹廠廳曆厲壓厭厙廁廂厴廈廚廄廝縣參靉靆雙發變敘疊葉號歎嘰籲後嚇呂嗎唚噸聽啟吳嘸囈嘔嚦唄員咼嗆嗚詠哢嚨嚀噝吒噅鹹呱響啞噠嘵嗶噦嘩噲嚌噥喲嘜嗊嘮啢嗩唕喚嘖嗇囀齧囉嘽嘯噴嘍嚳囁嗬噯噓嚶囑嚕劈囂謔團園囪圍圇國圖圓聖壙場壞塊堅壇壢壩塢墳墜壟壟壚壘墾堊墊埡墶壋塏堖塒塤堝墊垵塹墮壪牆壯聲殼壺壼處備複夠頭誇夾奪奩奐奮獎奧妝婦媽嫵嫗媯姍薑婁婭嬈嬌孌娛媧嫻嫿嬰嬋嬸媼嬡嬪嬙嬤孫學孿寧寶實寵審憲宮寬賓寢對尋導壽將爾塵堯尷屍盡層屭屜屆屬屢屨嶼歲豈嶇崗峴嶴嵐島嶺嶽崠巋嶨嶧峽嶢嶠崢巒嶗崍嶮嶄嶸嶔崳嶁脊巔鞏巰幣帥師幃帳簾幟帶幀幫幬幘幗冪襆幹並廣莊慶廬廡庫應廟龐廢廎廩開異棄張彌弳彎彈強歸當錄彠彥徹徑徠禦憶懺憂愾懷態慫憮慪悵愴憐總懟懌戀懇惡慟懨愷惻惱惲悅愨懸慳憫驚懼慘懲憊愜慚憚慣湣慍憤憒願懾憖懣懶懍戇戔戲戧戰戩戶紮撲扡執擴捫掃揚擾撫摶摳掄搶護報擔擬攏揀擁攔擰撥擇掛摯攣掗撾撻挾撓擋撟掙擠揮撏撈損撿換搗據撚擄摑擲撣摻摜摣攬撳攙擱摟攪攜攝攄擺搖擯攤攖撐攆擷擼攛擻攢敵斂數齋斕鬥斬斷無舊時曠暘曇晝曨顯晉曬曉曄暈暉暫曖劄術樸機殺雜權條來楊榪傑極構樅樞棗櫪梘棖槍楓梟櫃檸檉梔柵標棧櫛櫳棟櫨櫟欄樹棲樣欒棬椏橈楨檔榿橋樺檜槳樁夢檮棶檢欞槨櫝槧欏橢樓欖櫬櫚櫸檟檻檳櫧橫檣櫻櫫櫥櫓櫞簷檁歡歟歐殲歿殤殘殞殮殫殯毆毀轂畢斃氈毿氌氣氫氬氳彙漢汙湯洶遝溝沒灃漚瀝淪滄渢溈滬濔濘淚澩瀧瀘濼瀉潑澤涇潔灑窪浹淺漿澆湞溮濁測澮濟瀏滻渾滸濃潯濜塗湧濤澇淶漣潿渦溳渙滌潤澗漲澀澱淵淥漬瀆漸澠漁瀋滲溫遊灣濕潰濺漵漊潷滾滯灩灄滿瀅濾濫灤濱灘澦濫瀠瀟瀲濰潛瀦瀾瀨瀕灝滅燈靈災燦煬爐燉煒熗點煉熾爍爛烴燭煙煩燒燁燴燙燼熱煥燜燾煆溜愛爺牘犛牽犧犢強狀獷獁猶狽麅獮獰獨狹獅獪猙獄猻獫獵獼玀豬貓蝟獻獺璣璵瑒瑪瑋環現瑲璽瑉玨琺瓏璫琿璡璉瑣瓊瑤璦璿瓔瓚甕甌電畫暢疇癤療瘧癘瘍鬁瘡瘋皰屙癰痙癢瘂癆瘓癇癡癉瘮瘞瘺癟癱癮癭癩癬癲臒皚皺皸盞鹽監蓋盜盤瞘眥矓睜睞瞼瞞矚矯磯礬礦碭碼磚硨硯碸礪礱礫礎硜碩硤磽磑礄確鹼礙磧磣堿镟滾禮禕禰禎禱禍稟祿禪離禿稈種積稱穢穠穭稅穌穩穡窮竊竅窯竄窩窺竇窶豎競篤筍筆筧箋籠籩築篳篩簹箏籌簽簡籙簀篋籜籮簞簫簣簍籃籬籪籟糴類秈糶糲粵糞糧糝餱緊縶糸糾紆紅紂纖紇約級紈纊紀紉緯紜紘純紕紗綱納紝縱綸紛紙紋紡紵紖紐紓線紺絏紱練組紳細織終縐絆紼絀紹繹經紿綁絨結絝繞絰絎繪給絢絳絡絕絞統綆綃絹繡綌綏絛繼綈績緒綾緓續綺緋綽緔緄繩維綿綬繃綢綯綹綣綜綻綰綠綴緇緙緗緘緬纜緹緲緝縕繢緦綞緞緶線緱縋緩締縷編緡緣縉縛縟縝縫縗縞纏縭縊縑繽縹縵縲纓縮繆繅纈繚繕繒韁繾繰繯繳纘罌網羅罰罷羆羈羥羨翹翽翬耮耬聳恥聶聾職聹聯聵聰肅腸膚膁腎腫脹脅膽勝朧腖臚脛膠脈膾髒臍腦膿臠腳脫腡臉臘醃膕齶膩靦膃騰臏臢輿艤艦艙艫艱豔艸藝節羋薌蕪蘆蓯葦藶莧萇蒼苧蘇檾蘋莖蘢蔦塋煢繭荊薦薘莢蕘蓽蕎薈薺蕩榮葷滎犖熒蕁藎蓀蔭蕒葒葤藥蒞蓧萊蓮蒔萵薟獲蕕瑩鶯蓴蘀蘿螢營縈蕭薩蔥蕆蕢蔣蔞藍薊蘺蕷鎣驀薔蘞藺藹蘄蘊藪槁蘚虜慮虛蟲虯蟣雖蝦蠆蝕蟻螞蠶蠔蜆蠱蠣蟶蠻蟄蛺蟯螄蠐蛻蝸蠟蠅蟈蟬蠍螻蠑螿蟎蠨釁銜補襯袞襖嫋褘襪襲襏裝襠褌褳襝褲襇褸襤繈襴見觀覎規覓視覘覽覺覬覡覿覥覦覯覲覷觴觸觶讋譽謄訁計訂訃認譏訐訌討讓訕訖訓議訊記訒講諱謳詎訝訥許訛論訩訟諷設訪訣證詁訶評詛識詗詐訴診詆謅詞詘詔詖譯詒誆誄試詿詩詰詼誠誅詵話誕詬詮詭詢詣諍該詳詫諢詡譸誡誣語誚誤誥誘誨誑說誦誒請諸諏諾讀諑誹課諉諛誰諗調諂諒諄誶談誼謀諶諜謊諫諧謔謁謂諤諭諼讒諮諳諺諦謎諞諝謨讜謖謝謠謗諡謙謐謹謾謫譾謬譚譖譙讕譜譎讞譴譫讖穀豶貝貞負貟貢財責賢敗賬貨質販貪貧貶購貯貫貳賤賁貰貼貴貺貸貿費賀貽賊贄賈賄貲賃賂贓資賅贐賕賑賚賒賦賭齎贖賞賜贔賙賡賠賧賴賵贅賻賺賽賾贗讚贇贈贍贏贛赬趙趕趨趲躉躍蹌蹠躒踐躂蹺蹕躚躋踴躊蹤躓躑躡蹣躕躥躪躦軀車軋軌軒軑軔轉軛輪軟轟軲軻轤軸軹軼軤軫轢軺輕軾載輊轎輈輇輅較輒輔輛輦輩輝輥輞輬輟輜輳輻輯轀輸轡轅轄輾轆轍轔辭辯辮邊遼達遷過邁運還這進遠違連遲邇逕跡適選遜遞邐邏遺遙鄧鄺鄔郵鄒鄴鄰鬱郟鄶鄭鄆酈鄖鄲醞醱醬釅釃釀釋裏钜鑒鑾鏨釓釔針釘釗釙釕釷釺釧釤鈒釩釣鍆釹鍚釵鈃鈣鈈鈦鈍鈔鍾鈉鋇鋼鈑鈐鑰欽鈞鎢鉤鈧鈁鈥鈄鈕鈀鈺錢鉦鉗鈷缽鈳鉕鈽鈸鉞鑽鉬鉭鉀鈿鈾鐵鉑鈴鑠鉛鉚鈰鉉鉈鉍鈹鐸鉶銬銠鉺銪鋏鋣鐃銍鐺銅鋁銱銦鎧鍘銖銑鋌銩銛鏵銓鉿銚鉻銘錚銫鉸銥鏟銃鐋銨銀銣鑄鐒鋪鋙錸鋱鏈鏗銷鎖鋰鋥鋤鍋鋯鋨鏽銼鋝鋒鋅鋶鐦鐧銳銻鋃鋟鋦錒錆鍺錯錨錡錁錕錩錫錮鑼錘錐錦鍁錈錇錟錠鍵鋸錳錙鍥鍈鍇鏘鍶鍔鍤鍬鍾鍛鎪鍠鍰鎄鍍鎂鏤鎡鏌鎮鎛鎘鑷鐫鎳鎿鎦鎬鎊鎰鎔鏢鏜鏍鏰鏞鏡鏑鏃鏇鏐鐔钁鐐鏷鑥鐓鑭鐠鑹鏹鐙鑊鐳鐶鐲鐮鐿鑔鑣鑞鑲長門閂閃閆閈閉問闖閏闈閑閎間閔閌悶閘鬧閨聞闥閩閭闓閥閣閡閫鬮閱閬闍閾閹閶鬩閿閽閻閼闡闌闃闠闊闋闔闐闒闕闞闤隊陽陰陣階際陸隴陳陘陝隉隕險隨隱隸雋難雛讎靂霧霽黴靄靚靜靨韃鞽韉韝韋韌韍韓韙韞韜韻頁頂頃頇項順須頊頑顧頓頎頒頌頏預顱領頗頸頡頰頲頜潁熲頦頤頻頮頹頷頴穎顆題顒顎顓顏額顳顢顛顙顥纇顫顬顰顴風颺颭颮颯颶颸颼颻飀飄飆飆飛饗饜飣饑飥餳飩餼飪飫飭飯飲餞飾飽飼飿飴餌饒餉餄餎餃餏餅餑餖餓餘餒餕餜餛餡館餷饋餶餿饞饁饃餺餾饈饉饅饊饌饢馬馭馱馴馳驅馹駁驢駔駛駟駙駒騶駐駝駑駕驛駘驍罵駰驕驊駱駭駢驫驪騁驗騂駸駿騏騎騍騅騌驌驂騙騭騤騷騖驁騮騫騸驃騾驄驏驟驥驦驤髏髖髕鬢魘魎魚魛魢魷魨魯魴魺鮁鮃鯰鱸鮋鮓鮒鮊鮑鱟鮍鮐鮭鮚鮳鮪鮞鮦鰂鮜鱠鱭鮫鮮鮺鯗鱘鯁鱺鰱鰹鯉鰣鰷鯀鯊鯇鮶鯽鯒鯖鯪鯕鯫鯡鯤鯧鯝鯢鯰鯛鯨鯵鯴鯔鱝鰈鰏鱨鯷鰮鰃鰓鱷鰍鰒鰉鰁鱂鯿鰠鼇鰭鰨鰥鰩鰟鰜鰳鰾鱈鱉鰻鰵鱅鰼鱖鱔鱗鱒鱯鱤鱧鱣鳥鳩雞鳶鳴鳲鷗鴉鶬鴇鴆鴣鶇鸕鴨鴞鴦鴒鴟鴝鴛鴬鴕鷥鷙鴯鴰鵂鴴鵃鴿鸞鴻鵐鵓鸝鵑鵠鵝鵒鷳鵜鵡鵲鶓鵪鶤鵯鵬鵮鶉鶊鵷鷫鶘鶡鶚鶻鶿鶥鶩鷊鷂鶲鶹鶺鷁鶼鶴鷖鸚鷓鷚鷯鷦鷲鷸鷺鸇鷹鸌鸏鸛鸘鹺麥麩黃黌黶黷黲黽黿鼂鼉鞀鼴齇齊齏齒齔齕齗齟齡齙齠齜齦齬齪齲齷龍龔龕龜誌製谘隻裡係範鬆冇嚐嘗鬨麵準鐘彆閒儘臟拚",n=0;n<e.length;n++){var r=e.charAt(n);if(t.indexOf(r)>-1)return!0}return!1},isIdCard:function(e){var t=e.toLowerCase().match(/\w/g);if(e.match(/^\d{17}[\dx]$/i)){for(var n=0,r=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],i=0;17>i;i++)n+=parseInt(t[i],10)*r[i];return"10x98765432".charAt(n%11)!=t[17]?!1:!!e.replace(/^\d{6}(\d{4})(\d{2})(\d{2}).+$/,"$1-$2-$3")}return e.match(/^\d{15}$/)?!!e.replace(/^\d{6}(\d{2})(\d{2})(\d{2}).+$/,"19$1-$2-$3"):!1},isIdCard_bak:function(e){var t,n,r,i,s=new Array(!0,!1,!1,!1,!1),o={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"xinjiang",71:"台湾",81:"香港",82:"澳门",91:"国外"},u=[];if(u=e.split(""),null===o[parseInt(e.substr(0,2))])return s[4];switch(e.length){case 18:return ereg=parseInt(e.substr(6,4))%4===0||parseInt(e.substr(6,4))%100===0&&parseInt(e.substr(6,4))%4===0?/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/:/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/,ereg.test(e)?(r=7*(parseInt(u[0])+parseInt(u[10]))+9*(parseInt(u[1])+parseInt(u[11]))+10*(parseInt(u[2])+parseInt(u[12]))+5*(parseInt(u[3])+parseInt(u[13]))+8*(parseInt(u[4])+parseInt(u[14]))+4*(parseInt(u[5])+parseInt(u[15]))+2*(parseInt(u[6])+parseInt(u[16]))+1*parseInt(u[7])+6*parseInt(u[8])+3*parseInt(u[9]),t=r%11,i="F",n="10X98765432",i=n.substr(t,1),i.toUpperCase()==u[17].toUpperCase()?s[0]:s[3]):s[2];default:return s[1]}},isRightVerifycode:function(e){var t=/^[a-z0-9]{4,30}$/;return t.test(e)},isAllowSetTradingPass:function(e){for(var t=!0,n=!0,r=!0,i=!0,s=0;s<e.length-1;s++){var o=parseInt(e[s]),u=parseInt(e[s+1]);t=t&&o==u,n=n&&u==o+1;var a=s<e.length+1?parseInt(e[s+3]):-1,f=parseInt(e[5-s]);if(s<e.length/2-1?(r=r&&o==a&&u==o+1,i=i&&o==f&&u==o+1):s==e.length/2-1&&(r=r&&o==a,i=i&&o==f),s+2==e.length&&6==e.length&&(t||n||r||i))return!1}return!0},isQq:function(e){return/^[1-9]\d{4,}$/.test(e)},isPhone:function(e){return/^[0-9]{3,4}-[0-9]{7,8}$/.test(e)},isUrl:function(e){return e?(e=e.replace(/#.*$/,""),e=e.replace(/\?.*$/,""),/^\w+:\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/.test(e)):!1},isIP:function(t){if(!t||e.isNull(t))return!1;var n=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return n.test(t)&&RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256?!0:!1},isEmptyObject:function(e){for(var t in e)return!1;return!0},isCharsLenWithinRange:function(t,n){if(!e.isString(t))return!1;var r=t.match(/\W/g),i=null==r?t.length:t.length+r.length,s=i>=0&&n>=i;return s?(this.cutLen=t.length,!0):!1},isContactName:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,26):!1},isBookPS:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,100):!1},isInvTitle:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,100):!1},isBoardTitle:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,40):!1},isAreaTitle:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,80):!1},isMobileNumber:function(t){if(!e.isString(t))return!1;var n=11;return t.length==n&&/^(\d| )+$/g.test(t)},isFlightNumber:function(t){if(!e.isString(t))return!1;var n=3,r=7;return t.length>=n&&t.length<=r&&/^(\d|\w)+$/g.test(t)}};return t.isPostcode=t.isZip,t}),define("cUtilityPath",["$"],function(){var e={urlParseRE:/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,getLocation:function(e){var t=e?this.parseUrl(e):location,n=this.parseUrl(e||location.href).hash;return n="#"===n?"":n,t.protocol+"//"+t.host+t.pathname+t.search+n},parseLocation:function(){return this.parseUrl(this.getLocation())},isRelativeUrl:function(t){return""===e.parseUrl(t).protocol},parseUrl:function(t){var n=e.urlParseRE.exec(t||"")||[];return{href:n[0]||"",hrefNoHash:n[1]||"",hrefNoSearch:n[2]||"",domain:n[3]||"",protocol:n[4]||"",doubleSlash:n[5]||"",authority:n[6]||"",username:n[8]||"",password:n[9]||"",host:n[10]||"",hostname:n[11]||"",port:n[12]||"",pathname:n[13]||"",directory:n[14]||"",filename:n[15]||"",search:n[16]||"",hash:n[17]||""}},isSameDomain:function(t,n){return e.parseUrl(t).domain===e.parseUrl(n).domain},makePathAbsolute:function(e,t){var n,r,i,s;if(e&&"/"===e.charAt(0))return e;for(e=e||"",t=t?t.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"",n=t?t.split("/"):[],r=e.split("/"),i=0;i<r.length;i++)switch(s=r[i]){case".":break;case"..":n.length&&n.pop();break;default:n.push(s)}return"/"+n.join("/")},makeUrlAbsolute:function(t,n){if(!e.isRelativeUrl(t))return t;void 0===n&&(n=this.documentBase);var r=e.parseUrl(t),i=n,s=r.protocol||i.protocol,o=r.protocol?r.doubleSlash:r.doubleSlash||i.doubleSlash,u=r.authority||i.authority,f=""!==r.pathname,l=e.makePathAbsolute(r.pathname||i.filename,i.pathname),c=r.search||!f&&i.search||"",h=r.hash;return s+o+u+l+c+h}};e.documentUrl=e.parseLocation();var t=$("head").find("base");return e.documentBase=t.length?e.parseUrl(e.makeUrlAbsolute(t.attr("href"),e.documentUrl.href)):e.documentUrl,e}),define("cUtility",["cUtilityHybrid","cUtilityHash","cUtilityDate","cUtilityServertime","Validate","cUtilityPath"],function(e,t,n,r,i,s){var o=function(e){return Object.prototype.toString.call(e)},u={};return $.extend(u,e),u.Date=n,u.Hash=t.Hash,u.inApp=e.isInApp(),u.trim=function(e){return e.replace(/(^[\s\u3000]*)|([\s\u3000]*$)/g,"")},u.stripTags=function(e){return(e||"").replace(/<[^>]+>/g,"")},u.mix=function(e,t){return _.extend(e,t)},u.indexOf=function(e,t){return _.indexOf(t,e)},u.each=_.each,u.grep=_.filter,u.getServerDate=r.getServerDate,u.getGuid=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function t(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var n=window.localStorage.GUID||"";if(!n){n=t();try{window.localStorage.setItem("GUID",n)}catch(r){}}return n},u.Object={},u.Object.set=function(e,t,n){if(!t)return null;var r=t.split(".");e=e||{};for(var i=0,s=r.length,o=Math.max(s-1,0);s>i;i++)o>i?e=e[r[i]]=e[r[i]]||{}:e[r[i]]=n;return e},u.Object.get=function(e,t){if(!e||!t)return null;var n=t.split(".");e=e||{};var r=0,i=n.length;for(Math.max(i-1,0);i>r;r++)if(e=e[n[r]],null===e||"undefined"==typeof e)return null;return e},u.SimpleQueue=function(){this.initialize()},u.SimpleQueue.prototype={initialize:function(){this.index=0,this.handlers=[],this.isStart=!1},add:function(e){this.handlers.push(e),this.isStart||(this.isStart=!0,this._next())},_next:function(e){var t=this.handlers.shift();t&&t.call(this,this,e)},next:function(){this._next.apply(this,arguments),this.stop()},stop:function(){this.isStart=!1}},u.tryUrl=function(e){var t=document.createElement("iframe");t.height=1,t.width=1,t.frameBorder=0,t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t),u.tryUrl=function(e){t.src=e},U.tryUrl(e)},u.validate=i,u.JsonArrayToObject=function(e){if(!e)return[];for(var t=e.shift(),n=[],r=null,i=0,s=e.length;s>i;i++){r={};for(var u=0,a=e[i].length;a>u;u++)switch(o(e[i][u])){case"[object Array]":r[t[u]]=U.JsonArrayToObject(e[i][u]);break;default:r[t[u]]=e[i][u]}n.push(r)}return n},u.dateParse=function(e){var t=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+$");if("string"==typeof e){if(t.test(e)||isNaN(Date.parse(e))){var n=e.split(/ |T/),r=n.length>1?n[1].split(/[^\d]/):[0,0,0],i=n[0].split(/[^\d]/);return new Date(i[0]-0,i[1]-1,i[2]-0,r[0]-0,r[1]-0,r[2]-0)}return new Date(e)}return new Date},u.deleteValue=function(e,t){var n=U.indexOf(e,t);return n>-1?t.splice(n,1):null},u.urlParse=function(e){return s.parseUrl(e)},u.getUrlParam=function(e,t){var n=new RegExp("(\\?|&)"+t+"=([^&]+)(&|$)","i"),r=e.match(n);return r?r[2]:""},u.getUrlParams=function(e){for(var t,n,r,e=e.split("://"),i=/([^&=?]+)=([^&]+)/g,s={};t=i.exec(e[0]);)name=t[1],n=t[2],s[name]=n;if(e[1]){var o=0;r=_.size(s),_.each(s,function(t,n){++o==r&&(s[n]+="://"+e[1])})}return s},u}),define("cBase",["libs","cCoreInherit","cUtility"],function(e,t,n){"undefined"==typeof console&&(console={log:function(){},error:function(){}});var r={};r.isInApp=n.isInApp,r.Class=t.Class,r.extend=t.extend,r.implement=t.implement,[].slice,r.Object=new r.Class({});var i={keys:function(e){var t=[];if("object"==typeof e)if("function"==typeof Object.keys)Object.keys(e);else for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}};return r.extend(r.Object,i),r.Date=n.Date,r.Hash=n.Hash,r.getInstance=function(){return this.instance||new this},r.getServerDate=n.getServerDate,r}),define("cAbstractStorage",["cBase"],function(e){var t=window.JSON,n=e.Date,r=new e.Class({__propertys__:function(){this.proxy=null,this.overdueClearKey="C_CLEAR_OVERDUE_CATCH"},initialize:function(){},removeOverdueCathch:function(){var e=(new n).getTime(),t=this.proxy.getItem(this.overdueClearKey),r=[],i=[];if(t){r=JSON.parse(t);for(var s,o=0;o<r.length;o++)s=r[o],(new Date(s.timeout)).getTime()<=e?this.proxy.removeItem(s.key):i.push(s);this.proxy.setItem(this.overdueClearKey,JSON.stringify(i))}},_removeOdCLately:function(e){e=e||5;var t=this.proxy.getItem(this.overdueClearKey),n=[];if(t){n=JSON.parse(t),n.sort(function(e,t){var n=(new Date(e.timeout)).getTime(),r=(new Date(t.timeout)).getTime();return n-r});for(var r=n.splice(0,e)||[],i=0;i<r.length;i++)this.proxy.removeItem(r[i].key);this.proxy.removeItem(this.overdueClearKey),n.length>0&&this.proxy.setItem(this.overdueClearKey,JSON.stringify(n))}},_setOverdueCathch:function(e,t){if(e&&t&&!(n.parse(t,!0)<new Date)){var r={},i=[],s=this.proxy.getItem(this.overdueClearKey);r.key=e,r.timeout=t,s&&(i=JSON.parse(s));for(var o,u=!1,a=0;a<i.length;a++)o=i[a],o.key==e&&(i[a]=r,u=!0);u||i.push(r),this.proxy.setItem(this.overdueClearKey,JSON.stringify(i))}},_buildStorageObj:function(e,t,n,r,i){return{value:e,oldvalue:i||null,timeout:t,tag:n,savedate:r}},set:function(e,r,i,s,o,u){o=o||(new n).format("Y/m/d H:i:s"),i=i?new n(i):(new n).addDay(30);var a=i.format("Y/m/d H:i:s");this._setOverdueCathch(e,a);var f=this._buildStorageObj(r,a,s,o,u);try{return this.proxy.setItem(e,t.stringify(f)),!0}catch(l){"QuotaExceededError"==l.name&&(this._removeOdCLately(),this.set(e,r,i,s,o,u))}return!1},get:function(e,r,i){var s,o=null;try{s=this.proxy.getItem(e),s&&(s=t.parse(s),n.parse(s.timeout,!0)>=new Date&&(r?r===s.tag&&(o=i?s.oldvalue:s.value):o=i?s.oldvalue:s.value))}catch(u){console&&0}return o},getTag:function(e){var n,r=null;try{n=this.proxy.getItem(e),n&&(n=t.parse(n),r=n&&n.tag)}catch(i){console&&0}return r},getSaveDate:function(e,r){var i,s=null;try{i=this.proxy.getItem(e),i&&(i=t.parse(i),i.savedate&&(s=n.parse(i.savedate),r||(s=s.valueOf())))}catch(o){console&&0}return s},getExpireTime:function(e){var n=null,r=null;try{n=this.proxy.getItem(e),n&&(n=t.parse(n),r=Date.parse(n.timeout))}catch(i){console&&0}return r},remove:function(e){return this.proxy.removeItem(e)},getAll:function(){for(var e=this.proxy.length,t=[],n=0;e>n;n++){var r=this.proxy.key(n),i={key:r,value:this.get(r)};t.push(i)}return t},clear:function(){this.proxy.clear()},gc:function(){for(var e=this.proxy,t=this.proxy.length,n=0;t>n;n++){var r=e.key(n);if("GUID"==r)break;try{this.get(r)||this.remove(r)}catch(i){}}}});return r}),define("cStorage",["cBase","cAbstractStorage"],function(e,t){var n=new e.Class(t,{__propertys__:function(){},initialize:function($super,e){this.proxy=window.localStorage,$super(e)},oldGet:function(t){var n=localStorage.getItem(t),r=n?JSON.parse(n):null;if(r&&r.timeout){var i=new Date,s=e.Date.parse(r.timeout).valueOf();if(r.timeby){if(s-i>=0)return r}else if(s-e.Date.parse(e.Date.format(i,"Y-m-d")).valueOf()>=0)return r;return localStorage.removeItem(t),null}return r},oldSet:function(e,t){localStorage.setItem(e,t)},getExpireTime:function(t){var n=localStorage.getItem(t),r=n?JSON.parse(n):null;return r&&r.timeout?r.timeout:(new e.Date(e.getServerDate())).addDay(2).format("Y-m-d")},oldRemove:function(e){localStorage.removeItem(e)}});return n.getInstance=function(){return this.instance?this.instance:this.instance=new this},n.localStorage=n.getInstance(),n}),define("cWidgetFactory",["libs"],function(){var e=e||{};return e.products={},e.hasWidget=function(t){return!!e.products[t]},e.register=function(t){if(!(t&&t.name&&t.fn))throw"WidgetFactory: widget is lack of necessary infomation.";if(e.products[t.name])throw"WidgetFactory: widget has been register in WidgetFactory";e.products[t.name]=t.fn},e.create=function(t){return e.products[t]},e}),define("cHybridShell",[],function(){var e={},t=window;e.CLASSES=[];for(var n in t)"Ctrip"==n.substr(0,5)&&e.CLASSES.push(t[n]);e.FNINFO={abort_http_pipe_request:{realname:"app_abort_HTTP_pipe_request"},do_business_job:{sidIndex:3},send_h5_pipe_request:{realname:"app_send_H5_pipe_request"},send_http_pipe_request:{realname:"app_send_HTTP_pipe_request"}},e.fninfo=function(t){var n=r.ifHasnot(e.FNINFO,t,{});return n._READY||(r.ifHasnot(n,"realname","app_"+t),n.hasOwnProperty("klass")||(n.klass=_.find(e.CLASSES,function(e){return!!e[n.realname]})),n._READY=!0),n};var r={EXCEPTION:new Error("HYBRID-SHEL-2014"),SN:{DEFAULT:0,UPON:"UPON.2014",PRE:"PRE.2014",POST:"POST.2014",PX:"PX.2014",gen:function(){return(new Date).getTime()}},abort:function(e){if(e){if(e==r.EXCEPTION)return!0;throw e}throw r.EXCEPTION},apiFn:function(t){var n=function(){},i=e.fninfo(t);return i.klass&&(n=function(){var e=arguments,n=!1;_.find(r.fn("find",t,r.SN.PRE),function(t){try{e=t.apply(null,e)}catch(n){return r.abort(n)}}),n||i.klass[i.realname].apply(i.klass,e)}),n},fn:function(){var e={};return function(t,n,i,s){!s&&i instanceof Function&&(s=i,i=void 0),i||(i=r.SN.DEFAULT);var o=r.ifHasnot(e,n,{});switch(o=r.ifHasnot(o,i,{fns:[],times:{}}),t){case"once":s&&(o.times[s]=1);case"on":return void (s&&o.fns.push(s));case"find":return o.fns;case"try":var u=o.times[s];return void (_.isNumber(u)&&(1==u?(arguments[0]="off",r.fn.apply(r,arguments)):o.times[s]-=1));case"off":return o.fns=s?_.reject(o.fns,function(e){return e===s}):[],void delete o.times[s]}}}(),ifHasnot:function(e,t,n){return e.hasOwnProperty(t)||(e[t]=n),e[t]}},i={abort:r.abort,fn:function(e,t,n){this.on(e,t,n);var i=r.apiFn(e);return i.run=i,i},init:_.once(function(){t.app||(t.app={}),t.app.callback=function(t){var n,i;if("string"==typeof t)try{t=JSON.parse(decodeURIComponent(t))}catch(s){return}var o=t.tagname;if(n=e.fninfo(o).paramsMixed?t:t.param,"string"==typeof n)try{n=JSON.parse(n)}catch(s){}t.error_code&&(/^(\((-?\d+)\))?(.+)$/.exec(t.error_code),i=new Error,i.number=parseInt(RegExp.$2),i.message=RegExp.$3);var u=n?n.sequenceId:void 0,f=r.fn("find",o,r.SN.UPON),l=r.fn("find",o,r.SN.POST),c=r.fn("find",o,u),h=!1,p=Lizard.facadeMethods;if(p&&(p=p[o]),"function"==typeof p?c=c.concat(p):p=void 0,f.length+c.length){_.find(l,function(e){try{n=e(n,i)}catch(t){return r.abort(t)}});var v=function(e,t){return r.fn("try",o,e,t),h=t(n,i)===!1};return h||_.find(f,function(e){return v(r.SN.UPON,e)}),h||_.find(c,function(e){return v(u,e)}),p&&f.length+c.length==1?void 0:!0}}}),on:function(e,t,n){return r.fn("on",e,t,n),this},once:function(e,t,n){return r.fn("once",e,t,n),this},preTreat:function(e,t){return r.fn("on",e,r.SN.PRE,t),this},postTreat:function(e,t){return r.fn("on",e,r.SN.POST,t),this},off:function(e,t,n){return r.fn("off",e,t,n),this},upon:function(e,t){return r.fn("on",e,r.SN.UPON,t),this},Fn:function(){var t,n,s;return function(o,u){return this===i?new this.Fn(o,u):(t=o,s=e.fninfo(t).sidIndex,_.isNumber(s)&&(n=r.SN.gen()),i.once(o,n,u),_.each(["on","once","off"],function(e){this[e]=function(r){return i[e](t,n,r),this}},this),void (this.run=function(){var e=arguments;if(_.isNumber(s)){e=[];for(var i=0,o=Math.max(s+1,arguments.length);o>i;i++)i==s&&e.push(n),e.push(arguments[i])}return r.apiFn(t).apply(null,e),this}))}}()};return i}),define("cAbstractStore",["cBase","cStorage","cUtility"],function(e,t,n){CDate=e.Date,HObject=n.Object;var r=new e.Class({__propertys__:function(){this.NULL={},this.key=this.NULL,this.lifeTime="30M",this.useServerTime=!1,this.defaultData=null,this.rollbackEnabled=!1,this.sProxy=this.NULL},initialize:function(e){for(var t in e)this[t]=e[t];this.assert()},assert:function(){},set:function(e,t,n){var r=this._getNowTime();r.addSeconds(this._getLifeTime()),this.rollbackEnabled&&!n&&(n=e),this.sProxy.set(this.key,e,r,t,null,n)},setLifeTime:function(e,t){this.lifeTime=e;var n,r=this.getTag(),i=this.get();n=t?this._getNowTime():this.sProxy.getSaveDate(this.key,!0)||this._getNowTime();var s=(new CDate(n.valueOf())).format("Y/m/d H:i:s");n.addSeconds(this._getLifeTime()),this.sProxy.set(this.key,i,n,r,s)},setAttr:function(e,t,n){if(!_.isObject(e)){n=n||this.getTag();var r=this.get(n)||{},i={};if(r){if(this.rollbackEnabled){i=this.get(n,!0);var s=HObject.get(r,e);HObject.set(i,e,s)}return HObject.set(r,e,t),this.set(r,n,i)}return!1}for(var o in e)e.hasOwnProperty(o)&&this.setAttr(o,e[o],t)},get:function(t,n){var r=null,i=!0;"[object Array]"===Object.prototype.toString.call(this.defaultData)?r=this.defaultData.slice(0):this.defaultData&&(r=_.clone(this.defaultData));var s=this.sProxy.get(this.key,t,n),o=typeof s;if({string:!0,number:!0,"boolean":!0}[o])return s;if(s)if("[object Array]"==Object.prototype.toString.call(s)){r=[];for(var u=0,f=s.length;f>u;u++)r[u]=s[u]}else s&&!r&&(r={}),e.extend(r,s);for(var l in r){i=!1;break}return i?null:r},getAttr:function(e,t){var n=this.get(t),r=null;return n&&(r=HObject.get(n,e)),r},getTag:function(){return this.sProxy.getTag(this.key)},remove:function(){this.sProxy.remove(this.key)},removeAttr:function(e){var t=this.get()||{};t[e]&&delete t[e],this.set(t)},getExpireTime:function(){var e=null;try{e=this.sProxy.getExpireTime(this.key)}catch(t){console&&0}return e},setExpireTime:function(e){var t=this.get(),n=CDate.parse(e);this.sProxy.set(this.key,t,n)},_getNowTime:function(){return this.useServerTime?new CDate(e.getServerDate()):new CDate},_getLifeTime:function(){var e=0,t=this.lifeTime+"",n=t.charAt(t.length-1),r=+t.substring(0,t.length-1);return n="number"==typeof n?"M":n.toUpperCase(),e="D"==n?24*r*60*60:"H"==n?60*r*60:"M"==n?60*r:"S"==n?r:60*r},rollback:function(e){if(this.rollbackEnabled){var t=this.getTag(),n=this.sProxy.get(this.key,t),r=this.sProxy.get(this.key,t,!0);if(e&&e instanceof Array)for(var i in e){var s=e[i],o=r[s];"undefined"!=typeof o&&(n[s]=o)}else n=r,r={};this.set(n,t,r)}}});return r.getInstance=function(){return this.instance?this.instance:this.instance=new this},r}),define("cStore",["cBase","cAbstractStore","cStorage"],function(e,t,n){var r=new e.Class(t,{__propertys__:function(){this.sProxy=n.getInstance()},initialize:function($super,e){$super(e)}});return r}),define("CommonStore",["cBase","cStore","cStorage","cUtility"],function(e,t,n,r){var i={},s=n.localStorage;return i.UserStore=new e.Class(t,{__propertys__:function(){this.key="USER",this.lifeTime="30D"},initialize:function($super,e){$super(e)},getUser:function(){var e=s.oldGet("USERINFO");return e=e&&e.data||null,e&&this.set(e),e||this.get()},setUser:function(e){this.set(e);var t=s.getExpireTime("USERINFO"),n={data:e,timeout:t};s.oldSet("USERINFO",JSON.stringify(n))},removeUser:function(){s.oldRemove("USERINFO"),this.remove()},isNonUser:function(){var e=this.getUser();return e&&!!e.IsNonUser},isLogin:function(){var e=this.getUser();return e&&!!e.Auth&&!e.IsNonUser},getUserName:function(){var e=this.getUser();return e.UserName},getUserId:function(){var e=this.getUser()||{};return e.UserID||r.getGuid()},getAuth:function(){var e=i.HeadStore.getInstance(),t=this.getUser();return t&&t.Auth&&e.setAttr("auth",t.Auth),e.getAttr("auth")},setAuth:function(e){var t=this.isLogin(),n=this.getUser()||{};n.Auth=e,n.IsNonUser=t?!1:!0,this.setUser(n)},setNonUser:function(e){var t=i.HeadStore.getInstance();t.setAttr("auth",e);var n={};n.Auth=e,n.IsNonUser=!0,this.setUser(n)},setExpireTime:function($super,e){$super(e);var t=this.get(),n={data:t,timeout:e};s.oldSet("USERINFO",JSON.stringify(n))}}),i.HeadStore=new e.Class(t,{userStore:i.UserStore.getInstance(),__propertys__:function(){this.key="HEADSTORE",this.lifeTime="15D",this.defaultData={cid:r.getGuid(),ctok:"351858059049938",cver:"1.0",lang:"01",sid:"8888",syscode:"09",auth:""};var e=this.get;this.get=function(){var t=e.apply(this,arguments),n=this.userStore.getUser(),s=i.SalesObjectStore.getInstance().get();return r.isInApp()||(t.sid=s&&s.sid?s.sid:"8888"),t.auth=n&&n.Auth?n.Auth:"",this.set(t),t}},initialize:function($super,e){$super(e)},setAuth:function(e){var t=i.UserStore.getInstance();t.setAuth(e),this.setAttr("auth",e)}}),i.UnionStore=new e.Class(t,{__propertys__:function(){this.key="UNION",this.lifeTime="7D",this.store=n.localStorage},initialize:function($super,e){$super(e)},get:function(){var e=this.store.oldGet(this.key);return e&&e.data||null},set:function(t,n){n||(n=new e.Date(r.getServerDate()),n.addSeconds(this._getLifeTime()));var i={data:t,timeout:n.format("Y/m/d H:i:s")};this.store.oldSet(this.key,JSON.stringify(i))}}),i.SalesStore=new e.Class(t,{__propertys__:function(){this.key="SALES",this.lifeTime="30D",this.store=n.localStorage},initialize:function($super,e){$super(e)},get:function(){var e=this.store.oldGet(this.key);return e&&e.data||null},set:function(t,n){n||(n=new e.Date(r.getServerDate()),n.addSeconds(this._getLifeTime()));var i={data:t,timeout:n.format("Y/m/d H:i:s")};this.store.oldSet(this.key,JSON.stringify(i))}}),i.SalesObjectStore=new e.Class(t,{__propertys__:function(){this.key="SALES_OBJECT",this.lifeTime="30D"},initialize:function($super,e){$super(e)}}),i.UnionStore.getInstance=i.SalesStore.getInstance=e.getInstance,i}),define("cHybridFacade",["cHybridShell","CommonStore"],function(e,t){"use strict";var n={ABORT_HTTP_PIPE_REQUEST:{argnames:["sequenceId"]},ADD_WEIXIN_FRIEND:{},APP_CALL_SYSTEM_SHARE:{argnames:["imageRelativePath","text","title","linkUrl","isIOSSystemShare"]},APP_CHECK_ANDROID_PACKAGE_INFO:{},APP_CHECK_NETWORK_STATUS:{},APP_CHOOSE_INVOICE_TITLE:{argnames:["title"]},APP_CHOOSE_PHOTO:{argnames:[{maxFileSize:200},{maxPhotoCount:1},{meta:{canEditSinglePhoto:!1}}]},APP_FINISHED_LOGIN:{argnames:["userInfo"]},APP_FINISHED_REGISTER:{argnames:["userInfo"]},APP_GET_DEVICE_INFO:{},APP_LOG_GOOGLE_REMARKTING:{argnames:[{url:function(){return window.location.href}}]},APP_NETWORK_DID_CHANGED:{},APP_READ_VERIFICATION_CODE_FROM_SMS:{},APP_SHOW_MAP_WITH_POI_LIST:{tagname:"show_map_with_POI_list",argnames:["poiList"]},APP_SHOW_VOICE_SEARCH:{argnames:["bussinessType"]},AUTO_LOGIN:{tagname:"member_auto_login"},BACK:{},BACK_TO_BOOK_CAR:{},BACK_TO_HOME:{},BACK_TO_LAST_PAGE:{argnames:[{param:""}]},BECOME_ACTIVE:{},CALL_PHONE:{argnames:["tel"]},CALL_SERVICE_CENTER:{tagname:"call_phone"},CHECK_APP_INSTALL:{tagname:"check_app_install_status",argnames:["url","package"]},CHECK_FILE_EXIST:{argnames:["fileName","relativeFilePath"]},CHECK_PAY_APP_INSTALL_STATUS:{},CHECK_UPDATE:{},CHOOSE_CONTACT_FROM_ADDRESSBOOK:{},CITY_CHOOSE:{tagname:"cityChoose"},COMMIT:{},COPY_TO_CLIPBOARD:{tagname:"copy_string_to_clipboard",argnames:["content"]},CROSS_DOMAIN_HREF:{argnames:["moduleType","anchor","param"]},CROSS_JUMP:{tagname:"cross_package_href",argnames:["path","param"]},DELETE_FILE:{argnames:["fileName","relativeFilePath"]},DOWNLOAD_DATA:{argnames:["url","suffix"]},ENABLE_DRAG_ANIMATION:{argnames:["show"]},ENCRYPT_BASE64:{tagname:"base64_encode",argnames:["info"]},ENCRYPT_CTRIP:{tagname:"ctrip_encrypt",argnames:["inString","encType"]},ENTRY:{},FAVORITE:{},FAVORITED:{},GET_CURRENT_SANDBOX_NAME:{},GET_FILE_SIZE:{argnames:["fileName","relativeFilePath"]},GO_TO_BOOK_CAR_FINISHED_PAGE:{argnames:["url"]},GO_TO_HOTEL_DETAIL:{argnames:["hotelId","hotelName","cityId","isOverSea"]},H5_NEED_REFRESH:{},H5_PAGE_FINISH_LOADING:{},HIDE_LOADING_PAGE:{},INIT:{tagname:"init_member_H5_info"},LOCATE:{argnames:[[3e3],[!0]],parseCallback:function(e){return function(t){try{e.success(t)}catch(n){e.error(t)}}}},LOG_EVENT:{argnames:["event_name"]},MAKE_DIR:{argnames:["dirname","relativeFilePath"]},MEMBER_LOGIN:{argnames:["isShowNonMemberLogin"]},NATIVE_LOG:{tagname:"log"},NON_MEMBER_LOGIN:{},OPEN_ADV_PAGE:{argnames:["url"]},OPEN_PAY_APP_BY_URL:{argnames:["payAppName","payURL","successRelativeURL","detailRelativeURL"]},OPEN_URL:{argnames:["openUrl","targetMode",{title:""},{pageName:""},{isShowLoadingPage:!1}]},PHONE:{},READ_FROM_CLIPBOARD:{tagname:"read_copied_string_from_clipboard"},READ_TEXT_FROM_FILE:{argnames:["fileName","relativeFilePath"]},RECOMMEND_APP_TO_FRIEND:{tagname:"recommend_app_to_friends"},REFRESH_NATIVE:{tagname:"refresh_native_page",argnames:["package","json"]},REFRESH_NAV_BAR:{argnames:["config"]},REGISTER:{tagname:"member_register"},SAVE_PHOTO:{argnames:["photoUrl","photoBase64String","imageName"]},SEARCH:{},SEND_H5_PIPE_REQUEST:{argnames:["serviceCode","header","data","sequenceId",{pipeType:""}]},SEND_HTTP_PIPE_REQUEST:{argnames:["target","methods","header","queryData","retryInfo","sequenceId"]},SET_NAVBAR_HIDDEN:{argnames:["isNeedHidden"]},SET_TOOLBAR_HIDDEN:{argnames:["isNeedHidden"]},SHARE:{},SHARE_TO_VENDOR:{tagname:"call_system_share",argnames:["imgUrl","text",{title:""},{linkUrl:""},{isIOSSystemShare:!1}]},SHOW_LOADING_PAGE:{},SHOW_MAP:{argnames:["latitude","longitude","title","subtitle"]},SHOW_NEWEST_INTRODUCTION:{},WEB_VEW_DID_APPEAR:{tagname:"web_view_did_appear"},WEB_VIEW_DID_APPEAR:{},WEB_VIEW_FINISHED_LOAD:{},WRITE_TEXT_TO_FILE:{argnames:["text","fileName","relativeFilePath","isAppend"]}},r={methodInfo:function(e){var t=n[e];return t.tagname||(t.tagname=e.toLowerCase().replace(/^app_/,"")),t},name2var:function(e){return"METHOD_"+e},var2name:function(e){return e.substr(7)},var2tagname:function(e){var t=r.var2name(e),n=r.methodInfo(t);return n.tagname}},i={init:function(){var n=i.init;if(!n.called){n.called=!0,e.init();var r,s,o;s=function(t,n){return window.localStorage.getItem("isPreProduction")||e.abort(),["@[Wireless H5] "+t,n]},e.preTreat("log",s),r=function(e){if(e&&e.data){var n=t.UserStore.getInstance();n.getUser(),n.setUser(e.data);var r=t.HeadStore.getInstance(),i=r.get();i.auth=e.data.Auth,r.set(i)}},e.upon("init_member_H5_info",r).upon("member_auto_login",r).upon("member_login",r).upon("member_register",r).upon("non_member_login",r),r=function(e){if("undefined"!=typeof e){var t={SERVERDATE:e.timestamp,SOURCEID:e.sourceId,isPreProduction:e.isPreProduction};e.device&&(t.DEVICEINFO=JSON.stringify({device:e.device})),e.appId&&(t.APPINFO=JSON.stringify({version:e.version,appId:e.appId,serverVersion:e.serverVersion,platform:e.platform})),_.each(t,function(e,t){e&&window.localStorage.setItem(t,e)})}},e.upon("init_member_H5_info",r),r=function(e){Lizard.networkType=e.networkType},e.on("network_did_changed",r).fn("check_network_status",r)(),o=function(e,t){return e||(e={}),t&&(e.error_code=t.number),e},e.postTreat("save_photo",o)}},getOpenUrl:function(e){var t=(Internal&&Internal.isYouthApp?"ctripyouth":"ctrip")+"://wireless/"+e.module+"?",n=[];for(var r in e.param)n.push(r+"="+e.param[r]);return t+n.join("&")},register:function(t){try{var n=r.var2tagname(t.tagname)}catch(i){return}e.off(n,t.sequenceId).on(n,t.sequenceId,t.callback)},registerOne:function(e,t){n[r.var2name(e)]={tagname:t}},request:function(t){var n=r.methodInfo(r.var2name(t.name)),i=[];n.parseArgs?i=n.parseArgs(t):n.argnames&&_.each(n.argnames,function(e){var n;if(_.isString(e))n=t[e];else if(_.isArray(e))n=e[0];else{var r=_.pairs(e)[0];typeof r[1],n=t[r[0]],"function"==typeof r[1]?n=r[1](n):n||(n=r[1])}i.push(n)});var s=n.parseCallback?n.parseCallback(t):t.callback;e.off(n.tagname,t.sequenceId).fn(n.tagname,t.sequenceId,s).apply(null,i)},unregister:function(t){"object"==typeof arguments[0]&&(t=arguments[0].tagname),e.off(t)}};return _.each(n,function(e,t){var n=r.name2var(t);i[n]=n}),i}),define("cWidgetGuider",["cUtilityHybrid","cWidgetFactory","cHybridFacade","cHybridShell"],function(e,t,n,r){function i(e){var t={};return _.each(e,function(n,r){_.isFunction(n)?t[r]=function(){return!1}:_.isObject(n)&&(t[r]=i(e[r]))}),t}var s="Guider",o={jump:function(e){var t={refresh:function(){n.request({name:n.METHOD_OPEN_URL,targetMode:0,title:e.title,pageName:e.pageName})},app:function(){if(e&&e.module){var t=n.getOpenUrl(e);n.request({name:n.METHOD_OPEN_URL,openUrl:t,targetMode:1,title:e.title,pageName:e.pageName})}else e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:1,title:e.title,pageName:e.pageName})},h5:function(){e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:2,title:e.title,pageName:e.pageName,isShowLoadingPage:e.isShowLoadingPage})},browser:function(){e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:3,title:e.title,pageName:e.pageName,isShowLoadingPage:e.isShowLoadingPage})},open:function(){e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:4,title:e.title,pageName:e.pageName,isShowLoadingPage:e.isShowLoadingPage})},open_relative:function(){e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:5,title:e.title,pageName:e.pageName,isShowLoadingPage:e.isShowLoadingPage})}};"function"==typeof t[e.targetModel]&&t[e.targetModel]()},apply:function(e){_.isObject(e)&&_.isFunction(e.hybridCallback)&&e.hybridCallback()},call:function(){return!1},init:function(e){n.request(e&&window.parseFloat(e.version)<5.2?{name:n.METHOD_ENTRY,callback:e.callback}:{name:n.METHOD_INIT,callback:e.callback})},log:function(e){n.request({name:n.METHOD_LOG_EVENT,event_name:e.name})},print:function(e){n.request({name:n.METHOD_NATIVE_LOG,log:e.log,result:e.result})},callService:function(){n.request({name:n.METHOD_CALL_SERVICE_CENTER})},backToLastPage:function(e){var t=e?e.param:"";n.request({name:n.METHOD_BACK_TO_LAST_PAGE,param:t})},checkUpdate:function(){n.request({name:n.METHOD_CHECK_UPDATE})},recommend:function(){n.request({name:n.METHOD_RECOMMEND_APP_TO_FRIEND})},addWeixinFriend:function(){n.request({name:n.METHOD_ADD_WEIXIN_FRIEND})},showNewestIntroduction:function(){n.request({name:n.METHOD_SHOW_NEWEST_INTRODUCTION})},register:function(e){e&&e.tagname&&e.callback&&n.register({tagname:e.tagname,callback:e.callback})},create:function(){n.init()},home:function(){n.request({name:n.METHOD_BACK_TO_HOME})},jumpHotel:function(e){n.request({name:n.METHOD_GO_TO_HOTEL_DETAIL,hotelId:e.hotelId,hotelName:e.name,cityId:e.cityId,isOverSea:e.isOverSea})},injectUbt:function(){return!1},checkAppInstall:function(e){n.request({name:n.METHOD_CHECK_APP_INSTALL,url:e.url,"package":e.package,callback:e.callback})},callPhone:function(e){n.request({name:n.METHOD_CALL_PHONE,tel:e.tel})},cross:function(e){n.request({name:n.METHOD_CROSS_JUMP,param:e.param,path:e.path})},refreshNative:function(e){n.request({name:n.METHOD_REFRESH_NATIVE,"package":e.package,json:e.json})},copyToClipboard:function(e){n.request({name:n.METHOD_COPY_TO_CLIPBOARD,content:e.content})},readFromClipboard:function(e){n.request({name:n.METHOD_READ_FROM_CLIPBOARD,callback:e.callback})},shareToVendor:function(e){n.request({name:n.METHOD_SHARE_TO_VENDOR,imgUrl:e.imgUrl,text:e.text,title:e.title,linkUrl:e.linkUrl,isIOSSystemShare:e.isIOSSystemShare})},downloadData:function(e){n.request({name:n.METHOD_DOWNLOAD_DATA,url:e.url,callback:e.callback,suffix:e.suffix})},encode:function(e){e&&"base64"===e.mode&&n.request({name:n.METHOD_ENCRYPT_BASE64,callback:e.callback,info:e.info})},chooseContactFromAddressbook:function(e){n.request({name:n.METHOD_CHOOSE_CONTACT_FROM_ADDRESSBOOK,callback:e.callback})},hideLoadingPage:function(){n.request({name:n.METHOD_HIDE_LOADING_PAGE})},showLoadingPage:function(){n.request({name:n.METHOD_SHOW_LOADING_PAGE})},choose_invoice_title:function(e){n.request({name:n.METHOD_APP_CHOOSE_INVOICE_TITLE,callback:e.callback,title:e.title})},get_device_info:function(e){n.request({name:n.METHOD_APP_GET_DEVICE_INFO,callback:e.callback})},show_voice_search:function(e){n.request({name:n.METHOD_APP_SHOW_VOICE_SEARCH,bussinessType:e.bussinessType})},choose_photo:function(e){n.request({name:n.METHOD_APP_CHOOSE_PHOTO,maxFileSize:e.maxFileSize,maxPhotoCount:e.maxPhotoCount,meta:e.meta,callback:e.callback})},finished_register:function(e){n.request({name:n.METHOD_APP_FINISHED_REGISTER,userInfo:e.userInfo})},app_call_system_share:function(e){n.request({name:n.METHOD_APP_CALL_SYSTEM_SHARE,imageRelativePath:e.imageRelativePath,text:e.text,title:e.title,linkUrl:e.linkUrl})},app_check_network_status:function(e){n.request({name:n.METHOD_APP_CHECK_NETWORK_STATUS,callback:e.callback})},app_check_android_package_info:function(e){n.request({name:n.METHOD_APP_CHECK_ANDROID_PACKAGE_INFO,callback:e.callback})},app_log_google_remarkting:function(e){n.request({name:n.METHOD_APP_LOG_GOOGLE_REMARKTING,url:e})},app_read_verification_code_from_sms:function(e){n.request({name:n.METHOD_APP_READ_VERIFICATION_CODE_FROM_SMS,callback:e.callback})},app_h5_page_finish_loading:function(){n.request({name:n.METHOD_H5_PAGE_FINISH_LOADING})},enable_drag_animation:function(e){n.request({name:n.METHOD_ENABLE_DRAG_ANIMATION,show:e.show})},save_photo:function(e){e.photoUrl||(e.photoUrl=null),e.photoBase64String||(e.photoBase64String=null),e.name=n.METHOD_SAVE_PHOTO,n.request(e)}};o.file={isFileExist:function(e){n.request({name:n.METHOD_CHECK_FILE_EXIST,callback:e.callback,fileName:e.fileName,relativeFilePath:e.relativeFilePath})},deleteFile:function(e){n.request({name:n.METHOD_DELETE_FILE,callback:e.callback,fileName:e.fileName,relativeFilePath:e.relativeFilePath})},getCurrentSandboxName:function(e){n.request({name:n.METHOD_GET_CURRENT_SANDBOX_NAME,callback:e.callback})},getFileSize:function(e){n.request({name:n.METHOD_GET_FILE_SIZE,callback:e.callback,fileName:e.fileName,relativeFilePath:e.relativeFilePath})},makeDir:function(e){n.request({name:n.METHOD_MAKE_DIR,callback:e.callback,dirname:e.dirname,relativeFilePath:e.relativeFilePath})},readTextFromFile:function(e){n.request({name:n.METHOD_READ_TEXT_FROM_FILE,callback:e.callback,fileName:e.fileName,relativeFilePath:e.relativeFilePath})},writeTextToFile:function(e){n.request({name:n.METHOD_WRITE_TEXT_TO_FILE,callback:e.callback,text:e.text,isAppend:e.isAppend,fileName:e.fileName,relativeFilePath:e.relativeFilePath})}},o.pipe={socketRequest:function(e){var t=Date.now();return n.request({name:n.METHOD_SEND_H5_PIPE_REQUEST,callback:e.callback,serviceCode:e.serviceCode,header:e.header,data:e.data,sequenceId:t,pipeType:e.pipeType}),t},httpRequest:function(e){var t=Date.now();return n.request({name:n.METHOD_SEND_HTTP_PIPE_REQUEST,callback:e.callback,target:e.url,method:e.method,header:e.header,queryData:e.param,retryInfo:e.retry,sequenceId:t}),t},abortRequest:function(e){n.request({name:n.METHOD_ABORT_HTTP_PIPE_REQUEST,sequenceId:e.id})},abortSocketRequest:function(e){n.unregister({name:n.METHOD_SEND_H5_PIPE_REQUEST,sequenceId:e})}},o.pay={checkStatus:function(e){n.request({name:n.METHOD_CHECK_PAY_APP_INSTALL_STATUS,callback:e.callback})},payOut:function(e){n.request({name:n.METHOD_OPEN_PAY_APP_BY_URL,payAppName:e.payAppName,payURL:e.payURL,successRelativeURL:e.successRelativeURL,detailRelativeURL:e.detailRelativeURL})},callPay:function(e){r.Fn("call_pay").run(e)}},o.encrypt={ctrip_encrypt:function(e){n.request({name:n.METHOD_ENCRYPT_CTRIP,callback:e.callback,inString:e.inStr,encType:1})},ctrip_decrypt:function(e){n.request({name:n.METHOD_ENCRYPT_CTRIP,callback:e.callback,inString:e.inStr,encType:2})}};var u=i(o);u=_.extend(u,{jump:function(e){e&&e.url&&"string"==typeof e.url&&(window.location.href=e.url)},apply:function(e){e&&e.callback&&"function"==typeof e.callback&&e.callback()},call:function(e){var t=document.getElementById("h5-hybrid-caller");return e&&e.url?void (t&&t.src==e.url?t.contentDocument.location.reload():t&&t.src!=e.url?t.src=e.url:(t=document.createElement("iframe"),t.id="h5-hybrid-caller",t.src=e.url,t.style.display="none",document.body.appendChild(t))):!1},log:function(e){window.console&&window.console.log(e.name)},print:function(e){return 0},callService:function(){window.location.href="tel:4000086666"},backToLastPage:function(){window.location.href=document.referrer},home:function(){window.location.href="/"}}),u.encrypt={ctrip_encrypt:function(){return!1},ctrip_decrypt:function(){return!1}},t.register({name:s,fn:e.isInApp()?o:u})}),define("cBusinessCommon",["cStorage","cWidgetFactory","cWidgetGuider"],function(e,t){return function(){var n=t.create("Guider");Lizard.viewReady(function(t){var n=window.navigator.userAgent;if(n.indexOf("CtripWireless")>-1)return!0;Lizard.saveAppUrl(t),r(),i();try{e.getInstance().removeOverdueCathch()}catch(s){console&&0}}),Lizard.saveAppUrl=function(e){var t=$("#app_url"),n=!1;if(e&&e.getAppUrl&&"function"==typeof e.getAppUrl){var r=e.getAppUrl();r&&_.isString(r)&&(n=!0,t.length?t.val(r):$('<INPUT type="hidden" id="app_url" value="'+r+'"/>').appendTo($("body")))}n||t.length>0&&t.val("")},Lizard.viewReady(function(e){if("undefined"!=typeof ga&&ga("send","pageview",location.href),Lizard.isHybrid){if(!e||!e._getViewUrl)return;var t=e._getViewUrl();n.app_log_google_remarkting(t)}});var r=function(){var e=Lizard.P("orderID"),t=Lizard.P("type")||Lizard.P("busType")||"",n=Lizard.P("val")||Lizard.P("price")||"";if(e){var r="https://2113.xg4ken.com/media/redir.php?track=1&token=8515ce29-9946-4d41-9edc-2907d0a92490&promoCode=&valueCurrency=CNY&GCID=&kw=&product=";r+="&val="+n+"&orderId="+e+"&type="+t;var i="<img style='position: absolute;' width='1' height='1' src='"+r+"'/>";$("body").append(i)}},i=function(){var e=Lizard.P("orderID"),t=Lizard.P("type")||Lizard.P("busType")||"",n=Lizard.P("val")||Lizard.P("price")||"";if(e){var r="https://tracker.marinsm.com/tp?act=2&cid=6484iki26001&script=no";r+="&price="+n+"&orderid="+e+"&convtype="+t;var i="<img style='position: absolute;' width='1' height='1' src='"+r+"'/>";$("body").append(i)}}}}),define("cUIBase",[],function(){var e={};return e.config={prefix:"cui-"},e.setConfig=function(t,n){e.config[t]=n},e.getElementPos=function(e){var t=0,n=0;do t+=e.offsetTop,n+=e.offsetLeft;while(e=e.offsetParent);return{top:t,left:n}},e.getCreateId=function(){var t=(new Date).getTime();return function(){return e.config.prefix+ ++t}}(),e.getBiggerzIndex=function(){var e=3e3;return function(){return++e}}(),e.getCurStyleOfEl=function(e,t){if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(e).getPropertyValue(t);if(e.currentStyle){for(var n,r=t.split("-"),i=[],s=0;s<r.length;s++)0==s?i.push(r[s]):(n=r[s].split(""),n[0]=n[0].toUpperCase(),i.push(n.join("")));return i=i.join(""),e.currentStyle[i]}},e.bindthis=function(e,t){return function(){e.apply(t,arguments)}},e.strToNum=function(e){var t=parseInt(e.replace(/[a-z]/i,""));return isNaN(t)?0:t},e.getElementRealSize=function(e){var t=$(e);return{width:t.width(),height:t.height()}},e.getPageSize=function(){var e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:e,height:t}},e.getPageScrollPos=function(){var e=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),t=Math.max(document.documentElement.scrollTop,document.body.scrollTop),n=Math.min(document.documentElement.clientHeight,document.body.clientHeight),r=Math.min(document.documentElement.clientWidth,document.body.clientWidth),i=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),s=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{top:t,left:e,height:n,width:r,pageWidth:i,pageHeight:s}},e.getMousePos=function(e){var t=Math.max(document.body.scrollTop,document.documentElement.scrollTop),n=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);return{top:t+e.clientY,left:n+e.clientX}},e.getMousePosOfElement=function(t,n){var r=e.getMousePos(t),i=e.getElementPos(n),s=n.clientWidth,o=n.clientHeight,u=r.left-i.left,f=r.top-i.top;return u=0>u?0:u>s?s:u,f=0>f?0:f>o?o:f,{x:u,y:f}},e.createElement=function(e,t){var n,r,i=document.createElement(e);if(t)for(n in t)switch(n){case"attr":if("object"==typeof t[n])for(r in t[n])null!=t[n][r]&&i.setAttribute(r,t[n][r]);break;case"styles":if("object"==typeof t[n])for(r in t[n])null!=t[n][r]&&(i.style[r]=t[n][r]);break;case"id":i.id=t[n];break;case"class":i.className=t[n];break;case"html":i.innerHTML=t[n]}return i},e}),define("cHistory",["cUIBase","libs"],function(e){var t=function(t){this.element,this.clazz=[e.config.prefix+"history"],this.maskName="maskName",this.style={},this.size=!1,this.listSize=6,this.itemClickFun=null,this.focusFun=null,this.blursFun=null,this.inputFun=null,this._id=e.getCreateId(),this._boxDom,this._borderDom,this._contDom,this._clearButton,this.clearButtonTitle="清除搜索历史",this.notHistoryButtonTitle="无搜索历史",this.clearHistoryAction=function(){},this.historyStore=null,this.dataSource=[],this._autoLocResoure,this._bodyDom,this.rootBox,this._oneShow=!1;var n=this;this.event_focus=function(){n.Open(),"function"==typeof n.focusFun&&n.focusFun()},this.event_blur=function(){"function"==typeof n.blurFun&&n.blurFun()},this.event_input=function(){""==n.element.val()&&(n._init(),n.Open()),n.inputFun(n.element.val())},this._setOption(t),this._init()};return t.prototype={_setOption:function(e){for(var t in e)switch(t){case"element":case"maskName":case"clearButtonTitle":case"clearHistoryAction":case"style":case"dataSource":case"historyStore":case"itmeClickFun":case"focusFun":case"blurFun":case"inputFun":case"size":case"listSize":case"rootBox":this[t]=e[t];break;case"clazz":isArray(e[t])&&(this.clazz=this.clazz.concat(e[t])),isString(e[t])&&this.clazz.push(e[t])}},_init:function(){this._contDom&&(this._contDom.find("li.item").unbind("click"),this._contDom.remove()),this._boxDom&&this._boxDom.remove(),this._CreateDom(),this._BuildEvent()},_CreateDom:function(){var t=e.createElement;this._bodyDom=this.rootBox||$("body"),this.element=$(this.element),this._boxDom=$(t("div",{id:this._id,"class":this.clazz.join(" ")})),this._boxDom.css({position:"absolute",display:"none"}),this._borderDom=$(t("div",{"class":e.config.prefix+"history-border"}));var n=[];n=""==this.element.val()?this._getHistory():this._getSubList(this.dataSource,this.listSize),this._contDom=$(t("ul",{"class":e.config.prefix+"history-list"}));for(var r in n)this._contDom.append('<li class="item" data_id="'+n[r].id+'">'+n[r].name+"</li>");""==this.element.val()&&(this._clearButton=$(t("li",{"class":[e.config.prefix+"clear-history clearbutton"]})),this._clearButton.html(n.length>0?this.clearButtonTitle:this.notHistoryButtonTitle),this._contDom.append(this._clearButton)),this._borderDom.append(this._contDom),this._boxDom.append(this._borderDom),this._bodyDom.append(this._boxDom)},_Location:function(){this._boxDom.css({height:"auto",width:"auto"});var t=e.getPageSize(),n=e.getElementPos(this.element[0]),r=this.style.left?this.style.left:(this.size&&this.size.left?this.size.left+n.left:n.left)+"px",i=this.style.top?this.style.top:(this.size&&this.size.top?this.size.top+(n.top+this.element.height()):n.top+this.element.height())+"px",s=this.style.width?this.style.width:this.element.width()+"px",o=this.size&&this.size.height?t.height+this.size.height+"px":"auto";this._boxDom.css({left:r,top:i,width:s,height:o})},_AutoLocation:function(){this._Location();var e=this;this._autoLocResoure=function(){e._Location()},$(window).unbind("resize",this._autoLocResoure),$(window).bind("resize",this._autoLocResoure)},_UnAutoLocation:function(){$(window).unbind("resize",this._autoLocResoure)},_BuildEvent:function(){var e=this;this._contDom.find("li.item").unbind("click").bind("click",function(){var t=$(this);if(e.element.val(t.text()),e.Close(),"function"==typeof e.itmeClickFun){var n={id:t.attr("data_id"),name:t.text()};e.itmeClickFun(n)}}),this.element.unbind("focus",this.event_focus),this.element.unbind("blur",this.event_blur),this.element.unbind("input",this.event_input),this.element.bind({focus:this.event_focus,blur:this.event_blur,input:this.event_input}),this._clearButton.unbind("click"),this._clearButton.bind("click",function(){e.historyStore.remove(),e.Close(),e._init(),e.clearHistoryAction&&e.clearHistoryAction.call(e)})},setOpen:function(){this._oneShow=!0},Open:function(){this._boxDom.css("z-index",e.getBiggerzIndex()),this._boxDom.show(),this._AutoLocation()},Close:function(){this._boxDom.hide(),this._UnAutoLocation()},setDataSource:function(e){this.dataSource=e,this.Close(),this._init(),this.Open()},addHistory:function(e){var t=this.historyStore.get()||[];e.id||(e.id=0);for(var n=-1,r=0,i=t.length;i>r;r++)if(t[r].name==e.name){n=r;break}n>-1&&t.splice(n,1),t.unshift(e),this.historyStore.set(t),this._init()},reset:function(){this._init()},_getHistory:function(){var e=this.historyStore.get()||[];return this._getSubList(e,this.listSize)},_getSubList:function(e,t){var n=e.length;return t>=n?e:e.slice(0,t)}},t}),define("cUIAbstractView",["libs","cBase","cUIBase"],function(e,t,n){var r=Array.prototype.slice,i=Array.prototype.push,s=Object.prototype.toString,o="notCreate",u="onCreate",a="onShow",f="onHide",l={};return l.__propertys__=function(){this.allowEvents={onCreate:!0,onShow:!0,onHide:!0},this.allowsPush={classNames:!0},this.allowsConfig={rootBox:!0},this.events={onCreate:[],onShow:[],onHide:[]},this.status=o,this.setOptionHander=[],this.rootBox,this.id=n.getCreateId(),this.classNames=[n.config.prefix+"view"],this.root,this.isCreate=!1,this.eventArr={}},l.bindEvents=function(){var e=this.eventArr;if(!e&&!(e=_.result(this,"events")))return this;this.unBindEvents();var t,n,r,i,s,o=/^(\S+)\s*(.*)$/;for(t in e)n=e[t],_.isFunction(n)||(n=this[e[t]]),n&&(r=t.match(o),i=r[1],s=r[2],n=_.bind(n,this),i+=".delegateUIEvents"+this.id,""===s?this.root.on(i,n):this.root.on(i,s,n));return this},l.unBindEvents=function(){return this.root.off(".delegateUIEvents"+this.id),this},l.initialize=function(e){this.setOption(function(e,t){switch(!0){case this.allowEvents[e]:this.addEvent(e,t);break;case this.allowsPush[e]:"[object Array]"===s.call(t)?i.apply(this[e],t):this[e].push(t);break;case this.allowsConfig[e]:this[e]=t}}),this.readOption(e)},l.readOption=function(e){e=e||{};var t=this;$.each(e,function(e,n){$.each(t.setOptionHander,function(r,i){"function"==typeof i&&i.call(t,e,n)})})},l.setOption=function(e){this.setOptionHander.push(e)},l.createRoot=function(){var e=document.createElement("div");return e.className=this.classNames.join(" "),e.id=this.id,$(e)},l.addClass=function(e){if(this.classNames.push(e),this.root)if("array"==typeof e)for(var t in e)this.root.addClass(e[t]);else"string"==typeof e&&this.root.addClass(e)},l.removeClass=function(e){if("array"==typeof e)for(var t in e)this.root.removeClass(e[t]);else"string"==typeof e&&this.root.removeClass(e)},l.createHtml=function(){throw new Error("未定义createHtml方法")},l.setRootHtml=function(e){this.root&&(this.root.empty(),this.root.append(e))},l.getRoot=function(){return this.root},l.addEventType=function(e){this.allowEvents[e]=!0,this.events[e]=[]},l.addEvent=function(e,t){return this.allowEvents[e]?void (this.events[e]&&this.events[e].push(t)):!1},l.removeEvent=function(e,t){this.events[e]&&(this.events[e]=t?_.without(this.events[e],t):[])},l.remove=function(){this.hide(),this.root.remove()},l.trigger=function(e){var t,n,i=r.call(arguments,1),s=this.events,o=[];if(this.events[e])for(t=0,n=s[e].length;n>t;t++)o[o.length]=s[e][t].apply(this,i);return o},l.create=function(){this.isCreate||this.status===u||(this.rootBox=this.rootBox||$("body"),this.root=this.createRoot(),this.root.hide(),this.rootBox.append(this.root),this.root.append(this.createHtml()),this.trigger("onCreate"),this.status=u,this.isCreate=!0)},l.template=function(e){return _.template(e)},l.showAction=function(e){this.bindEvents(),this.root.show(),"function"==typeof e&&e()},l.hideAction=function(e){this.unBindEvents(),this.root.hide(),"function"==typeof e&&e()},l.setzIndexTop=function(e){e="number"!=typeof e?0:e,this.root.css("z-index",n.getBiggerzIndex()+e)},l.isNotCreate=function(){return this.status===o},l.isShow=function(){return this.status===a},l.isHide=function(){return this.status===f},l.show=function(e){this.status!==a&&(this.create(),this.showAction($.proxy(function(){this.trigger("onShow"),this.status=a,e&&e.call(this)},this)))},l.hide=function(e){this.root&&this.status!==f&&this.hideAction($.proxy(function(){this.trigger("onHide"),this.status=f,e&&e.call(this)},this))},l.reposition=function(){this.root.css({"margin-left":-($(this.root).width()/2)+"px","margin-top":-($(this.root).height()/2)+"px"})},t.Class(l)}),define("cUISidebar",["cBase","cUIAbstractView"],function(e,t){return new e.Class(t,{__propertys__:function(){this.template=['<section class="cm-pop cm-pop--triangle-up cm-pop--user-nav">','<i class="icond-pop-triangle"></i>','<div class="cm-pop-bd">','<ul class="cm-pop-list">',"<%for(var i = 0, len = data.length; i < len; i++) {%>",'<li data-index="<%=i%>" class="js_<%=data[i].tagname%>" ><i class="<%=data[i].className%>"></i><%=data[i].value%></li>',"<%}%>","</ul>","</div>","</section>"].join("")},resetProperty:function(){this.viewdata={data:this.moreMenus},this.eventArr={};for(var e=0,t=this.moreMenus.length;t>e;e++){var n=this.moreMenus[e];n.className&&(this.eventArr["click .js_"+n.tagname]=n.callback)}},initialize:function($super,e){for(var t in e)this[t]=e[t];this.resetProperty(),$super(e)},createHtml:function(){return _.template(this.template)(this.viewdata)}})}),define("cUIHeader",["cBase","cUIAbstractView","cUtility","cHybridFacade","cUISidebar"],function(e,t,n,r,i){var s=s||{},o=Lizard.isInCtripApp&&window.Internal.isWinOS;s.htmlMap={home:'<i class="icon_home i_bef" id="c-ui-header-home"></i>',moreMenus:'<i class="icon-list"></i>',tel:'<a href="tel:<%=tel.number||4000086666 %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a>',customtitle:"<div><%=customtitle %></div>",title:"<h1><%=title %></h1>",back:'<%if (obj.backtext) {%><i id="c-ui-header-return" class="header_r" style="left:0;width:44px;"><%=obj.backtext%></i><%} else {%><i id="c-ui-header-return" class="returnico i_bef"></i><%}%>',btn:'<i id="<%=btn.id%>" class="<%=btn.classname%> c-ui-header-btn"><%=btn.title %></i>'},s.__propertys__=function(){this.headerData={back:!0},this.STATE_NOTCREATE="notCreate",this.STATE_ONCREATE="onCreate",this.isInApp=n.isInApp()&&!o},s.initialize=function($super,e){this.rootBox=this.root=e.root||$("body"),this.parseHeader(),this.bindEvent(),this.__show=$super.show,$super(e)},s.bindEvent=function(){this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},s.parseHeader=function(){var e=this.rootBox;if(e&&e.size()){this.rootBox=e,this.backBtn=e.find("#c-ui-header-return"),this.homeBtn=e.find("#c-ui-header-home"),this.telBtn=e.find("#c-ui-header-tel"),this.titleDom=e.find("h1"),this.searchBtn=this.commitBtn=e.find(".c-ui-header-btn");var t=this.headerData.events,n=this.headerData.view;this.headerData.back=!0,this.headerData.home=this.homeBtn.size(),this.headerData.tel=!!this.telBtn.size(),t&&(this.headerData.events=t),n&&(this.headerData.view=n)}},s.set=function(e){if(this.puppetDestory(),e&&_.extend(this.headerData,e),this.__show=this.show,this.show=function(){},this.isInApp){var t=this.headerData.home,n=this.headerData.tel;this.rootBox.hide(),this.parseHeader(),this.headerData.home=t,this.headerData.tel=n,this.saveHead(this.headerData),this.onShow()}else this.rootBox.html(this.createHtml()),this.__show(),this.parseHeader();this.delegateEvents(this.headerData.events),this.headerData.moreMenus&&this.rootBox.find(".icon-list").on("click",_.bind(function(){this.sidebar||(this.sidebar=new i({moreMenus:this.headerData.moreMenus})),this.sidebar.show()},this))},s.create=function(){this.isInApp||this.isCreate||this.status===this.STATE_ONCREATE||(this.rootBox=this.root=this.rootBox||$("body"),this.rootBox.html(this.createHtml()),this.trigger("onCreate"),this.status=t.STATE_ONCREATE,this.isCreate=!0)},s.createHtml=function(){var e=this._setTemplate(this.headerData);return _.template(e,this.headerData)},s.delegateEvents=function(e){this.rootBox.off("click");var t=this;if(e){if(e.returnHandler)if(this.isInApp){var n=function(){e.returnHandler.call(t)};r.register({tagname:r.METHOD_BACK,callback:n})}else if(o){var n=function(){e.returnHandler.call(t)};r.register({tagname:r.METHOD_BACK,callback:n}),this.backBtn.off("click"),this.backBtn.on("click",_.bind(e.returnHandler,t.headerData.view||t))}else this.backBtn.off("click"),this.backBtn.on("click",_.bind(e.returnHandler,t.headerData.view||t));if(e.homeHandler&&(this.isInApp||(this.homeBtn.off("click"),this.homeBtn.on("click",_.bind(e.homeHandler,t.headerData.view||t)))),e.citybtnHandler&&this.isInApp){var i=function(){e.citybtnHandler.call(t)};r.register({tagname:r.METHOD_CITY_CHOOSE,callback:i})}if(_.isFunction(e.commitHandler))if(this.isInApp){var s=function(){e.commitHandler.call(t)};r.register({tagname:r.METHOD_COMMIT,callback:s})}else this.commitBtn.off("click"),this.commitBtn.on("click",_.bind(e.commitHandler,t.headerData.view||t));if(_.isFunction(e.searchHandler))if(this.isInApp){var u=function(){e.searchHandler.call(t)};r.register({tagname:r.METHOD_SEARCH,callback:u})}else this.searchBtn.removeClass("c-ui-header-btn").addClass("icon_search_w i_bef"),this.searchBtn.off("click"),this.searchBtn.on("click",_.bind(e.searchHandler,t.headerData.view||t));this.headerData&&this.headerData.btn&&_.isFunction(e.customHandler)&&(this.custBtn=this.rootBox.find("#"+this.headerData.btn.id),this.custBtn.off("click"),this.custBtn.on("click",_.bind(e.customHandler,t.headerData.view||t)))}},s.saveHead=function(e){var t=e.events,n={left:[],center:[],centerButtons:[],right:[]};if(e.back&&n.left.push({tagname:"back"}),e.title&&n.center.push({tagname:"title",value:e.title}),e.subtitle&&n.center.push({tagname:"subtitle",value:e.subtitle}),e.btn&&(_.isFunction(t.commitHandler)&&n.right.push({tagname:"commit",value:e.btn.title}),_.isFunction(t.searchHandler)&&n.right.push({tagname:"search",value:e.btn.title})),e.tel&&n.right.push({tagname:"call"}),e.home&&n.right.push({tagname:"home"}),e.citybtn){var i={tagname:"cityChoose",value:e.citybtn};e.citybtnImagePath&&(i.imagePath=e.citybtnImagePath,i.pressedImagePath=e.citybtnPressedImagePath?e.citybtnPressedImagePath:i.imagePath),e.citybtnIcon&&(i.a_icon=i.i_icon=e.citybtnIcon),i.imagePath||(i.a_icon="icon_arrowx",i.i_icon="icon_arrowx.png"),n.centerButtons.push(i)}e.share&&n.right.push({tagname:"share"}),e.favorite&&n.right.push({tagname:"favorite"}),e.favorited&&n.right.push({tagname:"favorited"}),e.phone&&n.right.push({tagname:"phone"}),e.moreMenus&&(n.moreMenus=e.moreMenus,n.right.push({tagname:"more"}),_.each(e.moreMenus,function(e){r["METHOD_"+e.tagname.toUpperCase()]="METHOD_"+e.tagname.toUpperCase(),r.registerOne(r["METHOD_"+e.tagname.toUpperCase()],e.tagname),e.callback&&r.register({tagname:"METHOD_"+e.tagname.toUpperCase(),callback:e.callback})})),e.moreRightMenus&&(n.moreRightMenus=e.moreRightMenus,n.right=n.right.concat(e.moreRightMenus),_.each(n.moreRightMenus,function(e){r["METHOD_"+e.tagname.toUpperCase()]="METHOD_"+e.tagname.toUpperCase(),r.registerOne(r["METHOD_"+e.tagname.toUpperCase()],e.tagname)}));try{var s=JSON.stringify(n);r.request({name:r.METHOD_REFRESH_NAV_BAR,config:s})}catch(o){}},s.updateHeader=function(e,t){if(this.headerData.hasOwnProperty(e)&&this.headerData[e])if("events"==e)this.delegateEvents(t);else if(this.headerData[e]=t,this.isInApp)try{var n=JSON.stringify(_.omit(this.headerData,"view"));r.request({name:r.METHOD_REFRESH_NAV_BAR,config:n})}catch(i){}else this.set(this.headerData)},s._setTemplate=function(e){this.htmlTpl="";var t={home:"",moreMenus:"",tel:"",customtitle:"",title:"",back:"",btn:""},n=!1;if(e){e.customtitle&&this.htmlMap.title&&(n=!0);for(var r in this.htmlMap)"title"==r&&n||e[r]&&(t[r]=this.htmlMap[r]);var i="",s=e.style;s&&(i=' style="'+s+'"');var o=[t.home,t.moreMenus,t.tel,t.customtitle,t.title,t.back,t.btn];return this.htmlTpl+=o.join(""),this.htmlTpl="<header"+i+' class="old-header" >'+this.htmlTpl+"</header>"}},s.onShow=function(e){this.isInApp?(this.rootBox.hide(),r.request({name:r.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!1})):this.rootBox.show(),e&&e()},s.onHide=function(){this.isInApp?r.request({name:r.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!0}):this.rootBox.hide()},s.puppetDestory=function(){this.status=this.STATE_NOTCREATE,this.isCreate=!1};var u=new e.Class(t,s);return u}),define("cUIMask",["libs","cBase","cUIAbstractView"],function(e,t,n){var r={},i={prefix:"cui-"};return r.__propertys__=function(){},r.initialize=function($super,e){this.bindEvent(),this.addClass(i.prefix+"mask"),$super(e)},r.bindEvent=function(){this.addEvent("onCreate",function(){this.setRootStyle(),this.onResize=$.proxy(function(){this.resize()},this),this.onResize()}),this.addEvent("onShow",function(){this.setzIndexTop(-1),$(window).bind("resize",this.onResize),this.root.bind("touchmove",function(e){e.preventDefault()}),this.onResize()}),this.addEvent("onHide",function(){$(window).unbind("resize",this.onResize),this.root.unbind("touchmove")})},r.setRootStyle=function(){this.root.css({position:"absolute",left:"0px",top:"0px"})},r.createHtml=function(){return"<div></div>"},r.resize=function(){var e=(Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),Math.max(document.documentElement.scrollHeight,document.body.scrollHeight));this.root.css({width:"100%",height:e+"px"})},new t.Class(n,r)}),define("cUILayer",["libs","cBase","cUIAbstractView","cUIMask"],function(e,t,n,r){var i={},s={prefix:"cui-"};return i.__propertys__=function(){this.tpl=this.template(['<div class="'+s.prefix+'layer-padding">','<div class="'+s.prefix+'layer-content"><%=content%></div>',"</div>"].join("")),this.content="",this.contentDom,this.mask=new r({classNames:[s.prefix+"opacitymask"]}),this.addClass(s.prefix+"layer"),this.viewdata={},this.windowResizeHander,this.setIntervalResource,this.setIntervalTotal=0},i.initialize=function($super,e){var t={content:!0};this.setOption(function(e,n){switch(!0){case t[e]:this[e]=n;break;case"class"===e:this.addClass(n)}}),this.bindEvent(),$super(e),this.loadViewData()},i.loadViewData=function(){this.viewdata.content=this.content},i.setViewData=function(e){this.viewdata=cUtility.mix(this.viewdata,e),this.setRootHtml(this.createHtml())},i.bindEvent=function(){this.addEvent("onCreate",function(){this.windowResizeHander=$.proxy(this.reposition,this),this.contentDom=this.root.find("."+s.prefix+"layer-content")}),this.addEvent("onShow",function(){this.mask.show(),$(window).bind("resize",this.windowResizeHander),this.reposition(),this.setIntervalResource=setInterval($.proxy(function(){this.setIntervalTotal<10?this.windowResizeHander():(this.setIntervalTotal=0,this.root.css("visibility","visible"),clearInterval(this.setIntervalResource)),this.setIntervalTotal++},this),1),this.setzIndexTop(),$("html").addClass("noneTouch")}),this.addEvent("onHide",function(){$(window).unbind("resize",this.windowResizeHander),clearInterval(this.setIntervalResource),this.root.css("visibility","visible"),this.mask.hide(),$("html").removeClass("noneTouch")})},i.createHtml=function(){return this.tpl(this.viewdata)},i.maskToHide=function(e){this.mask.root.on("click",$.proxy(function(){this.hide(),"function"==typeof e&&e(),this.mask.root.off("click")},this)),this.mask.addEvent("onHide",function(){this.root.off("click"),this.root.remove()})},new t.Class(n,i)}),define("cUIAlert",["libs","cBase","cUILayer"],function(e,t,n){var r=Object.prototype.toString,i="confirm",s="cancel",o={};o.onCreate=function(){this.loadButtons()};var u={},a={prefix:"cui-"};u.__propertys__=function(){this.tpl=this.template(['<div class="cui-pop-box">',"<%if(showTitle) {%>",'<div class="cui-hd">','<div class="cui-text-center"><%=title%></div>',"</div>","<% } %>",'<div class="cui-bd">','<div class="cui-error-tips"><%=message%></div>','<div class="cui-roller-btns">',"</div>","</div>","</div>"].join("")),this.title="",this.message="",this.buttons=[{text:"确定",type:"confirm",click:function(){this.hide()}}],this.viewdata={title:"",message:"",showTitle:!1}},u.initialize=function($super,e){var t={title:!0,message:!0,buttons:!0,showTitle:!0};this.setOption(function(e,n){switch(!0){case t[e]:this[e]=n}}),this.addClass(a.prefix+"alert"),$super($.extend(o,e)),this.buildViewData()},u.buildViewData=function(){this.viewdata.title=this.title,this.viewdata.message=this.message,this.viewdata.showTitle=this.showTitle},u.setViewData=function(e){e.title&&(this.title=e.title),e.message&&(this.message=e.message),e.showTitle&&(this.showTitle=this.showTitle),e.buttons&&(this.buttons=e.buttons),this.buildViewData(),this.root||(this.root=this.createRoot()),this.setRootHtml(this.createHtml()),this.loadButtons()},u.loadButtons=function(){this.root||this.create();var e=this.root.find(".cui-roller-btns"),t=this.createButtons();e.empty(),$.each(t,function(t,n){e.append(n)})},u.createButtons=function(){var e=[],t="[object Array]"===r.call(this.buttons),n=0,o=this;return $.each(this.buttons,function(r,u){var a="",f=[],l=function(){};if(t){switch(a=u.text,u.cls&&f.push(u.cls),u.type=u.type?u.type:"取消"==a?s:i,u.type){case s:f.push("cui-btns-cancel");break;case i:f.push("cui-btns-sure")}u.click&&(l=u.click)}else a=r,"function"==typeof u&&(l=u);e[n]=$('<div class="cui-flexbd '+f.join(" ")+'">'+a+"</div>"),e[n].addClass(f.join(" ")),e[n].bind("click",$.proxy(l,o)),n++}),e},u.createHtml=function(){return this.tpl(this.viewdata)};var f=new t.Class(n,u);return f.STYLE_CONFIRM=i,f.STYLE_CANCEL=s,f}),define("cUIWarning",["libs","cBase","cUILayer","cUIMask"],function(e,t,n,r){var i={},s={prefix:"cui-"},o=new r({classNames:[s.prefix+"warning-mask"]}),u={};return u["class"]=s.prefix+"warning",u.onCreate=function(){this.contentDom.html('<div class="'+s.prefix+'warning"><div class="blank"></div><p class="blanktxt">'+this.warningtitle+"</p></div>"),this.warningDom=this.contentDom.find(".blanktxt"),this.root.bind("click",$.proxy(function(){this.callback&&this.callback()},this)),o.create(),o.root.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},u.onShow=function(){o.show()},u.onHide=function(){o.hide()},u.setTitle=function(e,t){e&&(this.create(),this.warningDom.html(e),this.warningtitle=e),this.callback=t?t:function(){}},u.getTitle=function(){return this.warningtitle},i.__propertys__=function(){this.warningDom,this.warningtitle="",this.callback=function(){}},i.initialize=function($super,e){this.setOption(function(e,t){switch(e){case"title":this.warningtitle=t}}),$super($.extend(u,e))},new t.Class(n,i)}),define("cUIHashObserve",["libs","cBase"],function(e,t){var n={};return n.__propertys__=function(){this.hash,this.callback,this._hashchange=$.proxy(function(){this.hashchange()},this),this.isend=!0,this.scope},n.initialize=function(e){this.setOption(e)},n.setOption=function(e){var t={hash:!0,callback:!0,scope:!0};for(var n in e)switch(!0){case t[n]:this[n]=e[n]}},n.start=function(){window.Lizard&&(Lizard.hashObserveCount?Lizard.hashObserveCount++:Lizard.hashObserveCount=1,Lizard.stopStateWatch=!0),this.isend=!1,window.location.hash+="|"+this.hash,$(window).bind("hashchange",this._hashchange)},n.end=function(){$(window).unbind("hashchange",this._hashchange),this.isend||(this.isend=!0,window.history.go(-1)),Lizard.hashObserveCount&&Lizard.hashObserveCount--,window.Lizard&&!Lizard.hashObserveCount&&setTimeout(function(){Lizard.stopStateWatch=!1},200)},n.hashchange=function(){var e=window.location.hash;e.match(new RegExp("\\b"+this.hash+"\\b","ig"))||(this.isend=!0,this.callback.call(this.scope||this),this.end())},new t.Class(n)}),define("cUIPageview",["libs","cBase","cUIAbstractView","cUIMask","cUIHashObserve"],function(e,t,n,r,i){var s={},o={prefix:"cui-"};return s.__propertys__=function(){this.mask=new r({classNames:[o.prefix+"warning-mask"]}),this.hashObserve=new i({hash:this.id,scope:this,callback:function(){this.hide()}})},s.initialize=function($super,e){this.addClass(o.prefix+"pageview"),this.addEvent("onCreate",function(){this.mask.create(),this.mask.root.css({background:"url(data:image/gif;base64,R0lGODlhAQABAIAAAPX19QAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==) repeat"}),this.root.css({position:"absolute",left:"0px",top:"0px"})}),this.addEvent("onShow",function(){this.mask.show(),this.hashObserve.start(),this.root.bind("touchmove",function(e){e.preventDefault()})}),this.addEvent("onHide",function(){this.mask.hide(),setTimeout($.proxy(function(){this.hashObserve.end()},this),10)}),$super(e)},s.createHtml=function(){return""},new t.Class(n,s)}),define("cUIHeadWarning",["libs","cBase","cUIPageview"],function(e,t,n){var r={},i={prefix:"cui-"},s={};return s["class"]=i.prefix+"warning",s.onCreate=function(){this.root.html(['<div class="head-warning">','<div class="head-warning-padding">','<div class="head-warning-header">','<div class="head-warning-header-backbtu"><span class="returnico"></span></div>','<div class="head-warning-header-title"></div>',"</div>",'<div class="head-warning-content">','<div class="head-warning-content-icon"><div class="cui-load-error"><div class="cui-i cui-wifi cui-exclam"></div></div></div>','<div class="head-warning-content-title"></div>',"</div>","</div>","</div>"].join("")),this.addClass("head-warning-top"),this.warningtitleDom=this.root.find(".head-warning-header-title"),this.warningcontentDom=this.root.find(".head-warning-content-title"),this.warningleftbtuDom=this.root.find(".head-warning-header-backbtu"),this.warningleftbtuDom.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},s.onShow=function(){this.setzIndexTop(),window.scrollTo(0,0)},r.__propertys__=function(){this.warningtitleDom,this.warningcontentDom,this.warningtitle="",this.warningcontent="",this.callback=function(){}},r.initialize=function($super,e){$super($.extend(s,e))},r.setTitle=function(e,t,n){e&&(this.create(),this.warningtitleDom.html(e),this.warningcontentDom.html(t)),n&&(this.callback=n)},new t.Class(n,r)}),define("cUIWarning404",["libs","cBase","cUIPageview","cWidgetFactory","cWidgetGuider"],function(e,t,n,r){var i=r.create("Guider"),s={},o={prefix:"cui-"},u={};u["class"]=o.prefix+"warning",u.onCreate=function(){this.options()},u.onShow=function(){this.mask.root.css({"z-index":"1000"}),this.root.css({"z-index":"1001"}),window.scrollTo(0,0)},u.onHide=function(){this.options({})},s.__propertys__=function(){this.retryDom,this.tel="4000086666",this.callback=function(){},this.hashObserve={start:function(){},end:function(){}}},s.initialize=function($super,e){$super(u,e)},s.retryClick=function(e){e&&(this.callback=e)};var a={loadFailCls:"cui-wifi cui-fail-icon",loadFail:"加载失败，请稍后再试试吧",telText:"或者拨打携程客服电话",tryAgain:"重试",contact:"联系客服",showContact:!0},f=['<div class="head-warning">','<div class="head-warning-padding">','<div class="head-warning-content">','<div class="cui-load-fail cui-text-center">','<div class="cui-load-error">','<div class="cui-i <%= loadFailCls %>">',"</div>","</div>",'<p class="cui-gray"><%= loadFail %></p>','<button type="button" class="cui-btns-retry"><%= tryAgain %></button>',"<% if (showContact) { %>",'<div class="cui-404-tel">','<div class="cui-glines"></div>','<p class="cui-grayc"><%= telText %></p>','<span id="telBtn" class="cui-btns-tel"><span class="cui-i cui-warning-kf"></span><%= contact %></span>',"</div>","<% } %>","</div>","</div>","</div>","</div>"].join("");return s.options=function(e){e=_.extend({},a,e||{}),this.root.html(_.template(f,e)),this.addClass("head-warning-top"),this.retryDom=this.root.find(".cui-btns-retry"),this.retryDom.on("click",$.proxy(function(){this.callback&&this.callback()},this));var t=this;e.showContact&&this.root.find("#telBtn").click(function(){i.apply({hybridCallback:function(){i.callService()},callback:function(){window.location.href="tel:"+t.tel}})})},new t.Class(n,s)}),define("cUIToast",["libs","cBase","cUILayer"],function(e,t,n){var r={},i={prefix:"cui-",sleep:2},s=null,o=null,u=null,a=function(e){this.hide(),e&&"function"==typeof e&&e.call(this),$(".cui-opacitymask").unbind("click"),$(".cui-toast").unbind("click")},f=function(e,t){var n=this,r=function(){$(".cui-opacitymask").unbind("click").bind("click",function(){a.call(n,t)}),$(".cui-toast").unbind("click").bind("click",function(){a.call(n,t)})};e&&setTimeout(r,400)},l=function(e,t,n,r){var u=this;this.setContent(e),"function"==typeof o&&o.call(this);var l=function(){a.call(u,n)},c=1e3*(t||i.sleep);s=setTimeout(l,c),f.call(this,r,n),this.focusPosition=setInterval($.proxy(function(){var e=document.activeElement;if($.needFocus(e)){this.focusPosition||(this.focusPosition=!0);var t=parseInt($(e).offset().top)+30;this.root.css({top:t+"px",position:"absolute"})}},this),20)},c=function(){clearTimeout(s),this.focusPosition&&(clearInterval(this.focusPosition),this.root.css({top:"50%",position:"fixed"})),"function"==typeof u&&u.call(this)};r.__propertys__=function(){o=this.show,u=this.hide,this.show=l,this.hide=c},r.initialize=function($super,e){this.addClass([i.prefix+"toast"]),$super(e)},r.setContent=function(e){this.create(),this.contentDom.html(e)};var h=new t.Class(n,r);return h}),define("cUILoading",["libs","cBase","cUILayer"],function(e,t,n){var r={},i={prefix:"cui-"},s={};return s["class"]=i.prefix+"loading",s.onCreate=function(){},s.onShow=function(){this.contentDom.html('<div class="cui-breaking-load"><div class="cui-i cui-w-loading"></div><div class="cui-i cui-m-logo"></div></div>'),this.reposition()},r.__propertys__=function(){this.contentDom,this.loadHtml=""},r.initialize=function($super){$super(s)},r.setHtml=function(e){this.loadHtml=e},new t.Class(n,r)}),define("cUIBubbleLayer",["cBase","cUIAbstractView"],function(e,t){var n={};return n.__propertys__=function(){this.itemTemplate=!1,this.triggerEl=null,this.click=function(){}},n.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.bindEvent(),this.show(),this.hide()},n.showMenu=function(e){for(var t in e)this[t]=e[t];e.data&&this.init(),e.dir&&(this.el.removeClass("f-layer-before"),this.el.removeClass("f-layer-after"),this.el.addClass("up"==e.dir?"f-layer-before":"f-layer-after")),this.adjustEl(),this.show()},n.bindEvent=function(){this.addEvent("onHide",function(){this.root.off("click"),this.clsLayer&&document.removeEventListener("click",this.clsLayer,!0)}),this.addEvent("onShow",function(){this.init(),this.adjustEl(),this.setzIndexTop(),this.root.on("click",$.proxy(function(e){for(var t=$(e.target),n=!1;;){if(t.attr("id")==this.id)break;if("c"==t.attr("data-flag")){n=!0;break}t=t.parent()}n&&"function"==typeof this.click&&this.click.call(this,this.data[t.attr("data-index")])},this)),this.clsLayer=$.proxy(function(e){for(var t=$(e.target),n=!1;;){if(t.attr("id")==this.id){n=!0;break}if(!t[0])break;t=t.parent()}0==n&&this.hide()},this),document.addEventListener("click",this.clsLayer,!0)})},n.adjustEl=function(){if(this.triggerEl){var e=this.triggerEl.offset();this.el.css({width:"",transform:""});var t=6;this.el.css("up"==this.dir?{width:e.width-t,"-webkit-transform":"translate("+(e.left+2)+"px, "+(e.top+e.height+8)+"px) translateZ(0px)"}:{width:e.width-t,"-webkit-transform":"translate("+(e.left+2)+"px, "+(e.top-this.el.offset().height-8)+"px) translateZ(0px)"})}},n.init=function(){if(this.data){this.tmpt=_.template(['<ul class="cui-f-layer '+(this.dir?"up"==this.dir?"f-layer-before":"f-layer-after":"")+'" style="position: absolute; top: 0; left: 0; ">',"<% for(var i = 0, len = data.length; i < len; i++) { %>","<% var itemData = data[i]; %>",'<li data-index="<%=i%>" data-flag="c"  >'+(this.itemTemplate?this.itemTemplate:"<%=itemData.name %>")+"</li>","<% } %>","</ul>"].join(""));var e=this.tmpt({data:this.data});this.root.html(e),this.el=this.root.find(".cui-f-layer")}},n.createHtml=function(){return""},new e.Class(t,n)}),window.onunload=function(){},define("cPageView",["libs","cUIHeader","cUIAlert","cUIWarning","cUIHeadWarning","cUIWarning404","cUIToast","cUILoading","cUIBubbleLayer","cBusinessCommon","cUtility"],function(e,t,n,r,i,s,o,u,a,f,l){f();var c=new n({title:"提示信息",message:"",buttons:[{text:"知道了",click:function(){this.hide()}}]}),h=new n({title:"提示信息",message:"您的订单还未完成，是否确定要离开当前页面？",buttons:[{text:"取消",click:function(){this.hide()},type:n.STYLE_CANCEL},{text:"确定",click:function(){this.hide()},type:n.STYLE_CONFIRM}]}),p=new r({title:""}),d=new i({title:""}),v=new s,m=new u,g=new o,y=new a,b=Backbone.View.extend({scrollPos:{x:0,y:0},header:null,headerview:null,lastViewId:"",pageid:0,hpageid:0,scrollZero:!0,initialize:function(){this.id=this.$el.attr("id"),this.alert=c,this.warning=p,this.headwarning=d,this.warning404=v,this.loading=m,this.toast=g,this.bubbleLayer=y,this.confirm=h,this.create()},_createHeader:function(){var e=$("#headerview");this.header=this.headerview=new t({root:e})},create:function(){this.onCreate&&this.onCreate()},destroy:function(){this.$el.remove()},show:function(){document.activeElement&&document.activeElement.blur(),this._createHeader(),!this.switchByOut&&this.$el.show(),this.validateRet&&this.onLoad&&this.onLoad(this.lastViewId),this.validateRet&&this.onShow&&this.onShow(),this.onBottomPull&&(this._onWidnowScroll=$.proxy(this.onWidnowScroll,this),this.addScrollListener()),this.scrollZero&&window.scrollTo(0,0)},hide:function(){this.onHide&&this.onHide(),this.removeScrollListener&&this.removeScrollListener(),this.$el.hide()},jump:function(e){window.location.href=e},forward:function(e,t){Lizard.forward(e,t)},back:function(e,t){Lizard.back(e,t)},getAppUrl:function(){return""},getQuery:function(e){return Lizard.P(e)},saveScrollPos:function(){this.scrollPos={x:window.scrollX,y:window.scrollY}},restoreScrollPos:function(){window.scrollTo(this.scrollPos.x,this.scrollPos.y)},turning:function(){},showMessage:function(e,t){this.alert.setViewData({message:e,title:t}),this.alert.show()},hideMessage:function(){this.alert.hide()},showConfirm:function(e,t,r,i,s,o){this.confirm.setViewData("object"==typeof e&&e.message?e:{message:e,title:t,buttons:[{text:o||"取消",click:function(){"function"==typeof i&&i(),this.hide()},type:n.STYLE_CANCEL},{text:s||"确定",click:function(){"function"==typeof r&&r(),this.hide()},type:n.STYLE_CONFIRM}]}),this.confirm.show()},hideConfirm:function(){this.confirm.hide()},showBubbleLayer:function(e){this.bubbleLayer.showMenu(e)},hideBubbleLayer:function(){this.bubbleLayer.hide()},showWarning:function(e,t){e&&this.warning.setTitle(e,t),this.warning.show()},hideWarning:function(){this.warning.hide()},showWarning404:function(e){e&&this.warning404.retryClick(e),this.warning404.show(),this.warning404.firer=this},hideWarning404:function(){this.warning404.firer&&this.warning404.firer!==this||this.warning404.hide()},showToast:function(e,t,n,r){this.toast.isShow()||(r="undefined"!=typeof r?r:!0,this.toast.show(e,t,n,r))},hideToast:function(){this.toast.hide()},showLoading:function(){this.loading.show(),this.loading.firer=this},hideLoading:function(){this.loading.firer&&this.loading.firer!=this||this.loading.hide()},getServerDate:function(){return l.getServerDate()},setTitle:function(e){document.title=e},getGuid:function(){return l.getGuid()},sendUbt:function(){var e=this;window.__bfi||(window.__bfi=[]);var t,n=($("#page_id"),$("#bf_ubt_orderid")),r=location.href,i=e.browserReferrer||"",s="";if(l.isInApp()&&!Lizard.isInCtripApp){if(0==e.hpageid)return;var o=Lizard.getAbsPath(r.replace(/.*#/,""));if(r=Lizard.toUBTURL(o),i){var u=Lizard.getAbsPath(i.replace(/.*#/,""));i=Lizard.toUBTURL(u)}t=e.hpageid}else{if(0==e.pageid)return;if(t=e.pageid,i){var u=Lizard.getAbsPath(i,1);i=Lizard.toUBTURL(u,1)}}Lizard.P("orderid")&&(s=Lizard.P("orderid")||Lizard.P("oid")),1==n.length&&n.val(s),window.__bfi.push(["_asynRefresh",{page_id:t,orderid:s,url:decodeURIComponent(r),refer:decodeURIComponent(i)}])},_sendUbt:function(e){this.sendUbt(e)},_getViewUrl:function(){var e=location.href;if(l.isInApp()){var t=e.indexOf("webapp");e="http://hybridm.ctrip.com/"+e.substr(t)}return e}});return b}),define("cDataSource",["libs","cBase"],function(e,t){var n=new t.Class({__propertys__:function(){this.data,this.filters=[],this.group={},this.isUpdate=!0},initialize:function(e){this.setOption(e)},setOption:function(e){e=e||{};for(var t in e)switch(t){case"data":this.setData(data)}},setData:function(e){this.data=e,this.isUpdate=!0},filter:function(e,t){if("function"!=typeof e)throw"Screening function did not fill in";var n=function(t,n){return e(n,t)};return this.filters=_.filter(this.data,n),this.filters=this.filters||[],"function"==typeof t?this.filters.sort(t):this.filters},groupBy:function(e,t){return this.group=_.filter(this.data,t),this.group=_.groupBy(this.group,e),this.group}});return n}),define("cUIAnimation",[],function(){return{slideleft:function(e,t,n,r){var i=e.$el;t.$el,t.hide(),i.show(),i.bind("webkitAnimationEnd",function(){i.unbind("webkitAnimationEnd"),$("body").removeClass("hiddenx"),i.removeClass("animatestart"),i.removeClass("sliderightin"),e.show(),"function"==typeof n&&(r?n.call(r,e,t):n(e,t))}),$("body").addClass("hiddenx"),i.addClass("animatestart"),i.addClass("sliderightin")},slideright:function(e,t,n,r){var i=(e.$el,t.$el);i.bind("webkitAnimationEnd",function(){i.unbind("webkitAnimationEnd"),$("body").removeClass("hiddenx"),i.removeClass("animatestart"),i.removeClass("sliderightout"),t.hide(),e.show(),"function"==typeof n&&(r?n.call(r,e,t):n(e,t))}),$("body").addClass("hiddenx"),i.addClass("animatestart"),i.addClass("sliderightout")},noAnimate:function(e,t,n,r){t&&t.__hide(e.viewname),e.__show(),n&&n.call(r,e,t)}}}),define("cUICitylist",["libs","cBase","cUIBase"],function(e,t,n){var r=new t.Class({__propertys__:function(){this.element=null,this.groupOpenClass="cityListClick",this.selectedCityClass="citylistcrt",this.autoLocCity=null,this.selectedCity=null,this.defaultData="inland",this.itemClickFun=null,this.data=null,this.autoLoc=!!navigator.geolocation,this.listType=this.defaultData},initialize:function(e){this.setOption(e),this.assert(),this._init()},_init:function(){this.renderCityGroup(),this.data&&(this.renderData=this.data[this.defaultData]||[],this.bindClickEvent())},setOption:function(e){for(var t in e)switch(t){case"groupOpenClass":case"selectedCityClass":case"selectedCity":case"itemClickFun":case"defaultData":case"autoLoc":case"autoLocCity":case"data":this[t]=e[t];break;case"element":this[t]=$(e[t])}},assert:function(){if(!this.element&&0==this.element.length)throw"not override element property"},renderCityGroup:function(){var e=[];this.autoLocCity&&this.autoLocCity.listType==this.listType&&this.autoLocCity.name&&(e.push('<li id="'+n.config.prefix+'curCity" data-ruler="item"'),e.push(this.selectedCity&&this.autoLocCity.name!=this.selectedCity.name?' class="noCrt"':' class="'+this.selectedCityClass+'" '),e.push(' data-value="'+this.autoLocCity.name+'"'),e.push(">当前城市</li>")),e.push('<li id="hotCity" data-ruler="group" data-group="hotCity" class="'+this.groupOpenClass+'" >热门城市</li>');var t="ABCDEFGHJKLMNOPQRSTWXYZ".split("");for(var r in t)e.push('<li data-ruler="group" data-group="'+t[r]+'" id="'+t[r]+'">'+t[r]+"</li>");this.element.html(e.join(""))},groupClickHandler:function(e,t){var e=$(e),r=e.attr("data-group")||e.attr("id");if(0==e.children().length){var i=[];try{i=this.renderData[r]}catch(s){return void 0}var o=[];o.push("<ul>");for(var u=0,a=i.length;a>u;u++){var f=i[u];o.push('<li class data-ruler="item" data-id="'+f.id+'"'),o.push(">"+f.name+"</li>")}o.push("</ul>"),e.append(o.join(""))}var l=e.attr("class");t?e.addClass(this.groupOpenClass):l&&$.inArray(this.groupOpenClass,l)?e.removeClass(this.groupOpenClass):(this.element.find("."+this.groupOpenClass).removeClass(this.groupOpenClass),e.addClass(this.groupOpenClass));var h=n.getElementPos(e[0]);h&&"hotCity"!=e.attr("id")&&$(window).scrollTop(h.top-60),this.setSelectedCity(this.selectedCity)},bindClickEvent:function(){var e=this;this.element.delegate("li","click",function(){var t=$(this).attr("data-ruler");if("group"==t)e.groupClickHandler(this);else if("item"==t&&e.itemClickFun&&"function"==typeof e.itemClickFun){var n={id:$(this).attr("data-id"),name:$(this).attr("data-value")||$(this).html(),listType:e.listType};e.itemClickFun(n)}})},switchData:function(e){var t=this.data[e];t&&(this.listType=e,this.element.undelegate("li","click"),this.element.html(""),this.renderCityGroup(),this.renderData=t,this.groupClickHandler(this.element.find("#hotCity"),!0),this.setSelectedCity(this.selectedCity),this.bindClickEvent())},setSelectedCity:function(e){var t=this;if(e&&this.listType==e.listType&&e.name){var r=this.element.find("#"+n.config.prefix+"curCity");if(r.length>0)r.removeClass(this.selectedCityClass),r.addClass("noCrt");else if(t.autoLocCity&&t.autoLocCity.listType==this.listType&&t.autoLocCity.name){var i=[];i.push('<li id="'+n.config.prefix+'curCity"'),i.push('data-value="'+e.name+'" data-ruler="item">当前城市</li>'),this.element.prepend(i.join())}this.element.find("li").each(function(){var n=$(this);n.html()==e.name||n.attr("data-value")==e.name?(n.removeClass("noCrt"),n.addClass(t.selectedCityClass)):n.removeClass(t.selectedCityClass)}),this.selectedCity=e}},setData:function(e){this.element.html(""),this.data=e,this._init()},openHotCity:function(e){var t=this.element.find("#hotCity");t.length>0&&this.groupClickHandler(t,!!e)}});return r}),define("cUIInputClear",["libs"],function(){var e=function(){var e="placeholder"in document.createElement("input"),t=function(t,n,r,i,s){n||(n=""),i=i||{};var o="string"==typeof t?$(t):t;o.each(function(){var t=$('<a class="clear-input '+n+'" href="javascript:;"><span></span></a>'),o=$(this);if(s&&(t=$('<span class="cui-focus-close '+n+'">×</span>')),i.left&&t.css({left:i.left+"px",right:"auto"}),i.top&&t.css({top:i.top+"px",bottom:"auto"}),i.right&&t.css({right:i.right+"px",left:"auto"}),i.bottom&&t.css({bottom:i.bottom+"px",top:"auto"}),o.parent().addClass("clear-input-box"),!e)var u=o.attr("placeholder"),l=$('<span class="placeholder-title'+(n?" placeholder-"+n:"")+'">'+u+"</span>");t.hide(),o.bind({focus:function(){var e=$.trim(o.val());""!=e&&t.show()},input:function(){window.setTimeout(function(){var n=o.val();""==n?t.hide():t.show(),e||(""==n?l.show():l.hide())},10)},blur:function(){var n=$.trim(o.val());e||(""==n?l.show():l.hide()),setTimeout(function(){t.hide()},200)}}),t.bind("click",function(){o.val(""),o.keyup(),t.hide(),o.focus(),o.trigger("input"),"function"==typeof r&&r.call(this)}),o.after(t),e||(o.after(l),l.bind("click",function(){o.focus()})),o.blur()})};return t}();return e}),define("cUILoadingLayer",["libs","cBase","cUILayer"],function(e,t,n){var r={prefix:"cui-"},i={};i["class"]=r.prefix+"loading",i.onShow=function(){this.contentDom.html(['<div class="cui-grayload-text">','<div class="cui-i cui-w-loading"></div>','<div class="cui-i cui-m-logo"></div>','<div class="cui-grayload-close"></div>','<div class="cui-grayload-bfont">'+this.text+"</div>","</div>"].join("")),this.root.find(".cui-grayload-close").off("click").on("click",$.proxy(function(){this.callback&&this.callback(),this.hide()},this)),this.reposition()};var s={};return s.__propertys__=function(){this.contentDom,this.callback=function(){},this.text="发送中..."},s.initialize=function($super,e,t){this.callback=e||function(){},this.text=t||"发送中...",$super(i)},new t.Class(n,s)}),define("cUIScrollList",["cBase"],function(){window.initTap=function(){var e=$("#forTap");return e[0]||(e=$('<div id="forTap" style="color: White; display: none; border-radius: 60px; position: absolute; z-index: 99999; width: 60px; height: 60px"></div>'),$("body").append(e)),e},window.showMaskTap=function(e,t){var n=initTap();n[0]&&n.css({top:t+"px",left:e+"px"}),n.show(),setTimeout(function(){n.hide()},350)};var e=function(e){e=e||{},this._checkEventCompatibility(),this._setBaseParam(e),this._initBaseDom(e),this._setDisItemNum(e),this._setSelectedIndex(e),this.init()};return e.prototype={constructor:e,_checkEventCompatibility:function(){var e="ontouchstart"in document.documentElement;this.start=e?"touchstart":"mousedown",this.move=e?"touchmove":"mousemove",this.end=e?"touchend":"mouseup",this.startFn,this.moveFn,this.endFn},_setBaseParam:function(e){this.setHeight=0,this.itemHeight=0,this.dragHeight=0,this.dragTop=0,this.timeGap=0,this.touchTime=0,this.moveAble=!1,this.moveState="up",this.oTop=0,this.curTop=0,this.mouseY=0,this.cooling=!1,this.animateParam=e.animateParam||[50,40,30,25,20,15,10,8,6,4,2],this.animateParam=e.animateParam||[10,8,6,5,4,3,2,1,0,0,0],this.data=e.data||[],this.dataK={},this.size=this.getValidSize(this.data),this._changed=e.changed||null},getValidSize:function(e){return _.filter(e,function(e){return"undefined"==typeof e.key&&(e.key=e.id),"undefined"==typeof e.val&&(e.val=e.name),e.val||e.key}).length},_initBaseDom:function(e){this.wrapper=e.wrapper||$(document),this.type=e.type||"list",this.id=e.id||"id_"+(new Date).getTime(),this.className=e.className||"cui-roller-bd",this._setScrollClass(e),this._initDom(),this.wrapper.append(this.body)},_setScrollClass:function(e){var t;"list"==this.type?t="cui-select-view":"radio"==this.type&&(t="ul-list"),t=e.scrollClass||t,this.scrollClass=t},_initDom:function(){this.body=$(['<div class="'+this.className+'" style="overflow: hidden; position: relative; " id="'+this.id+'" >',"</div>"].join("")),this.dragEl=$(['<ul class="'+this.scrollClass+'" style="position: absolute; width: 100%;">',"</ul>"].join(""))},_setDisItemNum:function(e){if(this.disItemNum=this.data.length,this.disItemNum=this.disItemNum>5?5:this.disItemNum,"radio"==this.type&&(this.disItemNum=5),this.disItemNum=e.disItemNum||this.disItemNum,"radio"==this.type&&(this.disItemNum=this.disItemNum%2==0?this.disItemNum+1:this.disItemNum),this.data.length<this.disItemNum)if("radio"==this.type){for(var t=0,n=this.disItemNum-this.data.length;n>t;t++)this.data.push({key:"",val:"",disabled:!1});this.size=this.disItemNum}else this.disItemNum=this.data.length},_setSelectedIndex:function(e){this.selectedIndex=parseInt(this.disItemNum/2),"list"==this.type&&(this.selectedIndex=-1),this.selectedIndex=void 0!=e.index?e.index:this.selectedIndex,this.selectedIndex=this.selectedIndex>this.data.length?0:this.selectedIndex,this._checkSelected()},_checkSelected:function(e){e=e||"down";var t=this.selectedIndex;!this.data[t]||"undefined"!=typeof this.data[t].disabled&&0!=this.data[t].disabled||("down"==e?(this.selectedIndex=this._checkSelectedDown(t),"number"!=typeof this.selectedIndex&&(this.selectedIndex=this._checkSelectedUp(t))):(this.selectedIndex=this._checkSelectedUp(t),"number"!=typeof this.selectedIndex&&(this.selectedIndex=this._checkSelectedDown(t)))),"number"!=typeof this.selectedIndex&&(this.selectedIndex=t)},_checkSelectedUp:function(e){for(var t=!1,n=e;-1!=n;n--)if(this.data[n]&&"undefined"==typeof this.data[n].disabled||1==this.data[n].disabled){e=n,t=!0;break}return t?e:null},_checkSelectedDown:function(e){for(var t=!1,n=e,r=this.data.length;r>n;n++)if(this.data[n]&&"undefined"==typeof this.data[n].disabled||1==this.data[n].disabled){e=n,t=!0;break}return t?e:null},init:function(){this._addItem(),this._initEventParam(),this._addEvent(),this._initScrollBar(),this.setIndex(this.selectedIndex,!0)},_addItem:function(){var e,t,n,r;for(var n in this.data)t=this.data[n],t.index=n,"undefined"==typeof t.key&&(t.key=t.id),"undefined"==typeof t.val&&(t.val=t.name),r=t.val||t.key,this.dataK[t.key]=t,e=$("<li>"+r+"</li>"),e.attr("data-index",n),"undefined"!=typeof t.disabled&&0==t.disabled&&e.css("color","gray"),this.dragEl.append(e);this.body.append(this.dragEl)},_initEventParam:function(){if(this.data.constructor!=Array||0==this.data.length)return!1;var e=this.dragEl.offset(),t=this.dragEl.find("li").eq(0),n=t.offset();this.itemHeight=n.height,this.setHeight=this.itemHeight*this.disItemNum,this.body.css("height",this.setHeight),this.dragTop=e.top,this.dragHeight=this.itemHeight*this.size},_addEvent:function(){var e=this;this.startFn=function(t){e._touchStart.call(e,t)},this.moveFn=function(t){e._touchMove.call(e,t)},this.endFn=function(t){e._touchEnd.call(e,t)},this.dragEl[0].addEventListener(this.start,this.startFn,!1),this.dragEl[0].addEventListener(this.move,this.moveFn,!1),this.dragEl[0].addEventListener(this.end,this.endFn,!1)},removeEvent:function(){this.dragEl[0].removeEventListener(this.start,this.startFn),this.dragEl[0].removeEventListener(this.move,this.moveFn),this.dragEl[0].removeEventListener(this.end,this.endFn)},_initScrollBar:function(){if("list"==this.type){if(this.scrollProportion=this.setHeight/this.dragHeight,this.isNeedScrollBar=!0,this.scrollProportion>=1)return this.isNeedScrollBar=!1,!1;this.scrollBar=$('<div style="background-color: rgba(0, 0, 0, 0.498039);border: 1px solid rgba(255, 255, 255, 0.901961); width: 5px; border-radius: 3px;  position: absolute; right: 1px;  opacity: 0.2;  "></div>'),this.body.append(this.scrollBar),this.scrollHeight=parseInt(this.scrollProportion*this.setHeight),this.scrollBar.css("height",this.scrollHeight)}},_setScrollTop:function(e,t){if(this.isNeedScrollBar){e=this._getResetData(e).top,e=0>e?e+10:e;var n=-1*e;if("number"==typeof t){var r=parseInt(n*this.scrollProportion)+"px";this.scrollBar.animate({top:r,right:"1px"},t,"linear")}else this.scrollBar.css("top",parseInt(n*this.scrollProportion)+"px");this.scrollBar.css("opacity","0.8")}},_hideScroll:function(){this.isNeedScrollBar&&this.scrollBar.animate({opacity:"0.2"})},_touchStart:function(e){e.preventDefault();var t=this;if(this.cooling)return setTimeout(function(){t.cooling=!1},50),e.preventDefault(),!1;var n,r=$(e.target).parent();if(this.isMoved=!1,r.hasClass(this.scrollClass)){this.touchTime=e.timeStamp,n=this.getMousePos(e.changedTouches&&e.changedTouches[0]||e);var i=parseFloat(this.dragEl.css("top"))||0;this.mouseY=n.top-i,this.moveAble=!0}},_touchMove:function(e){if(e.preventDefault(),!this.moveAble)return!1;var t=this.getMousePos(e.changedTouches&&e.changedTouches[0]||e);this.curTop=t.top-this.mouseY;var n=this._cheakListBound(this.curTop);0!=n&&(this.curTop=n.top),this.isMoved=!0,this.dragEl.css("top",this.curTop+"px"),this._setScrollTop(this.curTop),e.preventDefault()},_cheakListBound:function(e){var t=parseInt(this.dragHeight)-parseInt(this.setHeight),n=!1;if("radio"==this.type){var r=parseInt(this.disItemNum/2);e>this.itemHeight*r?(e=this.itemHeight*r,n=!0):e<-1*t-this.itemHeight*r&&(e=-1*t-this.itemHeight*r,n=!0)}else e>this.itemHeight?(e=this.itemHeight,n=!0):e<-1*t-this.itemHeight&&(e=-1*t-this.itemHeight,n=!0);return n?(this.isBound=!0,{speed:1,top:e}):(this.isBound=!1,!1)},_getAnimateData:function(e){this.timeGap=e.timeStamp-this.touchTime;var t=this.oTop<=this.curTop?1:-1,n=this.curTop>0?1:-1;this.moveState=t>0?"up":"down";var r=parseFloat(this.itemHeight),i=r/2,s=Math.abs(this.curTop),o=s%r;s=(parseInt(s/r)*r+(o>i?r:0))*n;var u=parseInt(this.timeGap/10-10);u=u>0?u:0;var a=this.animateParam[u]||0,f=a*r*t;return s+=f,{top:s,speed:a}},_touchEnd:function(e){var t=this;if(this.isBound===!0&&this.isMoved===!0)return t.reset.call(t,this.curTop),this.moveAble=!1,!1;if(!this.moveAble)return!1;this.cooling=!0;var n=this._getAnimateData(e),r=n.top,i=n.speed,s=this._cheakListBound(r);if(0!=s&&(r=s.top,i=s.speed),this.oTop==this.curTop||this.curTop==r)return;this.dragEl.animate({top:r+"px"},100+20*i,"linear",function(){t.reset.call(t,r)}),t._setScrollTop(r,100+20*i),this._hideScroll(),this.moveAble=!1},_getResetData:function(e){var t=parseInt("list"==this.type?0:this.disItemNum/2),n=e,r=!1,i="list"==this.type?0:parseFloat(this.itemHeight)*t,s="list"==this.type?this.setHeight:parseFloat(this.itemHeight)*(t+1),o=this.dragHeight;return e>=0&&(e>i?(n=i,r=!0):i>=o&&(n=parseInt(this.dragEl.css("top"))/this.itemHeight*this.itemHeight,r=!0)),0>e&&e+this.dragHeight<=s&&(r=!0,n=-1*(this.dragHeight-s)),e==n&&(r=!1),{top:n,needReset:r}},reset:function(e){var t=this,n=this._getResetData(e).needReset,r=this._getResetData(e).top;n?t.dragEl.animate({top:r+"px"},50,"linear",function(){t._reset(r)}):t._reset(e),this._hideScroll()},_reset:function(e){this.oTop=e,this.curTop=e,"radio"==this.type&&this.onTouchEnd(),this.cooling=!1},onTouchEnd:function(e){e=e||this;var t,n,r,i,s,o=this._changed,u=parseInt("list"==this.type?0:this.disItemNum/2);if(r=this.data.length,"radio"==this.type?(n=parseInt((this.curTop-this.itemHeight*u)/parseFloat(this.itemHeight)),this.selectedIndex=Math.abs(n),t=this.data[this.selectedIndex]):t=this.data[this.selectedIndex],s=!1,t&&"undefined"!=typeof t.disabled&&0==t.disabled&&(i=this.selectedIndex,"radio"==this.type&&this._checkSelected(this.moveState),i!=this.selectedIndex&&(s=!0)),s)this.setIndex(this.selectedIndex);else{var o=this._changed;o&&"function"==typeof o&&t&&0!=t.disabled&&o.call(e,t),this.dragEl.find("li").removeClass("current"),"radio"==this.type&&this.dragEl.find("li").eq(this.selectedIndex).addClass("current")}},reload:function(e){this.data=e,this.dragEl.html(""),e.constructor==Array&&e.length>0&&(this.selectedIndex=parseInt(this.disItemNum/2),this.selectedIndex=this.selectedIndex>this.data.length?this.data.length-1:this.selectedIndex,this._checkSelected("down"),this._addItem(),this._initEventParam(),this.cooling=!1,this.setIndex(this.selectedIndex,!0),this.dragEl.find("li").removeClass("current"),"radio"==this.type&&this.dragEl.find("li").eq(this.selectedIndex).addClass("current")),this.size=this.getValidSize(e),this.dragHeight=this.itemHeight*this.size},setKey:function(e){if(void 0==e||null==e)return!1;var t=this.dataK[e]&&this.dataK[e].index;this.setIndex(t)},setIndex:function(e,t){if(void 0==e||0>e)return!1;var n=this,r=parseInt(n.disItemNum/2);"list"==n.type&&(this.data.length==n.disItemNum?r=e:(r=0==e?0:1,this.size-e<this.disItemNum&&(r=-1*parseInt(this.size)+parseInt(this.disItemNum)+parseInt(e))));var i,e=parseInt(e);if(0>e)return!1;if(e>=this.data.length&&(e=this.data.length-1),this.selectedIndex=e,i=this.itemHeight*(r-e),n.oTop=i,n.curTop=i,n.cooling=!1,n.dragEl.animate({top:i+"px"},50,"linear"),this._setScrollTop(i,50),"list"==n.type){var s=n.dragEl.find("li");s.removeClass("current"),s.eq(e).addClass("current")}t||n.onTouchEnd()},getSelected:function(){return this.data[this.selectedIndex]},getByKey:function(e){var t=this.dataK[e]&&this.dataK[e].index;return null!=t&&void 0!=t?this.data[t]:null},getMousePos:function(e){var t,n;return t=Math.max(document.body.scrollTop,document.documentElement.scrollTop),n=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),{top:t+e.clientY,left:n+e.clientX}}},e}),define("cUIScrollRadio",["libs","cBase","cUILayer","cUIScrollList"],function(e,t,n,r){var i={},s={prefix:"cui-"},o={};o["class"]=s.prefix+"warning",o.onCreate=function(){this.root.html(['<div class="cui-pop-box" >','<div class="cui-hd">','<div class="cui-text-center">',""+this.title+"</div>","</div>",'<div class="cui-bd ">','<div class="cui-roller scrollWrapper">',"</div>",'<p class="cui-roller-tips">',""+this.tips+"</p>",'<div class="cui-roller-btns">','<div class="cui-btns-cancel cui-flexbd">'+this.cancel+'</div> <div class="cui-btns-sure cui-flexbd" >',""+this.ok+"</div>","</div>","</div>","</div>"].join("")),this.title=this.root.find(".cui-text-center"),this.tips=this.root.find(".cui-roller-tips"),this.btCancel=this.root.find(".cui-btns-cancel"),this.btOk=this.root.find(".cui-btns-sure"),this.line=$('<div class="cui-mask-gray"></div><div class="cui-lines">&nbsp;</div>'),this.wrapper=this.root.find(".scrollWrapper")},o.onShow=function(){var e=this;if(this.maskToHide(function(){e.hide()}),!this.data||0==this.data.length)return!1;if(-1!=navigator.userAgent.indexOf("MSIE")){this.wrapper.css({height:44*this.disItemNum+"px"});for(var t=0,n=this.data.length;n>t;t++){var i=this.data[t],s=i.length,o=parseInt(this.index[t]);_.isNumber(o)||_.isNaN(o)||(o=0);for(var u=$('<div style="height: '+44*this.disItemNum+'px; overflow: auto; position: relative;" class="cui-roller-bd '+(3==n&&0==t?"cui-flex2":"")+' "><ul class="ul-list" style="height: auto;"></ul></div>'),a=u.find("ul"),f=0;s>f;f++){var l=i[f];l.index=f;var c=$('<li data-index="'+f+'" class="'+(o===f?"current":"")+'"  >'+l.val+"</li>");c.css(""),a.append(c)}this.wrapper.append(u),u[0].scrollTop=44*o}return void this.setzIndexTop()}for(var t=0,n=this.data.length;n>t;t++){var h={wrapper:this.wrapper,data:this.data[t],type:"radio",disItemNum:this.disItemNum,changed:function(t){return function(n){var r=e.changed[t];"function"==typeof r&&r.call(e,n)}}(t)};0==t&&3==n&&(h.className="cui-roller-bd  cui-flex2");var p=new r(h);this.scroll.push(p)}for(var t=0,n=this.data.length;n>t;t++)this.scroll[t].setIndex(this.index[t]),this.scroll[t].setKey(this.key[t]);this.wrapper.append(this.line),this.btOk.on("click",function(){for(var t=[],n=0,r=e.scroll.length;r>n;n++)t.push(e.scroll[n].getSelected());e.okClick.call(e,t),e.hide()}),this.btCancel.on("click",function(){for(var t=[],n=0,r=e.scroll.length;r>n;n++)t.push(e.scroll[n].getSelected());e.cancelClick.call(e,t),e.hide()}),this.setzIndexTop(),this.root.bind("touchmove",function(e){e.preventDefault()}),this.onHashChange=function(){this.hide()},$(window).on("hashchange",$.proxy(this.onHashChange,this))},o.onHide=function(){for(var e=0,t=this.scroll.length;t>e;e++)this.scroll[e].removeEvent();this.btOk.off("click"),this.btCancel.off("click"),this.root.unbind("touchmove"),this.root.remove(),-1!=navigator.userAgent.indexOf("MSIE")&&$(window).off("hashchange",$.proxy(this.onHashChange,this))},i.__propertys__=function(){var e=this;this.changed=[],this.scroll=[],this.data=[],this.index=[],this.key=[],this.disItemNum=5,this.tips="",this.btCancel,this.btOk,this.cancel="取消",this.ok="确定",this.cancelClick=function(){e.hide()},this.okClick=function(){e.hide()},-1!=navigator.userAgent.indexOf("MSIE")&&(this.eventArr={"click .ul-list li":function(e){var t=$(e.currentTarget),n=t.parent();n.find("li").removeClass("current"),t.addClass("current")},"click .cui-btns-sure":function(){for(var e=this,t=this.root.find(".ul-list").find(".current"),n=[],r=0,i=t.length;i>r;r++){var s=$(t[r]).attr("data-index");n.push(this.data[r][s])}e.okClick.call(e,n),e.hide()},"click .cui-btns-cancel":function(){for(var e=this,t=this.root.find(".ul-list").find(".current"),n=[],r=0,i=t.length;i>r;r++){var s=$(t[r]).attr("data-index");n.push(this.data[r][s])}e.okClick.call(e,n),e.hide()}})},i.initialize=function($super,e){this.setOption(function(e,t){this[e]=t}),$super($.extend(o,e))},i.setTips=function(e){this.tips.html(e)};var u=new t.Class(n,i);return u}),define("cUIScroll",["cBase"],function(){function e(e){if(this.$wrapper="string"==typeof e.wrapper?$(e.wrapper):e.wrapper,this.scroller=e.scroller?"string"==typeof e.scroller?$(e.scroller):e.scroller:this.$wrapper.children().eq(0),-1!=navigator.userAgent.indexOf("MSIE"))return void this.$wrapper.css({overflow:"auto",position:"relative"});this.wrapper=this.$wrapper[0],this.scroller=this.scroller[0];var t=this.wrapper.iscrollInstance;if(t)return t;this.scrollerStyle=this.scroller.style,this.options={scrollbars:!0,startX:0,startY:0,bounceTime:600,bounceEasing:r.ease.circular,preventDefaultException:/^(input|textarea|button|select)$/i,bounce:!0,scrollY:!0,scrollX:!1,bindToWrapper:!0,resizePolling:60},this._events={};for(var n in e)this.options[n]=e[n],("scrollStart"==n||"scrollEnd"==n)&&this.on(n,_.bind(e[n],this));this.translateZ=" translateZ(0)",this.x=0,this.y=0,this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable(),this.wrapper.iscrollInstance=this}function t(e){var t=$("<div>"),n=$("<div>"),r={position:"absolute",overflow:"hidden"},i={boxSizing:"border-box",position:"absolute",background:"rgba(0, 0, 0, .5)",border:"1px solid rgba(255, 255, 255, .9)"};return"h"===e?(_.extend(r,{height:7,left:2,right:2,bottom:0}),_.extend(i,{height:"100%"})):(_.extend(r,{width:7,bottom:2,top:2,right:1}),_.extend(i,{width:"100%"})),t.css(r),n.css(i),t.append(n),t[0]}function n(e,t){this.wrapper="string"==typeof t.el?document.querySelector(t.el):t.el,this.indicator=this.wrapper.children[0],this.wrapperStyle=this.wrapper.style,this.indicatorStyle=this.indicator.style,this.scroller=e,this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options={scrollX:!1},_.extend(this.options,t),this.wrapperStyle[r.style.transform]=this.scroller.translateZ,this.wrapperStyle[r.style.transitionDuration]="0ms"}var r=function(){function e(e){return r===!1?!1:""===r?e:r+e.charAt(0).toUpperCase()+e.substr(1)}var t={},n=document.createElement("div").style,r=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],r=0,i=t.length;i>r;r++)if(e=t[r]+"ransform",e in n)return t[r].substr(0,t[r].length-1);return!1}();return t.getTime=Date.now||function(){return(new Date).getTime()},t.addEvent=function(e,t,n,r){e[0]&&e!=window.top&&(e=e[0]),e.addEventListener(t,n,!!r)},t.removeEvent=function(e,t,n,r){e[0]&&e!=window.top&&(e=e[0]),e.removeEventListener(t,n,!!r)},t.momentum=function(e,t,n,r,i){var s,o,u=e-t,a=Math.abs(u)/n,f=6e-4;return s=e+a*a/(2*f)*(0>u?-1:1),o=a/f,r>s?(s=i?r-i/2.5*(a/8):r,u=Math.abs(s-e),o=u/a):s>0&&(s=i?i/2.5*(a/8):0,u=Math.abs(e)+s,o=u/a),{destination:Math.round(s),duration:o}},$.extend(t,{hasTouch:"ontouchstart"in window}),t.isBadAndroid=/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion),$.extend(t.style={},{transform:e("transform"),transitionTimingFunction:e("transitionTimingFunction"),transitionDuration:e("transitionDuration"),transitionDelay:e("transitionDelay"),transformOrigin:e("transformOrigin")}),$.extend(t.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2}),$.extend(t.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return Math.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,n=.4;return 0===e?0:1==e?1:n*Math.pow(2,-10*e)*Math.sin(2*(e-t/4)*Math.PI/t)+1}}}),t}();return e.prototype={_init:function(){this._initEvents(),this.options.scrollbars&&this._initIndicator()},refresh:function(){var e=this.wrapper.offsetHeight,t=this.options;0!=e&&(this.wrapperWidth=this.wrapper.clientWidth,this.scrollerWidth=this.scroller.offsetWidth,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.indicator&&(t.scrollY&&this.maxScrollY>=0&&(this.indicator.wrapperStyle.display="none"),t.scrollX&&this.maxScrollX>=0&&(this.indicator.wrapperStyle.display="none")),(t.scrollX||this.maxScrollY>0)&&(this.maxScrollY=0),(t.scrllY||this.maxScrollX>0)&&(this.maxScrollX=0),this.endTime=0,this._execEvent("refresh"),this.resetPosition())},_initEvents:function(e){if(-1==navigator.userAgent.indexOf("MSIE")){var t=e?r.removeEvent:r.addEvent,n=this.options.bindToWrapper?this.wrapper:window;t(window,"orientationchange",this),t(window,"resize",this),r.hasTouch?(t(this.wrapper,"touchstart",this),t(n,"touchmove",this),t(n,"touchcancel",this),t(n,"touchend",this)):(t(this.wrapper,"mousedown",this),t(n,"mousemove",this),t(n,"mousecancel",this),t(n,"mouseup",this)),t(this.scroller,"transitionend",this),t(this.scroller,"webkitTransitionEnd",this),t(this.scroller,"oTransitionEnd",this),t(this.scroller,"MSTransitionEnd",this)}},_start:function(e){var t=this.options;if(t.scrollX&&(this._isMovedChecked=!1,this.enabled=!0),this.enabled&&(!this.initiated||r.eventType[e.type]===this.initiated)){!r.isBadAndroid&&t.preventDefaultException.test(e.target.tagName)&&e.preventDefault();var n,i=e.touches?e.touches[0]:e;if(this.initiated=r.eventType[e.type],this.moved=!1,this.distY=0,this.distX=0,this._transitionTime(),this.startTime=r.getTime(),this.isInTransition){this.isInTransition=!1,n=this.getComputedPosition();var s=Math.round(n.x),o=Math.round(n.y);0>o&&o>this.maxScrollY&&t.adjustXY&&(o=t.adjustXY.call(this,s,o).y),this._translate(s,o),this._execEvent("scrollEnd")}this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_moveCheck:function(e){var t=this.options;if(t.scrollX&&!this._isMovedChecked){var n=e.touches?e.touches[0]:e,r=Math.abs(n.pageX-this.pointX),i=Math.abs(n.pageY-this.pointY);i>r&&this.disable()}this._isMovedChecked=!0},_move:function(e){if(this.enabled&&r.eventType[e.type]===this.initiated){e.preventDefault();var t,n,i,s,o=this.options,u=e.touches?e.touches[0]:e,a=u.pageX-this.pointX,f=u.pageY-this.pointY,l=r.getTime();this.pointX=u.pageX,this.pointY=u.pageY,this.distX+=a,this.distY+=f,i=Math.abs(this.distX),s=Math.abs(this.distY),l-this.endTime>300&&10>i&&10>s||(o.scrollX&&(f=0),o.scrollY&&(a=0),t=this.x+a,n=this.y+f,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+a/3:t>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=o.bounce?this.y+f/3:n>0?0:this.maxScrollY),this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,n),l-this.startTime>300&&(this.startTime=l,this.startX=this.x,this.startY=this.y))}},_end:function(e){if(this.enabled&&r.eventType[e.type]===this.initiated){var t,n=this.options,i=(e.changedTouches?e.changedTouches[0]:e,r.getTime()-this.startTime),s=Math.round(this.x),o=Math.round(this.y),u=(Math.abs(s-this.startX),Math.abs(o-this.startY),0),a="";if(this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(n.bounceTime))return this.scrollTo(s,o),this.moved?(300>i&&(momentumX=r.momentum(this.x,this.startX,i,this.maxScrollX,n.bounce?this.wrapperWidth:0),t=r.momentum(this.y,this.startY,i,this.maxScrollY,n.bounce?this.wrapperHeight:0),s=momentumX.destination,o=t.destination,u=Math.max(momentumX.duration,t.duration),this.isInTransition=1),s!=this.x||o!=this.y?((s>0||s<this.maxScrollX||o>0||o<this.maxScrollY)&&(a=r.ease.quadratic),void this.scrollTo(s,o,u,a)):void this._execEvent("scrollEnd")):void this._execEvent("scrollCancel")}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},_transitionTimingFunction:function(e){this.scrollerStyle[r.style.transitionTimingFunction]=e,this.indicator&&this.indicator.transitionTimingFunction(e)},_transitionTime:function(e){e=e||0,this.scrollerStyle[r.style.transitionDuration]=e+"ms",this.indicator&&this.indicator.transitionTime(e)},getComputedPosition:function(){var e,t,n=window.getComputedStyle(this.scroller,null);return n=n[r.style.transform].split(")")[0].split(", "),e=+(n[12]||n[4]),t=+(n[13]||n[5]),{x:e,y:t}},_initIndicator:function(){var e,r=this.options.scrollX;e=r?t("h"):t(),this.wrapper.appendChild(e),this.indicator=new n(this,{el:e,scrollX:r}),this.$wrapper.css("position","relative"),this.on("scrollEnd",function(){this.indicator.fade()});var i=this;this.on("scrollCancel",function(){i.indicator.fade()}),this.on("scrollStart",function(){i.indicator.fade(1)}),this.on("beforeScrollStart",function(){i.indicator.fade(1,!0)}),this.on("refresh",function(){i.indicator.refresh()})},_translate:function(e,t){this.scrollerStyle[r.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ,this.x=e,this.y=t,this.options.scrollbars&&this.indicator.updatePosition()},resetPosition:function(e){var t=this.x,n=this.y,r=this.options;return e=e||0,!r.scrollX||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!r.scrollY||this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),t==this.x&&n==this.y?!1:(this.scrollTo(t,n,e,this.options.bounceEasing),!0)},scrollTo:function(e,t,n,i){-1==navigator.userAgent.indexOf("MSIE")&&(i=i||r.ease.circular,this.isInTransition=n>0,(!n||i.style)&&(this._transitionTimingFunction(i.style),this._transitionTime(n),this._translate(e,t)))},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},_execEvent:function(e){if(this._events[e]){var t=0,n=this._events[e].length;if(n)for(;n>t;t++)this._events[e][t].call(this)}},destroy:function(){this._initEvents(!0),this._execEvent("destroy"),this.indicator&&this.indicator.destroy()},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},handleEvent:function(e){switch($("#log").html(e.type),e.type){case"touchstart":case"mousedown":this._start(e);break;case"touchmove":case"mousemove":this._moveCheck(e),this._move(e);break;case"touchend":case"mouseup":case"touchcancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e)}}},n.prototype={transitionTime:function(e){e=e||0,this.indicatorStyle[r.style.transitionDuration]=e+"ms"},transitionTimingFunction:function(e){this.indicatorStyle[r.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime();var e,t,n=(this.wrapper.offsetHeight,this.wrapper.clientHeight),r=this.wrapper.clientWidth;this.options.scrollX?(t=Math.max(Math.round(r*r/(this.scroller.scrollerWidth||r||1)),8),this.indicatorStyle.width=t+"px",this.maxPosX=r-t,this.sizeRatioX=this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX):(e=Math.max(Math.round(n*n/(this.scroller.scrollerHeight||n||1)),8),this.indicatorStyle.height=e+"px",this.maxPosY=n-e,this.sizeRatioY=this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},destroy:function(){$(this.wrapper).remove()},updatePosition:function(){var e,t=Math.round(this.sizeRatioY*this.scroller.y)||0,n=Math.round(this.sizeRatioX*this.scroller.x)||0;this.y=t,this.x=n,e=this.options.scrollX?"translate("+n+"px, 0)":"translate(0,"+t+"px)",this.indicatorStyle[r.style.transform]=e+this.scroller.translateZ},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var n=e?250:500,i=e?0:300;e=e?"1":"0",this.wrapperStyle[r.style.transitionDuration]=n+"ms",this.fadeTimeout=setTimeout($.proxy(function(e){this.wrapperStyle.opacity=e,this.visible=+e},this),i)}}},e.utils=r,e}),define("cUIScrollRadioList",["cBase","cUILayer","cUIScroll"],function(e,t,n){var r={},i={prefix:"cui-"},s={};s["class"]=i.prefix+"warning",s.onCreate=function(){this.root.html(['<div class="cui-pop-box" lazyTap="true">','<div class="cui-hd"><div class="cui-text-center">'+this.title+"</div></div>",'<div class="cui-bd cui-roller-bd" style="overflow: hidden; position: relative; ">',"</div>","</div>"].join("")),this.title=this.root.find(".cui-text-center"),this.content=this.root.find(".cui-bd")},s.onShow=function(){var e=this;this.maskToHide(function(){e.hide()});var t=$('<ul class="cui-select-view " style="position: absolute; width: 100%; "></ul>');this.dataK={};for(var r in this.data){_data=this.data[r],_data.index=r,"undefined"==typeof _data.key&&(_data.key=_data.id),"undefined"==typeof _data.val&&(_data.val=_data.name);var i=_data.val||_data.key,s=$("<li>"+i+"</li>");s.attr("data-index",r),"undefined"!=typeof _data.disabled&&0==_data.disabled&&s.css("color","gray"),r==this.index&&s.addClass("current"),this.dataK[_data.key]=_data,t.append(s)}this.content.append(t);var o=this.data.length;this.disItemNum>o&&(this.disItemNum=o);var u=t.height()/o,a=u*this.disItemNum;this.content.css("height",a),this.scroll=new n({wrapper:this.content,scroller:t});var f=this.index;this.key&&(f=this.dataK[this.key].index),o-f<this.disItemNum&&(f=o-this.disItemNum);var l=u*f*-1;this.scroll.scrollTo(0,l);var e=this;t.on("click",$.proxy(function(t){var n=$(t.target);if(n&&null!==n.attr("data-index")){var r=this.data[n.attr("data-index")];this.itemClick.call(e,r),this.hide()}},this)),this.scroller=t,this.setzIndexTop(),this.root.bind("touchmove",function(e){e.preventDefault()}),this.onHashChange=function(){this.hide()},$(window).on("hashchange",$.proxy(this.onHashChange,this))},s.onHide=function(){this.scroll.destroy(),this.root.unbind("touchmove"),this.root.remove(),$(window).off("hashchange",$.proxy(this.onHashChange,this)),this.scroller&&this.scroller.off("click")},r.__propertys__=function(){this.title,this.content,this.itemClick=function(){},this.scroll=null,this.data=[],this.index=-1,this.key=null,this.disItemNum=5},r.initialize=function($super,e){this.setOption(function(e,t){this[e]=t}),$super($.extend(s,e))};var o=new e.Class(t,r);return o}),define("cUIEventListener",["libs","cBase"],function(e,t){var n={};return n.__propertys__=function(){this.__events__={}},n.initialize=function(){},n.addEvent=function(e,t){if(!e||!t)throw"addEvent Parameter is not complete!";var n=this.__events__[e]||[];n.push(t),this.__events__[e]=n},n.removeEvent=function(e,t){if(!e)throw"removeEvent parameters must be at least specify the type!";var n=this.__events__[e];if(n)if(t)for(var r=Math.max(n.length-1,0);r>=0;r--)n[r]===t&&n.splice(r,1);else delete n[e]},n.trigger=function(e,t,n){var r=this.__events__[e];if(r)for(var i=0,s=r.length;s>i;i++)"function"==typeof r[i]&&r[i].apply(n||this,t)},new t.Class(n)}),define("cUISwitch",["cBase","cUIAbstractView"],function(e,t){var n={};return n.__propertys__=function(){this.mouseData={sX:0,eX:0,sY:0,eY:0},this.checkedFlag=!1},n.initialize=function($super,e){this.bindEvent(),this.allowsConfig.changed=!0,this.checkedFlag=e.checked,$super(e),this.show()},n.bindEvent=function(){this.addEvent("onShow",function(){this.el=this.root.find(".cui-switch"),this.switchBar=this.el.find(".cui-switch-bg"),$.flip(this.root,"left",$.proxy(function(){this.unChecked()},this)),$.flip(this.root,"right",$.proxy(function(){this.checked()},this)),$.flip(this.root,"tap",$.proxy(function(){this.el.hasClass("current")?this.unChecked():this.checked()},this))}),this.addEvent("onHide",function(){$.flipDestroy(this.el),this.root.remove()})},n.createHtml=function(){var e=this.checkedFlag?"current":"";return['<div class="cui-switch '+e+'">','<div class="cui-switch-bg '+e+'"></div>','<div class="cui-switch-scroll"></div>',"</div>"].join("")},n._getLRDir=function(){return this.mouseData.eX-this.mouseData.sX>0?"right":this.mouseData.eX-this.mouseData.sX<0?"left":void 0},n.unChecked=function(){this.getStatus()&&(this.el.removeClass("current"),this.switchBar.removeClass("current"),this._triggerChanged())},n.checked=function(){this.getStatus()||(this.el.addClass("current"),this.switchBar.addClass("current"),this._triggerChanged())},n._triggerChanged=function(){"function"==typeof this.changed&&this.changed.call(this)},n.getStatus=function(){return this.el.hasClass("current")},n.setStatus=function(e){e?(this.el.addClass("current"),this.switchBar.addClass("current")):(this.el.removeClass("current"),this.switchBar.removeClass("current"))},new e.Class(t,n)}),define("cUINum",["cBase","cUIAbstractView"],function(e,t){var n={};return n.__propertys__=function(){this.min=1,this.max=9,this.curNum=1,this.needText=!0,this.addClass="num-add",this.minusClass="num-minus",this.curClass="num-value-txt",this.invalid="num-invalid",this.minAble=!0,this.maxAble=!0,this.unit="",this.minDom=null,this.maxDom=null,this.curDom=null,this.hasBindEvent=!1,this.changed=function(){},this.changeAble=function(){}},n.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.bindEvent(),this.show()},n.bindEvent=function(){this.addEvent("onHide",function(){this.root.off("click"),this.curDom.off("focus"),this.curDom.off("blur"),this.root.remove()}),this.addEvent("onShow",function(){this.maxDom=this.root.find("."+this.addClass),this.minDom=this.root.find("."+this.minusClass),this.curDom=this.root.find("."+this.curClass),this.resetNum(),0==this.needText&&this.curDom.attr("disabled","disabled"),0==this.hasBindEvent&&(this.root.on("click",$.proxy(function(e){var t=$(e.target);t.hasClass(this.curClass)||(t.hasClass(this.addClass)&&this.maxAble&&this.setVal(this.curNum+1),t.hasClass(this.minusClass)&&this.minAble&&this.setVal(this.curNum-1),e.preventDefault())},this)),this.needText&&(this.curDom.on("focus",$.proxy(function(){this.curDom.val("")},this)),this.curDom.on("blur",$.proxy(function(){this.setVal(this.curDom.val())},this))),this.hasBindEvent=!0)})},n.resetNum=function(e){this.curDom.attr("data-key",this.curNum),this.curDom.val(this.getText()),"function"!=typeof this.changed||e||this.changed.call(this,this.curNum),this.testValid()},n.getVal=function(){return this.curNum},n.setVal=function(e){if("function"==typeof this.changeAble&&0==this.changeAble.call(this,e))return this.resetNum(!0),!1;var t=!0;e==parseInt(e)&&(t=this.curNum==e,e=parseInt(e),this.curNum=e,e<this.min&&(this.curNum=this.min),e>this.max&&(this.curNum=this.max)),this.resetNum(t)},n.testValid=function(){this.curNum==this.min?(this.deactiveItem(this.minDom),this.minAble=!1):0==this.minAble&&(this.acticeItem(this.minDom),this.minAble=!0),this.curNum==this.max?(this.deactiveItem(this.maxDom),this.maxAble=!1):0==this.maxAble&&(this.acticeItem(this.maxDom),this.maxAble=!0)},n.deactiveItem=function(e){e&&e.addClass(this.invalid)},n.acticeItem=function(e){e&&e.removeClass(this.invalid)},n.getText=function(){return this.curNum+this.unit},n.createHtml=function(){return['<span class="cui-number-ma">','<i class="'+this.minusClass+'"></i>','<input type="tel"  class="'+this.curClass+'" >','<i class="'+this.addClass+'"></i>',"</span>"].join("")},new e.Class(t,n)}),define("cUIGroupList",["cBase","cUIAbstractView"],function(e,t){var n={};return n.__propertys__=function(){this.data=[],this.needFold=!1,this.foldAll=!1,this.unFoldOne=!1,this.selectedKey=null,this.el=null,this.filter="",this.click=function(){},this.OnClick=function(){},this.isCreated=!1,this.itemTemplate=!1},n.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.paramFormat(),this.bindEvent(),this.show()},n.paramFormat=function(){var e=this.filter&&this.filter.split(",");"object"!=typeof e&&(e={}),this.filter=e},n.bindEvent=function(){this.addEvent("onShow",function(){this.isCreated||(this.isCreated=!0,this.init(),this.root.on("click",$.proxy(function(e){for(var t=$(e.target),n=!1;;){if(t.attr("id")==this.id)break;if("c"==t.attr("data-flag")){n=!0;break}t=t.parent()}if(n)return void this.setSelected(t.attr("data-key"));if(0!=this.needFold&&t.hasClass("cui-city-t")){var r=t.parent();r.hasClass("cui-arrow-close")?(this.unFoldOne&&this.root.find(".cui-city-itmes > li").attr("class","cui-arrow-close"),r.attr("class","cui-arrow-open")):(this.unFoldOne&&this.root.find(".cui-city-itmes > li").attr("class","cui-arrow-close"),r.attr("class","cui-arrow-close"))}},this)))})},n.destroy=function(){this.root.off("click"),this.root.remove()},n.init=function(){1==this.foldAll&&(this.needFold=!0),this.tmpt=_.template(['<ul class="cui-city-itmes">',"<%for(var i = 0, len = data.length; i < len; i++) { %>",'<li data-groupindex="<%=i%>" data-key="<%=data[i].id %>"  '+(this.needFold?'<%if(foldAll && ((typeof data[i].unFold == "undefined") || data[i].unFold != true)) {%> class="cui-arrow-close" <%} else {%> class="cui-arrow-open" <%}%>':"")+">",'<span class="cui-city-t" ><%=data[i].name %></span>',"<%var item = data[i].data; %>",'<ul class="cui-city-n">',"<%for(var j = 0, len1 = item.length; j < len1; j++) { %>","<% var itemData = item[j]; %>",'<% var _f = ""; for(var k in filter) { _f += (itemData[filter[k]] ? itemData[filter[k]] : "").toLowerCase() + " ";  } %>','<li data-skey="item_<%=itemData.id%>" '+("undefined"!=typeof this.groupFlag?'data-groupflag="'+this.groupFlag+'"':"")+' data-filter="<%=_f%>" data-key="<%=itemData.id%>" data-index="<%=i%>,<%=j%>" data-flag="c" <%if(itemData.id == selectedKey){%> class="current" <%}%> > '+(this.itemTemplate?this.itemTemplate:"<%=itemData.name %>")+" </li>","<%} %>","</ul>","</li>","<%} %>","</ul>"].join(""));var e=this.tmpt({data:this.data,foldAll:this.foldAll,selectedKey:this.selectedKey,filter:this.filter});this.root.html(e)},n.updateItem=function(){},n.updateGroup=function(e,t){var n=this.data[e];if(n){this.data[e]=t;var r=this.root.find('li[data-groupindex="'+e+'"]');this.tmpt=_.template(['<li data-groupindex="<%=i%>" data-key="<%=data.id %>"  '+(this.needFold?'<%if(foldAll && ((typeof data.unFold == "undefined") || data.unFold != true)) {%> class="cui-arrow-close" <%} else {%> class="cui-arrow-open" <%}%>':"")+">",'<span class="cui-city-t" ><%=data.name %></span>',"<%var item = data.data; %>",'<ul class="cui-city-n">',"<%for(var j = 0, len1 = item.length; j < len1; j++) { %>",'<% var _f = ""; for(var k in filter) { _f += (item[j][filter[k]] ? item[j][filter[k]] : "").toLowerCase() + " ";  } %>','<li data-skey="item_<%=item[j].id%>" '+("undefined"!=typeof this.groupFlag?'data-groupflag="'+this.groupFlag+'"':"")+' data-filter="<%=_f%>" data-key="<%=item[j].id%>" data-index="<%=i%>,<%=j%>" data-flag="c" <%if(item[j].id == selectedKey){%> class="current" <%}%> ><%=item[j].name %></li>',"<%} %>","</ul>","</li>"].join(""));var i=this.tmpt({data:t,foldAll:this.foldAll,selectedKey:this.selectedKey,filter:this.filter,i:e}),s=$(i);r.before(s),r.remove()}},n.reload=function(e){e&&(this.data=e),this.root.html(""),this.init()},n.setSelected=function(e,t){this.selectedKey=e;var n=this.getSelected();this.root.find(".cui-city-n li").removeClass("current"),this.el.addClass("current"),"function"==typeof this.onClick&&this.onClick.call(this,n),"function"!=typeof this.click||t||this.click.call(this,n)},n.getSelected=function(){if(this.el=this.root.find('li[data-skey="item_'+(this.selectedKey||"")+'"]'),"string"!=typeof this.el.attr("data-index"))return null;var e=this.el.attr("data-index").split(",");return 2!=e.length?null:this.data[parseInt(e[0])].data[parseInt(e[1])]},n.createHtml=function(){return""},new e.Class(t,n)}),define("cUIBusinessGroupList",["cBase","cUIAbstractView","cUIGroupList"],function(e,t,n){var r={};return r.__propertys__=function(){this.needTab=!0,this.groupIndex=0,this.groupObj=[],this.isCreated=!1,this.selectedKey=null,this.CLICK_RES=null,this.filter="",this.needFold=!1,this.foldAll=!1,this.unFoldOne=!1,this.showFnBtn=!1,this.fnBtnTxt="清除历史记录",this.fnBtnCallback=function(){},this.itemTemplate=!1,this.isAjax=!1,this.ajaxCallBack=function(){},this.lastKeyword="",this.ajaxData=[]},r.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.isAjax&&(this.needFold=!1,this.foldAll=!1,this.filter="",this.needTab=!1),this.bindEvent(),this.show()},r.bindEvent=function(){this.addEvent("onHide",function(){this.destroyItemInstance(),this.unBindTabEvent(),this.unBindSeachEvent(),this.unBindSeachItemEvent(),this.unBindCancelEvent(),this.unBindFnBtn(),this.root.remove()}),this.addEvent("onShow",function(){this.isCreated||(this.isCreated=!0,this.init(),this.bindTabEvent(),this.bindSeachEvent(),this.bindSeachItemEvent(),this.bindCancelEvent(),this.bindFnBtn())})},r.bindFnBtn=function(){this.showFnBtn&&this.root.find(".cui-btn-history").on("click",$.proxy(function(){this.fnBtnCallback.call(this)},this))},r.unBindFnBtn=function(){this.showFnBtn&&this.root.find(".cui-btn-history").off("click")},r.destroyItemInstance=function(){for(var e=0,t=this.groupObj.length;t>e;e++)this.groupObj[e].instance.destroy()},r.unBindTabEvent=function(){var e=this.tabWrapper.find("li");e.off("click")},r.bindTabEvent=function(){var e=this.tabWrapper.find("li");e.on("click",$.proxy(function(t){var n=$(t.target);e.removeClass("cui-tab-current"),n.addClass("cui-tab-current");var r=n.attr("data-index");this.groupObj[this.groupIndex].instance.hide(),this.groupObj[this.groupIndex].instance.selectedKey&&(this.selectedKey=this.groupObj[this.groupIndex].instance.selectedKey),this.selectedKey&&this.groupObj[r].instance.setSelected(this.selectedKey,!0),this.groupObj[r].instance.show(),this.groupIndex=r},this))},r.getSelected=function(){return this.selectedKey},r.unBindSeachEvent=function(){this.searchBox.off("focus")},r.bindSeachEvent=function(){this.searchBox.on("focus",$.proxy(function(){this.openSeach()},this))},r.unBindSeachItemEvent=function(){this.seachList.off("click")},r.bindSeachItemEvent=function(){this.seachList.on("click",$.proxy(function(e){for(var t=$(e.target),n=!1;;){if(t.hasClass("seach-list"))break;if("c"==t.attr("data-flag")){n=!0;break}t=t.parent()}return this.isAjax?void ("function"==typeof this.click&&(this.click.call(this,this.ajaxData[t.attr("data-index")]),this.closeSeach())):(this.groupIndex=t.attr("data-groupflag"),this.selectedKey=t.attr("data-key"),this.groupObj[this.groupIndex].instance.setSelected(this.selectedKey),void this.closeSeach())},this))},r.unBindCancelEvent=function(){this.cancel.off("click")},r.bindCancelEvent=function(){this.cancel.on("click",$.proxy(function(){this.closeSeach()},this))},r.openSeach=function(){this.CLICK_RES||(this.CLICK_RES=setInterval($.proxy(function(){("INPUT"!=document.activeElement.nodeName||"text"!=document.activeElement.type)&&this.CLICK_RES&&(clearInterval(this.CLICK_RES),this.CLICK_RES=null);var e=this.searchBox.val().toLowerCase();if(""==e)return void setTimeout($.proxy(function(){("INPUT"!=document.activeElement.nodeName||"text"!=document.activeElement.type)&&this.closeSeach()},this),500);if(this.lastKeyword==e)return!0;if(this.lastKeyword=e,this.wrapper.addClass("cui-input-focus"),this.root.find(".cui-btn-history").hide(),this.listWrapper.hide(),this.tabWrapper.hide(),this.seachList.show(),this.seachList.html(""),this.noData.hide(),this.isAjax)return this.ajaxCallBack.call(this,e),void (this.LOADINGSRC=setTimeout($.proxy(function(){this.loading.show()},this),200));for(var t=this.listWrapper.find('li[data-filter*="'+e+'"]'),n=[],r=0,i=t.length;i>r;r++){var s=!1;for(var o in n)if($(n[o]).attr("data-key")==$(t[r]).attr("data-key")){s=!0;break}0==s&&n.push(t[r])}return 0==n.length?void this.noData.show():void this.seachList.append($(n).clone(!0))},this),500))},r.ajaxDataHandle=function(e){this.ajaxData=e;var t=["<% for(var i = 0, len = data.length; i < len; i++ ){ %>","<% itemData = data[i]; %>",'<li data-key="<%=itemData.id%>" data-index="<%=i%>" data-flag="c" '+(this.itemTemplate?this.itemTemplate:"<%=itemData.name %>")+" </li>","<% } %>"].join(""),n=_.template(t)({data:e});this.LOADINGSRC&&clearTimeout(this.LOADINGSRC),this.loading.hide(),this.seachList.html(n)},r.closeSeach=function(){this.CLICK_RES&&(clearInterval(this.CLICK_RES),this.CLICK_RES=null),this.wrapper.removeClass("cui-input-focus"),this.noData.hide(),this.searchBox.val(""),this.needTab&&this.tabWrapper.show(),this.seachList.hide(),this.listWrapper.show(),this.lastKeyword="",this.root.find(".cui-btn-history").show()},r.init=function(){this.tabWrapper=this.root.find(".cui-tab-mod"),this.tabBar=this.tabWrapper.find(".cui-tab-scrollbar"),this.noData=this.root.find(".cui-city-novalue"),this.wrapper=this.root.find(".cui-citys-hd"),this.listWrapper=this.root.find(".cui-citys-bd"),this.searchBox=this.root.find(".cui-input-box"),this.seachList=this.root.find(".seach-list"),this.cancel=this.root.find(".cui-btn-cancle"),this.loading=this.root.find(".cui-pro-load"),this.initTab(),this.initGroupList(),this.bindEvent()},r.initTab=function(){for(var e=0,t=this.groupObj.length;t>e;e++){var n='<li data-index="'+e+'" '+(e==this.groupIndex?'class="cui-tab-current"':"")+" >"+this.groupObj[e].name+"</li>";this.tabBar.before(n)}},r.initGroupList=function(){for(var e=this,t=0,r=this.groupObj.length;r>t;t++){var i=this.groupObj[t].data;this.groupObj[t].instance=new n({rootBox:this.listWrapper,data:i,filter:this.filter,click:this.click,foldAll:this.foldAll,needFold:this.needFold,itemTemplate:this.itemTemplate,unFoldOne:this.unFoldOne,groupFlag:t,onClick:function(){e.selectedKey=this.selectedKey}}),this.groupObj[t].instance.hide()}this.groupObj[this.groupIndex].instance.show(),this.groupObj[this.groupIndex].instance.setSelected(this.selectedKey,!0)},r.reload=function(e){e&&(this.groupObj=e),this.destroyItemInstance(),this.listWrapper.empty(),this.initGroupList()},r.updateTab=function(){},r.updateTabGroup=function(){},r.updateAllTabGroup=function(e,t){for(var n=0,r=this.groupObj.length;r>n;n++)this.groupObj[n].instance.updateGroup(e,t)},r.updateTabGroupItem=function(){},r.createHtml=function(){return['<section class="cui-citys-hd ">','<div class="cui-input-bd">','<input type="text" class="cui-input-box" placeholder="中文/拼音/首字母">','<span class="cui-pro-load" style="display: none;">','<span class="cui-pro-radius"></span>','<span class="cui-i cui-pro-logo"></span>',"</span>","</div>",'<button type="button" class="cui-btn-cancle">',"取消</button>","</section>",'<p class="cui-city-novalue" style="display: none;">没有结果</p>','<ul class="cui-tab-mod" '+(this.needTab?"":'style="display: none"')+" >",'<i class="cui-tab-scrollbar cui-tabnum'+this.groupObj.length+'"></i>',"</ul>",'<ul class="cui-city-associate seach-list"></ul>','<section  class="cui-citys-bd">',"</section>",this.showFnBtn?'<button type="button" class="cui-btn-history" >'+this.fnBtnTxt+"</button>":""].join("")},new e.Class(t,r)}),define("cUITab",["cBase","cUIAbstractView"],function(e,t){var n={};return n.__propertys__=function(){this.selectedKey=null,this.data=[],this.changed=function(){},this.changeAble=function(){},this.curEl=null},n.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.bindEvent(),this.show()},n.bindEvent=function(){this.addEvent("onShow",function(){this.init(),this.root.on("click",$.proxy(function(e){var t=$(e.target);"li"==t[0].tagName.toLowerCase()&&this.setVal(t.attr("data-key"))},this))}),this.addEvent("onHide",function(){this.root.off("click"),this.root.remove()})},n.getVal=function(){return this.selectedKey},n.setVal=function(e){this.curEl=this.root.find('li[data-key="'+e+'"]');var t=this.curEl.attr("data-index"),n=this.data[t];if("function"==typeof this.changeAble&&0==this.changeAble.call(this,n))return!1;if(!n)return void 0;this._tab=this.root.find(".cui-tab-scrollbar");var r=this.selectedKey==e;if(this.selectedKey=e,this.tabs.removeClass("cui-tab-current"),this.curEl&&this.curEl.addClass("cui-tab-current"),navigator.userAgent.toLowerCase().indexOf("android")>-1){var i=this._tab.css("width");setTimeout($.proxy(function(){this._tab.css("width",i)},this),0)}0==r&&"function"==typeof this.changed&&this.changed.call(this,n)},n.setIndex=function(e){0>e||e>this.data.length-1||this.setVal(this.data[e].id)},n.getIndex=function(){for(var e=0,t=this.data.length;t>e;e++)if(this.getVal()==this.data[e].id)return e;return-1},n.init=function(){this.tmpt=_.template(['<ul class="cui-tab-mod">',"<%for(var i = 0, len = data.length; i < len; i++) { %>",'<li data-key="<%=data[i].id %>" data-index="<%=i%>" <% if(data[i].id == selectedKey) { %>class="cui-tab-current"<%} %> ><%=data[i].name %></li>',"<%} %>",'<i class="cui-tab-scrollbar cui-tabnum<%=len %>"></i>',"</ul>"].join(""));var e=this.tmpt({data:this.data,selectedKey:this.selectedKey});this.root.html(e),this.tabs=this.root.find("li"),this.curEl=this.root.find(".cui-tab-current")},n.createHtml=function(){return""},new e.Class(t,n)}),define("cUIImageSlider",["cBase","cUIBase","libs"],function(e,t){return new e.Class({__propertys__:function(){this.ENUM={DIR:{LEFT:"LEFT",RIGHT:"RIGHT"}},this.images=[],this.autoPlay=!0,this.index=0,this.delay=3e3,this.dir=this.ENUM.DIR.LEFT,this.errorImage="",this.lodingImage="",this.onChange,this.onImageClick,this.container,this.onChanged,this.scope,this.showNav=!0,this.autoHeight=!1,this.defaultImageUrl,this.defaultHeight,this.imageSize,this.loop=!1,this.errorImageUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v7+/v7+/v729vYAAADt7e3+/v6PQhf9AAAADnRSTlOtVTOIZpki1+wRd0TCAMJ8iPYAAAKfSURBVHjaxZWLjqMwDEXJO7FN7v//7WITOgQ6pVpptbdSecTxiW3iLOt/0g3cirj3po1ZL5lcuw8Sud8QgegJbALy+laMZb/UdY2n9Xj9F/wKFnwLXu/KRiSLG7ISwk+s6Fm9n9PgZUjNKvJ34LLeRThECl4L4ssDyMKak7NLTRvKc41z28Bia15dEVWxwkYiShAicgb26QiwAY6ZC1gV4wCTXdXUjey09gFMOCSvVSv46u2kiEnyMm3DNGGIP4GLCLpIgQyOmD266MsqKnuQPnJbkWhTBalSeIEFycAdZi3in2osOjHM4CqmO5i0gvcaG9ipr4gyDT+BaQKbUom3VLc6xqXewaymBfQdOOu3QFew14HSbGPVLYRCediPBHZ5D2b0bOt6BBvvBsZLoqtvGIEGCWRCJVOQOIEFVpMqfwleaEFajLImNId0dKWb6AXWqrQg8NvN8ggmJRHcBNZiJu1OwyIclY8UWZUAxyoinsBqHtcMegSnHcwzOJfKXODUrwfVa8lq7z+uZ7Dboo3gR3CB0q/gcs5kB+I8KSKlnmdwrTu4AXnpj706j213ATvtlQU8knIJ2HdkRjmfoLkplL0ikJAewYTwDnw0icxRbeRyhCPoaGpTEiiGdpwY+RFcDSSbJVu76vacmYlS31PN1nfpRfHVdnjuqPHcWfS919ttoD2BCXWcyRPYYVcgzr533ki1DwLBuJZw9ERsD0mPCUH3+nr7xc9ghu4jEvT18nGFyHvfcx3eTjGbyaEDMuLJgvG+JRTz3pmA1ApQQ/4d3KpOaxraRhhgd65xC0C0gOyiHs/7iBcrZ65HElKFuQkAPp1OLTUFiNoysU7lfKr/usa6L4TS0Vfm8uVoo8q17Y/KdseyXFP9T9VOn9s88gcLTIlzurC4gAAAAABJRU5ErkJggg==",this.loadImageUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v729vb+/v4AAADt7e3+/v6c4gmbAAAADnRSTlOtM4hmVZkiEdfsRMJ3AHDRYrYAAAGwSURBVHjaxdbZktsgEAVQLSxNL9z//9vQgvFYUjKpkqnkPhgJbI4bJMuL/af8DGeS8IcRZm+Shnwb21U/hQ1Ivx9gLL0pDbqMKbYJsN2TDlGPuiF3RzGhYrJ7FF9Rh42wT4VTbrD40WqBxEM89lAjpL2GA15j7h/gdIIzp0fwd2FijB62ER6TO/zdd40+g0kEVYQgw5EDbn3eWcRznEhFh6t4yhgrz+BXQYztDBfpucNyWmr9GNYTfCTSflrqyXDyO0Wv8OoDlH3cCpmRptmwe3cYr0jrsgzwv4EXXRAX2VTVInJAnL7UCvaXcNnjXGI7zuMdG/gLLuoRSG+fw7HDfIYTFWZCUGVboaXMvY89BNevML1PXIH9BRN7ImJvH8MJ5NwVDqqBCTwWpdjIftnjXfaHsGK7wyMCS9wmVtdmP50K+CCS8fFzVY/zxKwaa19qBlqn5qmwooxn8gkO6NmU01org3KpM2GG30cqqHa5uLad27F/h4q1OcAyEc7Fp8teWhMGHN73OG/9io7evGX78K9PjtkBcZLVa105ve2/2V5CLzHaewTyAJ6QlVf7a34BIRiNTVIrVfEAAAAASUVORK5CYII=",this._loadingNode,this._errorNode,this._isloadingImage=!1,this._pfix="slider",this._changing=!1,this._containerNode,this._rootNode,this._imageNode,this._navNode,this._imageLoaderNode,this._handerStartPos={x:0,y:0},this._moveValue=50,this._imageCount=0,this._played=!1,this._size={height:0,width:0},this._lastSize={height:0,width:0},this._displayImage,this._nextImage,this._loadingImage=new Image,this._changeCompletedEvents=[],this._autoPlayTimeout,this._loadMsg="加载中...",this.firstLoad=!0,this._defaultSize={width:0,height:0},this._loadingImage=new Image,this._errorImage=new Image},initialize:function(e){for(var t in e)switch(t){case"images":case"autoPlay":case"delay":case"dir":case"index":case"onChange":case"autoPlay":case"onImageClick":case"scope":case"onChanged":case"errorImageUrl":case"loadImageUrl":case"loop":case"showNav":case"defaultImageUrl":case"defaultHeight":case"imageSize":this[t]=e[t];break;case"container":this._containerNode="string"==typeof e[t]?$(e[t]):e[t],this[t]=e[t]}this._validArgs(),this._correctArgs(),this._imageCount=this.images.length,this._loadingImage.src=this.loadImageUrl,this._errorImage.src=this.errorImageUrl,this.autoHeight=this.imageSize&&this.imageSize.width&&this.imageSize.height?!1:!0},play:function(){this._played||(this._played=!0,this._injectHTML(),this._bindEvents()),this.rePlay()},stop:function(){this._clearAutoPlay()},rePlay:function(){this.autoPlay&&this._autoPlay()},_autoPlay:function(){this._autoPlayTimeout=setTimeout($.proxy(function(){this._isloadingImage||this._play()},this),this.delay)},next:function(){this._changing||this._play()},pre:function(){if(!this._changing){if(this.dir===this.ENUM.DIR.RIGHT)if(this.index>=this._imageCount-1){if(!this.loop)return;this.index=0}else this.index++;else if(this.index<=0){if(!this.loop)return;this.index=this._imageCount-1}else this.index--;this.goto(this.index)}},"goto":function(e){this.index=e,this._changeImage()},_play:function(){this.dir===this.ENUM.DIR.RIGHT?this._imageToRight():this._imageToLeft()},_clearAutoPlay:function(){clearTimeout(this._autoPlayTimeout)},_validArgs:function(){if(!this.container||!this._containerNode)throw"[c.widget.imageSlider]:no container!"},_correctArgs:function(){this.delay<=500&&(this.delay=2e3)},_createHTML:function(){return['<div class="cui-sliderContainer" style="width:100%;position:relative;">','<div class="cui-imageContainer" style="width:100%;">',"</div>",'<div class="cui-navContainer" style="color:#1491c5;position:absolute;"></div>','<div class="cui-imageLoader">',"</div>"].join("")},_createNav:function(){for(var e=[],t=0;t<this._imageCount;t++){var n=t==this.index?"cui-slide-nav-item-current":"";e.push('<span class="cui-slide-nav-item '+n+'"></span>')}this._navNode.empty().html(e.join(" "))},_injectHTML:function(){this._rootNode=$(this._createHTML()),this._containerNode.html(this._rootNode),this._imageNode=this._rootNode.find(".cui-imageContainer"),this._navNode=this._rootNode.find(".cui-navContainer"),this.showNav||this._navNode.css("display","none"),this._imageNode.empty(),this._createLoading(),this._imageCount>0?this._createImageItem(this.index,$.proxy(function(e,t){this._createNav(),this._setSize(t.height,t.width),this._setLoadingPos(),this._displayImage=e,this._createImageContainer()},this)):(this._createDefault(),this._loadingNode.css("display","none"))},_onImageClick:function(){var e=this.images[this.index];return e&&e.onClick?void e.onClick.call(this.scope||this,e):void (this.onImageClick&&this.onImageClick.call(this.scope||this))},_createImageItem:function(e,t){this._isloadingImage=!0,!e&&(e=0);var n=this._getImageInfo(e),r=new Image;n.src=n.src||this.defaultImageUrl,n.src&&(r.src=n.src),n.alt&&(r.alt=n.alt);var i=this;r.onload=function(){n.orgImage=r,i.autoHeight||(i._defaultSize.width=r.width,i._defaultSize.height=r.height),i._isloadingImage=!1,t.call(i,n,r)},r.onerror=function(){n.loadError=!0,i._errorImage=new Image,i._errorImage.src=i.errorImageUrl,i._isloadingImage=!1,i._errorImage.onload=function(){n.orgImage=i._errorImage,t.call(i,n,i._errorImage)}}},_getImageInfo:function(e){!e&&(e=0);for(var t=0,n=this.images.length;n>t;t++)if(e===t)return this.images[t];throw new Error("[c.ui.imageSlider]:image index is "+e+",but images.length is "+n)},_bindEvents:function(){this._containerNode.bind("touchmove",$.proxy(this._touchmove,this)),this._containerNode.bind("touchstart",$.proxy(this._touchstart,this)),this._containerNode.bind("touchend",$.proxy(this._touchend,this)),$(window).on("resize",$.proxy(this._resize,this)),this._navNode.bind("click",$.proxy(this._switchImage,this)),this._imageNode.bind("click",$.proxy(this._onImageClick,this))},_switchImage:function(e){var t=e.targetElement||e.srcElement,n=$(t).data("index");(0===n||n)&&this.index!==+n&&(this.index=n,this._changeImage())},_imageToRight:function(){if(this.index<=0){if(!this.loop)return;this.index=this._imageCount-1}else this.index--;this._changeImage(this.ENUM.DIR.LEFT)},_imageToLeft:function(){if(this.index>=this._imageCount-1){if(!this.loop)return;this.index=0}else this.index++;this._changeImage(this.ENUM.DIR.RIGHT)},_changeImage:function(e){if(!(this._imageCount<=1)){this._clearAutoPlay(),this._changing=!0,!e&&(e=this.dir);var t=this.images[this.index];t.node?(this._nextImage=t,this._showSliderImage(e)):(this._nextImage={node:this._loadingNode,orgImage:this._loadingImage},this._showLoading(),this._createImageItem(this.index,$.proxy(function(t){this._createImageContainer(),this._nextImage=t,this._showSliderImage(e)},this)))}},_showSliderImage:function(e){var t=0,n=0,r=0,i=0;e===this.ENUM.DIR.LEFT?(t=-1*this._size.width,n=0,r=0,i=this._size.width):(t=this._size.width,n=0,r=0,i=-1*this._size.width),this._displayImage.node.css("left",n),this._nextImage.node.css("left",t).css("display",""),this._nextImage.node.animate({left:r},500,"ease-out",$.proxy(function(){this._changing=!1,this._changeCompeted(),this.rePlay()},this)),this._displayImage.node.animate({left:i},500,"ease-out",$.proxy(function(){this._displayImage.node.css("display","none").css("left",0),this._displayImage=this._nextImage},this))},_touchmove:function(e){if(!this._isMoved){var n=t.getMousePosOfElement(e.targetTouches[0],e.currentTarget);if(!this._isMovedChecked){var r=Math.abs(n.x-this._handerStartPos.x),i=Math.abs(n.y-this._handerStartPos.y);if(i>r)return void (this._isMoved=!0)}if(this._isMovedChecked=!0,e.preventDefault(),!this._changing){var s=n.x-this._handerStartPos.x;s>0&&s>this._moveValue?this._imageToRight():0>s&&Math.abs(s)>this._moveValue&&this._imageToLeft()}}},_touchstart:function(e){this._isMoved=!1,this._isMovedChecked=!1;var n=t.getMousePosOfElement(e.targetTouches[0],e.currentTarget);this._handerStartPos={x:n.x,y:n.y}},_touchend:function(e){e.preventDefault()},_setSize:function(e,t){this._size.width=Math.ceil($(document.body).width()),this._size.height=Math.ceil(e*(this._size.width/t)),this._size.height<100&&(this._size.height=100,this._size.width=t*(this._size.height/e)),this._rootNode.css("width",this._size.width).css("height",this._size.height),this._imageNode.find("div").find("img").css("width",this._size.width).css("height",this._size.height),this.showNav&&this._setNavPos()},_setNavPos:function(){var e=(this._size.width-20*this._imageCount)/2,t=this._size.height-30;this._navNode.css("left",e).css("top",t)},_resize:function(){this._lastSize.width=this._size.width,this._lastSize.height=this._size.height,this.imageSize&&this.imageSize.height&&this.imageSize.width?this._setSize(this.imageSize.height,this.imageSize.width):this._displayImage&&!this._displayImage.loadError&&this._setSize(this._displayImage.orgImage.height,this._displayImage.orgImage.width)},_changeCompeted:function(){for(var e in this._changeCompletedEvents)this._changeCompletedEvents[e]();this._changeCompletedEvents.length=0,this._changeNav(),this.autoHeight&&this._resize(),this.onChanged&&this.onChanged.call(this.scope||this,this.images[this.index],this.index)},_changeNav:function(){this.showNav&&(this._navNode.find("span").removeClass("cui-slide-nav-item-current"),$(this._navNode.find("span")[this.index]).addClass("cui-slide-nav-item-current"))},_createImageContainer:function(){var e=this.images[this.index];if(this._loadingNode.css("display","none"),!e.node)t.getElementPos(this._rootNode[0]).top-48,e.node=$(e.loadError?this._createImageHtml(this.errorImageUrl,e.alt):this._createImageHtml(e.src,e.alt)),this._imageNode.append(e.node),e.node.css("position","absolute").css("left",0),e.node.bind("click",function(e){e.preventDefault()});this.autoHeight&&this._resize()},_createLoading:function(){if(this.firstLoad){this._loadingNode=$(this._createImageHtml(this.loadImageUrl));var e=['<div class="cui-breaking-load">','<div class="cui-i cui-m-logo">','</div> <div class="cui-i cui-w-loading">',"</div></div>"];this._loadingNode.html(e.join(" ")).hide(),this.autoHeight||(this._resize(),this._setLoadingPos()),this._imageNode.append(this._loadingNode),this.firstLoad=!1}},_setLoadingPos:function(){if(this._loadingNode.css("position","absolute").css("height",this._size.height).css("width",this._size.width),this._size.height){var e=(this._size.height-70)/2;this._loadingNode.find(".cui-breaking-load").css("top",e)}},_showLoading:function(){this._loadingNode.css("display",""),this._setLoadingPos()},_createDefault:function(){if(this.defaultImageUrl){var e=new Image;e.src=this.defaultImageUrl;var t=this;e.onload=function(){var n=$(t._createImageHtml(t.defaultImageUrl));t._imageNode.append(n),t._displayImage=e,t.autoHeight?t._setSize(e.height,e.width):t._setSize(t.imageSize.height,t.imageSize.width)}}},_createImageHtml:function(e,t){return'<div class="image-node slider-imageContainerNode"><img style="width:'+this._size.width+"px;height:"+this._size.height+'px" src="'+e+'" alt="'+(t?t:"")+'"></div>'}})}),define("cUICore",["cHistory","cPageView","cDataSource","cUIBase","cUIAbstractView","cUIAlert","cUIAnimation","cUICitylist","cUIHeadWarning","cUIInputClear","cUILayer","cUILoading","cUILoadingLayer","cUIMask","cUIPageview","cUIScrollRadio","cUIScrollRadioList","cUIScrollList","cUIToast","cUIWarning","cUIWarning404","cUIHashObserve","cUIEventListener","cUISwitch","cUINum","cUIGroupList","cUIBusinessGroupList","cUITab","cUIImageSlider","cUIBubbleLayer"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A){var O={prefix:"cui-"},M={History:e,View:t,DataSource:n,Tools:r,config:O,AbstractView:i,Alert:s,Animation:o,CityList:u,HeadWarning:a,InputClear:f,Layer:l,Loading:c,LoadingLayer:h,Mask:p,PageView:d,ScrollRadio:v,ScrollRadioList:m,ScrollList:g,Toast:y,Warning:b,HashObserve:E,EventListener:S,cuiSwitch:x,cuiNum:T,cUIGroupList:N,cUIBusinessGroupList:C,cUITab:k,cUIImageSlider:L,cUIBubbleLayer:A};return M}),define("cUI",["cUICore"],function(e){return e}),define("cUtilityPerformance",[],function(){function e(){this.performance={},this.isapp=Lizard.isHybrid?"1":"0",this.defaults={Domready:{name:"JS.Lizard.Domready",tags:{}},Onload:{name:"JS.Lizard.Onload",tags:{}},AjaxReady:{name:"JS.Lizard.AjaxReady",tags:{url:""}},AjaxMessageSize:{name:"JS.Lizard.AjaxMessageSize",tags:{url:""}},TemplateRender:{name:"JS.Lizard.TemplateRender",tags:{url:""}},GeoRequest:{name:"JS.Lizard.GeoRequest",tags:{url:"",errno:"0"}}},this.uuid=0}return window.__bfi||(window.__bfi=[]),e.prototype={send:function(e,t,n,r){var i=["_trackMatrix",e,t,n,r];("JS.Lizard.GeoRequest"!=e||"string"==typeof t.url&&t.url.match(/^(Native|Web) function (number|detail|error)$/))&&window.__bfi.push(i)},getTime:function(){return(new Date).getTime()},initOptions:function(e){e.version=Lizard.version,e.isapp=this.isapp,e.network=Lizard.networkType||"unknown"},log:function(e,t){e.url&&_.isString(e.url)&&(e.url=e.url.replace(new RegExp((+(new Date)+"").slice(0,8)+"\\d{5}"),"__TIME__"));var n=this.defaults[e.name],r={};this.initOptions(r);for(var i in n.tags)r[i]=(e[i]||n.tags[i])+"";"AjaxMessageSize"!=e.name&&(r.distribution=this.distribution(t)),this.send(n.name,r,t,this.getTime())},group:function(e,t){t.startTime=this.getTime(),this.performance[e]=t},groupTag:function(e,t,n){var r=this.performance[e];return r||(this.performance[e]=r={}),3==arguments.length&&(r[t]=n),r[t]},groupEnd:function(e){var t=this.performance[e]||{};this.log(t,this.getTime()-t.startTime)},getUuid:function(){return"Performance_"+ ++this.uuid},distribution:function(e){var t="";return e>=0&500>=e?t="[0,500]":e>=501&1e3>=e?t="[501,1000]":e>=1001&2e3>=e?t="[1001,2000]":e>=2001&3e3>=e?t="[2001,3000]":e>=3001&4e3>=e?t="[3001,4000]":e>=4001&&(t="[4001,--]"),t+"(ms)"}},e}),define("cAjax",["libs","cUtilityPerformance"],function(e,t){var n=new t,r={json:"application/json",jsonp:"application/json"},i=function(e){return e&&(e=r[e]?r[e]:e),e},s=function(e){function t(e,t,n,r){var i=f(e,t,n,r);return i.type="GET",a(i)}function r(e,t,n,r,s){var o=t.contentType;t=JSON.stringify(t);var u=f(e,t,n,r);return u.type="POST",u.dataType="json",u.timeout=s||3e4,u.contentType=i(o)||"application/json",a(u)}function s(e,t,n,r,i){var s=f(e,t,n,r);return s.type="GET",s.dataType="jsonp",s.timeout=i,s.crossDomain=!0,a(s)}function o(e,t,n,r,s,o){var u=n.contentType;"get"!==t.toLowerCase()&&(n=JSON.stringify(n));var l=f(e,n,r,s);return l.type=t,l.dataType="json",l.crossDomain=!0,l.data=n,l.timeout=o,l.contentType=i(u)||"application/json",a(l)}function u(t,n,r,i){var s=null,o="";s=e("string"==typeof n?"#"+n:n),s&&s.length>0&&(o=s.serialize());var u=f(t,o,r,i);return a(u)}function a(t){var r=n.getUuid();n.group(r,{name:"AjaxReady",url:t.url,data:t.data});var i=0,s={url:t.url,type:t.type,dataType:t.dataType,data:t.data,contentType:t.contentType,timeout:Lizard.timeout||t.timeout||5e4,beforeSend:function(e){e.onprogress=function(e){i=e.loaded?e.loaded:e.position}},success:function(e){n.log({name:"AjaxMessageSize",url:t.url},i),n.groupEnd(r),t.callback(e)},error:function(e){n.groupEnd(r),t.error&&t.error(e)}};return-1===t.url.indexOf(window.location.host)&&(s.crossDomain=!!t.crossDomain),e.ajax(s)}function f(e,t,n,r){return{url:e,data:t,callback:n,error:r}}return{get:t,post:r,jsonp:s,cros:o,form:u}}($);return s}),define("cAbstractModel",["libs","cBase","cAjax"],function(e,t,n){var r=new t.Class({__propertys__:function(){this.url=null,this.param=null,this.dataformat=null,this.validates=[],this.debug=!1,this.protocol=window.location.protocol.indexOf("https")>-1?"https":"http",this.contentType=r.CONTENT_TYPE_JSON,this.method="POST",this.timeout="30000",this.ajax,this.isAbort=!1,this.onBeforeCompleteCallback=null},initialize:function(e){this.assert();for(var t in e)this[t]=e[t]},setAttr:function(e,t){this[e]=t},assert:function(){},pushValidates:function(e){"function"==typeof e&&this.validates.push($.proxy(e,this))},setParam:function(e,t){"object"!=typeof e||t?this.param[e]=t:this.param=e},getParam:function(){return this.param},buildurl:function(){throw"[ERROR]abstract method:buildurl, must be override"},execute:function(e,t,i,s,o){this.isAbort=!1;var u=this.buildurl(),a=this,f=$.proxy(function(n){if(this.validates&&this.validates.length>0)for(var r=0,s=this.validates.length;s>r;r++){var o=this.validates[r](n);if("boolean"==typeof o){if(!o)return"function"==typeof t?t.call(i||this,n):!1}else o&&o.overdue&&require(["cWidgetMember","cWidgetFactory"],function(e,t){e=t.create("Member"),e.memberLogin({param:"from="+encodeURIComponent(window.location.href)})})}var u="function"==typeof this.dataformat?this.dataformat(n):n;"function"==typeof this.onBeforeCompleteCallback&&this.onBeforeCompleteCallback(u),"function"==typeof e&&e.call(i||this,u,n)},this),l=$.proxy(function(e){return a.isAbort?(a.isAbort=!1,"function"==typeof s?s.call(i||this,e):!1):void ("function"==typeof t&&t.call(i||this,e))},this),o=o||_.clone(this.getParam()||{});return o.contentType=this.contentType,this.ajax=this.contentType===r.CONTENT_TYPE_JSON?n.cros(u,this.method,o,f,l,this.timeout):this.contentType===r.CONTENT_TYPE_JSONP?n.jsonp(u,o,f,l,this.timeout):n.post(u,o,f,l,this.timeout)},abort:function(){this.isAbort=!0,this.ajax&&this.ajax.abort&&this.ajax.abort()}});return r.getInstance=function(){return this.instance instanceof this?this.instance:this.instance=new this},r.baseurl=function(){throw"[ERROR]abstract method:baseurl, must be override"},r.CONTENT_TYPE_JSON="json",r.CONTENT_TYPE_FORM="form",r.CONTENT_TYPE_JSONP="jsonp",r}),define("cModel",["libs","cBase","cStore","cUtility","CommonStore","cAbstractModel","cStorage","cUtilityPath"],function(e,t,n,r,i,s,o,u){var a=r.Object,f=new t.Class(s,{__propertys__:function(){this.usehead=!0,this.head=i.HeadStore.getInstance(),this.result=null,this.headinfo=null,this.ajaxOnly=!1,this.isUserData=!1,this.checkAuth=!0},initialize:function($super,e){$super(e),this.baseurl||(this.baseurl=f.baseurl.call(this,this.protocol))},setHead:function(e){if(!e instanceof n)throw"Set head is not a store";this.head=e},getHead:function(){return this.head},getParamStore:function(){return this.param},setParamStore:function(e){if("object"!=typeof e)throw"Set param is not a store";this.param=e},getResultStore:function(){return this.result},clearResult:function(){this.result&&"function"==typeof this.result.remove&&this.result.remove()},setParam:function(e,t){var r={};"object"!=typeof e||t?r[e]=t:r=e;for(var i in r)this.param instanceof n?this.param.setAttr(i,r[i]):a.set(this.param,i,r[i])},getParam:function(){return this.param instanceof n?this.param.get():this.param},buildurl:function(){return r.validate.isUrl(this.url)?this.url.replace(u.parseUrl(this.url).hostname,this.baseurl.domain):this.protocol+"://"+this.baseurl.domain+"/"+this.baseurl.path+("function"==typeof this.url?this.url():this.url)},getTag:function(){var e=_.clone(this.getParam()||{});if(this.isUserData&&!e.cid){var t=this.head.userStore;e.cid=t.getUserId()}return JSON.stringify(e)},excute:function(e,t,r,i,s){var o=_.clone(this.getParam()||{});this.pushValidates(function(e){var t=(this.head.get(),this._getResponseHead(e));return t.overdue?{overdue:t.overdue}:t.success});var u=this.getTag(),a=this.result&&this.result.get(u);!a||this.ajaxOnly||r?("get"!==this.method.toLowerCase()&&this.usehead&&this.contentType!==f.CONTENT_TYPE_JSONP?(o.head=this.head.get(),o.head.time=(new Date).getTime()):"get"===this.method.toLowerCase()||this.usehead||this.contentType===f.CONTENT_TYPE_JSONP||this.headinfo&&(o.head=this.headinfo),this.onBeforeCompleteCallback=function(e){if(this.result instanceof n){try{}catch(t){}this.result.set(e,u)}},this.execute(e,t,i,s,o)):"function"==typeof e&&e.call(i||this,a)},_getResponseHead:function(e){var t=!!e.ResponseStatus,n=t?e.ResponseStatus:e.head,r="",i=!1,s=!1;if(t&&n){var o=n.Ack;if("Failure"===o||1==o){var u=n.Errors;if(u instanceof Array&&u.length>0)for(var a,f=0;f<u.length;f++)if(a=u[f],a&&a.ErrorCode&&"MobileRequestFilterException"==a.ErrorCode){this.checkAuth&&(s=!0,this.getHead().setAuth(""));break}}var l=n.Extension;for(var f in l){var c=l[f];if("auth"==c.id){r=c.value;break}}i="Success"===n.Ack||"0"==n.Ack}else r=n&&n.auth,i=n&&0===n.errcode;return{auth:r,success:i,overdue:s}}});return f.baseurlold=function(e){var t=location.host,n="m.ctrip.com",i="restapi";return n=r.isInApp()?"1"==r.isPreProduction()?"https"==e?"wpg.ctrip.com":"10.8.14.28:8080":"0"==r.isPreProduction()?"https"==e?"secure.fws.qa.nt.ctripcorp.com":"m.fat19.qa.nt.ctripcorp.com":"2"==r.isPreProduction()?"https"==e?"restful.m.uat.nt.qa.ctripcorp.com":"m.uat.qa.nt.ctripcorp.com":"https"==e?"wpg.ctrip.com":"m.ctrip.com":t.match(/^m\.ctrip\.com/i)||t.match(/^secure\.ctrip\.com/i)?f.isHttps(e)?"wpg.ctrip.com":"m.ctrip.com":t.match(/^m\.uat\.qa/i)?f.isHttps(e)?"restful.m.uat.qa.nt.ctripcorp.com":"m.uat.qa.nt.ctripcorp.com":t.match(/^(localhost|172\.16|127\.0)/i)?f.isHttps(e)?"secure.fws.qa.nt.ctripcorp.com":"m.fat19.qa.nt.ctripcorp.com":t.match(/^10\.8\.2\.111/i)?"10.8.14.28:8080":t.match(/\.fat/i)?f.isHttps(e)?"secure.fws.qa.nt.ctripcorp.com":"m.fat19.qa.nt.ctripcorp.com":"m.ctrip.com",{domain:n,path:i}},f.baseurl=function(e){var t=(location.host,"m.ctrip.com"),n="restapi";if(Lizard.restfullApiHttps&&"https"==e)return t=u.parseUrl(Lizard.restfullApiHttps).hostname,{domain:t,path:n};if(Lizard.restfullApi&&"http"==e)return t=u.parseUrl(Lizard.restfullApi).hostname,{domain:t,path:n};var r=f.baseurlold(e);return r},f.isHttps=function(e){return"https"==location.protocol||"https"==e},f}),define("cLazyload",["libs"],function(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEXy8vL6+vr+/v7+/v7+/v7v7+/+/v7+/v7+/v7+/v7+/v729vb+/v4AAADt7e3+/v673auIAAAADnRSTlPXrYhVZuwimTMRRMJ3AKjyf0QAAAH3SURBVHjaxdbZkqowGEXhzMM/ZL//2x6IEYh0Cd1addaFUhbJZyKKRv9TZ1iSHirpU6Gme3BB888h3kXwj8PLePZCc0F0lNn1Z0Irl3AQYVhZYnVYY/Zj+Nxze/Aa64ghYyRfrHieZ4Gz398qRV6KiNyL24AsS06e/RGuKqBKpJrWI31NIDo1Tsrt+foR9tfwLresBLcerYvplUu4oMlamGH6BWwXjREZIMGIruBq9jP/Co8pmLmsc9IC1ao6TXaCM0xfttUZnqO3MAkVgjwGaofXklDPQGgUaMA1Q0zW0kx9gQ0fK29hTUQCzuwqzA4TzslzxeJWtbszTPd/uTweNQ4C2eFiZc0hCoP7cQ6HqzpZwPoZbkj34RpZHmRlpAHveeT5+upwChlNpKFZKTsM6CU8Rxz6KvrGT59MRjjDDDRXlnNdQ6xHWLbSDZg4yxa7+UuOeoZTDrU22OUx+H2rCw7RHRiRt8A6KVbP8INxETJ9xgRDI3MPPk48wamBfoZJimqYr2rBtlv82YqrAesGU647nIHoyvxWI/yH8O62tMOCdvw6iQHsESag7vAHW+3buJ9LB0qE3eAe5XAcEZH1Cyv2jO52auSf9+OpMSID6RtwALiOLbdY4/DuH0jq1/gnWx3HgXTnnH2dE20M0F/DQvrlClU99Q/TJ4uko/HGBAAAAABJRU5ErkJggg==",t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v729vb+/v4AAADt7e3+/v6c4gmbAAAADnRSTlOtM4hmVZkiEdfsRMJ3AHDRYrYAAAGwSURBVHjaxdbZktsgEAVQLSxNL9z//9vQgvFYUjKpkqnkPhgJbI4bJMuL/af8DGeS8IcRZm+Shnwb21U/hQ1Ivx9gLL0pDbqMKbYJsN2TDlGPuiF3RzGhYrJ7FF9Rh42wT4VTbrD40WqBxEM89lAjpL2GA15j7h/gdIIzp0fwd2FijB62ER6TO/zdd40+g0kEVYQgw5EDbn3eWcRznEhFh6t4yhgrz+BXQYztDBfpucNyWmr9GNYTfCTSflrqyXDyO0Wv8OoDlH3cCpmRptmwe3cYr0jrsgzwv4EXXRAX2VTVInJAnL7UCvaXcNnjXGI7zuMdG/gLLuoRSG+fw7HDfIYTFWZCUGVboaXMvY89BNevML1PXIH9BRN7ImJvH8MJ5NwVDqqBCTwWpdjIftnjXfaHsGK7wyMCS9wmVtdmP50K+CCS8fFzVY/zxKwaa19qBlqn5qmwooxn8gkO6NmU01org3KpM2GG30cqqHa5uLad27F/h4q1OcAyEc7Fp8teWhMGHN73OG/9io7evGX78K9PjtkBcZLVa105ve2/2V5CLzHaewTyAJ6QlVf7a34BIRiNTVIrVfEAAAAASUVORK5CYII=",n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v7+/v7+/v729vYAAADt7e3+/v6PQhf9AAAADnRSTlOtVTOIZpki1+wRd0TCAMJ8iPYAAAKfSURBVHjaxZWLjqMwDEXJO7FN7v//7WITOgQ6pVpptbdSecTxiW3iLOt/0g3cirj3po1ZL5lcuw8Sud8QgegJbALy+laMZb/UdY2n9Xj9F/wKFnwLXu/KRiSLG7ISwk+s6Fm9n9PgZUjNKvJ34LLeRThECl4L4ssDyMKak7NLTRvKc41z28Bia15dEVWxwkYiShAicgb26QiwAY6ZC1gV4wCTXdXUjey09gFMOCSvVSv46u2kiEnyMm3DNGGIP4GLCLpIgQyOmD266MsqKnuQPnJbkWhTBalSeIEFycAdZi3in2osOjHM4CqmO5i0gvcaG9ipr4gyDT+BaQKbUom3VLc6xqXewaymBfQdOOu3QFew14HSbGPVLYRCediPBHZ5D2b0bOt6BBvvBsZLoqtvGIEGCWRCJVOQOIEFVpMqfwleaEFajLImNId0dKWb6AXWqrQg8NvN8ggmJRHcBNZiJu1OwyIclY8UWZUAxyoinsBqHtcMegSnHcwzOJfKXODUrwfVa8lq7z+uZ7Dboo3gR3CB0q/gcs5kB+I8KSKlnmdwrTu4AXnpj706j213ATvtlQU8knIJ2HdkRjmfoLkplL0ikJAewYTwDnw0icxRbeRyhCPoaGpTEiiGdpwY+RFcDSSbJVu76vacmYlS31PN1nfpRfHVdnjuqPHcWfS919ttoD2BCXWcyRPYYVcgzr533ki1DwLBuJZw9ERsD0mPCUH3+nr7xc9ghu4jEvT18nGFyHvfcx3eTjGbyaEDMuLJgvG+JRTz3pmA1ApQQ/4d3KpOaxraRhhgd65xC0C0gOyiHs/7iBcrZ65HElKFuQkAPp1OLTUFiNoysU7lfKr/usa6L4TS0Vfm8uVoo8q17Y/KdseyXFP9T9VOn9s88gcLTIlzurC4gAAAAABJRU5ErkJggg==",r={};return r.lazyload=function(r,i,s,o){var u=function(){var r=$(this),u=$(new Image),l=r.attr("src");if(r.addClass("cui-item-imgbg"),"string"==typeof l&&l.length>0){r.attr("src",t),"function"==typeof i&&i.call(this,this);var h=function(){r.attr("src",n)};h=s||h;var p=function(){r.attr("src",l),r.removeClass("cui-item-imgbg")};p=o||p,u.bind("error",h).bind("load",p).attr("src",l)}else r.attr("src",e)};$(r).each(u)},r}),define("c",["cBase","cUI","cUtility","cPageView","cModel","cStore","cStorage","cAjax","CommonStore","cLazyload"],function(e,t,n,r,i,s,o,u,a,f){var l={base:e,ui:t,view:r,utility:n,store:s,storage:o,model:i,ajax:u,commonStore:a,lazyload:f};return l}),define("cSales",[],function(){var e={replaceContent:function(){},replaceStrTel:function(){},setSales:function(){},getSales:function(){},getSalesObject:function(){},setUnion:function(){},setSourceId:function(){},updateSales:function(){}};return e}),define("cListAdapter",["libs","cBase"],function(e,t){var n=n||{},r=function(e){for(var t="",n=function(){var e=Math.floor(62*Math.random());return 10>e?e:String.fromCharCode(36>e?e+55:e+61)};t.length<e;)t+=n();return t},i=function(e,t){var n=r(8);return e.getItem(n)?void i(e,t):e.add(n,t)},s=function(e,t){for(var n=0;n<t.length;n++)i(e,t[n])};n.__propertys__=function(){this.observers=[]},n.initialize=function(e){this.setAdapter(e.data)},n.add=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)i(this.map,e[t]),this.list.push(e[t]);else i(this.map,e),this.list.push(e);this.notifyDataChanged()},n.shift=function(){return this.map.shift(),this.notifyDataChanged(),this.list.shift()},n.pop=function(){return this.map.pop(),this.notifyDataChanged(),this.list.pop()},n.remove=function(e){for(var t=0;e>t;t++)this.map.pop(),this.list.pop();this.notifyDataChanged()},n.sortBy=function(e){this.map.sortBy(e),this.list=_.sortBy(this.list,e),this.notifyDataChanged()},n.setAdapter=function(e){e=e&&e instanceof Array?e:[],this.list=$.extend(!0,[],e),this.map=new t.Hash,s(this.map,e),this.notifyDataChanged()},n.regiseterObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},n.unregiseterObserver=function(e){var t=this.observers.indexOf(e);t&&this.observers.splice(t,1)},n.notifyDataChanged=function(){for(var e=0;e<this.observers.length;e++)this.observers[e].update()};var o=new t.Class(n);return o}),define("cGeoHelper",[],function(){var e={Aboard:2,Domestic:1,Unknown:-1,aroundAboardRectList:[[125478833,40538425,135928497,16590043],[128054454,54437790,136370032,49918776],[89567309,54351906,115617882,47881407],[71832315,54566279,82281980,46323836],[72788974,28001436,85887850,16590043],[92510877,48029708,111570476,45034268],[85593493,26157025,97294174,16519064],[97073406,20935216,107743838,16305964],[98324422,45190596,109142033,42854577],[71979493,45863038,78896877,41817208]],chinaRectList:[[85374342,41697126,124486996,28705892],[98942349,28714002,122527683,23331042],[108012216,23415965,119252965,17294543],[120025651,51286036,126391116,41330674],[82936701,46727439,90553182,41621242],[126188746,48211817,129757821,42485061],[129518656,47611932,131468770,44959641],[131376782,47487374,133805226,46225387],[79753968,41876130,85604309,30872189],[113457816,44802677,120117638,41517618],[118977005,23526282,121975765,21629857],[109667973,17321053,119050594,14580095],[76258482,40359687,80011530,35915704],[90534784,44710915,94030271,41531444],[80710628,45077082,83028687,41862379],[85935460,48414308,88437492,46645143],[93975079,42559912,101462779,41600531],[93956681,44157262,95354876,42491869],[116695740,46301949,120117638,44619006],[116401384,49444657,120191227,48057877],[121000708,53244099,124569783,51210984],[106724405,42232628,113494611,41683336],[112133211,44355602,113568200,42123151],[110918989,43155464,112206800,42232628],[115150367,45324216,116769330,44724032],[126299129,49588397,128102064,48057877],[128065270,49131761,129757821,48131826],[129721026,48622090,130530508,47611932],[124349016,52822665,125710416,51095279],[122325313,28884167,123760302,25662561],[111029373,14651757,118388292,10605300],[109778357,10095218,109778357,10095218],[109631178,10459649,116548562,7753573],[110514249,7826971,113678584,4734480],[124330619,41399976,125480450,40689610],[126345123,42512290,128046872,41827986],[127973283,42539507,129104717,42143692],[74510739,40162360,76350468,38678393],[119087389,21629857,120706351,20142916],[106853187,23339537,108067408,21990651],[129707229,44975967,130985841,43017244],[130958245,44582859,131169814,43104932],[131418176,46247729,133129126,45359896],[133073934,48054793,134269758,47409374],[99701237,23386249,101577762,22174986],[100179567,22243514,101559364,21745927],[101485775,23437187,104245370,22875776],[98008686,25240784,99057332,24181992],[124463999,40686109,124905534,40461646],[125457453,41334141,126055365,40979564],[126368119,41824546,126607284,41645397],[125475850,40979564,125687419,40853958],[124477797,40465160,124728460,40343852],[124470898,40347371,124618076,40285757],[124891736,40694862,125153898,40607283],[126046166,41332407,126262335,41165784],[127214395,41836586,128083666,41546995],[126386516,50257998,126386516,50257998],[126280732,50257998,127513351,49580921],[126363520,50934256,127117809,50225552],[125669022,52398490,126276133,51247082],[80948643,30905163,81403976,30280446],[83574857,30911112,85488176,29214825],[98136317,28872274,99079179,27642374]],largeChinaRect:[73083331,54006559,135266195,17015367],isInRect:function(e,t,n){return e>=n[0]&&e<=n[2]&&t>=n[3]&&t<=n[1]?!0:!1},isInRectList:function(e,t,n){for(var r=0;r<n.length-1;r++)if(smallRect=n[r],this.isInRect(e,t,smallRect))return!0;return!1},getCountry:function(e,t){var n=this.Unknown,r=1e6*t,i=1e6*e;return isInAboard=!this.isInRect(i,r,this.largeChinaRect),isInAboard||(isInAboard=this.isInRectList(i,r,this.aroundAboardRectList)),isInAboard?n=this.Aboard:(inInLand=this.isInRectList(i,r,this.chinaRectList),inInLand&&(n=this.Domestic)),n}};return e}),define("cWidgetGeolocation",["cBase","cUtility","cWidgetFactory","cStore","cHybridFacade","cUtilityPerformance","cGeoHelper","cModel"],function(e,t,n,r,i,s,o,u){var a="Geolocation",f="0b895f63ca21c9e82eb158f46fe7f502";if(!n.hasWidget(a)){var l=l||{},c=e.Class(u,{__propertys__:function(){this.url="http://m.ctrip.com/restapi/soa2/10398/json/LBSLocateCity",this.param={}}}).getInstance();l.isInOverseas=!1;var h=new s;l.requestGeographic=function(e,t){var n=h.getUuid();h.group(n,{name:"GeoRequest",url:"Google service",type:"Google service"});var r=function(e,t,n){var i=document.createElement("script"),s=document.write;i.type="text/javascript",i.readyState?i.onreadystatechange=function(){("loaded"==i.readyState||"complete"==i.readyState)&&(i.onreadystatechange=null,document.write=s,n&&t&&t())}:(i.onload=function(){document.write=s,n&&t&&t()},i.onerror=function(){document.write=s}),i.src=e,document.write=function(e){var t=e.match(/http(s)?:\/\/[A-Za-z0-9]+[\.\/=\?%\-&_~`@[\]\:+!]*([^<>])*(\.js)/);t&&r(t[0],function(){document.write=s},!0)},document.body.appendChild(i)},i=function(t){h.groupEnd(n),e&&e(t);var i=t.coords.longitude,s=t.coords.latitude,u=o.getCountry(i,s);2==u?(l.isInOverseas=!0,"undefined"==typeof google&&r("https://maps.googleapis.com/maps/api/js?v=3&region=zh-CN")):l.isInOverseas=!1},s=function(e){h.groupEnd(n);var r="未能获取到您当前位置，请重试或选择城市";switch(e.code){case e.TIMEOUT:r="获取您当前位置超时，请重试或选择城市！";break;case e.PERMISSION_DENIED:r="您拒绝了使用位置共享服务，查询已取消，请开启位置共享或选择城市！";break;case e.POSITION_UNAVAILABLE:r="获取您当前位置信息失败，请重试或选择城市！"}t&&t(e,r)};window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(i,s,{enableHighAccuracy:!0,maximumAge:5e3,timeout:2e4}):t&&t("","获取您当前位置信息失败，浏览器不支持定位！")},l.requestAMapAddress=function(e,t,n,r,i){function s(n,r){if(1==r){var i=n&&n.regeocode||"",s=i.addressComponent.city,o=i.addressComponent.province,u=i.addressComponent.district,f="";return _.isString(s)?f=s:_.isString(o)&&(f=o),{address:_.isString(i.formatted_address)?i.formatted_address:"",location:a,info:i&&i.addressComponent,city:f,province:o,district:u,lng:e,lat:t,country:"中国",countryShortName:"CHN"}}if(n&&"OK"===n.status){var u="",f="",l="",o="",c="";if(!n.results)return!1;var h=n.results[0]||{};return _.find(h.address_components,function(e){var t=e&&e.long_name;e.types&&("country"==e.types[0]&&"political"==e.types[1]&&(l=t,c=e.short_name),"administrative_area_level_1"===e.types[0]&&"political"===e.types[1]&&(o=t),"locality"===e.types[0]&&"political"===e.types[1]&&(f=t),"administrative_area_level_2"===e.types[0]&&"political"===e.types[1]&&(u=t),"sublocality_level_1"===e.types[0]&&"sublocality"===e.types[1]&&(u=t))}),""==l&&""==o&&""==f&&""==u?!1:{address:_.isString(n.results[0].formatted_address)?n.results[0].formatted_address:"",location:a,info:n.results[0].address_components,lng:e,lat:t,country:l,province:o,city:f,district:u,countryShortName:c}}return!1}var u=h.getUuid();h.group(u,{name:"GeoRequest",url:"http://restapi.amap.com/v3/geocode/regeo",type:"AMap service"});var a="121.473704,31.230393",l=1;e&&t&&(a=e+","+t,l=o.getCountry(e,t)),i=i||8e3;var c=1==l?"http://restapi.amap.com/v3/geocode/regeo?"+$.param({location:a,key:f,radius:0,extensions:"all"}):"https://maps.googleapis.com/maps/api/geocode/json?"+$.param({latlng:t+","+e,sensor:!1});$.ajax({url:c,dataType:1==l?"jsonp":"json",success:function(e){h.groupEnd(u);var t=s(e,l);_.isObject(t)?n&&n(s(e,l)):r&&r(e)},error:function(e){h.groupEnd(u),r&&r(e)},timeout:i})},l.requestAMapAround=function(e,t,n,r,i){var s=h.getUuid();h.group(s,{name:"GeoRequest",url:"http://restapi.amap.com/v3/place/around",type:"AMap service"});var o="121.473704,31.230393";e&&t&&(o=e+","+t);var u=$.param({location:o,key:f,radius:500,offset:4,page:1});i=i||8e3,$.ajax({url:"http://restapi.amap.com/v3/place/around?"+u,dataType:"jsonp",success:function(e){h.groupEnd(s);var t=e&&e.pois||[];n&&n(t)},error:function(e){h.groupEnd(s),r&&r(e)},timeout:i})},l.requestAMapKeyword=function(e,t,n,r,i){var s=h.getUuid();h.group(s,{name:"GeoRequest",url:"http://restapi.amap.com/v3/place/text",type:"AMap service"});var o=$.param({keywords:e,city:t,key:f,offset:10,page:1,extensions:"all"});i=i||8e3,$.ajax({url:"http://restapi.amap.com/v3/place/text?"+o,dataType:"jsonp",success:function(e){h.groupEnd(s);var t=e&&e.pois||[];n&&n(t)},error:function(e){h.groupEnd(s),r&&r(e)},timeout:i})},l.tansformLongitude=function(e,t,n,r,i){var s=h.getUuid();h.group(s,{name:"GeoRequest",url:"http://restapi.amap.com/v3/assistant/coordinate/convert",type:"AMap service"});var u=o.getCountry(e,t);if(1!=u)return h.groupEnd(s),void n(e,t);var a=$.param({locations:e+","+t,key:f,coordsys:"gps"});i=i||8e3,$.ajax({url:"http://restapi.amap.com/v3/assistant/coordinate/convert?"+a,dataType:"jsonp",success:function(e){if(h.groupEnd(s),e&&"1"===e.status){var t=e.locations.split(",");n&&n(t[0],t[1])}else r&&r()},error:function(e){h.groupEnd(s),r&&r(e)},timeout:i})},l.requestCityInfo=function(e,n,r,s,o,u,a){var f={number:h.getUuid(),detail:h.getUuid(),city:h.getUuid(),error:h.getUuid()};for(var p in f)h.group(f[p],{name:"GeoRequest",url:(t.isInApp()?"Native":"Web")+" function "+p});var d=function(){var t=function(e){return"geo"==e.type||"address"==e.type||"CtripCity"==e.type},o=!0,l=function(n,i){var s=1,a=0;if(t(n)?n.locateStatus>0&&(a=window.Math.abs(n.locateStatus)):a=s,a)h.groupTag(f.error,"errno","10"+a.toString()),h.groupEnd(f.error),"function"==typeof c&&c(n,i);else{var l=n.value,p="undefined"!=typeof l.addrs;p&&h.groupEnd(f.detail),o&&h.groupEnd(f.number),"CityEntities"in l&&(h.groupEnd(f.city),_.isFunction(u)&&u(l)),o&&"function"==typeof r&&r(l.lng,l.lat),p&&"function"==typeof e&&e({lng:l.lng,lat:l.lat,city:l.city||l.ctyName||l.province,province:l.province,district:l.district,country:l.country,countryShortName:l.countryShortName,address:l.addrs})}o=!1},c=function(e,t){h.groupTag(f.error,"errno","10"),h.groupEnd(f.error);var r=e&&e.error_code||t;r?r.indexOf("201")>-1?s(r):r.indexOf("202")>-1?s(r):r.indexOf("203")>-1?s(r):r.indexOf("204")>-1?n(r):r.indexOf("205")>-1&&a&&a(r):s("(-201)定位未开启")};i.request({name:i.METHOD_LOCATE,success:l,error:c})},v=function(){var t=function(t){h.groupEnd(f.number);var i=t.coords.longitude,s=t.coords.latitude;r&&r(i,s);var p=function(t){h.groupEnd(f.detail),e&&e(t),_.isFunction(u)&&(c.setAttr("param",{Longitude:i,Latitude:s,CountryName:t.country,ProvinceName:t.province,L1CityName:t.city,L2CityName:t.district,TownName:"",Language:"CN"}),c.excute(function(e){h.groupEnd(f.city),u(e)},function(){h.groupTag(f.error,"errno","23"),h.groupEnd(f.error),a&&a()}))},d=function(){h.groupTag(f.error,"errno","21"),h.groupEnd(f.error),n&&n()};o?l.tansformLongitude(i,s,function(e,t){l.requestAMapAddress(e,t,p,d)},function(e){h.groupTag(f.error,"errno","22"),h.groupEnd(f.error),n&&n(e)}):l.requestAMapAddress(i,s,p,d)},i=function(e,t){return h.groupTag(f.error,"errno","20"),h.groupEnd(f.error),"function"==typeof s?void s(t,e):void (n&&n(t))};l.requestGeographic(t,i)},g=t.isInApp()?d:v;g()},l.requestAroundInfo=function(e,t,n){var r=e.split(",")[0],i=e.split(",")[1],s=function(e){t&&t(e)},o=function(){n&&n()};l.requestAMapAround(r,i,s,o)},l.requestKeywordInfo=function(e,t,n,r){var i=function(e){n&&n(e)},s=function(){r&&r()};l.requestAMapKeyword(e,t,i,s)};var p=l.PositionStore=e.Class(r,{__propertys__:function(){this.key="POSITION_CITY",this.lifeTime="10M"},initialize:function($super,e){$super(e)}});l.requestCacheCityInfo=function(e,n,r){var i=p.getInstance(),s=i.get();s?e&&e.call(r,s):l.requestCityInfo(function(n){t.isInApp()||i.set(n),e&&e.call(r,n)},function(e,t){n&&n.call(r,e,t)})},l.requestMap=function(e){function n(e,t,n,r){this.point_=e,this.name_=t,this.map_=n,this.div_=r,this.setMap&&this.setMap(n)}var r=function(e){function t(e,t,r){function s(e,t,r){var s=$("<DIV/>").addClass("map-content");r||$("<IMG/>").attr({src:"http://res.m.ctrip.com/html5/Content/images/map_address.png"}).appendTo(s),e.content&&$("<SPAN/>").html(e.content).appendTo(s);var o;if(r){o=new u.maps.Marker({position:new u.maps.LatLng(e.lat,e.lng),map:t,icon:"http://res.m.ctrip.com/html5/Content/images/map_address.png",id:e.markerId}),e.id&&""!=e.id&&t.setCenter(new u.maps.LatLng(e.lat,e.lng));var a=new n(new u.maps.LatLng(e.lat,e.lng),e.content,t,s[0]);i.marekrs.push(o),i.overlays.push(a),e.callBack&&u.maps.event.addListener(o,"click",function(){e.callBack(e.markerId)})}else o=new AMap.Marker({position:new AMap.LngLat(e.lng,e.lat),map:t,id:e.markerId}),e.id&&""!=e.id&&t.setCenter(new AMap.LngLat(e.lng,e.lat)),o.setContent(s[0]),e.callBack&&AMap.event.addListener(o,"click",function(){e.callBack(e.markerId)})}if(e instanceof Array&&e.length>0)for(var o=0;o<e.length;o++){var a=e[o];if(!a||!a.lat||!a.lng)break;s(a,t,r)}else s(e,t,r)}if(!(e&&e.lat&&e.lng&&e.id))return e.error&&e.error(),!1;var r,i={marekrs:[],overlays:[]},s=!1,u=window.google,a=o.getCountry(e.lng,e.lat);if((1!=a||l.isInOverseas)&&u&&u.maps&&u.maps.LatLng)s=!0,u.maps.OverlayView&&(n.prototype=new u.maps.OverlayView,n.prototype.onAdd=function(){var e=this.getPanes();e.overlayImage.appendChild(this.div_)},n.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.point_),n=this.div_;if(n){n.style.left=t.x+20+"px",n.style.top=t.y-50+"px",n.style.position="absolute";var r=n.children[0];r&&(r.style.bottom="0px",r.style.left="0px")}},n.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null});else if(!AMap)return e.error&&e.error(),!1;var f,c=13;if(s)f=new u.maps.Map(document.getElementById(e.id),{center:new u.maps.LatLng(e.lat,e.lng),zoom:e.level||c,zoomControl:!0});else{f=new AMap.Map(e.id,{center:new AMap.LngLat(e.lng,e.lat),level:e.level||c});var h=null,p=function(e){h=new AMap.TileLayer({tileUrl:"http://mt{1,2,3,0}.google.cn/vt/lyrs=m@142&hl=zh-CN&gl=cn&x=[x]&y=[y]&z=[z]&s=Galil"}),h.setMap(e)};(1!=a||l.isInOverseas)&&p(f)}return e.zoomCallBack&&(s?u.maps.event.addListener(f,"zoom_changed",function(){var n=e.zoomCallBack&&e.zoomCallBack(this.getZoom());if(n){if(i.marekrs&&i.marekrs.length>0){for(var r=0;r<i.marekrs.length;r++)i.overlays[r].setMap&&i.overlays[r].setMap(null),i.marekrs[r].setMap&&i.marekrs[r].setMap(null);i={marekrs:[],overlays:[]}}t(n,this,s)}}):AMap.event.addListener(f,"zoomchange",function(){var n=e.zoomCallBack&&e.zoomCallBack(this.getZoom());n&&(this.clearMap(),t(n,this,s))})),r=e.markers instanceof Array&&e.markers.length>0?e.markers:e,t(r,f,s),f},s=function(t){if(!e)throw new Error('function show_map error is "param is null"');t&&t.poiList?i.request({name:i.METHOD_APP_SHOW_MAP_WITH_POI_LIST,poiList:t.poiList}):(t.name=i.METHOD_SHOW_MAP,i.request(t))},u=e.forceAmap||t.isInApp()?s:r;return u(e)},l.show_map=function(e){if(!e)throw new Error('function show_map error is "param is null"');e.name=i.METHOD_SHOW_MAP,i.request(e)},l.app_show_map_with_POI_list=function(e){i.request({name:i.METHOD_APP_SHOW_MAP_WITH_POI_LIST,poiList:e.poiList})},n.register({name:a,fn:l})}}),define("cGeoService",["cWidgetFactory","cUtility","cWidgetGeolocation","cWidgetGuider"],function(e,t){var n={},r=e.create("Geolocation"),i=e.create("Guider"),s=r.PositionStore.getInstance();return n.GeoLocation=function(){function e(e,t,n){for(var r in l)l[r]&&"function"==typeof l[r][e]&&l[r][e].apply(l[r].scope,t);n&&(l={})}var n=0,o=1,u=2,a=3,l={},c=n,h=null;return{Subscribe:function(n,p,v,m){p=p||{},l[n]||(l[n]={name:n,onStart:p.onStart,onComplete:p.onComplete,onError:p.onError,onPosComplete:p.onPosComplete,onPosError:p.onPosError,onCityComplete:p.onCityComplete,onCityError:p.onCityError,scope:v});var y=s.get(),w=t.isInApp();if(m&&(y=null),y&&y.posinfo&&y.cityInfo)c=o,e("onStart",null),c=u,e("onPosComplete",[y.posinfo.lng,y.posinfo.lat]),e("onComplete",[y.posinfo]),e("onCityComplete",[y.cityInfo],!0);else{if(clearTimeout(h),h=setTimeout(function(){c===o&&(c=a,i.print({log:"#cGeoService -- 22 second timeout call onError"}),e("onError",[null],!0))},35e3),c===o)return void (l[n]&&"function"==typeof l[n].onStart&&l[n].onStart.call(v));c=o,e("onStart",null),i.print({log:"#cGeoService -- start request city info"}),r.requestCityInfo(function(t){y||(y={}),y.posinfo=t,w||s.set(y),e("onComplete",[t])},function(t,n){c=a,"number"==typeof n&&2===n&&(n={code:1}),i.print({log:"#cGeoService -- locate onError"}),e("onError",[t,n],!0)},function(t,n){e("onPosComplete",[t,n])},function(t,n){c=a,"number"==typeof n&&2===n&&(n={code:1}),e("onPosError",[t,n],!0)},!0,function(t){c=u,y||(y={}),y.cityInfo=t,w||s.set(y),e("onCityComplete",[t],!0)},function(t,n){c=a,"number"==typeof n&&2===n&&(n={code:1}),i.print({log:"#cGeoService -- locate onError"}),e("onCityError",[t,n],!0)})}},UnSubscribe:function(e){e=_.isArray(e)?e:[e];for(var t=0;t<e.length;t++)delete l[e[t]]},ClearPosition:function(){s.remove()}}}(),n.GeoAround=function(){return{Subscribe:function(e,t,n,i){r.requestAroundInfo(e,function(e){t.call(i,e)},function(){n.call(i)})}}}(),n.GeoKeyword=function(){return{Subscribe:function(e,t,n,i,s){r.requestKeywordInfo(e,t,function(e){n.call(s,e)},function(){i.call(s)})}}}(),n}),define("cMessageCenter",["cBase"],function(e){var t=e.Class({__propertys__:function(){this.msgGroup={}},initialize:function(){},_verify:function(e){if(!e)throw Error("参数错误");if(!e.namespace)throw Error("必须知道该消息的命名空间");if(!e.id)throw Error("该消息必须具备key值");if(!e.handler&&_.isFunction(e.handler))throw Error("该消息必须具备事件句柄")},register:function(e,t,n){var r={};_.isObject(e)?r=e:(r.namespace=e,r.id=t,r.handler=n),this._verify(r),this.msgGroup[r.namespace]||(this.msgGroup[r.namespace]={}),this.msgGroup[r.namespace][r.id]||(this.msgGroup[r.namespace][r.id]=[]),this.msgGroup[r.namespace][r.id].push(r.handler)},unregister:function(){var e=["clearMessageGroup","clearNamespace","clearObservers","removeObserver"],t=e[arguments.length];_.isFunction(t)&&t.call(this,arguments)},clearMessageGroup:function(){this.msgGroup={}},clearNamespace:function(e){this.msgGroup[e]&&(this.msgGroup[e]={})},clearObservers:function(e,t){this.msgGroup[e]&&this.msgGroup[e][t]&&(this.msgGroup[e][t]=[])},removeObserver:function(e,t,n){var r,i,s;if(this.msgGroup[e]&&this.msgGroup[e][t])for(s=this.msgGroup[e][t],r=0,i=s.length;i>r;r++)s[r]===n&&s[t].splice(r,1)},dispatch:function(e,t,n,r){var i,s,o;if(e&&t&&this.msgGroup[e]&&this.msgGroup[e][t])for(o=this.msgGroup[e][t],i=0,s=o.length;s>i;i++)_.isFunction(o[i])&&o[i].call(r||this,n)},MAP:{APP:"app",VIEW:"view",MODEL:"model",UI:"ui"}});return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.getInstance()}),define("cPageParser",["cBase","cStore","CommonStore"],function(cBase,cStore,CommonStore){function getID(){var e="client_id_viewport_"+ ++uuid+"_"+(new Date).getTime();return e}function _containFunc(e,t){var n=!1;for(var r in e){if(n)return!0;if(_.isFunction(e[r])&&e[r].toString().indexOf(t.trim())>-1)return e[r]=e[r].toString().trim(),!0;(_.isObject(e[r])||_.isArray(e[r]))&&(n=_containFunc(e[r],t))}return n}function reString(e){var t={"\r":"\\r","\n":"\\n","	":"\\t"},n=/([\.\\\/\+\*\?\[\]\{\}\(\)\^\$\|])/g,r=/[\r\t\n]/g;return e.replace(n,"\\$1").replace(r,function(e){return t[e]})}function fixReString(e){for(var t=e.split(""),n=!1,r="",i=[];r=t.shift();)i.push(r),"\\"==r?i.push(t.shift()):"["!=r||n?"]"==r&&n?n=!1:"("!=r||n||"?"==t[0]&&("!"==t[1]||(":"==t[1]||"="==t[1]?(t.shift(),t.shift(),i.push("?"),i.push(":")):(i.push("?"),i.push(":")))):n=!0;return i.join("")}function urlParse(e,t){var n=[],r=[],i={},s=e.replace(/\{\{(.+?)\}\}/g,function(e,t){return r.push(t),"{@"+(r.length-1)+"}"}).replace(/\{(@?)(.+?)\}|[^\{\}]+/g,function(e,t,i){var s="";if(i)if(t){var o=r[i].match(/^(?:(?:\((\w+)\))?([^!=]+?)|([^!=]+?)=(.*))$/);if(o)if(o[2]){switch(o[1]){case"number":s="(\\d+(?:\\.\\d*)?|\\.\\d+)";break;case"int":s="(\\d+)";break;case"letter":s="([a-z _\\-\\$]+)";break;default:s="([^\\/]*)"}n.push(o[2])}else if(n.push(o[3]),/^\/.*\/$/.test(o[4]))s="("+fixReString(o[4].slice(1,-1))+")";else{for(var u=o[4].split("||"),a=0;a<u.length;a++)u[a]=reString(u[a]);s="("+u.join("|")+")"}else s=""}else n.push(i),s="([^\\/]*)";else s=reString(e);return s});t=t.replace(/[#\?].*$/g,"");var o=t.match(new RegExp(s,"i")),u="/([^/]*)";"\\"!=s[s.length-1]&&(u="\\/([^/]*)");var a=t.match(new RegExp(s+u,"i"));if(o&&!a){for(var f=0;f<n.length;f++)i[n[f]]=o[f+1]||null;return{reStr:s,param:i,index:o.index}}return{}}function getPageParams(e,t){e=decodeURIComponent(e);var n={};"string"==typeof t&&(t=[t]),_.each(t,function(t){var r=Lizard.schema2re(t,e);r.reStr&&r.param&&(n=r.param)});for(var r,i,s,o,u=e.replace(/^[^\?#]*\??/g,"").replace(/#DIALOG_.*$/g,"").replace(/#\|cui-.*$/g,""),a=/([^&=?]+)=([^&]+)/g,f=/\/+.*\?/,l=/(.+)\[\]$/;r=a.exec(u);){if(i=r[1].toLowerCase(),s=r[2],o=i.match(l),f.test(s)){n[i]=u.substr(u.indexOf(s));break}o?(i=o[1],n[i]=n[i]||[],n[i].push(s)):n[i]=s}return n}function getPageUrlschema(){var configStr=getPageConfigStr(),ret="",arr=configStr.match(/([\'\"])?url_schema\1\s*:\s*([\'\"])(.*?)\2/)||configStr.match(/([\'\"])?url_schema\1\s*:\s*\[\s*([\'\"])((.|\s)*?)\2(\s*|,)]/);return arr?(eval("ret = {"+arr[0]+"}['url_schema']"),ret):""}function getPageConfigStr(){var e=pageDocNode.find('script[type="text/lizard-config"]').text();return e||(e='{"url_schema": "","model": {"apis": []},"view":{}}'),e}function getPageConfig(){var configStr=getPageConfigStr(),ajaxDataMatch=configStr.match(/Lizard.D\(([\'\"])(.*?)([\'\"])\)(.*?)(,|\s)/g),dataexpr=[];return ajaxDataMatch&&_.each(ajaxDataMatch,function(e){var t=e.split(",").join("").split("}").join("");dataexpr.push(t)}),eval("var ret = "+configStr),ret.dataexpr=dataexpr,ret}function getPageTemplates(){var e={},t=pageDocNode.find('script[type="text/lizard-template"]');return _.each(t,function(t){var n=$(t);n.attr("id")&&(e[n.attr("id")]={runat:n.attr("runat")||"all",text:removeTags(n.text(),"client")})}),e}function removeTags(e,t){var n=$("<SCRIPT>"+e+"</SCRIPT>");return n.find("[runat="+t+"]").remove(),n.text()}function _runUnderscore(e,t){t||(t={});var n="";if(e){var r=_.template(e);Lizard.T,n=r(t,{Lizard:Lizard}).trim()}return n}function _setTDKInfo(e,t){var n=[],r=t.model.setTDK?t.model.setTDK(e):{},i=pageDocNode.find("title");return r.title&&(i&&i.remove(),n.push("<title>"+r.title+"</title>")),_.each(r,function(e,t){if(e){var r=pageDocNode.find('meta[name="'+t+'"]');r&&r.remove(),n.push('<meta name="'+t+'" content="'+e+'" />')}}),{TDK:r,TDKStr:n.join("")}}function _setUBTInfo(){var varNames=["page_id","bf_ubt_orderid","ab_testing_tracker"];if(_.each(varNames,function(varName){var values="",node=pageDocNode.find("#"+varName);node.get(0)&&(values=node.val()),eval(varName+" = '"+values+"'")}),_.isArray(ab_testing_tracker)){var ret=[];_.each(ab_testing_tracker,function(e){_.each(e.attr("value").split(";"),function(e){e&&ret.push(e)})}),ab_testing_tracker=ret.join(";")}}var pageDocNode=null,uuid=0;Lizard._initParser=function(e,t){pageDocNode=$("<DIV>"+t+"</DIV>"),Lizard.T.lizTmpl=getPageTemplates(),Lizard.P.lizParam=getPageParams(e,getPageUrlschema());var n=getPageConfig();return n.pageUrl=e,n},Lizard.getModels=function(pageConfig){pageConfig.model||(pageConfig.model={});var apis=pageConfig.model.apis||[],ret=[],dataexpr=pageConfig.dataexpr;return _.each(apis,function(api){api.runat=api.runat||"all",("client"==api.runat&&api.runat==Lizard.renderAt||"all"==api.runat)&&ret.push(api),api.suspend="suspend"in api?api.suspend.toString():!1,_.each(dataexpr,function(p){var postdataStr=JSON.stringify(api.postdata);(JSON.stringify(postdataStr).indexOf(p)>-1||_containFunc(api.postdata,p)||api.suspend&&api.suspend.indexOf(p)>-1)&&(api.depends||(api.depends=[],api.expressionMap={}),api.depends.push(eval(p.match(/Lizard.D\(([\'\"])(.*?)([\'\"])\)/g)[0].split("Lizard.D").join(""))),api.expressionMap[p]=dataexpr[p])})}),Lizard.errorBack=_.isFunction(pageConfig.errorBack)?pageConfig.errorBack:null,apis},Lizard.S=function(e,t,n){return this.loacaStores||(this.loacaStores={}),this.loacaStores[e]||(this.loacaStores[e]="SALES"==e?CommonStore.SalesStore:"SALES_OBJECT"==e?CommonStore.SalesObjectStore:"UNION"==e?CommonStore.UnionStore:new cBase.Class(cStore,{__propertys__:function(){this.key=e}})),t?this.loacaStores[e].getInstance().get()&&this.loacaStores[e].getInstance().get().hasOwnProperty(t)?this.loacaStores[e].getInstance().get()[t]:n:this.loacaStores[e].getInstance().get()},Lizard.T=Lizard._T=function(e,t){if(1==arguments.length){var n="",r=Lizard.T.lizTmpl[e];return r&&"server"!=r.runat&&(n=r.text),n}return _runUnderscore(Lizard._T(e),t)},Lizard.P=function(e,t){var n=null;return n=_.isUndefined(t)?Lizard.P.lizParam[e]||Lizard.P.lizParam[e.toLowerCase()]:Lizard.P.lizParam[e]=t},Lizard.D=function(e){return this.ajaxDatas&&this.ajaxDatas[e]?this.ajaxDatas[e]:null},Lizard.schema2re=urlParse,Lizard.render=function(e,t,n){var r={header:"",viewport:""};2==arguments.length&&_setUBTInfo();var i=!0;if(_.isFunction(e.validate)&&(i=e.validate(t)),!i&&_.isFunction(e.modelOnError))r=e.modelOnError(t);else{var s=_setTDKInfo(t,e);e.model.filter&&(t=e.model.filter.call(this,t,s.TDK))}for(var o in e.view)e.view.hasOwnProperty(o)&&(r[o]=_runUnderscore(e.view[o],t));var u=n?n.pageID+"$"+n.dialogName:getID(e.pageUrl);return r.viewport=['<div id="',u,'" page-url="',e.pageUrl,'">',r.viewport,"</div>"].join("").trim(),r.id=u,r.controller=e.controller,r.config=e,r.datas=t,r.lizTmpl=Lizard.T.lizTmpl,r.lizParam=Lizard.P.lizParam,r.TDK=s?s.TDKStr:"",r.validateRet=i,n?r=_.extend(r,n.ubtInfo):(r.page_id=page_id,r.ab_testing_tracker=ab_testing_tracker,r.bf_ubt_orderid=bf_ubt_orderid),r},Lizard.getController=function(e){return e.controller}}),define("cUtilityUtil",["cUtilityPath"],function(e){function t(e,t,r){return"post"!=e?location.href=t:n(t,r),!0}function n(e,t){var n,r="hidden",i="none",s=window.document,o=$("<FORM/>").attr({method:"post",action:e,target:"_blank"}).css({display:i}).appendTo(s.body).eq(0);for(n in t)$("<INPUT/>").attr({type:r,name:n,value:t[n]}).appendTo(o);o.submit(),$(o).remove()}var r={};return r.isSupportPushState=function(){return Lizard.isHybrid&&"file:"==window.location.protocol?!1:!!(window.history&&window.history.pushState&&window.history.replaceState)}(),r.uuid=0,r.dialogUuid=0,r.isExternalLink=function(e){var t=new RegExp(/^mailto:|^tel:|^javascript:/);return t.test(e)},r.goExternalLink=function(n,i){var s=e.isSameDomain(e.makeUrlAbsolute(n),window.location.href),i=i||{},o=i.type||"get",u=i.data||{};if(!s)return t(o,n,u);if(Lizard.isHybrid){if("get"==o){if(i.target||i.jump){var f=["cWidgetFactory","cWidgetGuider"];return require(f,function(){var e=arguments[0],t=e.create("Guider");t.jump({targetModel:"open",url:location.href.replace(/[\?#].+$/,"")+"#"+encodeURIComponent(n),title:""})}),!0}return!1}return!1}return i.target||i.jump||!r.isSupportPushState?t(o,n,u):!1},r}),define("cUtilityStateHistory",["cUtilityUtil"],function(e){function t(){this.forwardStack=[],this.historyStack=[]}return t.prototype={getTimestamp:function(){return(new Date).getTime()},getHash:function(){var e=window.location.hash;return"#"==e.charAt(0)&&(e=e.substring(1)),decodeURIComponent(e)},setHash:function(e){e||(e=""),window.location.hash=encodeURIComponent(e)},replaceHash:function(e){e||(e=""),location.replace("#"+encodeURIComponent(e))},handleBackButton:function(){var e=this.historyStack.pop(),t=this.historyStack[this.historyStack.length-1];return this.forwardStack.push(e),t},handleForwardButton:function(){var e=this.forwardStack.pop();return this.historyStack.push(e),e},addToHistory:function(e,t){t?0==this.historyStack.length?this.historyStack.push(e):this.historyStack[this.historyStack.length-1]=e:0==this.historyStack.length?this.historyStack.push(e):e&&(this.historyStack[this.historyStack.length-1].hash==e.hash||this.historyStack.push(e))},pushState:function(t,n,r){if(Lizard.group(),Lizard.isHybrid&&"file:"==window.location.protocol){Lizard.log("data:",JSON.stringify(t)),Lizard.log("title:",n),Lizard.log("url:",r);var i=(this.getTimestamp(),r);this.setHash(i),this.addToHistory({hash:i,state:t,title:n,url:r},!1)}else if(e.isSupportPushState)Lizard.log("data:",JSON.stringify(t)),Lizard.log("title:",n),Lizard.log("url:",r),history.pushState(t,n,r);else{Lizard.log("isSupportPushState:",e.isSupportPushState),Lizard.log("data:",JSON.stringify(t)),Lizard.log("title:",n),Lizard.log("url:",r);var s=r.split("#DIALOG_")[1];s&&(DialogMag[r]=t,DialogHist.unshift(t),location.hash="#DIALOG_"+s)}Lizard.groupEnd()},replaceState:function(t,n,r){if(Lizard.group(),Lizard.isHybrid&&"file:"==window.location.protocol){Lizard.log("data:",JSON.stringify(t)),Lizard.log("title:",n),Lizard.log("url:",r);var i=(this.getTimestamp(),r);this.replaceHash(i),this.addToHistory({hash:i,state:t,title:n,url:r},!0)}else e.isSupportPushState?(Lizard.log("data:",JSON.stringify(t)),Lizard.log("title:",n),Lizard.log("url:",r),history.replaceState(t,n,r)):Lizard.log("isSupportPushState:",e.isSupportPushState);Lizard.groupEnd()},popstate:function(t){var n=this,r=$.proxy(function(e){Lizard.log("popstate");var n=e.state||e.originalEvent&&e.originalEvent.state;if(!Lizard.stopStateWatch&&n)if(Lizard._stoploadpage=Lizard._isLoading?!0:!1,Lizard._stoploadpage)var r=setInterval(function(){Lizard._stoploadpage||(t.showView(n),clearInterval(r))},10);else this.showView(n)},t),i=$.proxy(function(e){function n(e){Lizard.log("hashchange goBack",e.url),t.showView(e)}Lizard.log("hashchange"),e=e||{},Lizard.log("e:",e);var r=e.newURL,i=e.oldURL,s=i.split("#DIALOG_")[1]||r.split("#DIALOG_")[1];if(s){var o=location.href;if(o===(DialogHist[0]&&DialogHist[0].url)&&DialogHist.length>1)return Lizard.log("We are on the right panel."),!0;if(""===location.hash){Lizard.log("location.hash is empty"),DialogHist.shift();var u=DialogHist[0];return n(u),!0}if(DialogHist[1]&&o===DialogHist[1].url){Lizard.log("DialogHist[1] && url === DialogHist[1].url"),DialogHist.shift();var u=DialogHist[0];return n(u),!0}DialogMag[o]&&(Lizard.log("DialogMag[url] exist"),DialogHist.unshift(DialogMag[o]),n(DialogMag[o]))}},t),s=$.proxy(function(e){if(!this.observe)return!1;Lizard.log("hybridHashChangeHandler");var t=n.historyStack.length,r=n.getHash(),i={id:"newPage",opts:{},url:r};if(!r){var s=this.bookmarkAnchor,o=s.href;window.location.href==o&&(r=decodeURIComponent(s.hash))}if(n.forwardStack.length>0&&n.forwardStack[n.forwardStack.length-1].hash===r){var e=n.handleForwardButton();return i=e.state,this.showView(i),void (1==n.historyStack.length&&(this.bookmarkAnchor.isFirst=!0))}var u=-1;if(t>=2){for(var a=t;a>=2;a--)n.historyStack[a-2].hash===r&&(u=a-2);if(u>-1){for(var a=t-2;a>=u;a--)e=n.handleBackButton();return i=e.state,this.showView(i),void (1==n.historyStack.length&&(this.bookmarkAnchor.isFirst=!0))}}this.showView(i)},t);Lizard.isHybrid&&"file:"==window.location.protocol?$(window).bind("hashchange",s):e.isSupportPushState?$(window).bind("popstate",r):$(window).bind("hashchange",i)}},t}),define("cUtilityCacheView",[],function(){function e(){this.catchs={},this.backups={},this.orderCaches=[]}return e.prototype={add:function(e,t){this.catchs[e]=t,this.orderCaches.push({key:e,url:t.url,viewName:t.viewName}),this.backups[e]={url:t.url,opts:t.opts,text:t.text,datas:t.datas,viewName:t.viewName}},_delElemFromCollection:function(e,t,n){e=_.reject(e,function(e){return e[t]==n})},delOrderCaches:function(e,t){this._delElemFromCollection(this.orderCaches,e,t)},delById:function(e){this.catchs[e]&&delete this.catchs[e],this.delOrderCaches("key",e)},delByName:function(e){this._delElemFromCollection(this.catchs,"viewName",e),this.delOrderCaches("viewName",e)},delByURL:function(e){this._delElemFromCollection(this.catchs,"url",e),this.delOrderCaches("url",e)},delByIdFromBackups:function(e){this.backups[e]&&delete this.backups[e],this.delOrderCaches("key",e)},delByNameFromBackups:function(e){this._delElemFromCollection(this.backups,"viewName",e),this.delOrderCaches("viewName",e)},delByURLFromBackups:function(e){this._delElemFromCollection(this.backups,"url",e),this.delOrderCaches("url",e)},findById:function(e){return this.catchs[e]},findByName:function(e){return _.findWhere(this.catchs,{viewName:e})},findByIdFromBackups:function(e){return this.backups[e]},findByNameFromBackups:function(e){return _.findWhere(this.backups,{viewName:e})},findByURLFromBackups:function(e){return _.findWhere(this.backups,{url:e})},length:function(){return _.size(this.catchs)},each:function(e){_.isFunction(e)&&_.each(this.catchs,function(t,n){e(n,t)})}},e}),define("cUtilityCrypt",[],function(){var e,t={},n=t.Base64,r="2.1.4";"undefined"!=typeof module&&module.exports&&(e=require("buffer").Buffer);var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},n=0,r=e.length;r>n;n++)t[e.charAt(n)]=n;return t}(i),o=String.fromCharCode,u=function(e){if(e.length<2){var t=e.charCodeAt(0);return 128>t?e:2048>t?o(192|t>>>6)+o(128|63&t):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return o(240|t>>>18&7)+o(128|t>>>12&63)+o(128|t>>>6&63)+o(128|63&t)},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(e){return e.replace(a,u)},l=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[i.charAt(n>>>18),i.charAt(n>>>12&63),t>=2?"=":i.charAt(n>>>6&63),t>=1?"=":i.charAt(63&n)];return r.join("")},c=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,l)},h=e?function(t){return(new e(t)).toString("base64")}:function(e){return c(f(e))},p=function(e,t){return t?h(e).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):h(e)},d=function(e){return p(e,!0)},v=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return o((n>>>10)+55296)+o((1023&n)+56320);case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},g=function(e){return e.replace(v,m)},y=function(e){var t=e.length,n=t%4,r=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),i=[o(r>>>16),o(r>>>8&255),o(255&r)];return i.length-=[0,0,2,1][n],i.join("")},b=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,y)},w=e?function(t){return(new e(t,"base64")).toString()}:function(e){return g(b(e))},E=function(e){return w(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},S=function(){var e=t.Base64;return t.Base64=n,e};if(t.Base64={VERSION:r,atob:b,btoa:c,fromBase64:E,toBase64:p,utob:f,encode:p,encodeURI:d,btou:g,decode:E,noConflict:S},"function"==typeof Object.defineProperty){var x=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return E(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(e){return p(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return p(this,!0)}))}}return t}),define("cUtilityFlip",[],function(){!function(){function e(e,t,n,r,i){var s=Math.abs(e-t),o=Math.abs(n-r),u=s>=o?e-t>0?"left":"right":n-r>0?"up":"down";return i&&("left"==u||"right"==u?o/s>i&&(u=""):("up"==u||"down"==u)&&s/o>i&&(u="")),u}function t(t,n,l,c,p){t&&t.on(s,function(e){var t=e.touches&&e.touches[0]||e;i.x1=t.pageX,i.y1=t.pageY}).on(o,function(e){var t=e.touches&&e.touches[0]||e;i.x2=t.pageX,i.y2=t.pageY,c||e.preventDefault()}).on(u,function(){if(i.x2&&Math.abs(i.x1-i.x2)>r||i.y2&&Math.abs(i.y1-i.y2)>r){var t=e(i.x1,i.x2,i.y1,i.y2,p);n===t&&"function"==typeof l&&l()}else"tap"===n&&"function"==typeof l&&l()})}function n(e){e&&e.off(s).off(o).off(u)}var r=20,i={},s="touchstart",o="touchmove",u="touchend";"ontouchstart"in window||(s="mousedown",o="mousemove",u="mouseup"),$.flip=t,$.flipDestroy=n}()}),define("cSessionStorage",["cBase","cAbstractStorage"],function(e,t){var n=new e.Class(t,{__propertys__:function(){},initialize:function($super,e){this.proxy=window.sessionStorage,$super(e)}});return n.getInstance=function(){return this.instance?this.instance:this.instance=new this},n.sessionStorage=n.getInstance(),n}),define("cSessionStore",["cBase","cAbstractStore","cSessionStorage"],function(e,t,n){var r=new e.Class(t,{__propertys__:function(){this.sProxy=n.getInstance()},initialize:function($super,e){$super(e)}});return r}),define("memStore",["cBase","cStore"],function(e,t){var n=new e.Class(t,{__propertys__:function(){this.idField="",this.data=null,this.store=null,this.useLocalStore=!1},initialize:function(e){for(var n=["key","lifeTime","useServerTime","isLocal","defaultData","rollbackEnabled","useLocalStore"],r={},i=0,s=n.length;s>i;i++){var o=e[n[i]]||this[n[i]];"undefined"!=typeof o&&(r[n[i]]=o)}this.store=new t(r)},refresh:function(){var e=this.store.get();!this.data&&e&&this.data&&this.data[this.idField]!==e[this.idField]&&(this.data=e)},commit:function(){this.store.set(this.data)},rollback:function(){this.data=null},set:function(e,t){this.data=e,t&&(this.dataMap||(this.dataMap={}),this.dataMap[t]=e,this.store.useLocalStore&&this.store.set(_.pick(this.dataMap,[t])))},setAttr:function(e,t){this.data[e]=t},set2Store:function(e){this.set(e),this.commit()},get:function(e){return e?(this.dataMap||(this.dataMap=this.store.get()),this.dataMap&&this.dataMap[e]?this.dataMap[e]:null):this.data},getAttr:function(e){return this.data[e]}});return n.getInstance=function(){return this.instance?this.instance:this.instance=new this},n}),define("PageStore",["cBase","cStore","cUtility"],function(e,t){var n=new e.Class(t,{__propertys__:function(){this.CONST_TAG="tag",this.CONST_BACKURL="backurl",this.CONST_CALLBACK="callback",this.CONST_CURVALUE="curvalue"},initialize:function($super,e){$super(e)},save:function(e){var t=this.get(),n=this;$.isArray(t.callback)?$.each(t.callback,function(t,r){n._callFunByStr(r,e)}):this._callFunByStr(t.callback,e)},setCurrent:function(e,t,n,r){var i={};i[this.CONST_TAG]=e,i[this.CONST_BACKURL]=t,i[this.CONST_CALLBACK]=n,i[this.CONST_CURVALUE]=r,this.set(i)},getCurrent:function(){return this.get()},getValue:function(){var e=this.get();return this._callFunByStr(e.curvalue)},_callFunByStr:function(e,t,n,r){n=n||TaxiStore;var i,s,o,u=/^(?:(.*)::)?(.*):(.*)$/i.exec(e);if(u&&4===u.length&&!u[1]){if(i=n[u[2]],s=u[3],i&&i.getInstance){var a=i.getInstance()[s](t);return r&&r(a),a}}else u&&4===u.length&&u[1]&&(o=u[1],i=u[2],s=u[3],requirejs([o],function(e){if(e&&e[i]&&e[i].getInstance){var n=e[i].getInstance(),o=n[s]&&n[s](t);r&&r(o)}}));return!1}});return n}),define("cUserModel",["cBase","cModel","CommonStore"],function(e,t,n){var r=n.UserStore.getInstance(),i=(n.HeadStore.getInstance(),{});return i.NotUserLoginModel=new e.Class(t,{__propertys__:function(){this.url="/html5/Account/NonUserLogin",this.param={},this._abortres={},this.isAbort=!1},initialize:function($super,e){$super(e)},excute:function(e,n,i,s,o){var u=r.getUser();if(u&&u.IsNonUser)return void ("function"==typeof e&&e.call(s,u));this.isAbort=!1;var a="http://"+t.baseurlold().domain+this.url,f=function(t){1==t.ServerCode&&t.Data?(r.setUser(t.Data),"function"==typeof e&&e.call(s,t)):"function"==typeof n&&n.call(s)},l=function(){return this.isAbort?("function"==typeof o&&o.call(s),void (this.isAbort=!1)):void ("function"==typeof n&&n.apply(s,arguments))};this._abortres=$.ajax({type:"get",url:a,dataType:"json",crossDomain:!0,success:$.proxy(f,this),error:$.proxy(l,this),timeout:25e3})},abort:function(){this.isAbort=!0,this._abortres&&"function"==typeof this._abortres.abort&&this._abortres.abort()}}),i.UserLoginModel=new e.Class(t,{__propertys__:function(){this.param={},this.url="10090/GetUserInfoToH5.json"},initialize:function($super,e){$super(e),this.baseurl=this.seturl()},seturl:function(){var e=window.location.host,t="restapi/soa2/",n="m.ctrip.com";return e.match(/^m\.ctrip\.com/i)?n="m.ctrip.com":e.match(/\.uat\.qa/i)?n="gateway.m.uat.qa.nt.ctripcorp.com":e.match(/\.fat/i)&&(n="gateway.m.fws.qa.nt.ctripcorp.com"),{domain:n,path:t}}}),i}),define("cMultipleDate",["libs","c"],function(e,t){var n=t.base,r=new n.Class({__propertys__:function(){this.models=new n.Hash,this.index=0,this.results={}},initialize:function(e){this.setOption(e)},setOption:function(e){for(var t in e)switch(t){case"models":this.addModels(e[t])}},addModel:function(e,t){this.models.add(e,t)},addModels:function(e){for(var t in e)e.hasOwnProperty(t)&&this.models.add(t,e[t])},removeModelByName:function(e){this.models.del(e)},removeModelByIndex:function(e){this.models.delByIndex(e)},excute:function(e,t,n,r,i){if(!this.models.length())throw"No model";this.index=0,this._request(e,t,n,r,i)},_request:function(e,t,n,r,i){var s=this.models.index(this.index),o=this;s.excute(function(s){return o.results[o.models.getKey(o.index)]=s,o.index++,o.index>=o.models.length()?(e&&e.call(this,o.results),void (o.results={})):void o._request(e,t,n,r,i)},function(e){t&&t.call(this,e)},n,r,i)}});return r}),define("cUIView",["libs","cUIAlert","cUIWarning","cUIHeadWarning","cUIWarning404","cUIToast","cSales","cStorage","cBase","CommonStore","cUtility","cUILoading","cUIBubbleLayer"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function p(e,t,n){e&&e.originalEvent&&alert(e.originalEvent.message+" "+t+" "+n)}function d(){return!1}var v=u.localStorage;document.body&&(document.body.tabIndex=1e4);var m=new t({title:"提示信息",message:"",buttons:[{text:"知道了",click:function(){this.hide()}}]}),g=new t({title:"提示信息",message:"您的订单还未完成，是否确定要离开当前页面？",buttons:[{text:"取消",click:function(){this.hide()},type:t.STYLE_CANCEL},{text:"确定",click:function(){this.hide()},type:t.STYLE_CONFIRM}]}),y=new n({title:""}),b=new r({title:""}),w=new i,E=new c,S=new s,x=new h,T=null;return Backbone.View.extend({ENUM_STATE_NOCREATE:0,ENUM_STATE_CREATE:1,ENUM_STATE_LOAD:2,ENUM_STATE_SHOW:3,ENUM_STATE_HIDE:4,pageid:0,scrollPos:{x:0,y:0},header:null,footer:null,cSales:o,warning:null,alert:null,onCreate:function(){},viewInitialize:function(){},initialize:function(e,t,n){1==arguments.length&&(this.$el=arguments[0].el,e={query:{}},t={forward:function(){0},backward:function(){0},loadView:function(){0}},n=""),this.$el.addClass("sub-viewport"),this.id=_.uniqueId("viewport"),3==arguments.length&&this.$el.attr("id","id_"+this.id),n&&(this.viewname=n),this.pageid&&this.$el.attr("page-id",this.pageid),this.viewdata={},this.appliction=t,this.request=e,this.$el.attr("page-url",this.request.viewpath),this.state=this.ENUM_STATE_CREATE,this.alert=m,this.warning=y,this.headwarning=b,this.warning404=w,this.loading=E,this.toast=S,this.bubbleLayer=x,this.confirm=g,this.viewport=$(".main-viewport"),_.isArray(this.css)&&this.appendCss(this.css),this.debug();try{this.onCreate()}catch(r){}},_initializeHeader:function(){var e=this;this.header.backUrl&&this.$el.on("click","#js_return",function(){e.back(e.header.backUrl)}),this.header.home&&this.$el.delegate("#js_home","click",function(){e.home()}),this.header.phone&&this.$el.find("#js_phone").attr("href","tel:"+this.header.phone),this.header.title&&this.$el.find("header h1").text(this.header.title),this.header.subtitle&&this.$el.find("header p").text(this.header.subtitle),this.header.rightAction&&this.$el.delegate("header div","click",this.header.rightAction)},_initializeFooter:function(){if(this.footer&&(this.footer.hide(),this.footer.setCurrentView(this)),!l.isInApp()&&this.hasAd&&!this.footer.isExpire()){var e=this.adContainer?this.$el.find("#"+this.adContainer):$("#footer"),t=this.footer.rootBox;t&&t.attr("id")!=e.attr("id")&&(this.footer.remove(),this.footer.isCreate=!1),this.footer.update({rootBox:e}),this.footer.show()}},__onLoad:function(e){document.activeElement&&document.activeElement.blur(),this.getServerDate(),this.disposeChannel(),this.header=this._getDefaultHeader(),this.state=this.ENUM_STATE_LOAD,this.onLoad&&this.onLoad(e)},__onShow:function(){document.activeElement&&document.activeElement.blur(),document.activeElement.blur,this.state=this.ENUM_STATE_SHOW,window.scrollTo(0,0),this.onShow&&this.onShow(),this._sendUbt(),this._initializeHeader(),this._initializeFooter(),this.__updateSales(this.$el),this.onBottomPull&&(this._onWidnowScroll=$.proxy(this.onWidnowScroll,this),this.addScrollListener()),this._sendGa(),this._sendKenshoo(),this.resetViewMinHeight(),this.FixedInput||(this.$("input").on("focus",function(e){("tel"==e.target.type||"text"==e.target.type)&&(T||(d(),T=setInterval(function(){d()},500)))}),this.FixedInput=!0)},resetViewMinHeight:function(){},__onHide:function(e){this.state=this.ENUM_STATE_HIDE,this.onHide&&this.onHide(e),this.hideHeadWarning(),this.hideWarning(),this.hideLoading(),this.hideWarning404(),this.hideToast(),this.hideConfirm(),this.hideMessage(),this.onBottomPull&&this.removeScrollListener()},showLoading:function(){this.loading.show(),this.loading.firer=this},hideLoading:function(){this.loading.firer&&this.loading.firer!=this||this.loading.hide()},forward:function(){this.appliction.forward.apply(null,arguments)},back:function(){this.appliction.back.apply(null,arguments)},jump:function(e,t){l.isInApp()?(e=e.replace(window.BASEURL,""),this.forward(e)):t?window.location.replace(e):window.location.href=e},home:function(){this.appliction.forward("")},setTitle:function(e){this.appliction.setTitle("携程旅行网-"+e)},restoreScrollPos:function(){window.scrollTo(this.scrollPos.x,this.scrollPos.y)},getQuery:function(e){return this.request.query[e]||null},getPath:function(e){return this.request.path[e]||null},getRoot:function(){return this.request.root||null},showMessage:function(e,t){this.alert.setViewData({message:e,title:t}),this.alert.show()},hideMessage:function(){this.alert.hide()},showConfirm:function(e,n,r,i,s,o){this.confirm.setViewData("object"==typeof e&&e.message?e:{message:e,title:n,buttons:[{text:o||"取消",click:function(){"function"==typeof i&&i(),this.hide()},type:t.STYLE_CANCEL},{text:s||"确定",click:function(){"function"==typeof r&&r(),this.hide()},type:t.STYLE_CONFIRM}]}),this.confirm.show()},hideConfirm:function(){this.confirm.hide()},showWarning:function(e,t){e&&this.warning.setTitle(e,t),this.warning.show()},hideWarning:function(){this.warning.hide()},showHeadWarning:function(e,t,n){e&&this.headwarning.setTitle(e,t,n),this.headwarning.show()},hideHeadWarning:function(){this.headwarning.hide()},showBubbleLayer:function(e){this.bubbleLayer.showMenu(e)},hideBubbleLayer:function(){this.bubbleLayer.hide()},showWarning404:function(e,t){e&&this.warning404.retryClick(e),this.warning404.show(),t&&this.warning404.options(t),this.warning404.firer=this},hideWarning404:function(){this.warning404.firer&&this.warning404.firer!==this||this.warning404.hide()},showNoHeadWarning:function(e,t){e&&this.NoHeadWarning.setContent(e,t),this.NoHeadWarning.show()},showToast:function(e,t,n,r){this.toast.isShow()||(r="undefined"!=typeof r?r:!0,this.toast.show(e,t,n,r),this.toast.firer=this)},hideToast:function(){this.toast.firer&&this.toast.firer!=this||this.toast.hide()},updateHeader:function(e){for(var t in e)this.header[t]=e[t];this._initializeHeader()},_getDefaultHeader:function(){return{backUrl:null,home:!1,phone:null,title:null,subtitle:null,rightAction:null}},__updateSales:function(e){var t=location.host,n=document.referrer,r="";t&&-1===n.indexOf(t)&&(n=n.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),n.indexOf("baidu")>-1&&(r="SEO_BAIDU"),n.indexOf("google")>-1&&(r="SEO_GOOGLE"),n.indexOf("soso.com")>-1&&(r="SEO_SOSO"),n.indexOf("sogou")>-1&&(r="SEO_SOGOU"),n.indexOf("m.so.com")>-1&&(r="SEO_SO"),n.indexOf("so.360")>-1&&(r="SEO_360SO"),n.indexOf("bing.com")>-1&&(r="SEO_BING"),n.indexOf("yahoo")>-1&&(r="SEO_YAHOO"),n.indexOf("youdao")>-1&&(r="SEO_YOUDAO"),(n.indexOf("jike.com")>-1||n.indexOf("babylon.com")>-1||n.indexOf("ask.com")>-1||n.indexOf("avg.com")>-1||n.indexOf("easou.com")>-1||n.indexOf("panguso.com")>-1||n.indexOf("yandex.com")>-1)&&(r="SEO_360SO"));var i=window.localStorage.getItem("SOURCEID"),s=this.getQuery("sourceid"),a=this.getQuery("sales"),l=f.SalesStore.getInstance().get(),c=this.getQuery("sales")||r||l&&l.sales,h=this.getQuery("sourceid")||i||l&&l.sourceid;(s&&+s>0||a&&a.length>0)&&u.localStorage.oldRemove("APP_DOWNLOAD"),c||h?(c&&o.setSales(c),h&&o.setSourceId(h),o.getSalesObject(c||h,$.proxy(function(t){if((!t.appurl||t.appurl.length<=0)&&this.footer&&this.footer.rootBox){var n=this.footer.rootBox.find("#dl_app");n.length>0&&n.hide()}this.warning404.tel=t.tel?t.tel:"4000086666",o.replaceContent(e)},this))):t&&-1===n.indexOf(t)&&(n=n.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),n.indexOf("baidu")>-1&&(c="SEO_BAIDU"),n.indexOf("google")>-1&&(c="SEO_GOOGLE"),n.indexOf("soso.com")>-1&&(c="SEO_SOSO"),n.indexOf("sogou")>-1&&(c="SEO_SOGOU"),n.indexOf("m.so.com")>-1&&(c="SEO_SO"),n.indexOf("so.360")>-1&&(c="SEO_360SO"),n.indexOf("bing.com")>-1&&(c="SEO_BING"),n.indexOf("yahoo")>-1&&(c="SEO_YAHOO"),n.indexOf("youdao")>-1&&(c="SEO_YOUDAO"),(n.indexOf("jike.com")>-1||n.indexOf("babylon.com")>-1||n.indexOf("ask.com")>-1||n.indexOf("avg.com")>-1||n.indexOf("easou.com")>-1||n.indexOf("panguso.com")>-1||n.indexOf("yandex.com")>-1)&&(r="SEO_360SO"),c&&o.setSales(c),setTimeout(function(){o.replaceContent(e)},1))},getServerDate:function(e){return l.getServerDate(e)},now:function(){return l.getServerDate()},debug:function(){var e=this.request.query.debug||v.get("DEBUG");"yes"==e?($(window).unbind("error",p),$(window).bind("error",p),v.set("DEBUG",e,(new a.Date(a.getServerDate())).addDay(1).valueOf())):"no"==e&&($(window).unbind("error",p),v.remove("DEBUG"))},_sendUbt:function(){if(window.$_bf&&1==window.$_bf.loaded){if(0==this.pageid)return;var e=this._getAurl(),t=this.request.query,n=$("#page_id"),r=$("#bf_ubt_orderid"),i=location.protocol+"//"+location.host+e,s=+this.pageid;l.isInApp()&&(s+=1e3,i="http://hybridm.ctrip.com/"+e.substr(e.indexOf("webapp"))),1==n.length&&n.val(s),1==r.length&&r.val(t&&t.orderid?t.orderid:""),window.$_bf.asynRefresh({page_id:s,url:location.protocol+"//"+location.host+e})}else l.isInApp()||setTimeout($.proxy(this._sendUbt,this),300)},_sendGa:function(){if("undefined"!=typeof _gaq){var e=this._getAurl();_gaq.push(["_trackPageview",e])}else setTimeout($.proxy(this._sendGa,this),300)},_sendKenshoo:function(){var e=this.request.query;if(e&&e.orderid){var t="https://2113.xg4ken.com/media/redir.php?track=1&token=8515ce29-9946-4d41-9edc-2907d0a92490&promoCode=&valueCurrency=CNY&GCID=&kw=&product=";t+="&val="+e.val+"&orderId="+e.orderid+"&type="+e.type;var n="<img width='1' height='1' src='"+t+"'/>";$("body").append(n)}},_getAurl:function(){var e,t=this.request.root;return this.request.viewpath&&(t+="#"+this.request.viewpath),this.request.path.length>0&&(e=$.param(this.request.query),t+="!"+this.request.path.join("/")+(e.length?"?"+e:"")),t},disposeChannel:function(){var e,t=this.getQuery("allianceid"),n=this.getQuery("sid"),r=this.getQuery("ouid");if(t&&n){if(e={AllianceID:t,SID:n,OUID:r},f.UnionStore.getInstance().set(e),this.footer&&this.footer.rootBox){var i=this.footer.rootBox.find("#dl_app");i.length>0&&i.hide()}}else{var s=location.host,o=document.referrer;if(s&&-1===o.indexOf(s)&&(o=o.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),o.indexOf("baidu")>-1&&(t=t||"4897",n=n||"353693",r=r||""),o.indexOf("google")>-1&&(t=t||"4899",n=n||"353694",r=r||""),o.indexOf("soso.com")>-1&&(t=t||"4900",n=n||"353696",r=r||""),o.indexOf("sogou")>-1&&(t=t||"4901",n=n||"353698",r=r||""),o.indexOf("m.so.com")>-1&&(t=t||"5376",n=n||"353699",r=r||""),o.indexOf("so.360")>-1&&(t=t||"5376",n=n||"353700",r=r||""),o.indexOf("bing.com")>-1&&(t=t||"4902",n=n||"353701",r=r||""),o.indexOf("yahoo")>-1&&(t=t||"4903",n=n||"353703",r=r||""),o.indexOf("youdao")>-1&&(t=t||"4904",n=n||"353704",r=r||""),(o.indexOf("jike.com")>-1||o.indexOf("babylon.com")>-1||o.indexOf("ask.com")>-1||o.indexOf("avg.com")>-1||o.indexOf("easou.com")>-1||o.indexOf("panguso.com")>-1||o.indexOf("yandex.com")>-1)&&(t=t||"5376",n=n||"353700",r=r||""),t&&n&&(e={AllianceID:t,SID:n,OUID:r},f.UnionStore.getInstance().set(e),this.footer&&this.footer.rootBox))){var i=this.footer.rootBox.find("#dl_app");i.length>0&&i.hide()}}},getGuid:function(){return l.getGuid()},setTitle:function(e){document.title=e},appendCss:function(e){if(e)for(var t=0,n=e.length;n>t;t++)this.css[e[t]]||(this.head.append($('<link rel="stylesheet" type="text/css" href="'+e[t]+'" />')),this.css[e[t]]=!0)},addClass:function(e){this.$el.addClass(e)},removeClass:function(e){this.$el.removeClass(e)},__load:function(e){this.__onLoad(e)},show:function(){this.$el.parent()==this.viewport&&this.viewport.append(this.$el),this.$el.show(),this.__onShow()},hide:function(e){this.$el.hide(),this.__onHide(e)}})}),function(){"object"==typeof window._Mkt_&&(window._Mkt_=[]);var e={t:600,hasApp:!1,key:"HAS_CTRIP_APP",appProtocol:"ctrip://wireless",openApp:function(t,n,r){var i=e.getAppData(),s=Date.now();if(i&&""!=i)return i.hasApp?"function"==typeof t?t()&&r&&r.length>0&&(window.location=r):r&&r.length>0&&(window.location=r):"function"==typeof n&&n(),"";(!r||r.length<=0)&&"function"==typeof n&&n();var o=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",u=-1!=o.indexOf("android",0)||-1!=o.indexOf("adr",0)?1:0,f=u&&-1!=o.indexOf("chrome",0)&&-1==o.indexOf("nexus",0),l=$('<iframe style="display: none;"></iframe>');l.attr("src",r),$("body").append(l),f&&(r&&r.length>0&&(window.location=r),setTimeout(function(){"function"==typeof n&&n()},1)),setTimeout(function(){e.testApp(s)},e.t),e.setTestResult(t,n)},testApp:function(t){var n=Date.now();e.hasApp=n-t<e.t+200?!1:!0},setTestResult:function(t,n){setTimeout(function(){e.hasApp?"function"==typeof t&&t():"function"==typeof n&&n();var r=new Date;r.setHours(r.getHours()+1);var i={value:{hasApp:e.hasApp},timeout:r.toUTCString()};window.localStorage.setItem(e.key,JSON.stringify(i)),window.hasApp=e.hasApp},e.t+1e3)},getAppData:function(){return""}};window.AppUtility=e}();var adOptions=adOptions||{};if(adOptions.__propertys__=function(){},adOptions.initialize=function($super,e){this.data=e||{},this.storeKey="APP_DOWNLOAD",$super(e)},adOptions.update=function(e){this.isInFooter&&(this.remove(),this.isCreate=!1),this.rootBox=e.rootBox,this.root||(this.root=this.rootBox),this.isInFooter=!!this.rootBox.hasClass("js_in_Footer"),this.addEvent&&(this.removeEvent("onShow"),this.addEvent("onShow",this.onShow))},adOptions.createHtml=function(){var e=(adOptions.getUrlParam("sourceid"),adOptions.getUrlParam("sales"),adOptions.getUrlParam("allianceid")),t=adOptions.getUrlParam("sid"),n=this.isInFooter?"":"fix_bottom",r="/market/download.aspx?from=H5",i=adOptions._get("SALES_OBJECT"),s=adOptions._get("UNION"),o=adOptions._getCookie("UNION"),u="";e&&e.length>0&&t&&t.length>0&&(u="display:none;"),(s||o)&&(u="display:none;"),i&&i.sid&&+i.sid>0&&((!i.appurl||i.appurl.length<=0)&&(u="display:none;"),r=i.appurl?i.appurl:"/market/download.aspx?from="+i.sid),0==this.checkDeviceSupport()&&(u="display:none;");for(var a=[5942,1127,7225,5942,3588],f=0,l=a.length;l>f;f++)if(+e===a[f]){u="";break}if(u.length>0)return $("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"),adOptions.saveExpire(1),"";var c=function(){return window.navigator.userAgent.indexOf("MicroMessenger")>-1},h=function(){return window.navigator.userAgent.indexOf("CtripLite")>-1};if(!c()&&!h()){var p=this.setAppUrl();return['<div data-appurl="'+p+'" id="dl_app" style="'+u+'" class="',n,'"> <div id="icon_text" class="txt_middle"><img src="http://res.m.ctrip.com/html5/content/images/icon_text_s6_1.png"/></div>',' <a href="'+r+'" id="app_link" class="txt_middle __appaddress__"><img src="http://res.m.ctrip.com/html5/content/images/icon_open_s6.png"/></a>','<div id="close_icon"></div>',"</div>"].join("")}},adOptions.getUrlParam=function(e){var t=document.location.href||"",n=new RegExp("(\\?|&)"+e+"=([^&]+)(&|$)","i"),r=t.match(n);return r?r[2]:""},adOptions.setAppUrl=function(){var e=adOptions._get("SALES"),t=window.location.href,n=AppUtility.appProtocol,r=null,i=null,s=null,o=null,u=null,a=null,f=null,l=null,c=null,h=null,p=null,d=null,v=null,m=$("#page_id").val(),g=new RegExp("-","g"),y=new RegExp("/","g"),b=null;if(m&&+m>0){if(234002==+m&&(b=t.substring(t.lastIndexOf("/")+1).replace(".html",""),r="h5?path=diyshx&page=index.html#/detail.pro#sdpid=",r=b?r+b:r),(212092==+m||212093==+m||212094==+m||210090==+m)&&(r=212092==+m?"hotel_inquire":212093==+m||210090==+m?"hotel_inland_list":212094==+m?"InlandHotel":"",i=window.localStorage?window.localStorage.getItem("HOTELSEARCHINFO"):null,i&&(i=JSON.parse(i),212092==+m&&(i.data&&(s=i.data.CheckInDate.replace(g,""),o=i.data.CheckOutDate.replace(g,""),u=i.data.CheckInCityID,a=i.data.DistrictId?+i.data.DistrictId<=0?"":i.data.DistrictId:"",f=i.data.BrandId,l=i.data.BrandName,c=0),r+="?c1="+(s||"")+"&c2="+(o||"")+"&c3="+(u||"")+"&c4="+(a||"")+"&c5="+(f||"")+"&c6="+(l||"")+"&c7="+(c||"")),(212093==+m||210090==+m)&&(i.data&&(s=i.data.CheckInDate.replace(g,""),o=i.data.CheckOutDate.replace(g,""),u=i.data.CheckInCityID,a=i.data.DistrictId?+i.data.DistrictId<=0?"":i.data.DistrictId:"",f=0,l=i.data.BrandId?+i.data.BrandId<=0?"":i.data.BrandId:"",c=i.data.BrandName||"",h=0,p=1,d="",v="",210090==+m&&(p=2,d=i.data.Latitude,v=i.data.Longitude)),r+="?c1="+(s||"")+"&c2="+(o||"")+"&c3="+(u||"")+"&c4="+(a||"")+"&c5="+(f||"")+"&c6="+(l||"")+"&c7="+(c||"")+"&c8="+(h||"")+"&c9="+(p||"")+"&c10="+(d||"")+"&c11="+(v||"")),212094==+m))){i.data&&(s=i.data.CheckInDate.replace(g,""),o=i.data.CheckOutDate.replace(g,""),u=i.data.CheckInCityID);var w=window.localStorage?window.localStorage.getItem("HOTELDETAIL"):null;w&&(w=JSON.parse(w),w&&w.data&&(a=w.data.HotelID)),r+="?checkInDate="+(s||"")+"&checkOutDate="+(o||"")+"&cityId="+(u||"")+"&hotelId="+(a||"")}if((212001==+m||214008==+m)&&(r=212001==+m?"hotel_groupon_list":214008==+m?"hotel_groupon_detail":"",212001==+m&&(i=window.localStorage?window.localStorage.getItem("TUAN_SEARCH"):null,i=i?JSON.parse(i):null,s=i&&i.value?i.value.ctyId:"2",r+="?c1="+(s||"2")),214008==+m&&(i=window.localStorage?window.localStorage.getItem("TUAN_DETAILS"):null,i=i?JSON.parse(i):null,s=i&&i.value?i.value.id:null,r+="?c1="+(s||""))),212041==+m||212042==+m){if(212042==+m){i=window.localStorage?window.localStorage.getItem("AIRSTATE_DETAIL_PARAM"):null,i=i?JSON.parse(i):null;var E=i.data.dPort||"",S=i.data.aPort||"",x=i.data.fNo||"",T=i.data.fdate;r="flight_board_list",r+="?c1="+T+"&c2="+x+"&c3="+E+"&c4="+S}if(212041==+m){i=window.localStorage?window.localStorage.getItem("SEARCHINFO"):null,i=i?JSON.parse(i):null;var E=i.data.DepartAirportCode||"",S=i.data.ArriveAirportCode||"",T=i.data.DepartDate.replace(/-/g,"");r="flight_board_inquire",r+="?c1="+T+"&c2="+E+"&c3="+S}}if(212003==+m||212004==+m||212009==+m||214019==+m||214209==+m){if(i=window.localStorage?window.localStorage.getItem("S_FLIGHT_AirTicket"):null,i=i?JSON.parse(i):null,i&&i.value&&i.value._items&&i.value._items.length>0){s=i.value.tripType,o=i.value._items[0].dCtyId,u=i.value._items[0].aCtyId,a=i.value._items[0].date.replace(y,""),s&&+s>1&&i.value._items.length>1&&(f=i.value._items[1].date.replace(y,""));var N=window.localStorage?window.localStorage.getItem("S_FLIGHT_SUBJOIN"):null;(214019==+m||214209==+m)&&(N=window.localStorage?window.localStorage.getItem("S_FLIGHT_INTLAirTicket"):null),N=N?JSON.parse(N):null,l="",c="",h="",p="",d="",v="",N&&N.value&&(214019==+m||214209==+m?(l=1,0==+N.value["class"]&&(c="1"),1==+N.value["class"]&&(c="2"),2==+N.value["class"]&&(c="3"),3==+N.value["class"]&&(c="4"),2==+N.value.sortRule&&(2==+N.value.sortType&&(h="1"),1==+N.value.sortType&&(h="2")),1==+N.value.sortRule&&(2==+N.value.sortType&&(h="3"),1==+N.value.sortType&&(h="4")),214209==+m&&(c=h=p="")):("1"==N.value["departfilter-type"]&&("3"==N.value["departfilter-value"]&&(l="5"),"0"==N.value["departfilter-value"]&&(l="1")),"price"==N.value["depart-sorttype"]&&("asc"==N.value["depart-orderby"]&&(c="3"),"desc"==N.value["depart-orderby"]&&(c="4")),"time"==N.value["depart-sorttype"]&&("asc"==N.value["depart-orderby"]&&(c="1"),"desc"==N.value["depart-orderby"]&&(c="2")),"0"==N.value["departfilter-type"]&&(p=N.value["departfilter-value"]||"",p=p.replace("-","|"),p=p.replace(":",""),p=p.replace(":","")),"2"==N.value["departfilter-type"]&&(v=N.value["departfilter-value"]||""),212009==+m&&(l=c=h=p=v="")))}i=!i&&window.localStorage?window.localStorage.getItem("AIRSTATE_DETAIL_PARAM"):null,i=i?JSON.parse(i):null,i&&i.data&&(s=i.data.fdate||"",o=i.data.fNo||"",u=i.data.dPort||"",a=i.data.aPort||""),212003==+m&&(r="flight_inquire"),(212009==+m||212004==+m)&&(r=s&&+s>1?"flight_inland_tolist":"flight_inland_singlelist"),(214019==+m||214209==+m)&&(r=s&&+s>1?"flight_int_tolist":"flight_int_singlelist"),212042==+m&&(r="flight_board_detail"),r+="?c1="+(s||"")+"&c2="+(o||"")+"&c3="+(u||"")+"&c4="+(a||"")+"&c5="+(f||"")+"&c6="+(l||"")+"&c7="+(c||"")+"&c8="+(h||"")+"&c9="+(p||"")+"&c10="+(d||"")+"&c11="+(v||"")}if((212071==+m||212072==+m)&&(r=212071==+m?"train_inquire":"train_list",i=window.localStorage?window.localStorage.getItem("TRAINSSEARCHINFO"):null,i=i?JSON.parse(i):null,i&&i.data&&(s=i.data.DepartCityId||"",o=i.data.ArriveCityId||"",u=i.data.DepartDate||"",u=u.replace(g,"")),r+="?c1="+(s||"")+"&c2="+(o||"")+"&c3="+(u||"")),214040==+m||214045==+m||214046==+m||214041==+m||214345==+m||214346==+m||214042==+m||214353==+m||214354==+m){if(s=o=u=a=f=l="",i=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_LIST_PARAM"):null,i=i?JSON.parse(i):null,214040==+m&&(r="vacation_home"),214045==+m){if(r="vacation_weekend_list",i&&i.value&&(s=i.value.dCtyId,i.value.qparams||i.value.qparams.length>0))for(var C in i.value.qparams){var k=i.value.qparams[C];k&&k.type&&(3==+k.type&&(o=k.val),2==+k.type&&(u=k.val),6==+k.type&&(f=k.val),7==+k.type&&(l=k.val))}r+="?cityId="+(s||"")+"&districtId="+(o||"")+"&travelDaysId="+(u||"")+"&levelId="+(a||"")+"&isSelfProudct="+(f||"")+"&isDiscount="+(l||"")}if(214046==+m&&(r="vacation_nearby_detail",s=o="",i=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_DETAIL_PARAM"):null,i=i?JSON.parse(i):null,i&&i.value&&(s=i.value.dCtyId||"",o=i.value.pid||""),r+="?departCityId="+(s||"")+"&productId="+(o||"")),214041==+m&&(r="vacation_group_inquire",s=o=u=a="",i=window.localStorage?window.localStorage.getItem("VACATIONS_GROUP_SEARCH_PARAM"):null,i=i?JSON.parse(i):null,i&&i.value&&(s=i.value.dCtyId,o=i.value.destKwd),r+="?departCityId="+(s||"")+"&arriveName="+(o||"")+"&travelDaysId="+(u||"")+"&levelId="+(a||"")),214345==+m){if(r="vacation_group_list",s=o=u=a=f=l=c="",i=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_LIST_PARAM"):null,i=i?JSON.parse(i):null,i&&i.value&&(s=i.value.dCtyId,o=i.value.destKwd,i.value.qparams||i.value.qparams.length>0))for(var C in i.value.qparams){var k=i.value.qparams[C];k&&k.type&&(3==+k.type&&(u=k.val),2==+k.type&&(a=k.val),6==+k.type&&(l=k.val),7==+k.type&&(c=k.val))}r+="?departCityId="+(s||"")+"&arriveName="+(o||"")+"&districtId="+(u||"")+"&travelDaysId="+(a||"")+"&levelId="+(f||"")+"&isSelfProduct="+(l||"")+"&isDiscount="+(c||"")}if(214346==+m&&(r="vacation_group_detail",s=o="",i=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_DETAIL_PARAM"):null,i=i?JSON.parse(i):null,i&&i.value&&(s=i.value.dCtyId||"",o=i.value.pid||""),r+="?departCityId="+(s||"")+"&productId="+(o||"")),214042==+m){if(r="vacation_cruises_inquire",i=window.localStorage?window.localStorage.getItem("VACATIONS_CRUISE_SEARCH_PARAM"):null,i=i?JSON.parse(i):null,s=o="",i&&i.value&&(s=i.value.dCtyId||"",i.value.qparams||i.value.qparams.length>0))for(var C in i.value.qparams){var k=i.value.qparams[C];14==+k.type&&(o=k.val)}r+="?departCityId="+(s||"")+"&routeId="+(o||"")}if(214353==+m){if(r="vacation_cruises_list",i=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_LIST_PARAM"):null,i=i?JSON.parse(i):null,s=o=u=a=f=l=c="",i&&i.value&&(s=i.value.dCtyId,i.value.qparams||i.value.qparams.length>0))for(var C in i.value.qparams){var k=i.value.qparams[C];k&&(14==+k.type&&(o=k.val),10==+k.type&&(u=k.val),11==+k.type&&(a=k.val),12==+k.type&&(f=k.val),6==+k.type&&(l=k.val),7==+k.type&&(c=k.val))}r+="?departCityId="+(s||"")+"&routeId="+(o||"")+"&companyId="+(u||"")+"&productFormId="+(a||"")+"&portDepartId="+(f||"")+"&isSelfProduct="+(l||"")+"&isDiscount="+(c||"")}214354==+m&&(r="vacation_cruises_detail",i=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_DETAIL_PARAM"):null,i=i?JSON.parse(i):null,s=o="",i&&i.value&&(s=i.value.dCtyId||"",o=i.value.pid||""),r+="?departCityId="+(s||"")+"&productId="+(o||""))}}n+=r?"/"+r:"";var L=this.getCurrentView(),A=$("#app_url").size()>0&&$("#app_url").val()?$("#app_url").val():"";return L&&L.getAppUrl?n=AppUtility.appProtocol+L.getAppUrl():A&&AppUtility.appProtocol+A,n.indexOf("?")<=-1&&(n+="?v=2"),n+=e&&e.sourceid&&+e.sourceid>0?"&extendSourceID="+e.sourceid:"&extendSourceID=8888",0,n},adOptions.onShow=function(){this.root.off("click"),this.root.find("#close_icon").on("click",$.proxy(function(){this.saveExpire(1),this.hide(),$("footer")&&$("footer").removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85")},this));var e=this;this.root.find("#app_link").off("click").on("click",function(t){t.preventDefault();var n=$(this).attr("href"),r=e.setAppUrl(),i=($("#page_id").val(),navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"");0;var s=-1!=i.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0;return s?(window.location=r,setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return e.saveExpire(),!0},function(){window.location=n},r),!1}),0==this.checkDeviceSupport()&&("dl_app"==this.root.attr("id")&&this.root.hide(),$("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"))},adOptions.checkDeviceSupport=function(){var e=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",t=-1!=e.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0,n=-1!=e.indexOf("android",0)||-1!=e.indexOf("adr",0)?1:0;return 0==t&&0==n?!1:!0},adOptions.saveExpire=function(e){var t={isExpire:1},n=new Date;e&&(t.isClose=e),n.setDate(n.getDate()+1),this.storeKey||(this.storeKey="APP_DOWNLOAD"),this._set(this.storeKey,t,n.toUTCString())},adOptions.saveAutoDown=function(e){var t={isAutoDown:1,sid:e},n=new Date;n.setDate(n.getDate()+1),this._set("APP_AUTODOWNLOAD",t,n.toUTCString())},adOptions.appDownload=function(){var e=adOptions._get("SALES_OBJECT"),t=AppUtility.appProtocol;t+=e&&e.sid&&+e.sid>0?"?extendSourceID="+e.sid:"?extendSourceID=8888";var n=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",r=-1!=n.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0;r?(window.location=t,setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return!0},function(){var t="http://m.ctrip.com/market/download.aspx?from=H5";e&&(e.appurl&&e.appurl.length>0?t=e.appurl:e.sid&&+e.sid>0&&(t="http://m.ctrip.com/market/download.aspx?from="+e.sid)),window.location.href=t},t)},adOptions.checkForceDownload=function(){},adOptions.checkAutoDownload=function(){var e=this.getUrlParam("sourceid"),t=this.getUrlParam("openapp"),n=this.getUrlParam("downapp");if(!(!e||e.length<=0||0>=+e)){var r=0,i=0,s=0,o=0,u=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",a=-1!=u.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0,f=-1!=u.indexOf("android",0)||-1!=u.indexOf("adr",0)?1:0;n&&(a&&(2==+n||3==+n)&&(r=1),f&&(1==+n||3==+n)&&(i=1));var l=null;t&&(a&&(2==+t||3==+t?o=1:(o=0,l=null)),f&&(1==+t||3==+t?s=1:(s=0,l=null))),(s||o)&&(l=this.setAppUrl());var c=adOptions._get("SALES_OBJECT");if(a){if(0,l&&l.length>0){$(".iOpenApp").remove();var h=$('<iframe name="iOpen" class="iOpenApp" frameborder="0" style="display:none;"></iframe>');h.attr("src",l),$("body").append(h)}adOptions.isAutoDown(e)||!r||1!=+r?(adOptions.saveExpire(0),adOptions.saveAutoDown(e)):(adOptions.saveExpire(0),adOptions.saveAutoDown(e),setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30))}else AppUtility.openApp(function(){return adOptions.saveExpire(0),adOptions.saveAutoDown(e),!0},function(){if(adOptions.isAutoDown(e))return adOptions.saveExpire(0),adOptions.saveAutoDown(e),!0;if(navigator.connection&&navigator.connection.type!=navigator.connection.WIFI)return adOptions.saveExpire(0),adOptions.saveAutoDown(e),!0;var t="http://m.ctrip.com/market/download.aspx?from="+e;if(f){if(!i||1!=+i)return!0;t+="&App=3"}a&&(t+="&App=1"),c&&c.sid&&+c.sid>0&&+c.sid==+e&&c.appurl&&c.appurl.length>0&&(t=c.appurl),adOptions.saveExpire(0),adOptions.saveAutoDown(e),window.location.href=t},l)}},adOptions.create=function(){if($("body").find("iframe").remove(),this.isCreate||this.isExpire()||this.status===this.STATE_ONCREATE)$("footer")&&$("footer").removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85");else{var e=this.createHtml();e&&e.length>0?(this.root=$(e),this.rootBox.append(this.root),this.trigger("onCreate")):($("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85")),this.isCreate=!0}var t=(adOptions.createHtml(),this);setTimeout(function(){adOptions.checkAutoDownload.call(t)},2e3)},adOptions.isExpire=function(){var e=this._get(this.storeKey);return e&&e.isClose?!0:!1},adOptions.isAutoDown=function(){var e=this._get("APP_AUTODOWNLOAD");return e&&e.isAutoDown?!0:!1},adOptions._getCookie=function(e){var t=null;if(e){var n=new RegExp("\\b"+e+"=([^;]*)\\b"),r=n.exec(document.cookie);t=r&&unescape(r[1])}else{var i,s,o=document.cookie.split(";");for(t={},i=0,len=o.length;len>i;i++)s=o[i].split("="),t[s[0]]=unescape(s[2])}return t},adOptions.setCurrentView=function(e){this.curView=e},adOptions.getCurrentView=function(){return this.curView},adOptions._get=function(e){var t=window.localStorage.getItem(e);return t&&(t=JSON.parse(t),Date.parse(t.timeout)>=new Date)?t.value||t.data:""},adOptions._set=function(e,t,n){var r={value:t,timeout:n};window.localStorage.setItem(e,JSON.stringify(r))},window.Lizard||window.location.pathname.indexOf("webapp")>-1||window.localStorage.getItem("isInApp"))define("cAdView",["cBase","cUIAbstractView","libs","cStore"],function(e,t){var n=new e.Class(t,adOptions);return n.getInstance=function(){return this.instance?this.instance:this.instance=new this},n});else{adOptions.show=function(){this.status="",this.create(),this.onShow()},adOptions.hide=function(){this.root.hide()},adOptions.trigger=function(){},adOptions.remove=function(){$("#dl_app").remove()};var config={rootBox:$("#footer")};setTimeout(function(){adOptions.initialize(function(){},config);var e=adOptions;e.update(config),e.show()},800)}adOptions.autoOpenDownApp=function(e,t,n){var r=0,i=0,s=0,o=0,u=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",a=-1!=u.indexOf("mac",0)||-1!=navigator.userAgent.indexOf("ios",0)?1:0,f=-1!=u.indexOf("android",0)||-1!=u.indexOf("adr",0)?1:0;a&&(r=1),f&&(i=1);var l=null;a&&(o=1),f&&(s=1);try{l=this.setAppUrl()}catch(c){}var h=adOptions._get("SALES_OBJECT");a?(l&&l.length>0&&(window.location=l),setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return!0},function(){var t="http://m.ctrip.com/market/download.aspx?from="+e;f&&(t+="&App=3"),a&&(t+="&App=1"),h&&h.sid&&+h.sid>0&&+h.sid==+e&&h.appurl&&h.appurl.length>0&&(t=h.appurl),window.location.href=t},l)},adOptions.popupPromo=function(){var e,t,n,r=function(e,t){t=t||"data";var n=window.localStorage?window.localStorage.getItem(e):null;return n&&(n=JSON.parse(n),n&&n[t])?n[t]:{}};if(adOptions._getCookie("Union")){var i={};adOptions._getCookie("Union").replace(/([^&=]+)=([^&]*)/g,function(e,t,n){i[t]=n}),t=i.AllianceID}if(e=adOptions.getUrlParam("sourceid")||r("SALES").sourceid||r("SALES_OBJECT","value").sid,n=adOptions.getUrlParam("sid")||r("UNION").SID,e&&(t=adOptions.getUrlParam("allianceid")||r("UNION").AllianceID||t,keywords=["baidu.com","google.com","soso.com","so.com","bing.com","yahoo","youdao.com","sogou.com","so.360.cn","jike.com","babylon.com","ask.com","avg.com","easou.com","panguso.com","yandex.com","sm.cn"],sourceids=["1825","1826","1827","1828","1829","1831","1832","1833","1830"],sIds=[130028,130029,409197,353693,130026,135366,297877,130033,130034,131044,110603,353694,130678,135371,353696,130701,135374,110611,353698,130709,135376,110614,426566,426568,353701,130727,135379,139029,110620,353703,130761,135383,353704,130788,135388,110630,353699,353700,189318,135390,130860,130875,303055,156043,130862,130863,130876,130859,240799,159295,442174,176275,240801,231208,278782,326416,353680,295517,130999,130907,112563,176220,110647,3752,125344,144532,120414,171210,86710,110276,447459],allianceids=["4897","4899","4900","4901","4902","4903","4904","5376","5377","3052","13964","13963","18887"],matchPopup=function(){for(var e=!1,t=!1,r=0,i=keywords.length;i>r;r++)if(document.referrer.match(keywords[r])){e=!0;break}for(var r=0,i=sIds.length;i>r;r++)if(+n===sIds[r]){t=!0;break}return e&&t},0,(1==adOptions.getUrlParam("sepopup")||matchPopup())&&document.referrer.indexOf("sepopup=1")<0&&null===document.getElementById("se-popup"))){var s=r("SALES_OBJECT","value"),o=s.tel||"4000086666",u=['<div class="se-popup" id="se-popup">','<div class="se-main" style="width:240px;height:329px;margin-top:-165px;margin-left:-120px;position:fixed;top:50%;left:50%;z-index:10000;">','<img src="http://res.m.ctrip.com/market/images/popup.png" width="100%" />','<a class="se-close" href="javascript:void(0)" style="position:absolute;width:19px;height:19px;top:9px;right:9px;"></a>','<a class="se-openapp __appaddress__" href="/market/download.aspx?from=MPopup" style="position:absolute;width:154px;height:43px;bottom:97px;right:43px;"></a>','<a class="se-phone __hreftel__" href="tel:'+o+'" style="position:absolute;width:154px;height:30px;bottom:60px;right:43px;"></a>','<a class="se-continue" href="javascript:void(0)" style="position:absolute;width:154px;height:30px;bottom:21px;right:43px;"></a>',"</div>",'<div class="se-mask" style="position:fixed;left:0px;top:0px;width:100%;height:100%;z-index:9999;background:rgba(0,0,0,.2);"></div>',"</div>"].join("");$(u).appendTo($(document.body)),$(".se-close").on("click",function(){$(".se-popup").css("display","none")}),$(".se-continue").on("click",function(){$(".se-popup").css("display","none")}),$(".se-openapp").on("click",function(){return adOptions.autoOpenDownApp(e,3,3),!1})}},window._Mkt_=[],window._Mkt_.push({callback:adOptions.popupPromo}),define("cWidgetHeaderView",["cBase","cUICore","cWidgetFactory","cUtility","cHybridFacade"],function(e,t,n,r,i){function s(n){if(s.instance)return s.instance.reset(n),s.instance;var r=new e.Class(t.AbstractView,f);return s.instance=new r(n)}var o="HeaderView";if(!n.hasWidget(o)){var u=function(){var e=this.templateFactory(this.data);return $(e)},a=function(e){if(this.html="",e&&e.data){e.data.customtitle&&this.htmlMap.title?delete this.htmlMap.title:this.htmlMap.title="<h1><%=title %></h1>";for(var t in this.htmlMap)e.data[t]&&(this.html+=this.htmlMap[t]);var n="",r=e.data.style;r&&(n=' style="'+r+'"'),this.html="<header"+n+">"+this.html+"</header>"}},f=f||{};f.__propertys__=function(){},f.initialize=function($super,e){e?(this.rootBox=e.container||$($("#headerview").length>0?"#headerview":'<div id="headerview"></div>'),this.data=e.data,this.html=e.html||this.html,this.data&&(this.bindEvents=e.data.bindEvents||function(){}),a.call(this,e),e.onShow=this.onShow):(this.rootBox=$($("#headerview").length>0?"#headerview":'<div id="headerview"></div>'),e={onShow:this.onShow}),$super(e)},f.createHtml=function(){return this.html?(this.templateFactory=this.template(this.html),u.call(this)):void 0},f.onShow=function(){if(this.rootBox.off("click"),this.data&&this.data.btn&&"function"==typeof this.bindEvents&&this.bindEvents(this.getView()),this.data&&this.data.events&&this.delegateEvents(this.data.events,this.data.view),this.data&&this.data.commit){var e=this.data.commit,t=this.getView(),n=this,r=function(){e.callback.call(n.view)};t.find("#"+e.id).on("click",r),i.register({tagname:i.METHOD_COMMIT,callback:r})}},f.set=function(e){e&&(this.htmlMap&&!this.htmlMap.title&&(this.htmlMap.title="<h1><%=title %></h1>"),this.data=e,a.call(this,{data:e}),this.bindEvents=this.data.bindEvents,this.isCreate=!1,this.hide())},f.reset=function(e){e&&(this.set(e),this.trigger("onShow"))},f.delegateEvents=function(e,t){if(e){l.call(this,"#c-ui-header-home","click",e.homeHandler,t),l.call(this,"#c-ui-header-return","click",e.returnHandler,t),this.rootBox.find("header").append($("#c-ui-header-return"));var n=this,r=function(){e.returnHandler.call(t||n)};if(i.register({tagname:i.METHOD_BACK,callback:r}),e.citybtnHandler){var s=function(){e.citybtnHandler.call(t||n)};i.register({tagname:i.METHOD_CITY_CHOOSE,callback:s})}}};var l=function(e,t,n,r){this.rootBox.find(e).on(t,function(){n.call(r||this)})};f.getView=function(){return this.rootBox},f.updateHeader=function(e,t){this.data[e]=t,this.set(this.data),this.show()},f.html=null,f.htmlMap={home:'<i class="icon_home i_bef" id="c-ui-header-home"></i>',tel:'<a href="tel:<%=tel.number||4000086666 %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a>',customtitle:"<div><%=customtitle %></div>",title:"<h1><%=title %></h1>",back:'<i id="c-ui-header-return" class="returnico i_bef"></i>',btn:'<i id="<%=btn.id%>" class="<%=btn.classname%>"><%=btn.title %></i>',custom:"<%=custom %>"},f.create=function(){this.isCreate||this.status===t.AbstractView.STATE_ONCREATE||(this.rootBox=this.rootBox||$("body"),this.rootBox.empty(),this.root=$(this.createHtml()),this.rootBox.append(this.root),r.isInApp()||this.rootBox.css("height",this.root.css("height")),this.trigger("onCreate"),this.status=t.AbstractView.STATE_ONCREATE,this.isCreate=!0)},f.hideHandler=function(){r.isInApp()?this.isHidden||(i.request({name:i.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!0}),this.isHidden=!0):this.hide()},f.showAction=function(e){r.isInApp()?(this.rootBox.hide(),this.isHidden&&(i.request({name:i.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!1}),this.isHidden=!1),this.saveHead()):this.root.show(),e()},f.saveHead=function(){var e={left:[],center:[],centerButtons:[],right:[]},t=this.data;t.back&&e.left.push({tagname:"back"}),t.title&&e.center.push({tagname:"title",value:t.title}),t.subtitle&&e.center.push({tagname:"subtitle",value:t.subtitle}),t.btn&&e.right.push({tagname:"commit",value:t.btn.title}),t.tel&&e.right.push({tagname:"call"}),t.home&&e.right.push({tagname:"home"}),t.citybtn&&e.centerButtons.push({tagname:"cityChoose",value:t.citybtn,a_icon:"icon_arrowx",i_icon:"icon_arrowx.png"});try{var n=JSON.stringify(e);i.request({name:i.METHOD_REFRESH_NAV_BAR,config:n})}catch(r){}},n.register({name:o,fn:s})}}),define("cWidgetListView",["cBase","cUICore","cWidgetFactory"],function(e,t,n){var r="ListView";if(!n.hasWidget(r)){var i=function(t){for(var n=new e.Hash,r=0;r<t.length;r++)n.add($(t[r]).data("hash"),$(t[r]));return n},s=s||{};s.__propertys__=function(){},s.initialize=function($super,e){if(e.container&&(this.rootBox=e.container),this.noResultText="您还没有记录哦",this.autoEmptyView="undefined"!=typeof e.autoEmptyView?e.autoEmptyView:!0,e.noResultText&&(this.noResultText=e.noResultText),e.listadapter&&(this.listadapter=e.listadapter,this.listadapter.regiseterObserver(this)),e.origin&&(this.origin=e.origin),!e.itemView)throw"ListView:no item view template";this.templateFactory=this.template(e.itemView),this.bindItemViewEvent=e.bindItemViewEvent,this.onUpdatePrepared=e.onUpdatePrepared,this.onUpdateFinished=e.onUpdateFinished,$super(e)},s.createHtml=function(){return this.update()},s.createItemView=function(e,t){var n=this.templateFactory(e);return $(n).addClass("c-item-view").data("hash",t)},s.update=function(){var t=this.rootBox.find(".c-item-view");this.map=i(t),this.onUpdatePrepared&&"function"==typeof this.onUpdatePrepared&&this.onUpdatePrepared();var n=new e.Hash,r=this,s=function(e,t,i){var s=r.map.getItem(t);s||(e.C_ITEM_INDEX=i,e.__origin__=r.origin,s=r.createItemView(e,t),r.bindItemViewEvent(s)),n.add(t,s)};if(this.listadapter.map.each(s),this.rootBox.hide(),this.rootBox.empty(),this.listadapter.list.length>0){var o=function(e){r.rootBox.append(e)};n.each(o)}else this.autoEmptyView&&this.rootBox.append('<div class="cui-load-error"><div class="cui-i cui-wifi cui-exclam"></div>'+this.noResultText+"</div>");this.rootBox.show(),this.onUpdateFinished&&"function"==typeof this.onUpdateFinished&&this.onUpdateFinished()},s.onUpdatePrepared=function(){},s.onUpdateFinished=function(){},s.openAutoEmptyView=function(){this.autoEmptyView=!0},s.closeAutoEmptyView=function(){this.autoEmptyView=!1};var o=new e.Class(t.AbstractView,s);n.register({name:r,fn:o})}}),define("cWidgetTipslayer",["cBase","cUICore","cWidgetFactory","cUIScroll"],function(e,t,n,r){var i="TipsLayer";if(!n.hasWidget(i)){var s=new e.Class(t.Layer,{__propertys__:function(){this.showTitle=!0,this.contentDom,this.title="",this.body="",this.mask=new t.Mask({classNames:[t.config.prefix+"opacitymask"]});var e=this;this.mask.addEvent("onShow",function(){this.setzIndexTop(-1),$(window).bind("resize",this.onResize),this.onResize();var t=this;this.root.bind("click",function(){t.hide(),t.root.unbind("click"),e.hide()})}),this._loadButtonHtml=function(){if(0==this.buttons.length)return"";var e=['<div class="cui-roller-btns">'];return $.each(this.buttons,function(t,n){var r="cui-btns-sure";"cancle"==n.type&&(r="cui-btns-cancle"),e.push('<div class="cui-flexbd '+r+'">'+n.text+"</div>")}),e.push("</div>"),e.join("")},this.html=""},initialize:function($super,e){$super({onCreate:function(){},onShow:function(){this.title=e.title||"",this.buttons=e.buttons||[],this.html=e.html||"","undefined"!=typeof e.showTitle&&(this.showTitle=e.showTitle),this.html=$(this.html),this.btns=$(this._loadButtonHtml()),this.header=e.header,this.footer=e.footer,this.buttons=e.buttons||[],this.contentDom.html(['<div class="cui-pop-box">','<div class="cui-hd">'+this.title+'<div class="lab-close-area"><span class="cui-top-close">×</span></div></div>','<div class="cui-bd" style="overflow: hidden; position: relative; background-color: #fafafa; width: 100%;">',"</div>","</div>"].join("")),e.width&&this.contentDom.find(".cui-pop-box").css({width:e.width+"px"}),this.mask.show(),this.reposition(),this.closeDom=this.contentDom.find(".cui-top-close").parent(),this.body=this.contentDom.find(".cui-bd"),this.header&&this.body.before($(this.header)),this.footer&&this.body.after($(this.footer)),this.html.length>1&&(this.html=$('<div style="width: 100%;"></div>').append(this.html)),this.html.css("background-color","white"),this.body.append(this.html);var t=parseInt(.7*$(window).height()),n=e.height||t,i=this.html.height();n>t&&(n=t),i>n&&this.body.css({height:n+"px"}),this.showTitle||this.contentDom.find(".cui-hd").hide();var s={wrapper:this.body,scroller:this.html};$.extend(s,e),this.s=new r(s),this.contentDom.find(".cui-pop-box").append(this.btns);var o=this;this.closeDom.on("click",function(){o.hide()}),$.each(this.btns.children(),function(e,t){var n=o.buttons[e].click;$(t).on("click",function(){n.call(o)})}),this.setHtml=function(e){o.body.html(e)}},onHide:function(){this.s&&this.s.destroy(),this.mask.hide(),this.closeDom.off("click"),this.root.remove(),this.mask.root.remove()}})}});n.register({name:i,fn:s})}}),define("cWidgetInputValidator",["cBase","cUICore","cWidgetFactory","cUtility","libs"],function(cBase,cUICore,WidgetFactory,util){var validate=util.validate,WIDGET_NAME="InputValidator";if(!WidgetFactory.hasWidget(WIDGET_NAME)){var InputValidator=new cBase.Class(cUICore.Layer,{__propertys__:function(){this.TypeMsg={idCard:"身份证格式错误",num:"不是数字",email:"email格式错误",phone:"手机格式错误",chinese:"不是中文",password:"密码格式错误"},this.validatorArr={}},initialize:function($super,e){e=e||{},$super(e),this.requredMsg=e.requredMsg||"该项必填",this.rangeMsg=e.rangeMsg||"您输入的字符范围错误",this.regexMsg=e.regexMsg||"格式错误",this.compareMsg=e.compareMsg||"对比不成立",this.els=e.els||$(".formValidate"),this.msgPosition=e.msgPosition||"bottom",this.isShowMsg=e.isShowMsg||!1,this.init()},init:function(){for(var e=0,t=this.els.length;t>e;e++){var n=$(this.els[e]);this.initItem(n)}},initItem:function(el,insertType){var scope=this;"string"==typeof el&&(el=$("#"+el));var cfg=el.attr("data-cfg");if(!cfg||0==cfg.length)return!1;if(cfg=eval("("+cfg+")"),cfg.check!==!1&&(cfg.check=!0),insertType&&(cfg.check=!0),cfg.check===!1)return!1;cfg.id=el.attr("id")||"_"+Math.random(),cfg.el=el,cfg.validate=function(){scope.funcValidate(cfg)},this.validatorArr[cfg.id]=cfg;var s=""},validate:{requred:function(e){return""==e?!1:!0},regex:function(e,t){return t.test(e)?!0:!1},range:function(e,t){var n=t.split("|");return 3!=n.length?(0,!1):this["_"+n[0]](e,n[1],n[2])},_num:function(e,t,n){return e=parseInt(e),e>t&&n>e?!0:!1},_str:function(e,t,n){return e.length>t&&e.length<n?!0:!1},_date:function(){return!0},compare:function(e,t){var n=t.split("|");return 3!=n.length?(0,!1):this["_c"+n[0]](e,$("#"+n[1]).val(),n[2])},_cnum:function(e,t,n){if(e=parseInt(e),t=parseInt(t),"<"==n){if(t>e)return!0}else if("="==n){if(e==t)return!0}else if(">"==n&&e>t)return!0;return!1},_cstr:function(e,t,n){if(e=e.length,t=t.length,"<"==n){if(t>e)return!0}else if("="==n){if(e==t)return!0}else if(">"==n&&e>t)return!0;return!1},_cdate:function(){return!0}},funcValidate:function(e){if(void 0===this.validatorArr[e.id])return!1;var t=e.el.val()||e.el.html().replace(/(^\s*)|(\s*$)/g,""),n={};if(n.isPass=!0,n.el=e.el,n.id=e.id,n.errorItem={},this.validatorArr[e.id].check===!1)return this.validatorArr[e.id].result=n,!1;if(e.requred&&(n.errorItem.requred=this.validate.requred(t),n.errorItem.requred===!0?n.isPass=!0:(n.isPass=!1,n.msg=this.requredMsg)),n.isPass&&"string"==typeof e.type&&""!=t){var r=e.type;r="is"+r.substr(0,1).toUpperCase()+r.substr(1,r.length),n.errorItem[e.type]=validate[r](t),n.errorItem[e.type]===!0?n.isPass=!0:(n.isPass=!1,n.msg=this.TypeMsg[e.type]||"格式错误")}n.isPass&&e.regexObj&&""!=t&&(n.errorItem.regex=this.validate.regex(t,e.regexObj),n.errorItem.regex===!0?n.isPass=!0:(n.isPass=!1,n.msg=e.errorMsg||this.regexMsg)),n.isPass&&e.rangeObj&&""!=t&&(n.errorItem.range=this.validate.range(t,e.rangeObj),n.errorItem.range===!0?n.isPass=!0:(n.isPass=!1,n.msg=e.errorMsg||this.rangeMsg)),n.isPass&&e.compareObj&&""!=t&&(n.errorItem.compare=this.validate.compare(t,e.compareObj),n.errorItem.compare===!0?n.isPass=!0:(n.isPass=!1,n.msg=e.errorMsg||this.compareMsg)),this.validatorArr[e.id].result=n},showMsg:function(e){this.msgTimer&&clearTimeout(this.msgTimer);for(var t=$("body"),n=0,r=e.length;r>n;n++){var i=$("#"+e[n].id+"Tips");if(!i[0]){i=$('<div class="validateTips validateError" id="'+e[n].id+'Tips"><div class="triangle_icon"><div class="before"></div><div class="after"></div></div>'+e[n].msg+"</div>");var s=e[n].el.offset(),o=parseInt(e[n].el.height()),u=parseInt(e[n].el.width()),a=s.left,f=s.top;"bottom"==this.msgPosition?(i.addClass("posBottom"),f+=o+4):"right"==this.msgPosition?(i.addClass("posRight"),a+=u+6):"top"==this.msgPosition&&(i.addClass("posTop"),f+=-1*o-8),i.css({left:a,top:f}),t.append(i)}}this.msgTimer=setTimeout(function(){$(".validateTips").remove()},3e3)},validateAll:function(e,t,n){for(var r in this.validatorArr){var i=this.validatorArr[r];i.validate()}var s=this.getValidatorState();s===!0?"function"==typeof e&&e.call(n):(this.isShowMsg&&this.showMsg(s),"function"==typeof t&&t.call(n,s))},removeValidator:function(e){e&&this.validatorArr[e]&&(this.validatorArr[e],this.validatorArr[e].check=!1)},addValidator:function(e){"string"==typeof e&&(e=$("#"+e)),this.initItem(e,"add")},getValidatorState:function(){var e=!0,t=[];for(var n in this.validatorArr)0==this.validatorArr[n].result.isPass&&(e=!1,t.push(this.validatorArr[n].result));return e?!0:t}});WidgetFactory.register({name:WIDGET_NAME,fn:InputValidator})}}),define("cWidgetPublisher",["cUtility","cWidgetFactory","CommonStore"],function(e,t,n){var r="Publisher",i=!1;if(!t.hasWidget(r)){var s=s||{},o={non_member_login:function(e){u.non_member_login=function(t){e.callback(t)}},locate:function(e){u.locate=function(t){try{var n=t;"string"==typeof t&&(n=JSON.parse(t)),e.success(n)}catch(r){e.error(!0,"定位失败")}}},login:function(e){u.login=function(t){"string"==typeof t&&(t=JSON.parse(t));var r=n.UserStore.getInstance();r.getUser(),r.setUser(t.data);var i=n.HeadStore.getInstance(),s=i.get();s.auth=t.data.Auth,i.set(s),"function"==typeof e.success&&e.success()}},back:function(e){u.back=e.callback},commit:function(e){u.commit=e.callback}},u={refresh:function(){window.location.reload()}},a={non_member_login:function(e){"function"==typeof u.non_member_login&&u.non_member_login(e)},locate:function(e){"function"==typeof u.locate&&u.locate(e)},login:function(e){"function"==typeof u.login&&u.login(e)},back:function(){"function"==typeof u.back&&u.back()},commit:function(){"function"==typeof u.commit&&u.commit()}},f={callback:function(e){if(!i){var t=e;if("string"==typeof e)try{t=JSON.parse(window.decodeURIComponent(e))}catch(n){setTimeout(function(){0},0)}document.activeElement.blur(),"function"==typeof a[t.tagname]&&a[t.tagname](t.param)}}},l=function(e){for(var t in f)e[t]=e[t]||f[t]};s.setApi=function(){if(e.isInApp()){var t=window.app=window.app||{};l(t)}},s.register=function(t){e.isInApp()&&"function"==typeof o[t.name]&&o[t.name](t)},s.lock=function(){e.isInApp()&&(i=!0)},s.unlock=function(){e.isInApp()&&(i=!1)},s.requestEntryInfo=function(){e.isInApp()&&app_entry()},s.requestAnomyousUser=function(){e.isInApp()&&app_non_member_login()},s.monitor=function(t){e.isInApp()&&app_log_event(t)},s.sendHotelInfo=function(t,n,r,i){e.isInApp()&&app_go_to_hotel_detail(t,n,r,i)},s.requestAutoLogin=function(){e.isInApp()&&app_member_auto_login()},t.register({name:r,fn:s})}}),define("cWidgetAbstractCalendar",["cCoreInherit","cUIAbstractView","cWidgetFactory"],function(e,t,n){"user strict";var r="Abstract.Calendar";if(!n.hasWidget(r)){var i=new e.Class(t,{__propertys__:function(){this.CONSTANT={CALENDAR_CHINESE_LUNAR_INFO:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835],CALENDAR_CHINESE_WEEKDAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],CALENDAR_CHINESE_NUMBER:["日","一","二","三","四","五","六","七","八","九","十"],CALENDAR_CHINESE_CARRT:["初","十","廿","卅","　"],CALENDAR_CHINESE_HOLIDAY:{1230:"除夕","0101":"初一","0115":"元宵","0505":"端午","0707":"七夕","0815":"中秋","0909":"重阳"},CALENDAR_COMMON_HOLIDAY:{"0101":"元旦","0214":"情人节","0501":"五一",1001:"国庆",1225:"圣诞节"},CALENDAR_WEEKDAY_NAME:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},CALENDAR_WEEKDAY_SHORTNAME:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},CALENDAR_WEEKDAY_SHORTNAME2:{0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},CALENDAR_INIT_DATE:1,CALENDAR_MONTH:5,INIT_DATE_TIME:{H:0,M:0,S:0,MS:0},CALENDAR:"calendar"}},initialize:function($super,e){this.isLeapYear(this.startMonth.getFullYear())||this.isLeapYear(this.startMonth.getFullYear()-1)?(this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0404"]="清明",delete this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0405"]):(this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0405"]="清明",delete this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0404"]),$super(e)},setCalendarDate:function(e){this.dateObj="undefined"!==e?e:new Date,this.SY=this.dateObj.getFullYear(),this.SM=this.dateObj.getMonth(),this.SD=this.dateObj.getDate(),this.lunarInfo=this.CONSTANT.CALENDAR_CHINESE_LUNAR_INFO},leapMonth:function(e){return 15&this.lunarInfo[e-1900]},monthDays:function(e,t){return this.lunarInfo[e-1900]&65536>>t?30:29},leapDays:function(e){return this.leapMonth(e)?65536&this.lunarInfo[e-1900]?30:29:0},lYearDays:function(e){for(var t=348,n=32768;n>8;n>>=1)t+=this.lunarInfo[e-1900]&n?1:0;return t+this.leapDays(e)},Lunar:function(e){var t,n=0,r=0,i={},s=new Date(1900,0,31),o=(e-s)/864e5;for(i.dayCyl=o+40,i.monCyl=14,t=1900;2050>t&&o>0;t++)r=this.lYearDays(t),o-=r,i.monCyl+=12;for(0>o&&(o+=r,t--,i.monCyl-=12),i.year=t,i.yearCyl=t-1864,n=this.leapMonth(t),i.isLeap=!1,t=1;13>t&&o>0;t++)n>0&&t===n+1&&i.isLeap===!1?(--t,i.isLeap=!0,r=this.leapDays(i.year)):r=this.monthDays(i.year,t),i.isLeap===!0&&t===n+1&&(i.isLeap=!1),o-=r,i.isLeap===!1&&i.monCyl++;return 0===o&&n>0&&t===n+1&&(i.isLeap?i.isLeap=!1:(i.isLeap=!0,--t,--i.monCyl)),0>o&&(o+=r,--t,--i.monCyl),i.month=t,i.day=o+1,i},cDay:function(e,t){var n,r=this.CONSTANT.CALENDAR_CHINESE_NUMBER,i=this.CONSTANT.CALENDAR_CHINESE_CARRT;switch(n=e>10?"十"+r[e-10]:r[e],n+="月",t){case 10:n+="初十";break;case 20:n+="二十";break;case 30:n+="三十";break;default:n+=i[Math.floor(t/10)],n+=r[t%10]}return n},solarDay2:function(e){this.setCalendarDate(e);var t=new Date(this.SY,this.SM,this.SD),n=this.Lunar(t),r=(n.month>=10?n.month:"0"+n.month)+""+(n.day>=10?n.day:"0"+n.day);return n=null,r},weekday:function(){var e=this.CONSTANT.CALENDAR_CHINESE_WEEKDAY;return e[this.dateObj.getDay()]},YYMMDD:function(){var e=[this.SY,"年",this.SM+1,"月",this.SD,"日"];return e.join("")},_isDate:function(e){var t=Object.prototype.toString.call(e);return"[object Date]"===t},_objectKey:function(e){var t=[];if(e)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},isLeapYear:function(e){return 0===e?!1:e%4!=0?!1:e%100==0&&e%400!=0?!1:!0}});n.register({name:r,fn:i})}}),define("cWidgetCalendar",["cCoreInherit","cUtility","cUIBase","cUIHashObserve","cWidgetFactory","cWidgetAbstractCalendar"],function(e,t,n,r,s){"user strict";var o="Calendar";if(!s.hasWidget(o)){var u=s.create("Abstract.Calendar"),a=new e.Class(u,{__propertys__:function(){this.chineseHoliday=this.CONSTANT.CALENDAR_CHINESE_HOLIDAY,this.holiday=this.CONSTANT.CALENDAR_COMMON_HOLIDAY,this.DAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME,this.SDAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME2,this.DAYTITLE2=this.CONSTANT.CALENDAR_WEEKDAY_NAME,this.addClass(n.config.prefix+this.CONSTANT.CALENDAR),this.startMonth=t.getServerDate(),this.startMonth.setDate(this.CONSTANT.CALENDAR_INIT_DATE),this.Months=this.CONSTANT.CALENDAR_MONTH,this.validStartDate=t.getServerDate(),this.validStartDate.setHours(this.CONSTANT.INIT_DATE_TIME.H,this.CONSTANT.INIT_DATE_TIME.M,this.CONSTANT.INIT_DATE_TIME.S,this.CONSTANT.INIT_DATE_TIME.MS),this.validEndDate,this.date,this.dateVal={},this.titledom,this.leftback,this.cls=[this.CONSTANT.CALENDAR],this.title,this.noabsolute=!1,this.curDate,this.dateDoms={},this._chineseHoliday={},this.html,this.clickEnabled=!0,this.msg="",this.callback=function(){},this.hashObserve=new r({hash:this.id,callback:function(){this._hide()},scope:this}),this.animatSwitch=!1,this.timeNum=250},initialize:function($super,e){this.setOption(function(e,t){switch(e){case"Months":case"timeNum":case"date":case"curDate":case"root":case"callback":case"title":case"noabsolute":case"msg":case"clickEnabled":case"animatSwitch":this[e]=t;break;case"cls":this.cls.push(t);break;case"validStartDate":case"validEndDate":this[e]=t,this[e].setHours(0,0,0,0);break;case"startMonth":this[e]=t,this[e].setDate(1)}}),$super(e),this.buildEvent()},selectedDate:function(){var e;for(var t in this.date)e=this.root.find("."+this.buildSelectCls(t))[0],this.dateDoms[t]=e,this.dateVal[t]=this.date[t].value;!this.curDate&&(this.curDate=t)},buildEvent:function(){this.addEvent("onCreate",this.onCreate),this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},buildElement:function(){this.titledom=this.root.find("header"),this.leftback=this.root.find("#js_return")},onCreate:function(){this.selectedDate(),this.buildElement(),this.buildElementsEvent(),this.noabsolute||this.root.css({position:"absolute"}),this.windowResizeHander=$.proxy(this.position,this)},onShow:function(){if(this.root.css({top:0,left:0,width:"100%"}),$(window).bind("resize",this.windowResizeHander),this.setzIndexTop(),this.hashObserve.start(),this.animatSwitch){var e=this;window.scrollTo(0,0),this.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)",top:"0px"},0,function(){e.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)"},e.timeNum,function(){e.windowResizeHander()})})}},position:function(){this.root.css({left:"0px",top:"0px"});var e=n.getPageSize();this.root.css({width:$(window).width(),height:e.height})},onHide:function(){$(window).unbind("resize",this.windowResizeHander),this.hashObserve.end()},createHtml:function(){return this.createCalendar()},buildElementsEvent:function(){var e=this;this.clickEnabled&&this.root.delegate(".cui_cld_daybox li","click",function(){b=$(this),b.hasClass("valid")||(b=b.closest(".valid"));var n=b.attr("data-date");n&&(n=t.Date.parse(n).valueOf(),e.isAccordBound(n)&&e._setDate(n,b))}),this.root.delegate("#js_return","click",$.proxy(function(){this._hide()},this))},_hide:function(){if(this.animatSwitch){var e=this;this.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)",top:"0px"},0,function(){e.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)"},e.timeNum,function(){e.hide()})})}else this.hide()},isAccordBound:function(e){var t=this.date[this.curDate];if(!t.bound)return!0;if(!t.bound.rules||!t.bound.error)return!0;var n,r=t.bound.rules;for(var i in r)if(n="string"==typeof r[i]?this.dateVal[r[i]]:this._isDate(r[i])&&r[i],e.setHours(0,0,0,0),n)switch(n.setHours(0,0,0,0),i){case"<":if(!(n>e))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case">":if(!(e>n))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case"<=":if(!(n>=e))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case">=":if(!(e>=n))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1}return!0},_setDate:function(e,n){var r=this.root.find("."+this.buildSelectCls(this.curDate));r.each($.proxy(function(e,n){var i=$(n);i.html(this.formatTitle(t.Date.parse(r.attr("data-date")).valueOf())),i.removeClass(this.buildSelectCls(this.curDate)),i.removeClass(this.buildSelectCls())},this)),this.dateDoms[this.curDate]=n;var i,s=$(n),o=this.date[this.curDate].title;i="function"==typeof o?this.formatTitle2(o):this.formatTitle,s.html(i.call(this,e)),s.removeClass("cui_cld_dayfuture"),s.removeClass("cui_cld_day_hint"),s.addClass("cui_cld_day_havetxt"),s.addClass(this.buildSelectCls(this.curDate)),s.addClass(this.buildSelectCls()),this.dateVal[this.curDate]=e,this.callback&&this.callback.call(this,e,this.curDate,this.dateVal,this.getDateInfo(e),this.calendarend)},setCurDate:function(e){this.curDate=e,this.create();var t=this.getCurTitle();this.titledom.html(t)},getEndDate:function(){return this.calendarend},buildSelectCls:function(e){return e?"selected-"+e:"cui_cld_daycrt"},getCurTitle:function(){var e=this.date[this.curDate],t="";return e&&(t=e.headtitle||this.title),t||this.title},createCalendar:function(){var e,n=[],r=this.getCurTitle(),i=t.isInApp(),s=i?' style=" margin-top: 0"':"";this.title&&!i&&n.push(["<header>","<h1>"+r+'</h1><i class="returnico i_bef" id="js_return"></i>',"</header>"].join("")),n.push(['<article class="cont_wrap"',s,'><div class="cui_cldwrap">'].join("")),n.push(this.createWeek(i));for(var o=0;o<this.Months;o++)e=new Date(this.startMonth),e.setMonth(e.getMonth()+o),n.push(this.createMonth(e));return n.push(["</div></atricle>"].join("")),n.join("")},createWeek:function(e){var t=e?" cui_cldweek_top0":"",n=['<ul class="cui_cldweek'+t+'">'];this.msg&&n.push('<p  class="cui_cldmsg">'+this.msg+"</p>");for(i in this.SDAYTITLE)n.push("<li>"+this.SDAYTITLE[i]+"</li>");return n.push("</ul>"),n.join("")},createMonth:function(e){var n,r=this.calcStructData(e),i=[];i.push('<section class="cui_cldunit">'),i.push('<h1 class="cui_cldmonth">'+t.Date.format(e,"Y年n月")+"</h1>"),i.push('<ul class="cui_cld_daybox">');for(var s,o,u=r.days.length,n=0;u>n;n++){o=r.days[n].length;for(var a=0;o>a;a++){s={};var f=r.days[n][a];if(f){var l=this.validStartDate||r.start,h=this.validEndDate||r.end;f>=l&&h>=f?s.valid=!0:(s.cui_cld_daypass=!0,s.invalid=!0)}else s.cui_cld_dayfuture=!0,s.invalid=!0;var p,d=this.getDateInfo(f);if(d?(p=d.daytitle||d.holiday||d.chineseday,p?(s.cui_cld_day_havetxt=!0,(d.holiday||d.chineseday)&&(s.cui_cld_day_hint=!0),p="<em>"+d.date+"</em><i>"+p+"</i>"):p="<em>"+d.date+"</em>"):p="",this.date)for(var v in this.date)f&&t.Date.format(this.dateVal[v]||this.date[v].value,"Y-m-d")==t.Date.format(f,"Y-m-d")&&(delete s.cui_cld_dayfuture,delete s.cui_cld_day_hint,s.cui_cld_day_havetxt=!0,s[this.buildSelectCls()]=!0,s[this.buildSelectCls(v)]=!0,p=this.date[v].title(f,function(){return d.daytitle||d.holiday||d.chineseday||d.date}),p="<em>"+p+"</em>");i.push('<li data-date="'+t.Date.format(f,"Y-m-d")+'" '+(s?' class="'+this._objectKey(s).join(" ")+'"':"")+">"+p+"</li>")}}return i.push("</ul></section>"),i.join("")},formatTitle:function(e){if(e){var t=this.getDateInfo(e);return t.holiday||t.chineseday||t.daytitle||t.date}return""},getDateInfo:function(e){if(e){var n=t.getServerDate(),r=new Date(e);r.setHours(1,1,1,0),n.setHours(1,1,1,0);var i=(r-n)/864e5,s={};s.daytitle=t.Date.format(n,"Ymd")==t.Date.format(e,"Ymd")?"今天":1==i?"明天":2==i?"后天":"";var o=this.solarDay2(e);this.chineseHoliday[o]&&!this._chineseHoliday[o]?(this._chineseHoliday[o]=1,s.chineseday=this.chineseHoliday[o]):s.chineseday="";var u=t.Date.format(e,"md");return s.holiday=this.holiday[u]?this.holiday[u]:"",s.week=this.DAYTITLE[e.getDay()],s.week2=this.DAYTITLE2[e.getDay()],s.date=t.Date.format(e,"j"),s}},formatTitle2:function(e){return $.proxy(function(t){return e(t,$.proxy(function(e){return this.formatTitle(e)},this))},this)},calcStructData:function(e){var t=new Date(e),n=new Date(e);t.setDate(1),t.setHours(0,0,0,0);var r=t.getDay();n.setMonth(n.getMonth()+1,1),n.setHours(-24,0,0,0);for(var i,s=n.getDay(),o=(n.getDate()+(r+(6-s)))/7,u=[],a=0,f=0;o>a;a++){u[a]=[];for(var l=0;7>l;l++)if(0==a&&r>l)u[a].push("");else{if(i=new Date(t),i.setDate(i.getDate()+f),i>n)break;u[a].push(i),f++}}return this.calendarend=n,{start:t,end:n,days:u,loops:o}},setDate:function(e){this.create();for(var n in e)if(this.date[n]&&this._isDate(e[n])){e[n].setHours(0,0,0,0),this.date[n].value=e[n],this.dateVal[n]=e[n];var r=this.root.find("."+this.buildSelectCls(n));if(r.length){var i=t.Date.parse(r.data("date")).valueOf();r.removeClass(this.buildSelectCls(n)),r.removeClass(this.buildSelectCls()),r.html(this.formatTitle(i))}var s=this.root.find('[data-date="'+t.Date.format(e[n],"Y-m-d")+'"]');s.each($.proxy(function(t,r){r=$(r),r.hasClass("valid")&&(r.addClass(this.buildSelectCls(n)),r.addClass(this.buildSelectCls()),r.html(this.formatTitle2(this.date[n].title)(e[n])))},this)),this.dateDoms[n]=s}},addDate:function(e,n){this.create();var r,i,s;for(var o in e)if(!this.date[o]||n){this.date[o]=e[o],r=this.date[o]&&this.date[o].value,i=this.date[o]&&this.date[o].title,i="function"==typeof i?this.formatTitle2(i):$.proxy(this.formatTitle,this);var u=this.root.find("."+this.buildSelectCls(o));u.length&&(u.removeClass(this.buildSelectCls(o)),u.removeClass(this.buildSelectCls())),r&&(s=this.root.find('[data-date="'+t.Date.format(r,"Y-m-d")+'"]'),s.each($.proxy(function(e,t){t=$(t),t.hasClass("valid")&&(t.html(i(r)),t.addClass(this.buildSelectCls(o)),t.addClass(this.buildSelectCls()),this.dateVal[o]=r)},this)))}},removeDate:function(e){this.create();for(var n,r=0,i=e.length;i>r;r++)if(n=e[r],this.date[n]){var s=this.root.find("."+this.buildSelectCls(n));s.each($.proxy(function(e,r){var i=$(r);i.removeClass(this.buildSelectCls(n)),i.removeClass(this.buildSelectCls()),i.html(this.formatTitle(t.Date.parse(i.data("date")).valueOf()))},this)),delete this.date[n],delete this.dateVal[n]}},getDate:function(){var e={};for(var t in this.date)e[t]=this.date[t].value;return _.isEmpty(this.dateVal)?_.isEmpty(e)?{}:e:this.dateVal},update:function(e){this.setOption(function(e,t){switch(e){case"Months":case"date":case"curDate":case"root":case"callback":case"title":case"noabsolute":this[e]=t;break;case"cls":this.cls.push(t);break;case"validStartDate":case"validEndDate":this[e]=t,this[e].setHours(0,0,0,0);break;case"startMonth":this[e]=t,this[e].setDate(1)}}),this.readOption(e),this._chineseHoliday={},this.create(),this.root.html(this.createCalendar()),this.trigger("onChange")}});s.register({name:o,fn:a})}}),define("cWidgetCalendarPrice",["cCoreInherit","cUtility","cUIBase","cWidgetFactory","cWidgetAbstractCalendar","cWidgetGuider"],function(e,t,n,r){"user strict";var s="Calendar.Price",o=0;if(!r.hasWidget(s)){var u=r.create("Guider"),a=r.create("Abstract.Calendar"),f=new e.Class(a,{__propertys__:function(){this.chineseHoliday=this.CONSTANT.CALENDAR_CHINESE_HOLIDAY,this.holiday=this.CONSTANT.CALENDAR_COMMON_HOLIDAY,this.DAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME,this.SDAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME2,this.addClass(n.config.prefix+this.CONSTANT.CALENDAR),this.showChineseHoliday=!0,this.showHoliday=!0,this.startMonth=t.getServerDate(),this.startMonth.setDate(this.CONSTANT.CALENDAR_INIT_DATE),this.Months=this.CONSTANT.CALENDAR_MONTH,this.validStartDate=t.getServerDate(),this.validStartDate.setHours(this.CONSTANT.INIT_DATE_TIME.H,this.CONSTANT.INIT_DATE_TIME.M,this.CONSTANT.INIT_DATE_TIME.S,this.CONSTANT.INIT_DATE_TIME.MS),this.validEndDate,this.date,this.onlyread=!1,this.dateVal={},this.cls=[this.CONSTANT.CALENDAR],this.curDate,this.dateDoms={},this.html,this.windowResizeHander,this.animatSwitch=!1,this.lowerPriceClass="",this.holidayClass="",this.todayClass="",this.lowestpriceMap={},this._chineseHoliday={},this._formatPrice=function(e,t){return t(e)},this.callback=function(){},this.title=!1,this.returnCallback=function(){}},initialize:function($super,e){this.setOption(function(e,t){switch(e){case"Months":case"curDate":case"root":case"callback":case"onlyread":case"title":case"returnCallback":case"showChineseHoliday":case"animatSwitch":case"lowerPriceClass":case"holidayClass":case"todayClass":this[e]=t;break;case"date":if(t)for(var n in t)this.dateVal[n]=t[n].value;this[e]=t;break;case"formatPrice":this._formatPrice=t;break;case"showHoliday":this[e]=t;break;case"validDates":this[e]=t;break;case"cls":this.cls.push(t);break;case"validStartDate":case"validEndDate":this[e]=t,this[e].setHours(1,1,1,0);break;case"startMonth":this[e]=t,this[e].setDate(1)}}),$super(e),this.buildEvent(),this.lowerPriceClass&&this.validDates&&this.sortMonthPrice()},sortMonthPrice:function(){this.lowestpriceMap={};var e=this;$.each(this.validDates,function(t){var n=e.validDates[t].date;return"undefined"==typeof e.lowestpriceMap[n.getFullYear().toString()+n.getMonth().toString()]?void (e.lowestpriceMap[n.getFullYear().toString()+n.getMonth().toString()]=e.validDates[t].price):e.lowestpriceMap[n.getFullYear().toString()+n.getMonth().toString()]>e.validDates[t].price?void (e.lowestpriceMap[n.getFullYear().toString()+n.getMonth().toString()]=e.validDates[t].price):void 0})},selectedDate:function(){var e;for(var t in this.date)e=this.root.find("."+this.buildSelectCls(t))[0],this.dateDoms[t]=e,this.dateVal[t]=this.date[t].value;!this.curDate&&(this.curDate=t)},buildEvent:function(){this.addEvent("onCreate",this.onCreate),this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},onCreate:function(){this.selectedDate(),this.buildElementsEvent(),this.root.css({position:"absolute"}),this.windowResizeHander=$.proxy(this.position,this)},onShow:function(){$(window).bind("resize",this.windowResizeHander),this.root.css("z-index","1000"),this.windowResizeHander(),setTimeout(this.windowResizeHander,100);var e=this;if(u.apply({hybridCallback:function(){e.root.find(".cui_cldweek").css("top","0")},callback:function(){}}),this.animatSwitch){var e=this;window.scrollTo(0,0),this.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)",top:"0px"},0,function(){e.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)"},e.timeNum,function(){e.windowResizeHander()})})}},position:function(){this.root.css({left:"0px",top:"0px"});var e=n.getPageSize();this.root.css({width:$(window).width(),height:e.height})},onHide:function(){$(window).unbind("resize",this.windowResizeHander)},createHtml:function(){return this.createCalendar()},buildElementsEvent:function(){var e=this;this.root.delegate("li.valid","click",function(){b=$(this),b.hasClass("valid")||(b=b.closest(".valid"));var n=t.Date.parse(b.attr("data-date")).valueOf();e.isAccordBound(n)&&e._setDate(n,b)}),this.root.delegate("#js_return","click",$.proxy(function(){this.returnCallback&&this.returnCallback(),this.hide()},this))},_hide:function(){if(this.animatSwitch){var e=this;this.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)",top:"0px"},0,function(){e.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)"},e.timeNum,function(){e.hide()})})}else this.hide()},isAccordBound:function(e){var t=this.date[this.curDate];if(!t.bound)return!0;if(!t.bound.rules||!t.bound.error)return!0;var n,r=t.bound.rules;for(var i in r)switch(n="string"==typeof r[i]?this.dateVal[r[i]]:this._isDate(r[i])&&r[i],i){case"<":if(!(n>e))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case">":if(!(e>n))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case"<=":if(!(n>=e))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case">=":if(!(e>=n))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1}return!0},_setDate:function(e,t){if(!this.onlyread){if(this.dateDoms[this.curDate]){var n=$(this.dateDoms[this.curDate]);n.removeClass(this.buildSelectCls(this.curDate)),n.removeClass(this.buildSelectCls())}this.dateDoms[this.curDate]=t;var r,i=$(t),s=this,o=this.date[this.curDate].title;r="function"==typeof o?function(e){return o(e,function(e){return s.formatTitle(e)})}:this.formatTitle;var u=parseFloat(parseInt(100*(t.attr("data-price")||0))/100);$.proxy(this.formatPrice,this),i.addClass(this.buildSelectCls(this.curDate)),i.addClass(this.buildSelectCls()),this.dateVal[this.curDate]=e;var a=($.grep(this.validDates,function(t){var n=t.date.valueOf()==e.valueOf();return n}),i.html().replace(/^\d+/gm,""));isNaN(a)===!1&&(a=this.DAYTITLE[e.getDay()]),this.callback&&this.callback.call(this,e,u,a,this.dateVal)}},setCurDate:function(e){this.curDate=e},buildSelectCls:function(e){return e?"selected-"+e:"cui_cld_daycrt"},createCalendar:function(){var e,t=[];this.title&&t.push(["<header>","<h1>"+this.title+'</h1><i class="returnico i_bef" id="js_return"></i>',"</header>"].join("")),t.push(['<article class="cont_wrap" style="margin: 0 0 0">','<div class="cui_cldwrap">'].join("")),t.push(this.createWeek());for(var n=0;n<this.Months;n++)e=new Date(this.startMonth),e.setMonth(e.getMonth()+n),t.push(this.createMonth(e));return t.push(["</div></atricle>"].join("")),t.join("")},createWeek:function(){var e=['<ul class="cui_cldweek">'];for(i in this.SDAYTITLE)e.push("<li>"+this.SDAYTITLE[i]+"</li>");return e.push("</ul>"),e.join("")},createMonth:function(e){var n,r=this.calcStructData(e),i=[];i.push('<section class="cui_cldunit">'),i.push('<h1 class="cui_cldmonth">'+t.Date.format(e,"Y年n月")+"</h1>"),i.push('<ul class="cui_cld_daybox">');var s,u,a=r.days.length,f=this;0;for(var n=0;a>n;n++){u=r.days[n].length;for(var l=0;u>l;l++){o++,s={};var h=r.days[n][l];if(h){var p=this.validStartDate||r.start,d=this.validEndDate||r.end;h>=p&&d>=h?(s.cui_cld_dayfuture=!0,s.valid=!0):(s.cui_cld_daypass=!0,s.invalid=!0)}else s.cui_cld_dayfuture=!0,s.invalid=!0;var v="",m="";if(this.validDates&&h){var y=$.grep(this.validDates,function(e){return e.date.getFullYear()===h.getFullYear()&&e.date.getMonth()===h.getMonth()&&e.date.getDate()===h.getDate()?!0:!1});0===y.length?(delete s.valid,s.invalid=!0):(s.cui_cld_day_havetxt=!0,v=y[0].price,m=h.getFullYear().toString()+h.getMonth().toString())}var b=this.formatTitle;if(this.date)for(var w in this.date)this.dateVal[w]&&s.valid&&t.Date.format(this.dateVal[w]||this.date[w].value,"Y-m-d")==t.Date.format(r.days[n][l],"Y-m-d")&&(delete s.cui_cld_dayfuture,delete s.cui_cld_day_hint,s[this.buildSelectCls()]=!0,s[this.buildSelectCls(w)]=!0,b=function(e){return function(t){return e(t,function(e){return f.formatTitle(e)})}}(this.date[w].title));var E=$.proxy(this.formatPrice,this),S=this._formatPrice(v,E,!!s.valid);v&&this.lowerPriceClass&&m&&this.lowestpriceMap[m]===v&&(S=S.split("<i>").join('<i class="'+this.lowerPriceClass+'">'));var x=b.call(this,h);if(h&&x!=h.getDate()){var T=t.getServerDate(),N=new Date(h);N.setHours(1,1,1,0),T.setHours(1,1,1,0);var C=(N-T)/864e5;x=2>=C?'<em class="'+this.todayClass+'">'+x+"</em>":this.holidayClass?'<em class="'+this.holidayClass+'">'+x+"</em>":"<em>"+x+"</em>"}else x="<em>"+x+"</em>";i.push('<li data-price="'+v+'" data-date="'+t.Date.format(h,"Y-m-d")+'" '+(s?' class="'+this._objectKey(s).join(" ")+'"':"")+">"+x+S+"</li>")}}return i.push("</ul></section>"),i.join("")},formatPrice:function(e){return e>0?"<i>&yen;"+e+"</i>":""},formatTitle:function(e){if(!e)return"";var n=t.getServerDate();if(t.Date.format(n,"Ymd")==t.Date.format(e,"Ymd"))return"今天";var r=new Date(e);r.setHours(1,1,1,0),n.setHours(1,1,1,0);var i=(r-n)/864e5;if(1==i)return"明天";if(2==i)return"后天";if(this.showChineseHoliday===!0){var s=this.solarDay2(e);if(this.chineseHoliday[s]&&!this._chineseHoliday[s])return this._chineseHoliday[s]=1,this.chineseHoliday[s]}if(1==this.showHoliday){var o=t.Date.format(e,"md");if(this.holiday[o])return this.holiday[o]}return t.Date.format(e,"j")},calcStructData:function(e){var t=new Date(e),n=new Date(e);t.setDate(1),t.setHours(0,0,0,0);var r=t.getDay();n.setMonth(n.getMonth()+1,1),n.setHours(-24,0,0,0);for(var i,s=n.getDay(),o=(n.getDate()+(r+(6-s)))/7,u=[],a=0,f=0;o>a;a++){u[a]=[];for(var l=0;7>l;l++)if(0==a&&r>l)u[a].push("");else{if(i=new Date(t),i.setDate(i.getDate()+f),i>n)break;u[a].push(i),f++}}return{start:t,end:n,days:u,loops:o}},setDate:function(e){for(var n in e)if(this.date[n]&&this._isDate(e[n])){e[n].setHours(1,1,1,0),this.date[n].value=e[n],this.dateVal[n]=e[n];var r=$(this.dateDoms[n]);r.removeCls(this.buildSelectCls(n)),r.removeCls(this.buildSelectCls());var i=$(this.root.query('[data-date="'+t.Date.format(e[n],"Y-m-d")+'"]')[0]);i.hasClass("valid")&&(i.addClass(this.buildSelectCls(n)),i.addClass(this.buildSelectCls())),this.dateDoms[n]=i}},getDate:function(){return this.dateVal}});r.register({name:s,fn:f})}}),define("cWidgetSlide",["cBase","cUICore","cWidgetFactory","libs"],function(e,t,n){var r="Slide";if(!n.hasWidget(r)){var i=0,s=new e.Class({__propertys__:function(){this.images=[],this.index=1,this.delay=3,this.defaultIndex,this.autoplay=!1,this.root,this.imageinter,this.imageouter,this.navbox,this.navs,this.navinter,this.container,this.interWidth,this.itemWidth,this.onchange=function(){},this.onerror=function(){},this.loop=!0,this.ENUM_STATE_EMPTY=0,this.ENUM_STATE_NOTEMPTY=1,this.state=this.ENUM_STATE_EMPTY,this.notimage="",this.notimagedom,this.setTimeoutResoure,this.isMove=!1,this.isadaptive=!1,this.dirs={left:"next",right:"pre"},this.dir="left",this.startX=0,this.startY=0},initialize:function(e){this.setOption(e),this.createLayout(),this.addImageItems();var n=function(){this.calcinterWidth(),this.state===this.ENUM_STATE_NOTEMPTY&&(this.initposition(),this.autoplay&&this.play(),this.images&&this.images.length>1&&this.buildEvent())};setTimeout($.proxy(n,this),0);var r=this;this.isadaptive&&$(window).on("resize",function(){r.calcinterWidth(),r.initposition();var e=0;$("."+t.config.prefix+"slide-img-item img").each(function(t,n){$(n).height()>e&&(e=$(n).height())}),r.imageinter.height(e),r.imageouter.height(e),r.container.height(e)})},setOption:function(e){for(var t in e)switch(t){case"autoplay":case"defaultIndex":case"container":case"notimage":case"delay":case"dir":case"loop":case"onchange":case"onerror":case"isadaptive":this[t]=e[t];break;case"images":if(e[t]&&"string"==typeof e[t][0]){for(var n=[],r=0,i=e[t].length;i>r;r++)n.push({src:e[t][r]});this[t]=n}else this[t]=e[t]}},calcinterWidth:function(){var e=this.imageinter.find("."+t.config.prefix+"slide-img-item"),n=0;this.interWidth=n,this.itemWidth=this.imageouter.width(),e.css("width",this.itemWidth+"px"),e.each(function(){n+=$(this).width()}),this.imageinter.css("width",n+"px")},createLayout:function(){this.root=$(['<div class="'+t.config.prefix+'slide">','<div class="'+t.config.prefix+'slide-imgsouter">','<div class="'+t.config.prefix+'slide-imgsinter">',"</div>","</div>",'<div class="'+t.config.prefix+'slide-nav">','<div class="'+t.config.prefix+'slide-nav-padding">',"</div>","</div>","</div>"].join("")),this.imageouter=this.root.find("."+t.config.prefix+"slide-imgsouter"),this.imageinter=this.root.find("."+t.config.prefix+"slide-imgsinter"),this.navbox=this.root.find("."+t.config.prefix+"slide-nav"),this.navinter=this.root.find("."+t.config.prefix+"slide-nav-padding"),this.isadaptive&&this.container.height(i),this.container.empty().append(this.root)},createImageItem:function(e,n,r){var i=[t.config.prefix+"slide-img-item"];n&&i.push(t.config.prefix+"slide-img-item-current"),r&&[].push.call(i,r);var s=$(['<div class="'+i.join(" ")+'">','<a href="'+(e.link?e.link:"javascript:void(0);")+'"><img src="'+e.src+'" title="'+(e.title||"")+'"/></a>',"</div>"].join("")),o=this;return s.find("img").bind("error",function(){var e=this;setTimeout(function(){o.notimage&&(e.src=o.notimage),o.onerror&&o.onerror(e),$(e).unbind("error")},100)}),s},addImageItems:function(){for(var e=0,n=this.images.length;n>e;e++)this.addItem(this.images[e],this.defaultIndex===e);var r,i;if(this.images.length){if(this.state=this.ENUM_STATE_NOTEMPTY,r=this.createImageItem(this.images[0],null,[t.config.prefix+"slide-img-pre"]),i=this.createImageItem(this.images[Math.max(0,this.images.length-1)],null,[t.config.prefix+"slide-img-last"]),this.loop||(r.css({visibility:"hidden"}),i.css({visibility:"hidden"})),this.isadaptive){var s=this,o=r.find("img");o.on("load",function(){s.container.height(o.height())})}this.imageinter.append(r),this.imageinter.prepend(i),this.navs=this.navinter.find("."+t.config.prefix+"slide-nav-item")}else this.state=this.ENUM_STATE_EMPTY,this.addEmptyItem(this.notimage)},initposition:function(){this.go(this.index,function(){},!0),this.onchange(this.index,this.index);var e=this.calcNextIndex();this.setNavCurrent(e)},addEmptyItem:function(e){var n=[t.config.prefix+"slide-img-item",t.config.prefix+"slide-img-item-empey"];this.notimagedom=$('<div class="'+n.join(" ")+'"></div>'),this.notimagedom.append(e),this.imageinter.append(this.notimagedom)},buildEvent:function(){this.imageouter.bind("touchstart",$.proxy(this.onTouchStart,this)),this.imageouter.bind("touchmove",$.proxy(this.onTouchMove,this)),this.imageouter.bind("touchend",$.proxy(this.onTouchEnd,this)),this.imageouter.bind("touchcancel",$.proxy(this.onTouchEnd,this))},onTouchStart:function(e){if(e.preventDefault(),this.isMove)return void (this.isTouchStart=!1);this.isTouchStart=!0;var n=t.Tools.getMousePosOfElement(e.targetTouches[0],e.currentTarget);this.stop(),this.startX=n.x,this.startY=n.y,this.imageinterLeft=parseInt(this.imageinter.css("left"))},onTouchMove:function(e){if(e.preventDefault(),!this.isMove&&this.isTouchStart){var n=t.Tools.getMousePosOfElement(e.targetTouches[0],e.currentTarget),r=n.x-this.startX;n.y-this.startY,this.imageinter.css("left",this.imageinterLeft+r+"px")}},onTouchEnd:function(e){if(e.preventDefault(),!this.isMove&&this.isTouchStart){var n=t.Tools.getMousePosOfElement(e.changedTouches[0],e.currentTarget),r=n.x-this.startX,i=(n.y-this.startY,$.proxy(function(){this.autoplay&&this.loop&&this.play()},this)),s=this.calcNextIndex()+1,o=this.images.length;r>50&&this.loop||r>50&&!this.loop&&1!==s?this.pre(i):-50>r&&this.loop||-50>r&&!this.loop&&o>s?this.next(i):this.imageinter.animate({left:this.imageinterLeft+"px"},null,i)}},createNavItem:function(e){return $(['<span class="'+t.config.prefix+"slide-nav-item"+(e?t.config.prefix+"slide-nav-item-current":"")+'"></span>'].join(""))},addItem:function(e,t){var n=this.createImageItem(e,t),r=this.createNavItem(t);this.imageinter.append(n),this.navinter.append(r)},play:function(){clearInterval(this.setTimeoutResoure),!this.images||this.images.length<2||(this.setTimeoutResoure=setInterval($.proxy(function(){this[this.dirs[this.dir]]()},this),1e3*this.delay))},stop:function(){clearInterval(this.setTimeoutResoure)},go:function(e,t,n){this.isMove=!0;var r=-(this.itemWidth*e);n?(this.imageinter.css({left:r+"px"}),this.isMove=!1,t&&t()):this.imageinter.animate({left:r+"px"},null,null,$.proxy(function(){this.isMove=!1,t&&t()},this))},next:function(e){var t=this.index;this.go(++this.index,$.proxy(function(){if(this.index===this.images.length+1){this.index=1;var n=-(this.itemWidth*this.index);this.imageinter.css({left:n+"px"})}var r=this.calcNextIndex();this.setNavCurrent(r),this.onchange(this.index,t),e&&e()},this))},setNavCurrent:function(e){this.navs.removeClass(t.config.prefix+"slide-nav-item-current"),$(this.navs.get(e)).addClass(t.config.prefix+"slide-nav-item-current")},calcNextIndex:function(){return this.index>this.images.length?0:this.index-1},pre:function(e){0==this.index&&(this.index=1);var t=this.index;this.go(--this.index,$.proxy(function(){if(0===this.index){this.index=this.images.length;var n=-(this.itemWidth*this.index);this.imageinter.css({left:n+"px"})}var r=this.calcPreIndex();this.setNavCurrent(r),this.onchange(this.index,t),e&&e()},this))},calcPreIndex:function(){return this.index<1?Math.max(0,this.images.length-1):this.index-1},empty:function(){this.stop(),this.imageinter.find("img").remove()}});n.register({name:r,fn:s})}}),define("cWidgetMember",["cUtility","cUserModel","cWidgetFactory","cHybridFacade","cUtility","cUtilityCrypt","CommonStore"],function(e,t,n,r,i,s,o){var u="Member",a=window.location.host,f="accounts.ctrip.com";a.match(/^m\.ctrip\.com/i)?f="accounts.ctrip.com":a.match(/.uat\.qa/i)?f="accounts.uat.qa.nt.ctripcorp.com":a.match(/.fat/i)||a.match(/.fws/i)?f="accounts.fat49.qa.nt.ctripcorp.com":a.match(/^(localhost|172\.16|127\.0)/i)&&(f="accounts.fat49.qa.nt.ctripcorp.com");var l={MEMBER_LOGIN:"https://"+f+"/H5Login/#login",REGISTER:"https://"+f+"/H5Register/"},c=function(e,t){var n=e,r=location,s=t&&t.param&&"string"==typeof t.param?t.param:"";if(s){s=i.getUrlParams(t.param);var o=s&&s.backurl?decodeURIComponent(s.backurl):"",u=s&&s.from?decodeURIComponent(s.from):"",a=r.protocol+"//"+r.host;i.validate.isUrl(o)?s.backurl=o:""!==o&&(s.backurl=a+o),i.validate.isUrl(u)?s.from=u:""!==u&&(s.from=a+u);var f=$.param(s);""!=f&&(n=n+"?"+f)}window.location.href=n},h={memberLogin:function(e){c(l.MEMBER_LOGIN,e)},nonMemberLogin:function(e){var n=t.NotUserLoginModel.getInstance();e=_.extend({callback:function(){}},e||{}),n.excute(e.callback,e.callback)},register:function(e){c(l.REGISTER,e)},autoLogin:function(e){var n,r=e.url||window.location.href,u=i.getUrlParam(r,"__token__"),a=o.UserStore.getInstance(),f=o.HeadStore.getInstance(),l=this;if(u){try{var c=s.Base64.decode(decodeURIComponent(u));n=JSON.parse(c)}catch(h){return void (e.callback&&e.callback())}var p=function(){a.removeUser(),f.setAuth(n.auth);var r=t.UserLoginModel.getInstance();r.param={Auth:n.auth};var i=function(t){t.UserID&&(t.Auth=n.auth,t.LoginName=t.LoginName||"",delete t.ResponseStatus,delete t.Result,a.setUser(t),a.setExpireTime(n.time)),e.callback&&e.callback()},s=function(){l.memberLogin()};r.excute(i,s)};a.getAuth()===n.auth?a.isNonUser()?p():e.callback&&e.callback():a.getAuth()!==n.auth&&p()}else e.callback&&e.callback()},app_finished_login:function(){return!1}},p={memberLogin:function(e){r.request({name:r.METHOD_MEMBER_LOGIN,callback:e.callback,isShowNonMemberLogin:e.isShowNonMemberLogin})},nonMemberLogin:function(e){r.request({name:r.METHOD_NON_MEMBER_LOGIN,callback:e.callback})},register:function(e){r.request({name:r.METHOD_REGISTER,callback:e.callback})},autoLogin:function(e){r.request({name:r.METHOD_AUTO_LOGIN,callback:e.callback})},app_finished_login:function(e){r.request({name:r.METHOD_APP_FINISHED_LOGIN,userInfo:e.userInfo,callback:e.callback})}};n.register({name:u,fn:e.isInApp()?p:h})}),define("cWidgetCaptcha",["cWidgetFactory","cStorage","c"],function(e,t,n){var r="Captcha",i=function(){};i={islock:!1,getCode:function(e,t){var r=this;r.islock||(t.showLoading(),this.islock=!0,e.excute(function(e){if(t.hideLoading(),r.islock=!1,0==e.rc)r.islock=!0,r.showtime(t.els.sendcodebtn);else if(2==e.rc){e.rmsg="很抱歉，您的验证次数已达上限，请明天再试";var i=new n.ui.Alert({message:e.rmsg,buttons:[{text:"确定",click:function(){this.hide();for(var e in t.els){var n=t.els[e][0];n&&"INPUT"==n.nodeName&&!n.disabled&&(n.value="")}}}]});i.show()}else e.rmsg=e.rmsg||"获取验证码失败，请重试",t.showToast(e.rmsg)},function(){r.islock=!1,t.hideLoading(),t.showToast("获取验证码失败，请重试")}))},showtime:function(e){var t=60,n=this;if(n.islock)var r=setInterval(function(){e.addClass("cgrey"),e.removeClass("cblue1"),e.text(t+"秒后重发"),(0>=t||!n.islock)&&(clearInterval(r),e.removeClass("cgrey"),e.addClass("cblue1"),e.text("免费获取"),n.islock=!1),t--},1e3)},setinit:function(){this.islock=!1}},e.register({name:r,fn:i})}),define("cCalendar",["cUtility"],function(e){function t(e){if(e%100===0){if(e%400===0)return!0}else if(e%4===0)return!0;return!1}function n(e,n){return[31,t(e)?29:28,31,30,31,30,31,31,30,31,30,31][n]}function r(){}var i=e.Date.format,s=e.getServerDate(),o=function(){var e=new Date(s);return e.setHours(0,0,0,0),e}(),u={cls:"cui-calendar",monthsNum:1,animateSwitch:"right",format:"Y-m-d",days:"min",monthFormate:"Y年n月",appendElement:"body",startTime:o,todayCls:"cui_cld_today",endTime:Number.MAX_VALUE,header:{title:"",tel:!1,home:!1,homeHandler:r},headerTemplate:'<header><h1><%= title %></h1><i id="js_return" class="returnico lefthead"></i><% if(home) { %> <i class="icon_home i_bef" id="c-ui-header-home"></i> <% } %><% if(tel) { %><a href="tel:<%= tel %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a><% } %></header>',bodyPrefixTemplate:'<article class="cont_wrap"><div class="cui_cldwrap">',daysTemplate:'<ul class="cui_cldweek"><% _.each(days, function(day) { %><li><%= day %><% }); %></ul>',monthTemplate:'<section class="cui_cldunit"><h1 class="cui_cldmonth"><%= monthFormate %></h1><ul class="cui_cld_daybox"><% _.each(month, function(day) { %><li data-date="<%= day.format %>" class="<% if (day.invalid) { print("cui_cld_invalid cui_cld_daypass"); } else { print("cui_cld_valid"); } if(day.desc) { print(" cui_cld_day_havetxt"); } if (day.cls) { print(" " + day.cls); } %>"><em><%= day.value %></em><% if (day.desc) { %><i><%= day.desc %></i><% } %><% }); %></ul></section>',bodySuffixTemplate:"</div></article>",callback:r,onShow:r,onHide:r,constant:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"]}},a=function(e){e=e||{},this.options=$.extend(!0,{},u,e),this.$el=$("<div>").addClass(this.options.cls),this.initialize.apply(this,arguments),this.render()};return a.prototype={constructor:a,initialize:r,hasPushState:history&&history.pushState,show:function(){var e=this.options,t=this.$el,n=this.animateHandler(),r=this;return this._isShow?void 0:(this.hasPushState&&this.options.header&&("undefined"!=typeof Lizard&&(Lizard.stopStateWatch=!0),history.pushState({},document.title,location.href),$(window).one("popstate",function(){r.hide(!0),"undefined"!=typeof Lizard&&(Lizard.stopStateWatch=!1)})),e.animateSwitch?t.css({"-webkit-transform":n,transform:n}).show().animate({"-webkit-transform":"translate(0, 0)",transform:"translate(0, 0)"},500,"ease-in-out",function(){t.css({"-webkit-transform":"",transform:"",width:"100%"})}):t.show().css({width:"100%"}),this._isShow=!0,e.onShow.call(this),this)},hide:function(e){var t=this,n=this.options,r=this.$el,i=this.animateHandler();return this._isShow&&!e&&this.hasPushState&&this.options.header?(history.back(),this):(n.animateSwitch?r.animate({"-webkit-transform":i,transform:i},500,"ease-in-out",function(){r.hide()}):r.hide(),n.onHide.call(t),this._isShow=!1,this)},remove:function(){var e=this.$el;this.options.animateSwitch?setTimeout(function(){e.remove()},501):e.remove()},animateHandler:function(){var e,t=this.options.animateSwitch;if(t)switch(t){case"top":e="translate(0, 100%)";break;case"bottom":e="translate(0, -100%)";break;case"left":e="translate(-100%, 0)";break;case"right":e="translate(100%, 0)";break;default:e="translate(100%, 0)"}return e},setOptions:function(e,t){return _.isObject(e)?_.each(e,function(e,t){this.options[t]=e},this):this.options[e]=t,this},isValid:function(e){var t,n=this.options.startTime.getTime();return e=e.getTime(),t=_.isDate(this.options.endTime)?this.options.endTime.getTime():this.options.endTime,e-n>=0&&t-e>=0},bindEvents:function(){var e=this,t=this.options.header;this.$el.on("click",".cui_cld_valid",function(){var t=$(this),n=t.attr("data-date").split("-"),r=new Date(n[0],parseInt(n[1],10)-1,n[2]),s=r.getDay(),o=r.getMonth(),u=e.options.constant,a={days:u.days[s],daysShort:u.daysShort[s],daysMin:u.daysMin[s],months:u.months[o],monthsShort:u.monthsShort[o],value:i(r,e.options.format),holiday:e.getDateDesc(r).desc};e.options.callback.call(e,r,a,t)}),t&&(this.$el.on("click","#js_return",function(){e.hide()}),t.home&&this.$el.on("click","#c-ui-header-home",function(){t.homeHandler.call(e)}))},render:function(){var e=this.options,t=[],n=e.startTime.getFullYear(),r=e.startTime.getMonth();t.push(this.createHeader()),t.push(e.bodyPrefixTemplate),t.push(this.createDays());for(var i=0;i<e.monthsNum;i++)r+1>12&&(r=0,n++),t.push(this.createMonth(n,r++));t.push(e.bodySuffixTemplate),this.$el.css("display","none").html(t.join("")).appendTo($(e.appendElement)),"body"===e.appendElement?this.$el.css({position:"absolute",zIndex:3001,top:0,left:0,width:"99.5%",minHeight:document.body.scrollHeight}):this.$el.addClass("cui-calendar-static"),this.bindEvents()},createHeader:function(){var e=this.options.header;return e?_.template(this.options.headerTemplate,e):""},createDays:function(){var e,t=this.options.days,n=this.options.constant;return e="short"===t?n.daysShort:"min"===t?n.daysMin:n.days,_.template(this.options.daysTemplate,{days:e})},createMonth:function(e,t){for(var n=new Date(e,t),r=n.getDay(),s={monthFormate:i(n,this.options.monthFormate),month:[]},o=this.generateMonthModel(e,t),u=0;r>u;u++)s.month.push({invalid:!0,value:""});return s.month=s.month.concat(o),_.template(this.options.monthTemplate,s)},generateMonthModel:function(e,t){for(var r,s,o=n(e,t),u=[],a=1;o>=a;a++)r=new Date(e,t,a),s={invalid:!0,value:a},_.extend(s,this.getDateDesc(r)),this.isValid(r)&&(s.invalid=!1,s.format=i(r,"Y-m-d")),u.push(s);return u},getDateDesc:function(e){var t=864e5,n="",r="",i=e.getTime(),s=o.getTime();return i===s?(n="今天",r=this.options.todayCls):i-s===t?(n="明天",r=this.options.todayCls):i-s===2*t&&(n="后天",r=this.options.todayCls),{cls:r,desc:n}}},_.extend(a,{isLeapYear:t,getDaysInMonth:n,extend:Backbone.View.extend,dateFormat:i,defaults:u,serverDate:s}),a}),define("cHolidayCalendar",["cCalendar"],function(e){function t(e){return 15&o[e-1900]}function n(e,t){return o[e-1900]&65536>>t?30:29}function r(e){return t(e)?65536&o[e-1900]?30:29:0}function i(e){for(var t=348,n=32768;n>8;n>>=1)t+=o[e-1900]&n?1:0;return t+r(e)}function s(e){var s,o=0,u=0,a={},f=new Date(1900,0,31),l=(e-f)/864e5;for(a.dayCyl=l+40,a.monCyl=14,s=1900;2050>s&&l>0;s++)u=i(s),l-=u,a.monCyl+=12;for(0>l&&(l+=u,s--,a.monCyl-=12),a.year=s,a.yearCyl=s-1864,o=t(s),a.isLeap=!1,s=1;13>s&&l>0;s++)o>0&&s===o+1&&a.isLeap===!1?(--s,a.isLeap=!0,u=r(a.year)):u=n(a.year,s),a.isLeap===!0&&s===o+1&&(a.isLeap=!1),l-=u,a.isLeap===!1&&a.monCyl++;return 0===l&&o>0&&s===o+1&&(a.isLeap?a.isLeap=!1:(a.isLeap=!0,--s,--a.monCyl)),0>l&&(l+=u,--s,--a.monCyl),a.month=s,a.day=l+1,a}var o=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835],u=_.defaults({holidayCls:"cui_cld_holiday",solarHoliday:{"0101":"元旦","0214":"情人节","0405":"清明","0501":"劳动节",1001:"国庆",1225:"圣诞节"},lunarHoliday:{1230:"除夕","0101":"春节","0115":"元宵","0505":"端午","0707":"七夕","0815":"中秋"},_lunarHoliday:{}},e.defaults),a=e.extend({initialize:function(e){this.options=$.extend(!0,{},u,e)},getDateDesc:function(e){var t,n,r,i=a.__super__.getDateDesc.apply(this,arguments),o=this.generateHolidayKey(e.getMonth()+1,e.getDate()),u=this.options;return u.solarHoliday[o]?(i.desc=u.solarHoliday[o],i.cls=u.holidayCls):(n=s(e),t=this.generateHolidayKey(n.month,n.day),r=e.getFullYear()+t,u.lunarHoliday[t]&&(u._lunarHoliday[r]&&u._lunarHoliday[r]===o?(i.desc=u.lunarHoliday[t],i.cls=u.holidayCls):u._lunarHoliday[r]||(i.desc=u.lunarHoliday[t],i.cls=u.holidayCls,u._lunarHoliday[r]=o))),i},generateHolidayKey:function(e,t){return 10>e&&(e="0"+e),10>t&&(t="0"+t),""+e+t}},{defaults:u});return a}),define("cHolidayPriceCalendar",["cHolidayCalendar"],function(e){var t=_.defaults({unit:"¥",lowestCls:"price_lowest",monthTemplate:'<section class="cui_cldunit"><h1 class="cui_cldmonth"><%= monthFormate %></h1><ul class="cui_cld_daybox"><% _.each(month, function(day) { %><li <% if (day.price) { %> data-price="<%= day.price %>" <% } %> data-date="<%= day.format %>" class="<% if (day.invalid) { print("cui_cld_invalid cui_cld_daypass"); } else { print("cui_cld_valid"); } if(day.desc) { print(" cui_cld_day_havetxt"); } if (day.cls) { print(" " + day.cls); } %>"><em><%= day.value %></em><% if (day.desc) { %><i><%= day.desc %></i><% } %><% }); %></ul></section>',priceDate:[],startPriceTime:!1,voidInvalid:!0},e.defaults),n=e.extend({initialize:function(e){this.options=$.extend(!0,{},t,e),this.setPriceDate(this.options.priceDate)},generateMonthModel:function(t,n){for(var r,i,s,o,u=e.getDaysInMonth(t,n),f=[],l=this.options,c=1;u>=c;c++)r=new Date(t,n,c),s=r.getTime(),i=this.getDateDesc(r),o=l.priceDate[s],"undefined"!=typeof o?(i.value=i.desc?i.desc:c,i.desc=0!=o?l.unit+o:"",i.price=o):(i.invalid=l.voidInvalid,i.value=c),this.isPriceValidTime(r)||(i.invalid=!0),i.format=e.dateFormat(s,"Y-m-d"),f.push(i);return f},isPriceValidTime:function(e){var t=this.options.startPriceTime;return t?e.getTime()-t.getTime()>=0:this.isValid(e)},findMinPrice:function(){var e=this.$el.find(".cui_cld_daybox"),t=this.options.lowestCls;e.each(function(){var e,n=$(this).find("[data-price]"),r=[];n.each(function(){r.push(parseInt(this.getAttribute("data-price"),10))}),e=Math.min.apply(null,r),n.each(function(){var n=$(this),r=parseInt(n.attr("data-price"),10);r===e&&n.addClass(t)})})},setPriceDate:function(e){var t={};_.each(e,function(e){t[e.date.getTime()]=e.price}),this.options.priceDate=t}});return n}),define("cImgLazyload",["libs","cBase"],function(e,t){var n=new t.Class({__propertys__:function(){this.isError=!1,this.uuid=_.uniqueId()+(new Date).getTime()},initialize:function(e){this.handleOpts(e),this.init()},checkWrapperDisplay:function(){this.isError||(this.TIMERRES&&clearInterval(this.TIMERRES),0==$(this.imgs[0]).offset().top&&(this.isError=!0,this.TIMERRES=setInterval($.proxy(function(){0,$(this.imgs[0]).offset().top>0&&(this.TIMERRES&&clearInterval(this.TIMERRES),0,this.isError=!1,this.refresh())},this),100)))},handleOpts:function(e){return this.isError=!1,e&&e.imgs&&e.imgs.length?(this.imgs=e.imgs,this.container=e.container||$(window),this.width=e.width,this.height=e.height,this.loadingImg=e.loadingImg||"http://pic.c-ctrip.com/vacation_v2/h5/group_travel/no_product_pic.png",this.loadingBg=e.loadingBg||"#ebebeb",this.needWrapper=!1,(this.width||this.height)&&(this.needWrapper=!0),this.wrapper=e.wrapper||'<div class="cui_lazyload_wrapper" style="text-align: center; vertical-align: middle; "></div>',void (this.imgContainer={})):void (this.isError=!0)},init:function(){this.isError||(this.initImgContainer(),this.lazyLoad(),this.bindEvents())},refresh:function(e){e&&this.handleOpts(e),this.init()},bindEvents:function(){this.isError||(this.destroy(),this.container.on("scroll.imglazyload"+this.uuid,$.proxy(function(){this.lazyLoad()},this)),$(window).on("resize.imglazyload"+this.uuid,$.proxy(function(){this.initImgContainer()},this)))},initImgContainer:function(){if(!this.isError){var e,t,n,r;for(t=0,n=this.imgs.length;n>t;t++)e=$(this.imgs[t]),e.attr("data-src")&&""!=e.attr("data-src")&&"1"!=e.attr("data-load")&&(r=e.offset(),this.imgContainer[r.top]||(this.imgContainer[r.top]=[]),this.imgContainer[r.top].push(e))}},_handleImg:function(e){var t,n;e.attr("data-src")&&""!=e.attr("data-src")&&(this.needWrapper&&(n=$(this.wrapper),n.css({width:this.width+"px",height:this.height+"px","background-color":this.loadingBg}),n.insertBefore(e),n.append(e)),t=$(new Image),e.attr("src")||e.attr("src",this.loadingImg),t.on("error",function(){e.attr("src",this.loadingImg)}).on("load",function(){e.attr("src",e.attr("data-src")),e.attr("data-load","1"),setTimeout(function(){n&&n[0]&&(e.insertBefore(n),n.remove())},1)}).attr("src",e.attr("data-src")))},lazyLoad:function(){if(!this.isError){var e,t,n,r,i,s=this.container.height(),o=this.container.scrollTop();for(e in this.imgContainer)if(parseInt(e)<o+s){for(t=this.imgContainer[e],r=0,i=t.length;i>r;r++)n=$(t[r]),this._handleImg(n);delete this.imgContainer[e]}}},destroy:function(){this.isError||(this.TIMERRES&&clearInterval(this.TIMERRES),this.container.off(".imglazyload"+this.uuid),$(window).off(".imglazyload"+this.uuid))}});return n}),define("cBasePageView",["cPageView"],function(e){return e}),define("cCommonPageFactory",["libs"],function(){var e=e||{};return e.products={},e.hasPage=function(t){return!!e.products[t]},e.register=function(t){if(!(t&&t.name&&t.fn))throw"CommonPageFactory: factory is lack of necessary infomation.";if(e.products[t.name])throw"CommonPageFactory: factory has been register in CommonPageFactory";e.products[t.name]=t.fn},e.create=function(t){return e.products[t]},e}),define("cCommonListPage",["libs","cUI","cPageView","cWidgetFactory","cCommonPageFactory","cWidgetListView"],function(e,t,n,r,i){var s="CommonListPage";if(!i.hasPage(s)){var o=o||{};o.injectListView=function(e){e.workspace||(e.workspace=$(this.defaultHtml)),this.$el.append(e.workspace),e.container=e.container?this.$el.find(e.container):e.workspace.find("#c-list-view-container");var t=r.create("ListView");this.listview=new t(e)},o._onWidnowScroll=null,o.__isComplete__=!1,o.__isLoading__=!1,o.bottomLoading=null,o.addScrollListener=function(){this.__isComplete__=!1,this.__isLoading__=!1,$(window).bind("scroll",this._onWidnowScroll)},o.removeScrollListener=function(){$(window).unbind("scroll",this._onWidnowScroll),this.bottomLoading&&(this.bottomLoading.remove(),this.bottomLoading=null)},o.onWidnowScroll=function(){var e=t.Tools.getPageScrollPos();if(0!=e.top){var n=e.pageHeight-(e.top+e.height);81>=n&&!this.__isComplete__&&!this.__isLoading__&&(this.__isLoading__=!0,this.onBottomPull&&this.onBottomPull())}},o.closeBottomPull=function(){this.__isComplete__=!0},o.endPull=function(){this.__isLoading__=!1},o.showBottomLoading=function(){this.bottomLoading||(this.bottomLoading=$('<div class="cui-zl-load" id="zlLoading" style=""> <div class="cui-i cui-b-loading"></div><div class="cui-i  cui-mb-logo"></div> <p>加载中</p></div>')),this.$el.append(this.bottomLoading),this.bottomLoading.show()},o.hideBottomLoading=function(){this.bottomLoading&&this.bottomLoading.hide(),this.__isLoading__=!1},o.defaultHtml='<section class="res_list"><ul class="res_list_tab_arr_r" id="c-list-view-container"></ul></section>';var u=n.extend(o);i.register({name:s,fn:u})}}),define("lizard",["CommonStore","cMessageCenter","cUILoading","cUIWarning404","cUIHeader","cBase","cModel","memStore","cUtilityPath","cUtilityUtil","cUtilityStateHistory","cUtilityPerformance","cUtilityCacheView","cUIAnimation","cUtility","cUtilityFlip","cPageParser"],function(CommonStore,MessageCenter,Loading,Warning404,cUIHeader,Base,cModel,mStore,path,utils,History,Performance,CacheViews,animation,util){function APP(e){this.initialize(e)}var oHtml=$.fn.html;$.fn.html=function(e){return void 0===e?this.length>0?this[0].innerHTML:null:oHtml.call(this,e)};var oText=$.fn.text;$.fn.text=function(e){return void 0===e?this.length>0?this[0].textContent:null:oText.call(this,e)};var location=window.location,history=window.history,DialogHist=[],DialogMag={};/\/html5\//i.test(location.href.replace(/[\?#].+$/,""))&&$("<base/>").attr("href",location.href.replace(/\/html5\//i,"/webapp/")).prependTo($("head").eq(0)),Lizard.runAt="client";var renderAt=$(".main-viewport").attr("renderat");Lizard.renderAt="server",renderAt||(Lizard.renderAt="client"),Lizard.allowDebug=!1,Lizard.log=function(){if(window.console&&console.log&&Lizard.allowDebug){var e=Array.prototype.splice.call(arguments,0,arguments.length);e.unshift("(LOG)"),console.log.apply(console,e)}},Lizard.group=function(){var e=Lizard.group.caller.name;if(window.console&&console.group&&console.time&&Lizard.allowDebug){var t="Lizard.";0,0}},Lizard.groupEnd=function(e){var t=e||Lizard.groupEnd.caller.name;if(window.console&&console.groupEnd&&console.timeEnd&&Lizard.allowDebug){var n="Lizard.";0,0}},Lizard.dirs=function(e){window.console&&console.dir&&Lizard.allowDebug&&0},Lizard.gaMarketing=function(){var e=new Image;e.onload=function(){},e.onerror=function(){},e.src=("https:"==document.location.protocol?"https:":"http:")+"//googleads.g.doubleclick.net/pagead/viewthroughconversion/1066331136/?value=1.000000&amp;label=cG9hCIyRngMQgNi7_AM&amp;guid=ON&amp;script=0"};var _animAPIs=animation,chistory=new History,cperformance=new Performance;return window.cacheViews=new CacheViews,window.cacheModels=new CacheViews,APP.defaults={mainRoot:"#main",header:"header",viewport:".main-viewport",animForwardName:"slideleft",animBackwardName:"slideright",isAnim:!1,maxsize:10},APP.prototype={registerMsg:function(e,t){MessageCenter.register(MessageCenter.MAP.APP,e,t)},dispatchMsg:function(e,t,n){MessageCenter.dispatch(MessageCenter.MAP.APP,e,t,n)},viewReady:function(e){this.registerMsg("viewReady",e)},createCommonUI:function(){this.loading=new Loading},showLoading:function(){this.loading.show()},hideLoading:function(){this.loading.hide()},initialize:function(e){var t=this.initProperty(e);this.options=t,this.firstState=null,this.mainRoot=$(t.mainRoot),this.header=$(t.header),this.viewport=this.mainRoot.find(t.viewport),this.curView=null,this.lastView=null,this.chistory=chistory,this.views=cacheViews,this.maxsize=t.maxsize,this.createCommonUI(),this.animAPIs=_animAPIs,this.animForwardName=t.animForwardName,this.animBackwardName=t.animBackwardName,this.isAnim=t.isAnim,this.animatName=this.animForwardName,this.observe=!1,this.validate(),this.start(),MessageCenter.register(MessageCenter.MAP.APP,"switchview",function(e){var t=e[0],n=e[1],r=e[2];t.nextPageShow||!this.isAnim?(this.curView&&this.curView.$el.hide(),n.show(),_.isFunction(this.header.html)&&this.header.html(r.header)):n.hide()})},initProperty:function(e){var t=_.extend({},APP.defaults,e||{});return t},validate:function(){return this.mainRoot.length<1?"mainRoot 不存在":this.header.length<1?"header 不存在":this.viewport.length<1?"viewport 不存在":!1},start:function(){if(Lizard.group(),this.bookmarkAnchor={},this.bindEvents(),Lizard.isInCtripApp&&window.Internal.isWinOS?this.header.parent().show():Lizard.isHybrid?this.header.parent().hide():this.header.parent().show(),!Lizard.isHybrid||Lizard.isInCtripApp){var e=path.documentUrl.href.replace(/#DIALOG_.*$/,""),t=document.documentElement.outerHTML;Lizard.log("Lizard.renderAt::"+Lizard.renderAt),Lizard.log("Lizard.runAt::"+Lizard.runAt);var n=e.indexOf(path.parseUrl(e).pathname);this.loadView(e.substring(n),t,{viewName:this.options.firstPageViewName||"viewName",loading:"server"!=Lizard.renderAt?this.options.isFirstPageHideLoading?!1:null:!1,landingpage:1},"server"==Lizard.renderAt)}else{var r=this.chistory.getHash();r||(r=Lizard.localRoute.config.defaultView?Lizard.localRoute.config.defaultView:_.first(_.keys(Lizard.localRoute.config)).replace(/(\{(.+?)\})/g,function(){return""}),r||(r="/index///"));var r=r.replace(/#DIALOG_.*$/,"");this.goTo(r,{viewName:this.options.firstPageViewName||"viewName",loading:this.options.isFirstPageHideLoading?!1:null})}Lizard.groupEnd()},bindEvents:function(){$.bindFastClick&&$.bindFastClick(),this._handleLink(),chistory.popstate(this)},_handleLink:function(){(Lizard.isHybrid||utils.isSupportPushState)&&$("body").on("click",$.proxy(function(e){for(var t=$(e.target),n=!1;;){if(!t[0])break;if("BODY"==t[0].nodeName)break;if(t.hasClass("sub-viewport"))break;if("A"==t[0].nodeName){n=!0;break}t=t.parent()}if(n){var r=t.attr("href"),i={},s=t.attr("lizard-data");if("off"==t.attr("lizard-catch")||r&&utils.isExternalLink(r))return!0;e.preventDefault(),s&&(i.data=JSON.parse(s)),"back"==t.attr("data-jumptype")?this.back(t.attr("href"),i):"forward"==t.attr("data-jumptype")&&this.goTo(t.attr("href"),i)}},this))},loadView:function(e,t,n,r){var i=this.curView||{hpageid:"",pageid:"",_getViewUrl:function(){return""},browserReferrer:""};window.__bfi||(window.__bfi=[]);var s,o=($("#page_id"),location.href),u=i.browserReferrer||"";if(util.isInApp()&&!Lizard.isInCtripApp){var a=Lizard.getAbsPath(o.replace(/.*#/,""));if(o=Lizard.toUBTURL(a),u){var f=Lizard.getAbsPath(u.replace(/.*#/,""));u=Lizard.toUBTURL(f)}s=i.hpageid}else if(s=i.pageid,u){var f=Lizard.getAbsPath(u,1);u=Lizard.toUBTURL(f,1)}window.__bfi.push(["_unload",{page_id:s,url:decodeURIComponent(o),refer:decodeURIComponent(u)}]),Lizard.group(),n=n||{};var l=!1;r||(l=n.pushState,l!==!1&&(l=!0),this.closeObserve());var c=cperformance.getUuid(),h=cperformance.getUuid();cperformance.group(c,{name:"Domready",landingpage:1==n.landingpage?1:0,url:e}),cperformance.group(h,{name:"Onload",landingpage:1==n.landingpage?1:0,url:e}),n.loading===!1||r||(this.options.isHideAllLoading?1==n.loading&&this.showLoading():this.showLoading()),this.parsePage(e,t,_.bind(this._renderCallback,this),[null,r,n,c,h,e,t,l])},_renderCallback:function(e,t,n,r,i,s,o,u){if(e.config.configEmpty)return void (n.loading===!1||t||this.hideLoading());var a=t?this.viewport.children().eq(0):$(e.viewport);t||(n.stateid?a.attr("id",n.stateid):a.attr("id",e.id)),cperformance.groupEnd(r),t||(this.firstState||this.viewport.html(""),a.hide(),a.appendTo(this.viewport));var f={id:t?a.attr("id"):n.stateid||e.id,url:t?location.href:s,opts:n},l=_.omit(_.clone(e),["header","viewport","TDK"]);(t||n.stateid)&&(l.id=a.attr("id"));var c=_.extend({viewName:e.config.viewName||n.viewName,text:o,opts:n,$el:a,state:f,url:s,single:!1,pushState:u,callback:$.proxy(function(r,s){n.loading===!1||t||this.hideLoading(),r&&r.switchByOut?r.turning=function(){s&&s.hide(),$(".main-viewport").children().hide(),MessageCenter.dispatch(MessageCenter.MAP.APP,"switchview",[n,a,e],this)}:MessageCenter.dispatch(MessageCenter.MAP.APP,"switchview",[n,a,e],this),this.switchView(r,s),cperformance.groupEnd(i)},this)},l);this.controller(c)},parsePage:function(e,t,n,r){Lizard.group();var i=Lizard._initParser(e,t),s=Lizard.getController(i);window.navigator.userAgent.indexOf("Android 2")>-1&&2==$("head").length&&$($("head")[1]).remove(),s&&require([s]),Lizard.retyClickFunc=function(){Lizard.goTo(e)},this.getData(i,function(s){var o=cperformance.getUuid();cperformance.group(o,{name:"TemplateRender",url:e});var u=Lizard.render(i,s);cperformance.groupEnd(o),Lizard.urlSchemaMap||(Lizard.urlSchemaMap={}),u.config.url_schema&&(_.isString(u.config.url_schema)&&(u.config.url_schema=[u.config.url_schema]),_.each(u.config.url_schema,function(n){var r=Lizard.schema2re(n,e);r.reStr&&!Lizard.urlSchemaMap[r.reStr]&&(Lizard.urlSchemaMap[r.reStr]={html:t,urlMatchIndex:r.index})})),r[0]=u,_.isFunction(n)&&n.apply(this,r),Lizard.groupEnd("parsePage")})},getData:function(e,t){Lizard._isLoading=!0;var n=Lizard.getModels(e);0==n.length&&t.call(this,[]),Lizard.ajaxDatas={},Lizard.errorCalled=!1,this._processModels(n,t,[],_.isFunction(e.validate))},_transfuncToVal:function(obj){for(var p in obj)obj.hasOwnProperty(p)&&(_.isString(obj[p])&&0==obj[p].indexOf("function")?obj[p]=eval("("+obj[p]+")()"):(_.isObject(obj[p])||_.isArray(obj[p]))&&this._transfuncToVal(obj[p]))},_onSucess:function(e,t,n,r,i,s){var o=r[n];if(o.done=!0,o.error=!1,t[n]=e,o.name&&(Lizard.ajaxDatas[o.name]=e),_.every(r,function(e){return e.done})){if(Lizard._stoploadpage)return this.hideLoading(),void (Lizard._stoploadpage=!1);i.call(this,t)}else this._processModels(r,i,t,s)},_processModels:function(models,callback,datas,ignoreError){var _this=this;if(!_.some(models,function(e){return e.error})||Lizard.errorCalled)_.each(models,function(model,index){if(!model.processed&&(!model.depends||_.every(model.depends,function(e){return e in Lizard.ajaxDatas}))){var url=model.url,emodel=cacheModels.findById(url);if(emodel)_this._transfuncToVal(model.postdata),emodel.setAttr("param",model.postdata);else{emodel=(new Base.Class(cModel,{__propertys__:function(){this.urlParseRet=path.parseUrl(url),this.protocol=this.urlParseRet.protocol.substr(0,this.urlParseRet.protocol.length-1)}})).getInstance(),emodel.setAttr("url",url),_this._transfuncToVal(model.postdata),emodel.setAttr("param",model.postdata);var cacheStore=emodel.getResultStore();if(!cacheStore){var cachStore=new mStore({key:url,useLocalStore:model.useLocalStore});emodel.setAttr("result",cachStore)}cacheModels.add(url,emodel)}model.processed=!0,model.suspend&&eval("("+model.suspend+")()")?_this._onSucess({},datas,index,models,callback):emodel.excute(function(e){_this._onSucess(e,datas,index,models,callback)},function(e){!ignoreError&&e instanceof XMLHttpRequest?(model.error=!0,_this._processModels(models,callback,datas,ignoreError)):(_this._onSucess(e,datas,index,models,callback,ignoreError),e instanceof XMLHttpRequest&&_this._stopdependModel(model,models,datas,callback))},model.ajaxOnly,this)}});else{Lizard.errorCalled=!0,this.hideLoading();var errorData={callback:function(){waring404.hide(),Lizard.retyClickFunc()},headData:{title:"网络不给力",events:{returnHandler:function(){waring404.hide(),Lizard.isHybrid&&this.bookmarkAnchor.isFirst?CtripUtil.app_back_to_home():window.location.reload()}}}};Lizard.errorBack&&(errorData=_.extend(errorData,Lizard.errorBack(datas)));var waring404=new Warning404;waring404.show(),waring404.options(errorData),errorData.tel&&(waring404.tel=errorData.tel),waring404.callback=function(){errorData.callback.call(this),waring404.hide()};var hDom=$("#headerview");if(errorData.headData){var headerview=new cUIHeader({root:hDom});if(errorData.headData.events||(errorData.headData.events={}),errorData.headData.events.returnHandler){var returnFunc=errorData.headData.events.returnHandler;errorData.headData.events.returnHandler=function(){waring404.hide(),returnFunc.call(this)}}else errorData.headData.events.returnHandler=function(){waring404.hide(),Lizard.isHybrid&&this.bookmarkAnchor.isFirst?CtripUtil.app_back_to_home():window.location.reload()};headerview.set(errorData.headData)}}},_stopdependModel:function(e,t,n,r){var i=this;_.each(t,function(s,o){s!=e&&s.depends&&_.indexOf(s.depends,e.name)>-1&&(s.done=!0,s.error=!1,n[o]={},s.name&&(Lizard.ajaxDatas[s.name]={}),i._stopdependModel(s,t,n,r))})},controller:function a(e){Lizard.group();var a=e.controller,t=_.clone(e),n=e.callback||function(){};t.pushState!==!1&&(t.pushState=!0),t=_.omit(t,["controller","header","viewport","TDK","callback"]),this.loadController(a,$.proxy(function(e){e?(this.lastView=this.curView,_.find(this.views.catchs,function(e){return e.config&&e.config.controller==t.config.controller}),this.curView=new e({el:t.$el}),t=_.omit(t,["$el","single"]),this.curView.timestamp=(new Date).getTime(),t.viewName&&this.curView.$el.data("viewName",t.viewName),t.viewportID=t.id,delete t.id,this.curView=_.extend(this.curView,t),this.curView.onmessage=this.curView.onmessage||function(e){Lizard.log("onmessage",e)},this.curView.postMessage=function(e){var e=e||{},t=e.viewName,n=e.data;if(t){var r=this.views.findByViewName(t);r&&r.onmessage&&n&&r.onmessage(n)}else this.views.values.each(function(e,t){t.onmessage&&n&&t.onmessage(n)})},this.curView.refresh=function(e){var t=this.config.view.viewport;if(t){var n=_.template(t),r=n(e);this.$el.html(r)}},this.curView.referrer=this.lastView&&this.lastView.url||"",this.curView.browserReferrer=this.lastView&&this.lastView.url||document.referrer,this.views.add(t.viewportID,this.curView)):(this.lastView=this.curView,t.timestamp=t.timestamp||(new Date).getTime(),t=_.omit(t,["single","opts","pushState","text","viewName"]),this.curView=t,this.curView.referrer=this.lastView&&this.lastView.url||"",this.curView.browserReferrer=this.lastView&&this.lastView.url||document.referrer,this.curView.show=function(){this.$el.show()},this.curView.hide=function(){this.$el.hide()},this.curView.refresh=function(){},this.curView.sendUbt=function(){},this.views.add(this.curView.id,this.curView)),!this.firstState||this.replaceFirstState?(this.firstState=t.state,this.bookmarkAnchor.href=window.location.href,this.bookmarkAnchor.isFirst=!0,chistory.replaceState(t.state,t.url,t.url),this.bookmarkAnchor.hash=chistory.getHash()):t.pushState&&(chistory.pushState(t.state,t.url,t.url),this.bookmarkAnchor.isFirst=!1),Lizard.groupEnd("controller"),n(this.curView,this.lastView)},this))},loadController:function(e,t){return Lizard.group(),Lizard.log("controller:",e),e?void requirejs([e],function(e){return Lizard._isLoading=!1,Lizard._stoploadpage?(this.hideLoading(),void (Lizard._stoploadpage=!1)):(_.isFunction(t)&&t(e),void Lizard.groupEnd("loadController"))}):(_.isFunction(t)&&t(),void Lizard.groupEnd())},switchView:function(e,t){Lizard.group(),Lizard.log("inView.id:",e&&e.id),Lizard.log("outView.id:",t&&t.id),Lizard.log("this.isAnim:",this.isAnim),t&&!document.getElementById(t.id)&&e&&!e.switchByOut&&(t.$el.appendTo(this.viewport),t.$el.hide()),e&&!document.getElementById(e.id)&&(e.$el.appendTo(this.viewport),e.$el.hide());var n;if(!e)throw"inview 未被实例化";Lizard.T.lizTmpl=e.lizTmpl,Lizard.P.lizParam=e.lizParam,t?(t.saveScrollPos(),this.isAnim&&(n=this.animAPIs[this.animatName]),e.fromView=t.viewName,n&&_.isFunction(n)?n(e,t,$.proxy(function(e,t){Lizard.groupEnd("switchView"),this._onSwitchEnd(e,t)},this)):(e&&!e.switchByOut&&t.hide(),e.show(),Lizard.groupEnd("switchView"),this._onSwitchEnd(e,t))):(e.show(),Lizard.groupEnd("switchView"),this._onSwitchEnd(e,t))},_onSwitchEnd:function(e,t){Lizard.gaMarketing(),e.switchByOut||setTimeout(function(){t&&t.$el&&t.$el.hide()},10),e.sendUbt(!0),this.dispatchMsg("viewReady",e),this._destroyViews()},_destroyViews:function(e){if(this.openObserve(),Lizard.group(),e){var t=this.views.findById(e);return void (t&&(t.destroy(),this.views.delById(e),this.views.delByIdFromBackups(e)))}var n=this.views.length()-this.maxsize;if(1>n)return void Lizard.groupEnd();for(var r=0;n>r;r++){var i=this.views.orderCaches.shift(),s=i.key,t=this.views.findById(s);if(t){t.$el.remove();var o=t.viewportID;this.views.delById(o)}}Lizard.groupEnd()},goTo:function(e,t){function n(){Lizard.log("url:",e),Lizard.log("opts:",JSON.stringify(t)),r.showPageByHref(e,t),Lizard.groupEnd()}var r=this;if(r.header=$("#headerview>header"),Lizard.group(),e&&(!_.isObject(e)||(t=e,e=t.url)))if(t=t||{},this.animatName=t.animatName||this.animForwardName,this.replaceFirstState=t.replaceFirstState||!1,t.viewName){var i=r.views,s=i.findByName(t.viewName);if(s)if(t.cache){var o=t.pushState;o!==!1&&(o=!0),r.lastView=r.curView,r.curView=s;var u=s.config.view.header;u&&r.header.html(u),r.curView.timestamp>r.lastView.timestamp?(r.curView.navigationType="forward",r.animatName=r.animForwardName):(r.curView.navigationType="back",r.animatName=r.animBackwardName),r.closeObserve(),o&&chistory.pushState(s.state,s.url,s.url),r.switchView(r.curView,r.lastView)}else r._destroyViews(s.viewportID),n();else{var s=i.findByNameFromBackups(t.viewName);if(s)if(t.cache){var t=s.opts;t.viewName=s.viewName,r.loadView(s.url,s.text,t)}else r._destroyViews(s.viewportID),n();else n()}}else n()},showPageByHref:function(e,t){Lizard.group();var n=this,t=t||{},r=t.type||"get";t.data&&(r="post"),t.data||(t.data={});var i=t.data;if(t.jump=n.options.isAllPageJump,!utils.goExternalLink(e,t)){var s=Lizard.isHybrid&&Lizard.localRoute.mapUrl(e);s?requirejs([s],function(r){Lizard.log("localRouteRet 存在"),Lizard.groupEnd(),n.loadView(e,r,t)}):(Lizard.log("url:",e),Lizard.log("type:",r),Lizard.log("data:",JSON.stringify(i)),$[r](e,i,function(r){Lizard.log("新页面请求成功"),Lizard.groupEnd(),n.loadView(e,r,t)}))}},closeObserve:function(){Lizard.group(),this.observe=!1,Lizard.groupEnd()},openObserve:function(){Lizard.group();var e=this;setTimeout(function(){e.observe=!0},0),Lizard.groupEnd()},showView:function(e){Lizard.log("Lizard.showView start");var t=this.views.findById(e.id);if(t){Lizard.log("data.url: "+e.url+" already exist"),t.delegateEvents&&t.delegateEvents(),this.lastView=this.curView,this.curView=t;var n=t.config.view.header;n&&this.header.html(n),this.curView.timestamp>this.lastView.timestamp?(this.curView.navigationType="forward",this.animatName=this.animForwardName):(this.curView.navigationType="back",this.animatName=this.animBackwardName),Lizard.log("Lizard.showView end"),this.curView.referrer=this.lastView&&this.lastView.url||"",this.switchView(this.curView,this.lastView)}else{var t=this.views.findByIdFromBackups(e.id);if(t){var r=t.opts;this._destroyViews(t.viewportID),r.viewName=t.viewName,r.stateid=e.id,r.pushState=!1,this.loadView(t.url,t.text,r,!1)}else Lizard.log("data.url: "+e.url+" not exist"),Lizard.log("Lizard.showView end"),e.opts.stateid=e.id,e.opts.pushState=!1,this.goTo(e.url,e.opts)}},goBack:function(e,t){var n=this;if(n.header=$("#headerview>header"),t=t||{},t.viewName){var r=t.pushState;r!==!1&&(r=!0);var i=n.views,s=i.findByName(t.viewName);if(s){n.lastView=n.curView,n.curView=s;var o=s.config.view.header;o&&n.header.html(o),n.curView.timestamp>n.lastView.timestamp?(n.curView.navigationType="forward",n.animatName=n.animForwardName):(n.curView.navigationType="back",n.animatName=n.animBackwardName),n.closeObserve(),r&&chistory.pushState(s.state,s.url,s.url),n.switchView(n.curView,n.lastView)}else{var s=i.findByNameFromBackups(t.viewName);if(s){var t=s.opts;n._destroyViews(s.viewportID),t.viewName=s.viewName,n.loadView(s.url,s.text,t)}else e&&this.goTo(e,t)}}else if("string"!=typeof e)if(history.length>1){if(!Lizard.isHybrid||!this.bookmarkAnchor.isFirst)return void history.back();var u=["cWidgetFactory","cWidgetGuider"];require(u,function(){var e=arguments[0],t=e.create("Guider");t.backToLastPage({})})}else"object"==typeof e&&(t=e,t.animatName=t.animatName||this.animBackwardName,t.replaceFirstState=!0,t.isPushState=!0,this.goTo(t.defaultView,t));else t.animatName=t.animatName||this.animBackwardName,t.isPushState=!1,this.goTo(e,t)},go:function(e){history.go(e)},showDialog:function(e,t){function n(n){var r=cperformance.getUuid();cperformance.group(r,{name:"TemplateRender",url:l});var u=Lizard.render(e,n,{pageID:a,dialogName:s,ubtInfo:{ab_testing_tracker:t.ab_testing_tracker||"",bf_ubt_orderid:t.bf_ubt_orderid||"",page_id:t.page_id||""}});cperformance.groupEnd(r),u.dialogName=s,i._renderCallback(u,!1,t,c,h,l,f,o)}this.closeObserve();var r="DIALOG_",i=this;t=t||{},t.loading!==!1&&(i.options.isHideAllLoading?1==t.loading&&i.showLoading():i.showLoading());var s=t.dialogName||"dialog"+ ++utils.dialogUuid;this.animatName=t.animatName||this.animForwardName;var o=(t.single,t.pushState);o!==!1&&(o=!0);var u=(t.viewName,this.curView.url.replace(/#DIALOG_.*$/,"")),a=this.curView.id.replace(/\$.*/,""),f=(this.curView.lizTmpl,this.curView.lizParam,this.curView.text);DialogHist.length||DialogHist.unshift({url:u,id:a});var l=u+"#"+r+s,e=e||{};e.model||(e.model={}),e.view||(e.view={});var c=cperformance.getUuid(),h=cperformance.getUuid();cperformance.group(c,{name:"Domready",landingpage:0,url:l}),cperformance.group(h,{name:"Onload",landingpage:0,url:l}),i.getData(e,function(t){var r=e.model.data;r&&(t=t.concat([r])),n(t)})},"interface":function(){return{goTo:this.goTo,goBack:this.goBack,showDialog:this.showDialog,forward:this.goTo,back:this.goBack,go:this.go,registerMsg:this.registerMsg,viewReady:this.viewReady,showLoading:this.showLoading,hideLoading:this.hideLoading}}},APP}),function(){function e(){var e=navigator.userAgent.toLowerCase();return"ctripwireless"==e.match(/ctripWireless/i)?!0:!1}function t(){for(var e=0;e<f.length;e++){var t=f[e];t&&t.call(window)}}function n(e,t){p[e]=t}function r(){for(var e=document.getElementsByTagName("script")||[],t="",n=/lizard\.seed\.(src\.)*js.*$/gi,r=0;r<e.length;r++){var i=e[r].getAttribute("src");if(i&&n.test(i)){t=i.replace(n,"");var s=e[r].getAttribute("pdConfig");s&&(o=s);try{e[r].getAttribute("lizardConfig")&&(u=(new Function("return {"+e[r].getAttribute("lizardConfig")+"}"))())}catch(a){0}return t}}return t}function i(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.onload=t,n.src=e,document.body.appendChild(n)}function s(e,t){function n(){s++,s>=r&&t()}var r=e.length,s=0;if(!r)return void n();for(var o=0;r>o;o++){var u=e[o];i(u,n)}}!function(){navigator.userAgent.indexOf("Android")>0&&(JSON.stringify={}),function(){function e(e){return 10>e?"0"+e:e}function t(e){return r.lastIndex=0,r.test(e)?'"'+e.replace(r,function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function n(e,r){var o,a,f,l,c,h=i,p=r[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof u&&(p=u.call(r,e,p)),typeof p){case"string":return t(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(i+=s,c=[],"[object Array]"===Object.prototype.toString.apply(p)){for(l=p.length,o=0;l>o;o+=1)c[o]=n(o,p)||"null";return f=0===c.length?"[]":i?"[\n"+i+c.join(",\n"+i)+"\n"+h+"]":"["+c.join(",")+"]",i=h,f}if(u&&"object"==typeof u)for(l=u.length,o=0;l>o;o+=1)"string"==typeof u[o]&&(a=u[o],f=n(a,p),f&&c.push(t(a)+(i?": ":":")+f));else for(a in p)Object.prototype.hasOwnProperty.call(p,a)&&(f=n(a,p),f&&c.push(t(a)+(i?": ":":")+f));return f=0===c.length?"{}":i?"{\n"+i+c.join(",\n"+i)+"\n"+h+"}":"{"+c.join(",")+"}",i=h,f}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var r,i,s,o,u;"function"!=typeof JSON.stringify&&(r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var o;if(i="",s="","number"==typeof r)for(o=0;r>o;o+=1)s+=" ";else"string"==typeof r&&(s=r);if(u=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return n("",{"":e});throw new Error("JSON.stringify")})}()}();var o="",u="",a=!1,f=[];"undefined"==typeof Lizard&&(Lizard={}),Lizard.version="2.0",Lizard.isInCtripApp=e()&&"file:"!=window.location.protocol;var l=window.location.search;if(Lizard.isInCtripApp||!l||-1==l.indexOf("from_native_type=3")&&-1==l.indexOf("from_native_type%3D3")){if(window.localStorage){var c=window.localStorage.getItem("isInWinOS");c&&(Lizard.isInCtripApp=!0)}}else Lizard.isInCtripApp=!0,window.localStorage&&window.localStorage.setItem("isInWinOS","1");if(Lizard.isHybrid=!!(window.Internal&&window.Internal.isInApp||window.LizardLocalroute||Lizard.isInCtripApp),Lizard.getAbsPath=function(e,t){if(e=decodeURIComponent(e),t){if("/"==e.charAt(0)){var n="http://m.ctrip.com";e=n+e}}else if("/"==e.charAt(0)){var n=window.location.href.replace(/\/index\.html.*/,"");e=n+e}var r=document.createElement("script");r.src=e;var e=r.src;return r=null,e},Lizard.hrefresh=function(){CtripUtil.app_open_url(window.location.href.replace(/#.*/g,""),0)},Lizard.toUBTURL=function(e,t){var n;return n=t?e:e.replace(/.*\/[^\/]*?webapp[^\/]*\//,"http://hybridm.ctrip.com/webapp/")},Lizard.isHybrid&&(Lizard.localRoute={config:{},addConfig:function(e){for(var t in e)e.hasOwnProperty(t)&&(Lizard.localRoute.config[t]=e[t])},mapUrl:function(e){var t="",n=0;for(var r in Lizard.localRoute.config)if(Lizard.localRoute.config.hasOwnProperty(r)){var i=Lizard.schema2re(r,e);i.reStr&&i.param&&i.reStr.length>n&&(n=i.reStr.length,t=Lizard.localRoute.config[r])}return t}},window.LizardLocalroute)){Lizard.localRoute.addConfig(window.LizardLocalroute);var h=document.getElementById("LizardLocalroute");h&&(Lizard.weinre=h.getAttribute("LizardWeinre"),Lizard.ip=h.getAttribute("LizardIP"),Lizard.chanal=h.getAttribute("LizardChanal"))}Lizard.ready=function(e){a?e&&e.call(window):f.push(e)};var p={};Lizard.config=function(e,t){var r=typeof e;switch(r){case"string":return n(e,t);case"object":for(var i in e)e.hasOwnProperty(i)&&n(i,e[i]);break;default:return p}};var d=r();if(!d)throw"没有引入lizard.seed.js文件";Lizard.dir=d,u&&Lizard.config(u);var v=(Lizard.dir+"parser.js",Lizard.dir+"3rdlibs/require.min.js"),m=[],g="undefined"!=typeof require;m=g?[]:[v],s(m,function(){function e(){window.requirejs&&define("R",function(){}),window.JSON&&define("json2",function(){}),window.__bridge_callback&&define("bridge",function(){}),window.Zepto&&define("$",function(){}),window._&&define("_",function(){}),window.Backbone&&define("B",function(){}),window.$&&window.$.bindFastClick&&define("F",function(){})}function n(){var e=["lizard","cWidgetFactory","cWidgetGuider","cWidgetMember"];require(e,function(){function e(){function e(){var e=_.extend({},p),t=new n(e);Lizard.instance=t;var i=t.interface();for(var s in i)Lizard[s]=$.proxy(i[s],t);if(Lizard.isHybrid){var o=r.create("Guider");o.create()}(!Lizard.isHybrid||Lizard.isInCtripApp)&&(!function(e,t,n,r,i,s,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,s=t.createElement(n),o=t.getElementsByTagName(n)[0],s.async=1,s.src=r,o.parentNode.insertBefore(s,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-3748357-1","auto"),ga("require","displayfeatures"),ga("send","pageview")),!Lizard.isHybrid||Lizard.isInCtripApp?!function(){for(var e=document.getElementsByTagName("script")||[],t=/_bfa\.min\.js/i,n=0;n<e.length;n++)if(t.test(e[n].src))return;if(!(window.$_bf&&window.$_bf.loaded||window.$LAB||window.CtripJsLoader)){var r=new Date,i="?v="+r.getFullYear()+r.getMonth()+"_"+r.getDate()+".js",s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0;try{var o="https:"==document.location.protocol}catch(u){var o="https:"==document.URL.match(/[^:]+/)+":"}s.src=o?"https://webresource.c-ctrip.com/code/ubt/_mubt.min.js"+i:"http://webresource.c-ctrip.com/code/ubt/_mubt.min.js"+i;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)}}():!function(){var e="ubt/_mubt.min.js",t=Lizard.dir;if(t){var n=t.substr(0,t.indexOf("lizard/webresource"));e=n+e}var r=document.createElement("script");r.src=e;var i=r.src;r=null,require([i],function(){})}()}a=!0,t(),o?s(o.split(","),e):e()}var n=arguments[0],r=arguments[1];if(Lizard.isHybrid||Lizard.isInCtripApp)e();else{var i=r.create("Member");i.autoLogin({callback:e})}})}var r=["appBaseUrl","webresourceBaseUrl","restfullApi","restfullApiHttps","WebresourcePDBaseUrl"];!function(){for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++){var n=e[t].getAttribute("name"),i=e[t].getAttribute("content");e[t].getAttribute("lizardExpansion")&&(Lizard[n]=i);for(var s=0;s<r.length;s++){var o=r[s];n==o&&(Lizard[n]||(Lizard[n]=i))}}}();var i=function(){var e=Lizard.dir+"3rdlibs/zepto",t=window.navigator.userAgent.indexOf("IEMobile")>-1?!0:!1,n=(window.navigator.userAgent.indexOf("MSIE")>-1?!0:!1,0);return t&&(n=window.navigator.userAgent.match(/IEMobile\/\d+/),n.length>0&&(n=n[0].split("/"),n=n[1])),(!("__proto__"in{})||t&&10>n)&&(e=Lizard.dir+"3rdlibs/jquery"),e}();if(Lizard.weinre&&require.config({urlArgs:"v="+(new Date).getTime(),baseUrl:"http://"+Lizard.ip+":5389/"+Lizard.chanal}),require.config({shim:{$:{exports:"zepto"},_:{exports:"_"},B:{deps:["_","$"],exports:"Backbone"},F:{deps:["$"],exports:"Fastclick"},lizard:{deps:["$","_","B","F"]},cHybridShell:{deps:["$","_"]},libs:{deps:["_","$","B"],exports:"libs"},common:{deps:["libs"]},cBase:{exports:"cBase"},cAjax:{exports:"cAjax"},cPageView:{deps:["B"],exports:"cPageView"}},paths:{json2:Lizard.dir+"3rdlibs/json2",bridge:Lizard.dir+"3rdlibs/bridge",R:Lizard.dir+"3rdlibs/require",$:i,_:Lizard.dir+"3rdlibs/underscore",B:Lizard.dir+"3rdlibs/backbone",F:Lizard.dir+"3rdlibs/fastclick",lizard:Lizard.dir+"lizard",libs:Lizard.dir+"3rdlibs/libs",text:Lizard.dir+"3rdlibs/require.text",cCoreInherit:Lizard.dir+"core/c.core.inherit",rsa:Lizard.dir+"business/c.business.rsa",cBusinessCommon:Lizard.dir+"business/c.business.common",c:Lizard.dir+"common/c",cBase:Lizard.dir+"common/c.base",cSales:Lizard.dir+"common/c.sales",cLazyload:Lizard.dir+"common/c.lazyload",cListAdapter:Lizard.dir+"common/c.common.listadapter",cGeoService:Lizard.dir+"common/c.geo.service",cGeoHelper:Lizard.dir+"common/c.geo.helper",cMessageCenter:Lizard.dir+"common/c.message.center",cAjax:Lizard.dir+"common/c.ajax",cImgLazyload:Lizard.dir+"common/c.img.lazyload",cUtilityHybrid:Lizard.dir+"util/c.utility.hybrid",cUtilityHash:Lizard.dir+"util/c.utility.hash",cUtilityDate:Lizard.dir+"util/c.utility.date",cUtilityServertime:Lizard.dir+"util/c.utility.servertime",cUtilityCrypt:Lizard.dir+"util/c.utility.crypt",cUtility:Lizard.dir+"util/c.utility",cUtilityFlip:Lizard.dir+"util/c.utility.flip",Validate:Lizard.dir+"util/c.validate",cUtilityPath:Lizard.dir+"util/c.utility.path",cUtilityUtil:Lizard.dir+"util/c.utility.utils",cUtilityStateHistory:Lizard.dir+"util/c.utility.state.history",cUtilityPerformance:Lizard.dir+"util/c.utility.performance",cUtilityCacheView:Lizard.dir+"util/c.utility.cacheview",cPageParser:Lizard.dir+"page/c.page.parser",cAbstractStore:Lizard.dir+"store/c.abstract.store",cAbstractStorage:Lizard.dir+"store/c.abstract.storage",cStore:Lizard.dir+"store/c.local.store",cStorage:Lizard.dir+"store/c.local.storage",cSessionStore:Lizard.dir+"store/c.session.store",cSessionStorage:Lizard.dir+"store/c.session.storage",memStore:Lizard.dir+"store/c.memorystore",CommonStore:Lizard.dir+"store/c.common.store",PageStore:Lizard.dir+"store/c.store.package",cAbstractModel:Lizard.dir+"model/c.abstract.model",cModel:Lizard.dir+"model/c.model",cUserModel:Lizard.dir+"model/c.user.model",cMultipleDate:Lizard.dir+"model/c.multiple.data",cUI:Lizard.dir+"ui/c.ui",cUICore:Lizard.dir+"ui/c.ui.core",cHistory:Lizard.dir+"ui/c.ui.history",cUIView:Lizard.dir+"ui/c.ui.view",cDataSource:Lizard.dir+"ui/c.ui.datasource",cUIBase:Lizard.dir+"ui/c.ui.base",cUIAbstractView:Lizard.dir+"ui/c.ui.abstract.view",cUIAlert:Lizard.dir+"ui/c.ui.alert",cUIHeader:Lizard.dir+"ui/c.ui.header",cUIAnimation:Lizard.dir+"ui/c.ui.animation",cUICitylist:Lizard.dir+"ui/c.ui.citylist",cUIHeadWarning:Lizard.dir+"ui/c.ui.head.warning",cUIInputClear:Lizard.dir+"ui/c.ui.input.clear",cUILayer:Lizard.dir+"ui/c.ui.layer",cUILoading:Lizard.dir+"ui/c.ui.loading",cUILoadingLayer:Lizard.dir+"ui/c.ui.loading.layer",cUIMask:Lizard.dir+"ui/c.ui.mask",cUIPageview:Lizard.dir+"ui/c.ui.page.view",cUIScrollRadio:Lizard.dir+"ui/c.ui.scroll.radio",cUIScrollRadioList:Lizard.dir+"ui/c.ui.scroll.radio.list",cUIScrollList:Lizard.dir+"ui/c.ui.scrolllist",cUIToast:Lizard.dir+"ui/c.ui.toast",cUIWarning:Lizard.dir+"ui/c.ui.warning",cUIWarning404:Lizard.dir+"ui/c.ui.warning404",cUIHashObserve:Lizard.dir+"ui/c.ui.hash.observe",cUIEventListener:Lizard.dir+"ui/c.ui.event.listener",cUISwitch:Lizard.dir+"ui/c.ui.switch",cUIScroll:Lizard.dir+"ui/c.ui.scroll",cUINum:Lizard.dir+"ui/c.ui.num",cUIGroupList:Lizard.dir+"ui/c.ui.group.list",cUIBusinessGroupList:Lizard.dir+"ui/c.ui.business.group.list",cUITab:Lizard.dir+"ui/c.ui.tab",cUIImageSlider:Lizard.dir+"ui/c.ui.imageSlider",cUIBubbleLayer:Lizard.dir+"ui/c.ui.bubble.layer",cUILayerList:Lizard.dir+"ui/c.ui.layer.list",cUIIdentitycard:Lizard.dir+"ui/c.ui.identitycard",cUISidebar:Lizard.dir+"ui/c.ui.sidebar",cWidgetFactory:Lizard.dir+"widget/c.widget.factory",cWidgetHeaderView:Lizard.dir+"widget/c.widget.headerview",cWidgetListView:Lizard.dir+"widget/c.widget.listview",cWidgetTipslayer:Lizard.dir+"widget/c.widget.tipslayer",cWidgetInputValidator:Lizard.dir+"widget/c.widget.inputValidator",cWidgetPublisher:Lizard.dir+"widget/c.widget.publisher",cWidgetGeolocation:Lizard.dir+"widget/c.widget.geolocation",cWidgetAbstractCalendar:Lizard.dir+"widget/c.widget.abstract.calendar",cWidgetCalendar:Lizard.dir+"widget/c.widget.calendar",cWidgetCalendarPrice:Lizard.dir+"widget/c.widget.calendar.price",cWidgetSlide:Lizard.dir+"widget/c.widget.slide",cWidgetMember:Lizard.dir+"widget/c.widget.member",cWidgetGuider:Lizard.dir+"widget/c.widget.guider",cWidgetCaptcha:Lizard.dir+"widget/c.widget.captcha",cCalendar:Lizard.dir+"widget/c.calendar",cHolidayCalendar:Lizard.dir+"widget/c.holiday.calendar",cHolidayPriceCalendar:Lizard.dir+"widget/c.holiday.price.calendar",cBasePageView:Lizard.dir+"page/c.page.base",cCommonPageFactory:Lizard.dir+"page/c.page.factory",cCommonListPage:Lizard.dir+"page/c.page.common.list",cPageView:Lizard.dir+"page/c.page.view",cBI:Lizard.dir+"business/c.bi",cHybridFacade:Lizard.dir+"hybrid/c.hybrid.facade",cHybridShell:Lizard.dir+"hybrid/c.hybrid.shell"}}),e(),Lizard.isHybrid||Lizard.isInCtripApp){if(window.appInstance=!1,window.localStorage.setItem("ISINAPP","1"),window.app={},p.isBeforeViewFinishedLoadInitApp&&n(),window.app.callback=function(e){var t={web_view_finished_load:function(){if(!Lizard.web_view_finished_load){if(Lizard.web_view_finished_load=1,window.localStorage){var t=e.param;t&&window.localStorage.setItem("APPINFO",JSON.stringify(t)),0,0}!p.isBeforeViewFinishedLoadInitApp&&p.isViewFinishedLoadInitApp&&n(),CtripUtil.app_init_member_H5_info()}},init_member_H5_info:function(e){require(["libs","CommonStore"],function(t,r){window.appInstance=!0;var i=window.localStorage;if(i&&e){0,0;var s=r.HeadStore.getInstance(),o=r.UserStore.getInstance(),u=r.UnionStore.getInstance(),a=s.get();if(e.userInfo)try{o.getUser(),e.userInfo.data.BMobile=e.userInfo.data.BindMobile,o.setUser(e.userInfo.data),a.auth=e.userInfo.data.Auth}catch(f){alert("set data error")}else o.removeUser();if(e.device){var l={device:e.device};i.setItem("DEVICEINFO",JSON.stringify(l))}if(e.appId){var c={version:e.version,appId:e.appId,serverVersion:e.serverVersion,platform:e.platform};i.setItem("APPINFO",JSON.stringify(c))}if(e.timestamp){var h=new Date,d={server:e.timestamp,local:h.getTime()};i.setItem("SERVERDATE",JSON.stringify(d))}if(e.sourceId&&(a.sid=e.sourceId,i.setItem("SOURCEID",e.sourceId)),i.removeItem("isPreProduction"),e.isPreProduction&&i.setItem("isPreProduction",e.isPreProduction),e.clientID&&(a.cid=e.clientID,i.setItem("GUID",e.clientID)),e.extSouceID&&(a.xsid=e.extSouceID),e.platform&&(a.syscode="1"==e.platform?12:32),e.version&&(a.cver=e.internalVersion||e.version),e.allianceId&&e.sId){var v={AllianceID:e.allianceId,SID:e.sId,OUID:e.ouId?e.ouId:""};u.set(v)}s.set(a)}p.isBeforeViewFinishedLoadInitApp||p.isViewFinishedLoadInitApp||n(),i.setItem("CINFO",JSON.stringify(e))}),Lizard.networkType=e.networkStatus},app_h5_need_refresh:function(){n()}};e&&"function"==typeof t[e.tagname]&&t[e.tagname](e.param),p.isBeforeViewFinishedLoadInitApp?Lizard.facadeMethods={web_view_finished_load:t.web_view_finished_load,init_member_H5_info:t.init_member_H5_info}:p.isViewFinishedLoadInitApp&&(Lizard.facadeMethods={init_member_H5_info:t.init_member_H5_info})},!(Internal.isIOS||Internal.isAndroid||Internal.isWinOS)){var u=function(){return"Win32"==window.navigator.platform}(),f=window.navigator.userAgent.indexOf("IEMobile")>-1?!0:!1;if(f&&(u=!1),!u)return;var l={tagname:"web_view_finished_load",param:{platform:"2",osVersion:"Android_18",extSouceID:"",version:"5.5"}};Internal.isAndroid="2"==l.param.platform,Internal.isInApp=!0,Internal.appVersion=l.param.version,Internal.osVersion=l.param.osVersion,window.localStorage&&(window.localStorage.clear(),l&&window.localStorage.setItem("APPINFO",JSON.stringify(l)),window.localStorage.setItem("ISINAPP","1")),window.Util_a={},window.Util_a.h5Log=function(e){0},window.Util_a.openUrl=function(e){0},window.Locate_a={},window.Locate_a.locate=function(){},window.NavBar_a={},window.NavBar_a.setNavBarHidden=function(){},window.User_a={},window.User_a.initMemberH5Info=function(){},window.Util_a.checkNetworkStatus=function(){},window.Business_a={},window.Business_a.logGoogleRemarking=function(){},window.Business_a.sendUBTLog=function(){},window.app.callback({tagname:"web_view_finished_load"}),window.app.callback({tagname:"init_member_H5_info",param:{appId:"ctrip.android.view",clientID:"32043596200000129090",device:"samsung_GT-N7102",extSouceID:"",isPreProduction:"0",osVersion:"Android_18",platform:"2",serverVersion:"5.7",sourceId:"8892",timestamp:"1402930469100",userInfo:{data:{Auth:"",BMobile:"",BindMobile:"",IsNonUser:!0,UserID:""},timeby:1,timeout:"2015/06/16"},version:"5.5"}})}}else n()});var y=!1;window.onpageshow=function(){y&&window.location.reload(),y=!0}}.call(this),define("lizard.seed",function(){})