define(["res/libs/inherit","res/libs/EventEmitter"],function(a,b){var c={DISABLE:"num_invalid"},d=function(a){return parseInt(a,10)},e=a({name:"NumberPicker",proto:{__constructor:function(a){_.extend(this,{step:1},a);var b=this.node;this.btnDecreaser=b.find(".list_num_dec"),this.btnIncreaser=b.find(".list_num_inc"),this.nodeNumber=b.find(".list_num"),this._init()},_init:function(){this.nodeNumber.text(this.defaultNum);this.getValue();this.check(),_.bindAll(this,"onBtnDecreaserClick","onBtnIncreaserClick"),this.btnDecreaser.on("click",this.onBtnDecreaserClick),this.btnIncreaser.on("click",this.onBtnIncreaserClick)},getValue:function(){return this.value=d(this.nodeNumber.text())},setValue:function(a){if(a>=this.min&&a<=this.max&&this.value!=a&&this.check(a)){var b=this.value;this.value=a,this.nodeNumber.text(a),this.emit("change",a,b)}return this},check:function(a){if(a=_.isUndefined(a)?this.value:a,result=!0,this[a>=this.max||this.max-a<this.step?"disable":"enable"](!0),this[a<=this.min||a-this.min<this.step?"disable":"enable"](!1),this.max<this.min)this.emit("range",this.max,this.min),this.setMax(this.min),result=!1;else if(a>this.max)this.emit("max",a),this.setValue(this.max),result=!1;else if(a<this.min)this.emit("min",a),this.setValue(this.min),result=!1;else{var b=a-this.min,c=b%this.step;0!==c&&(this.emit("step",a),this.setValue(a-c),result=!1)}return result},disable:function(a){a?(this.isIncreaserDisabled=!0,this.btnIncreaser.addClass(c.DISABLE)):(this.isDecreaserDisabled=!0,this.btnDecreaser.addClass(c.DISABLE))},enable:function(a){a?(this.isIncreaserDisabled=!1,this.btnIncreaser.removeClass(c.DISABLE)):(this.isDecreaserDisabled=!1,this.btnDecreaser.removeClass(c.DISABLE))},setMin:function(a){return this.min=a,this.check(),this},setMax:function(a){return this.max=a,this.check(),this},onBtnDecreaserClick:function(){this.isDecreaserDisabled||this.setValue(this.getValue()-this.step)},onBtnIncreaserClick:function(){this.isIncreaserDisabled||this.setValue(this.getValue()+this.step)}}});return b.mixTo(e),e});