define(["res/libs/inherit"],function(a){var b=function(a,b){return a>>b&1},c="甲乙丙丁戊己庚辛壬癸",d="子丑寅卯辰巳午未申酉戌亥",e="鼠牛虎兔龙蛇马羊猴鸡狗猪",f="正二三四五六七八九十冬腊",g="一二三四五六七八九十",h=[268949,3402,3493,133973,1386,464219,605,2349,334123,2709,2890,267946,2773,592565,1210,2651,395863,1323,2707,265877],i=[0,31,59,90,120,151,181,212,243,273,304,334],j=a({name:"DateChinese",proto:{__constructor:function(a){this.dDate=a,this.year=null,this.month=null,this.date=null,this.hour=null,this.aYear="",this.lYear="",this.lMonth="",this.lDay="",this.lHour="",this.e2c().convert()},e2c:function(){var a,c,d,e,f=!1,g=this.dDate.getFullYear();for(1900>g&&(g+=1900),a=365*(g-2001)+Math.floor((g-2001)/4)+i[this.dDate.getMonth()]+this.dDate.getDate()-23,this.dDate.getFullYear()%4==0&&this.dDate.getMonth()>1&&a++,c=0;;c++){for(e=h[c]<4095?11:12,d=e;d>=0;d--){if(a<=29+b(h[c],d)){f=!0;break}a=a-29-b(h[c],d)}if(f)break}return this.year=this.dDate.getFullYear(),this.year>=2001&&(this.year=2001+c),this.month=e-d+1,this.date=a,12==e&&(this.month==Math.floor(h[c]/65536)+1&&(this.month=1-this.month),this.month>Math.floor(h[c]/65536)+1&&this.month--),this.hour=Math.floor((this.dDate.getHours()+3)/2),this},convert:function(){return this.aYear=e.charAt((this.year-4)%12),this.lYear=c.charAt((this.year-4)%10)+d.charAt((this.year-4)%12),this.lMonth=this.month<1?"闰"+f.charAt(-this.month-1):f.charAt(this.month-1),this.lDay=this.date<11?"初":this.date<20?"十":this.date<30?"廿":"卅",(this.date%10!=0||10==this.date)&&(this.lDay+=g.charAt((this.date-1)%10)),"廿"==this.lDay?this.lDay="二十":"卅"==this.lDay&&(this.lDay="三十"),this.lHour=d.charAt((this.hour-1)%12),this}}});return j});