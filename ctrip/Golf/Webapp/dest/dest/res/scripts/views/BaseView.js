define(["cBasePageView","res/scripts/util","GolfStore"],function(a,b,c){var d,e=Array.prototype.slice,f=Object.prototype.toString,g=b.CONST,h={TYPE_OBJECT:"[object Object]",TYPE_ARRAY:"[object Array]"},i={back_forward:null},j=function(){var a=[c.OrderParamStore,c.OrderDataSaveStore];return{"order.detail":a}}(),k=a.extend({delegateEvents:function(){var b=this.events,c=this.constructor.__super__.events;return c&&b!==c&&(b=_.isFunction(b)?b.call(this):b,c=_.isFunction(c)?c.call(this):c,this.events=_.extend({},c,b)),a.__super__.delegateEvents.apply(this,arguments)},__onLoad:function(c){window.vaStorage=this.vaStorage;var d,f=a.__super__.__onLoad.apply(this,arguments),g=e.call(arguments);i.back_forward&&i.back_forward.viewname==c&&(d=i.back_forward.data);var d=_.extend(d||{},b.paramParse()),h=this.vaStorage.get();return d=_.extend({},h,d),d[this.vaStorage.not_store_key]=h,g.unshift(d),this.vaOnLoad&&(delete i.back_forward,this.vaOnLoad.apply(this,g)),this.clearStore(),f},vaStorage:b.getStorage("VACATION_TOURE_VIEW"),vaBack:function(a){var b=arguments;return f.call(a)==h.TYPE_OBJECT&&(b=e.call(arguments,1),i.back_forward={viewname:this.viewname,data:a}),this.back.apply(this,b)},vaForward:function(a){var b=arguments;if(f.call(a)==h.TYPE_OBJECT&&(b=e.call(arguments,1),i.back_forward={viewname:this.viewname,data:a}),!b[0])throw TypeError("[vaForward] no URL was provided.");return this.forward.apply(this,b)},vaJump:function(a){var b=arguments;if(f.call(a)==h.TYPE_OBJECT&&(b=e.call(arguments,1),i.back_forward={viewname:this.viewname,data:a}),!b[0])throw TypeError("[vaJump] no URL was provided.");return this.jump.apply(this,b)},vaShowLoading:function(a){d=setTimeout($.proxy(function(){this.showLoading()},this),a||300)},vaHideLoading:function(){d&&clearTimeout(d),this.hideLoading()},_storageInStep:[{name:g.STORE_DETAIL,contain:[]},{name:g.STORE_BOOKING_STEP1,contain:[g.STORE_BOOKING_CALENDAR,g.STORE_BOOKING_STEP1]},{name:g.STORE_BOOKING_STEP2,contain:[g.STORE_BOOKING_STEP2,g.STORE_BOOKING_CHOOSED_RESOURCE,g.STORE_BOOKING_HOTEL,g.STORE_BOOKING_SINGLE,g.STORE_BOOKING_OPTIONAL,g.STORE_BOOKING_TMP_ORDER]},{name:g.STORE_BOOKING_STEP3,contain:[]}],util:b,clearStore:function(){var a,b=location.hash.slice(1);if(a=j[b])if(f.call(a)===h.TYPE_ARRAY)for(var c=0,d=a.length;d>c;c++)a[c].getInstance().remove();else a.getInstance().remove()}});return k});