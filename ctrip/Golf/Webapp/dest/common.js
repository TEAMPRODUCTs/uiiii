define("AbstractAPP",["libs","cBase","cUIAnimation"],function(a,b,c){var d=new b.Class({__propertys__:function(){this.webroot="/#hotelsearch",this.viewRootPath="app/views/",this.defaultView="index",this.request,this.viewpath,this.mainframe,this.viewport,this.statedom,this.views=new b.Hash,this.curView,this.lastView,this.inteface={loadView:_.bind(this.loadView,this),forward:_.bind(this.forward,this),back:_.bind(this.back,this)},this.isCreate=!1,this.history=[],this.stopListening=!1,this.timeoutres,this.lastHash="",this.lashFullHash="",this.isChangeHash=!1,this.animations=c,this.isAnimat=!0,this.animatSwitch=!1,b.isInApp()&&(this.animatSwitch=!0),this.animForwardName="slideleft",this.animBackwardName="slideright",this.animNoName="noAnimate",this.animatName=this.animNoName,this.path=[],this.query={},this.viewMapping={}},initialize:function(a){this.setOption(a),this.buildEvent()},setOption:function(a){a=a||{};for(var b in a)this[b]=a[b]},buildEvent:function(){requirejs.onError=function(a){if(a&&a.requireModules)for(var b=0;b<a.requireModules.length;b++)break},$(window).bind("hashchange",_.bind(this.onHashChange,this)),this.onHashChange(),this.pushHistory()},onHashChange:function(){if(!this.stopListening){var a=decodeURIComponent(location.href).replace(/^[^#]+(#(.+))?/g,"$2").toLowerCase();this._onHashChange(a)}},_onHashChange:function(a,b){a=a.replace(/^#+/i,"");var c=this.parseHash(a);this.localObserver(c,b)},parseHash:function(a){function b(a){for(var b,c,d,a=a.split("://"),e=/([^&=?]+)=([^&]+)/g,f={};b=e.exec(a[0]);)name=b[1],c=b[2],f[name]=c;if(a[1]){var g=0;d=_.size(f),_.each(f,function(b,c){++g==d&&(f[c]+="://"+a[1])})}return f}var c=a,a=a.replace(/([^\|]*)(?:\|.*)?$/gim,"$1"),d=/^([^?&|]*)(.*)?$/i.exec(a),e=d[1]?d[1].split("!"):[],f=(e.shift()||"").replace(/(^\/+|\/+$)/i,""),g=e.length?e.join("!").replace(/(^\/+|\/+$)/i,"").split("/"):this.path;return this.isChangeHash=!this.lastHash&&c===this.lashFullHash||!!this.lastHash&&this.lastHash!==a,-1!=location.hash.indexOf("cui-")&&(this.isChangeHash=!1),this.lastHash=a,this.lashFullHash=c,{viewpath:f,path:g,query:b(c),root:location.pathname+location.search,fullhash:c}},localObserver:function(a,b){this.animatName=b?this.animForwardName:this.animBackwardName,this.request=a,this.viewpath=this.request.viewpath||this.defaultView,this.request.viewpath=this.viewpath,this.switchView(this.viewpath)},switchView:function(a){var b=a,c=this.views.getItem(b),d=this.curView;if(d&&d!=c&&(this.lastView=d),c){if(c==this.curView&&0==this.isChangeHash)return;c.request=this.request,this.curView=c;var e=(d||c).viewname;this.curView.__load(e)}else this.loadView(a,function(a){c=new a(this.request,this.inteface,b),this.views.push(b,c),c.turning=_.bind(function(){this.createViewPort(),c.viewport=this.viewport,this.startAnimation(function(a,b){this.views.each(function(c){return a===c||b===c?!1:void c.$el.hide()}),a.$el.show()})},this),this.curView=c;var e=(d||c).viewname;this.curView.__load(e)})},startAnimation:function(a){var b=this.curView,c=this.lastView;c&&(c.scrollPos={x:window.scrollX,y:window.scrollY}),this.animatSwitch||(this.isAnimat=!1),this.isAnimat||(this.animatName=this.animNoName),this.timeoutres=this.animations[this.animatName]&&this.animations[this.animatName].call(this,b,c,a,this),this.isAnimat=!0},loadView:function(a,b){var c=this;requirejs([this.buildUrl(a)],function(a){b&&b.call(c,a)})},buildUrl:function(a){var b=this.viewMapping[a];return b?b:this.viewRootPath+a},createViewPort:function(){if(!this.isCreate){var a=['<div class="main-frame">','<div class="main-viewport"></div>','<div class="main-state"></div>',"</div>"].join("");this.mainframe=$(a),this.viewport=this.mainframe.find(".main-viewport"),this.statedom=this.mainframe.find(".main-state");var b=$("#main");b.empty(),b.append(this.mainframe),this.isCreate=!0}},lastUrl:function(){return this.history.length<2?document.referrer:this.history[this.history.length-2]},startObserver:function(){this.stopListening=!1},endObserver:function(){this.stopListening=!0},forward:function(a,b,c){a=a.toLowerCase(),c&&(this.isAnimat=!1),this.endObserver(),b?window.location.replace(("#"+a).replace(/^#+/,"#")):window.location.href=("#"+a).replace(/^#+/,"#"),this.pushHistory(),this._onHashChange(a,!0),setTimeout(_.bind(this.startObserver,this),1)},back:function(a,b){b&&(this.isAnimat=!1);var c=this.lastUrl();c&&this.history.pop(),!a||c&&0===c.indexOf(a)?(a=this.request.query.refer,a?window.location.href=a:history.back()):window.location.hash=a},pushHistory:function(){var a=window.location.href;this.history.push(a)}});return d}),define("App",["libs","cBase","AbstractAPP","cWidgetFactory","cWidgetGuider","cStorage"],function(a,b,c,d){!function(){function a(a,b,c,d,e){var f=Math.abs(a-b),g=Math.abs(c-d),h=f>=g?a-b>0?"left":"right":c-d>0?"up":"down";return e&&("left"==h||"right"==h?g/f>e&&(h=""):("up"==h||"down"==h)&&f/g>e&&(h="")),h}function b(b,c,i,j,k){b&&b.on(f,function(a){var b=a.touches&&a.touches[0]||a;e.x1=b.pageX,e.y1=b.pageY}).on(g,function(a){var b=a.touches&&a.touches[0]||a;e.x2=b.pageX,e.y2=b.pageY,j||a.preventDefault()}).on(h,function(){if(e.x2&&Math.abs(e.x1-e.x2)>d||e.y2&&Math.abs(e.y1-e.y2)>d){var b=a(e.x1,e.x2,e.y1,e.y2,k);c===b&&"function"==typeof i&&i()}else"tap"===c&&"function"==typeof i&&i()})}function c(a){a&&a.off(f).off(g).off(h)}var d=20,e={},f="touchstart",g="touchmove",h="touchend";"ontouchstart"in window||(f="mousedown",g="mousemove",h="mouseup"),$.flip=b,$.flipDestroy=c}();var e=new b.Class(c,{__propertys__:function(){},cleanCache:function(){var a=["FLIGHT_SEARCH","FLIGHT_SEARCH_SUBJOIN","FLTINTL_SEARCH","FLIGHT_LIST","FLIGHT_INTER_CITY_LIST","FLIGHT_CITY_LIST","zqInCityInfo","zqInCityDateStore","LastInCitySelectDateTime","LastzqInAirportSelectDateTime","zqInAirportInfo","zqInAirportDateStore","zqInAirportDateAndAddressStore","zqInCityDateAndAddressStore","zqInCitySelectStore","zqInAirportSelectStore","FLIGHT_DETAILS","FLIGHT_DETAILS_PARAM","FLIGHT_ORDERINFO","USER_FLIGHT_ORDERLIST","USER_FLIGHT_ORDERDETAIL","USER_FLIGHT_ORDERPARAM","FLIGHT_RETURNPAGE","FLIGHT_SELECTED_INFO","FLIGHT_PICK_TICKET_SELECT","FLIGHT_AIRLINE","FLIGHT_AIRCTRAFT","FLIGHT_ENUM_TAKETIME","FLIGHT_ENUM_CABINS","FLIGHT_LIST_FILTER","FLIGHT_PICK_TICKET","FLIGHT_PICK_TICKET_PARAM","FLIGHT_AD_TIMEOUT","P_FLIGHT_TicketList","U_FLIGHT_ORDERLIST","U_FLIGHT_ORDERDETAIL"],b={flight:a},c=b[this.channel];if(Array.isArray(c))for(var d in c)window.localStorage.removeItem(d)},initialize:function($super,a){$super(a);var b=d.create("Guider");b.create(),$.bindFastClick&&$.bindFastClick(),this.cleanCache()}});return e}),define("cUIAnimation",[],function(){return{slideleft:function(a,b,c,d){$("body").addClass("hiddenx"),a.addClass("animatestart"),a.addClass("sliderightin"),a.__show();return setTimeout(function(){$("body").removeClass("hiddenx"),a.removeClass("animatestart"),a.removeClass("sliderightin"),b&&b.__hide(a.viewname),c&&c.call(d,a,b)},340)},slideright:function(a,b,c,d){$("body").addClass("hiddenx"),b&&(b.addClass("animatestart"),b.addClass("sliderightout")),a.__show();return setTimeout(function(){$("body").removeClass("hiddenx"),b&&(b.removeClass("animatestart"),b.removeClass("sliderightout"),b.__hide(a.viewname)),c&&c.call(d,a,b)},340)},noAnimate:function(a,b,c,d){b&&b.__hide(a.viewname),a.__show(),c&&c.call(d,a,b)}}}),define("cStorage",["cBase","cAbstractStorage"],function(a,b){var c=new a.Class(b,{__propertys__:function(){},initialize:function($super,a){this.proxy=window.localStorage,$super(a)},oldGet:function(b){var c=localStorage.getItem(b),d=c?JSON.parse(c):null;if(d&&d.timeout){var e=new Date,f=a.Date.parse(d.timeout).valueOf();if(d.timeby){if(f-e>=0)return d}else if(f-a.Date.parse(a.Date.format(e,"Y-m-d")).valueOf()>=0)return d;return localStorage.removeItem(b),null}return d},oldSet:function(a,b){localStorage.setItem(a,b)},getExpireTime:function(b){var c=localStorage.getItem(b),d=c?JSON.parse(c):null;return d&&d.timeout?d.timeout:new a.Date(a.getServerDate()).addDay(2).format("Y-m-d")},oldRemove:function(a){localStorage.removeItem(a)}});return c.getInstance=function(){return this.instance?this.instance:this.instance=new this},c.localStorage=c.getInstance(),c}),define("cAbstractStore",["cBase","cStorage","cUtility"],function(a,b,c){CDate=a.Date,HObject=c.Object;var d=new a.Class({__propertys__:function(){this.NULL={},this.key=this.NULL,this.lifeTime="30M",this.useServerTime=!1,this.defaultData=null,this.rollbackEnabled=!1,this.sProxy=this.NULL},initialize:function(a){for(var b in a)this[b]=a[b];this.assert()},assert:function(){if(this.key===this.NULL)throw"not override key property"},set:function(a,b,c){var d=this._getNowTime();d.addSeconds(this._getLifeTime()),this.rollbackEnabled&&!c&&(c=a),this.sProxy.set(this.key,a,d,b,null,c)},setLifeTime:function(a,b){this.lifeTime=a;var c,d=this.getTag(),e=this.get();c=b?this._getNowTime():this.sProxy.getSaveDate(this.key,!0)||this._getNowTime();var f=new CDate(c.valueOf()).format("Y/m/d H:i:s");c.addSeconds(this._getLifeTime()),this.sProxy.set(this.key,e,c,d,f)},setAttr:function(a,b,c){if(!_.isObject(a)){c=c||this.getTag();var d=this.get(c)||{},e={};if(d){if(this.rollbackEnabled){e=this.get(c,!0);var f=HObject.get(d,a);HObject.set(e,a,f)}return HObject.set(d,a,b),this.set(d,c,e)}return!1}for(var g in a)a.hasOwnProperty(g)&&this.setAttr(g,a[g],b)},get:function(b,c){var d=null,e=!0;"[object Array]"===Object.prototype.toString.call(this.defaultData)?d=this.defaultData.slice(0):this.defaultData&&(d=_.clone(this.defaultData));var f=this.sProxy.get(this.key,b,c),g=typeof f;if({string:!0,number:!0,"boolean":!0}[g])return f;if(f)if("[object Array]"==Object.prototype.toString.call(f)){d=[];for(var h=0,i=f.length;i>h;h++)d[h]=f[h]}else f&&!d&&(d={}),a.extend(d,f);for(var j in d){e=!1;break}return e?null:d},getAttr:function(a,b){var c=this.get(b),d=null;return c&&(d=HObject.get(c,a)),d},getTag:function(){return this.sProxy.getTag(this.key)},remove:function(){this.sProxy.remove(this.key)},removeAttr:function(a){var b=this.get()||{};b[a]&&delete b[a],this.set(b)},getExpireTime:function(){var a=null;try{a=this.sProxy.getExpireTime(this.key)}catch(b){}return a},setExpireTime:function(a){var b=this.get(),c=new CDate(a);this.sProxy.set(this.key,b,c)},_getNowTime:function(){return this.useServerTime?new CDate(a.getServerDate()):new CDate},_getLifeTime:function(){var a=0,b=this.lifeTime+"",c=b.charAt(b.length-1),d=+b.substring(0,b.length-1);return c="number"==typeof c?"M":c.toUpperCase(),a="D"==c?24*d*60*60:"H"==c?60*d*60:"M"==c?60*d:"S"==c?d:60*d},rollback:function(a){if(this.rollbackEnabled){var b=this.getTag(),c=this.sProxy.get(this.key,b),d=this.sProxy.get(this.key,b,!0);if(a&&a instanceof Array)for(var e in a){var f=a[e],g=d[f];"undefined"!=typeof g&&(c[f]=g)}else c=d,d={};this.set(c,b,d)}}});return d.getInstance=function(){return this.instance?this.instance:this.instance=new this},d}),define("cWidgetGuider",["cUtilityHybrid","cWidgetFactory","cHybridFacade"],function(a,b,c){var d="Guider",e={jump:function(a){var b={refresh:function(){c.request({name:c.METHOD_OPEN_URL,targetMode:0,title:a.title,pageName:a.pageName})},app:function(){if(a&&a.module){var b=c.getOpenUrl(a);c.request({name:c.METHOD_OPEN_URL,openUrl:b,targetMode:1,title:a.title,pageName:a.pageName})}else a&&a.url&&c.request({name:c.METHOD_OPEN_URL,openUrl:a.url,targetMode:1,title:a.title,pageName:a.pageName})},h5:function(){a&&a.url&&c.request({name:c.METHOD_OPEN_URL,openUrl:a.url,targetMode:2,title:a.title,pageName:a.pageName})},browser:function(){a&&a.url&&c.request({name:c.METHOD_OPEN_URL,openUrl:a.url,targetMode:3,title:a.title,pageName:a.pageName})},open:function(){a&&a.url&&c.request({name:c.METHOD_OPEN_URL,openUrl:a.url,targetMode:4,title:a.title,pageName:a.pageName})}};"function"==typeof b[a.targetModel]&&b[a.targetModel]()},apply:function(a){_.isObject(a)&&_.isFunction(a.hybridCallback)&&a.hybridCallback()},call:function(){return!1},init:function(a){c.request(a&&window.parseFloat(a.version)<5.2?{name:c.METHOD_ENTRY,callback:a.callback}:{name:c.METHOD_INIT,callback:a.callback})},log:function(a){c.request({name:c.METHOD_LOG_EVENT,event_name:a.name})},print:function(a){c.request({name:c.METHOD_NATIVE_LOG,log:a.log,result:a.result})},callService:function(){c.request({name:c.METHOD_CALL_SERVICE_CENTER})},backToLastPage:function(a){var b=a?a.param:"";c.request({name:c.METHOD_BACK_TO_LAST_PAGE,param:b})},checkUpdate:function(){c.request({name:c.METHOD_CHECK_UPDATE})},recommend:function(){c.request({name:c.METHOD_RECOMMEND_APP_TO_FRIEND})},addWeixinFriend:function(){c.request({name:c.METHOD_ADD_WEIXIN_FRIEND})},showNewestIntroduction:function(){c.request({name:c.METHOD_SHOW_NEWEST_INTRODUCTION})},register:function(a){a&&a.tagname&&a.callback&&c.register({tagname:a.tagname,callback:a.callback})},create:function(){c.init()},home:function(){c.request({name:c.METHOD_BACK_TO_HOME})},jumpHotel:function(a){c.request({name:c.METHOD_GO_TO_HOTEL_DETAIL,hotelId:a.hotelId,hotelName:a.name,cityId:a.cityId,isOverSea:a.isOverSea})},injectUbt:function(){return!1},checkAppInstall:function(a){c.request({name:c.METHOD_CHECK_APP_INSTALL,url:a.url,"package":a.package,callback:a.callback})},callPhone:function(a){c.request({name:c.METHOD_CALL_PHONE,tel:a.tel})},cross:function(a){c.request({name:c.METHOD_CROSS_JUMP,param:a.param,path:a.path})},refreshNative:function(a){c.request({name:c.METHOD_REFRESH_NATIVE,"package":a.package,json:a.json})},copyToClipboard:function(a){c.request({name:c.METHOD_COPY_TO_CLIPBOARD,content:a.content})},readFromClipboard:function(a){c.request({name:c.METHOD_READ_FROM_CLIPBOARD,callback:a.callback})},shareToVendor:function(a){c.request({name:c.METHOD_SHARE_TO_VENDOR,imgUrl:a.imgUrl,text:a.text,title:a.title,linkUrl:a.linkUrl,isIOSSystemShare:a.isIOSSystemShare})},downloadData:function(a){c.request({name:c.METHOD_DOWNLOAD_DATA,url:a.url,callback:a.callback,suffix:a.suffix})},encode:function(a){a&&"base64"===a.mode&&c.request({name:c.METHOD_ENCRYPT_BASE64,callback:a.callback,info:a.info})},choose_invoice_title:function(a){c.request({name:c.METHOD_APP_CHOOSE_INVOICE_TITLE,callback:a.callback,title:a.title})}};e.file={isFileExist:function(a){c.request({name:c.METHOD_CHECK_FILE_EXIST,callback:a.callback,fileName:a.fileName,relativeFilePath:a.relativeFilePath})},deleteFile:function(a){c.request({name:c.METHOD_DELETE_FILE,callback:a.callback,fileName:a.fileName,relativeFilePath:a.relativeFilePath})},getCurrentSandboxName:function(a){c.request({name:c.METHOD_GET_CURRENT_SANDBOX_NAME,callback:a.callback})},getFileSize:function(a){c.request({name:c.METHOD_GET_FILE_SIZE,callback:a.callback,fileName:a.fileName,relativeFilePath:a.relativeFilePath})},makeDir:function(a){c.request({name:c.METHOD_MAKE_DIR,callback:a.callback,dirname:a.dirname,relativeFilePath:a.relativeFilePath})},readTextFromFile:function(a){c.request({name:c.METHOD_READ_TEXT_FROM_FILE,callback:a.callback,fileName:a.fileName,relativeFilePath:a.relativeFilePath})},writeTextToFile:function(a){c.request({name:c.METHOD_WRITE_TEXT_TO_FILE,callback:a.callback,text:a.text,isAppend:a.isAppend,fileName:a.fileName,relativeFilePath:a.relativeFilePath})}},e.pipe={socketRequest:function(a){c.request({name:c.METHOD_SEND_H5_PIPE_REQUEST,callback:a.callback,serviceCode:a.serviceCode,header:a.header,data:a.data,sequenceId:Date.now()})},httpRequest:function(a){var b=Date.now();return c.request({name:c.METHOD_SEND_HTTP_PIPE_REQUEST,callback:a.callback,target:a.url,method:a.method,header:a.header,queryData:a.param,retryInfo:a.retry,sequenceId:b}),b},abortRequest:function(a){c.request({name:c.METHOD_ABORT_HTTP_PIPE_REQUEST,sequenceId:a.id})}},e.pay={checkStatus:function(a){c.request({name:c.METHOD_CHECK_PAY_APP_INSTALL_STATUS,callback:a.callback})},payOut:function(a){c.request({name:c.METHOD_OPEN_PAY_APP_BY_URL,payAppName:a.payAppName,payURL:a.payURL,successRelativeURL:a.successRelativeURL,detailRelativeURL:a.detailRelativeURL})}},e.encrypt={ctrip_encrypt:function(a){c.request({name:c.METHOD_ENCRYPT_CTRIP,callback:a.callback,inString:a.inStr,encType:1})},ctrip_decrypt:function(a){c.request({name:c.METHOD_ENCRYPT_CTRIP,callback:a.callback,inString:a.inStr,encType:2})}};var f={jump:function(a){a&&a.url&&"string"==typeof a.url&&(window.location.href=a.url)},apply:function(a){a&&a.callback&&"function"==typeof a.callback&&a.callback()},call:function(a){var b=document.getElementById("h5-hybrid-caller");return a&&a.url?void(b&&b.src==a.url?b.contentDocument.location.reload():b&&b.src!=a.url?b.src=a.url:(b=document.createElement("iframe"),b.id="h5-hybrid-caller",b.src=a.url,b.style.display="none",document.body.appendChild(b))):!1},init:function(){return!1},log:function(a){window.console&&window.console.log(a.name)},print:function(){return 0},callService:function(){window.location.href="tel:4000086666"},backToLastPage:function(){window.location.href=document.referrer},checkUpdate:function(){return!1},recommend:function(){return!1},addWeixinFriend:function(){return!1},showNewestIntroduction:function(){return!1},register:function(){return!1},create:function(){return!1},home:function(){window.location.href="/"},jumpHotel:function(){return!1},injectUbt:function(){return!1},checkAppInstall:function(){return!1},callPhone:function(){return!1},cross:function(){return!1},refreshNative:function(){return!1},copyToClipboard:function(){return!1},readFromClipboard:function(){return!1},shareToVendor:function(){return!1},downloadData:function(){return!1},encode:function(){return!1}};f.file={isFileExist:function(){return!1},deleteFile:function(){return!1},getCurrentSandboxName:function(){return!1},getFileSize:function(){return!1},makeDir:function(){return!1},readTextFromFile:function(){return!1},writeTextToFile:function(){return!1}},f.pipe={socketRequest:function(){return!1},httpRequest:function(){return!1},abortRequest:function(){return!1}},f.pay={checkStatus:function(){return!1},payOut:function(){return!1}},f.encrypt={ctrip_encrypt:function(){return!1},ctrip_decrypt:function(){return!1}},b.register({name:d,fn:a.isInApp()?e:f})});