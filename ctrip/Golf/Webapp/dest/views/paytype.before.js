define(["libs","c","VaBaseView","GolfModel","GolfStore","CommonStore","cUtilityCrypt","cUtility","cWidgetFactory","text!templates/paytype.before.html"],function(a,b,c,d,e,f,g,h,i,j){var k=i.create("Guider"),l=e.OrderParamStore.getInstance(),m=f.HeadStore.getInstance(),n=m.get(),o=c.extend({render:function(){this.$el.html(j)},onCreate:function(){this.injectHeaderView(),this.render()},events:{},onLoad:function(){this.headerview.set({title:"",back:!0,view:this,events:{returnHandler:function(){IWanUtil.app_goto_order_detail(l.getAttr("tempOrderId"))}}}),this.headerview.show(),this.updatePage(),this.turning()},updatePage:function(){this.pay()},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.hash.split("?")[1].match(b);return null!=c?unescape(c[2]):null},pay:function(){var a,c,d,e,f,i=b.utility.isInApp(),j=this.util.getEnvCode(h);a=location.protocol+"//"+location.host;var m=this.getQueryString("param");m=JSON.parse(decodeURIComponent(m));var o=m.orderNo,p=l.getAttr("tempOrderId");if(o===p)return void(i&&k.backToLastPage({}));l.setAttr("tempOrderId",o),i?(d="golf/#golf.order.sback?ordID="+o,e="golf/#golf.order.sback?ordID="+o):(d=a+"/webapp/golf/#golf.order.sback?ordID="+o,e=a+"/webapp/golf/#golf.order.sback?ordID="+o),c="0"===j?"https://secure.fws.qa.nt.ctripcorp.com":"1"===j?"https://10.8.5.10":"https://secure.ctrip.com";var q={oid:o,bustype:m.busType,needInvoice:m.needInvoice,sback:d,thirdback:e,auth:n.auth,title:m.orderName,amount:m.amount,recall:m.recall,currency:m.currency,displayCurrency:m.displayCurrency,displayAmount:m.displayAmount,extno:m.externalNo,invoiceDeliveryFee:m.invoiceDeliveryFee,includeInTotalPrice:m.includeInTotalPrice},r={useEType:m.useEType,subPayType:m.subPayType,IsNeedPreAuth:m.isNeedPreAuth,payTypeList:m.payTypeList,IsNeedCardRisk:m.isNeedCardRisk};q=encodeURIComponent(g.Base64.encode(JSON.stringify(q))),r=encodeURIComponent(g.Base64.encode(JSON.stringify(r))),f=["oid=",o,"&bustype=",m.busType,"&token=",q,"&extend=",r].join(""),i?k.cross({path:"payment",param:"index.html#index?"+f}):window.location.href=c+"/webapp/payment/index.html#?"+f},onShow:function(){},onHide:function(){}});return o});